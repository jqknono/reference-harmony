{
  "id": "ssh",
  "name": "SSH",
  "title": "This quick reference cheat sheet provides various for using SSH.",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/ssh.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Also see",
      "startIndex": 60
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "kind": "text",
      "body": "This quick reference cheat sheet provides various for using SSH."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "Connect to a server (default port 22)"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "```shell script\n$ ssh root@192.168.1.5"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "code",
      "lang": "",
      "code": "\nConnect on a specific port\n\n```shell script\n$ ssh root@192.168.1.5 -p 6222"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "Connect via pem file (0400 permissions)"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "```shell script\n$ ssh -i /path/file.pem root@192.168.1.5"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "code",
      "lang": "",
      "code": "\nSee: [SSH Permissions](/chmod#ssh-permissions)\n\n### Executing\n\nExecutes remote command\n\n```shell script\n$ ssh root@192.168.1.5 'ls -l'"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "Invoke a local script"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "text",
      "body": "```shell script\n$ ssh root@192.168.1.5 bash < script.sh"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "Connecting",
      "kind": "code",
      "lang": "",
      "code": "\nCompresses and downloads from a server\n\n```shell script {.wrap}\n$ ssh root@192.168.1.5 \"tar cvzf - ~/source\" > output.tgz"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "Copies from remote to local"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "```shell script\n$ scp user@server:/dir/file.ext dest/"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "code",
      "lang": "",
      "code": "\nCopies between two servers\n\n```shell script\n$ scp user@server:/file user@server:/dir"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "Copies from local to remote"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "```shell script\n$ scp dest/file.ext user@server:/dir"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "code",
      "lang": "",
      "code": "\nCopies a whole folder\n\n```shell script\n$ scp -r user@server:/dir dest/"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "Copies all files from a folder"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "```shell script\n$ scp user@server:/dir/* dest/"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "code",
      "lang": "",
      "code": "\nCopies from a server folder to the current folder\n\n```shell script\n$ scp user@server:/dir/* ."
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`/etc/ssh/ssh_config`",
      "back": "System-wide config"
    },
    {
      "id": "s1-20",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`~/.ssh/config`",
      "back": "User-specific config"
    },
    {
      "id": "s1-21",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`~/.ssh/id_{type}`",
      "back": "Private key"
    },
    {
      "id": "s1-22",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`~/.ssh/id_{type}.pub`",
      "back": "Public key"
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`~/.ssh/known_hosts`",
      "back": "Known Servers"
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "Config location",
      "kind": "qa",
      "front": "`~/.ssh/authorized_keys`",
      "back": "Authorized login key"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-r`",
      "back": "<yel>R</yel>ecursively copy entire directories"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-C`",
      "back": "<yel>C</yel>ompresses data"
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-v`",
      "back": "Prints <yel>v</yel>erbose info"
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-P` 8080",
      "back": "Uses a specific <yel>P</yel>ort"
    },
    {
      "id": "s1-29",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-B`",
      "back": "<yel>B</yel>atch mode _(Prevents password)_"
    },
    {
      "id": "s1-30",
      "sectionId": "s1",
      "title": "SCP Options",
      "kind": "qa",
      "front": "scp `-p`",
      "back": "<yel>P</yel>reserves times and modes"
    },
    {
      "id": "s1-31",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "code",
      "lang": "toml",
      "code": "Host server1\n    HostName 192.168.1.5\n    User root\n    Port 22\n    IdentityFile ~/.ssh/server1.key"
    },
    {
      "id": "s1-32",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "text",
      "body": "Launch by alias"
    },
    {
      "id": "s1-33",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "text",
      "body": "```shell script\n$ ssh server1"
    },
    {
      "id": "s1-34",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "code",
      "lang": "",
      "code": "\nSee: Full [Config Options](https://linux.die.net/man/5/ssh_config)\n\n### ProxyJump\n\n```shell script\n$ ssh -J proxy_host1 remote_host2"
    },
    {
      "id": "s1-35",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "text",
      "body": "```shell script {.wrap}\n$ ssh -J user@proxy_host1 user@remote_host2"
    },
    {
      "id": "s1-36",
      "sectionId": "s1",
      "title": "Config sample",
      "kind": "code",
      "lang": "",
      "code": "\nMultiple jumps\n\n```shell script {.wrap}\n$ ssh -J user@proxy_host1:port1,user@proxy_host2:port2 user@remote_host3"
    },
    {
      "id": "s1-37",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "text",
      "body": "```shell script {.wrap}\n$ ssh-copy-id user@server"
    },
    {
      "id": "s1-38",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "code",
      "lang": "",
      "code": "\nCopy to alias server\n\n```shell script {.wrap}\n$ ssh-copy-id server1"
    },
    {
      "id": "s1-39",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "text",
      "body": "Copy specific key"
    },
    {
      "id": "s1-40",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "text",
      "body": "```shell script {.wrap}\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@server"
    },
    {
      "id": "s1-41",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "code",
      "lang": "",
      "code": "\n## SSH keygen {.cols-5}\n\n### ssh-keygen {.col-span-2}\n\n```shell script\n$ ssh-keygen -t rsa -b 4096 -C \"your@mail.com\""
    },
    {
      "id": "s1-42",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s1-43",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "text",
      "body": "Generate an RSA 4096 bit key with email as a comment"
    },
    {
      "id": "s1-44",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "Generate a key interactively"
    },
    {
      "id": "s1-45",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "```shell script\n$ ssh-keygen"
    },
    {
      "id": "s1-46",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "code",
      "lang": "",
      "code": "\nSpecify filename\n\n```shell script\n$ ssh-keygen -f ~/.ssh/filename"
    },
    {
      "id": "s1-47",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "Generate public key from private key"
    },
    {
      "id": "s1-48",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "```shell script\n$ ssh-keygen -y -f private.key > public.pub"
    },
    {
      "id": "s1-49",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "code",
      "lang": "",
      "code": "\nChange comment\n\n```shell script\n$ ssh-keygen -c -f ~/.ssh/id_rsa"
    },
    {
      "id": "s1-50",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "Change private key passphrase"
    },
    {
      "id": "s1-51",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "```shell script\n$ ssh-keygen -p -f ~/.ssh/id_rsa"
    },
    {
      "id": "s1-52",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "code",
      "lang": "",
      "code": "\n### Key type\n\n- rsa\n- ed25519\n- dsa\n- ecdsa\n\n### known_hosts {.col-span-2}\n\nSearch from known_hosts\n\n```shell script\n$ ssh-keygen -F <ip/hostname>"
    },
    {
      "id": "s1-53",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "Remove from known_hosts"
    },
    {
      "id": "s1-54",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "text",
      "body": "```shell script\n$ ssh-keygen -R <ip/hostname>"
    },
    {
      "id": "s1-55",
      "sectionId": "s1",
      "title": "Generate",
      "kind": "code",
      "lang": "",
      "code": "\n### Key format\n\n- PEM\n- PKCS8\n\n## SSH Tunneling\n\n### SSH Tunnel Options {.row-span-2}\n\n| Option | Description                                            |\n| ------ | :----------------------------------------------------- |\n| `-L`   | Local port forwarding                                  |\n| `-R`   | Remote port forwarding                                 |\n| `-D`   | Dynamic port forwarding                                |\n| `-f`   | Run in background                                      |\n| `-N`   | Do not execute a remote command                        |\n| `-g`   | Allow remote hosts to connect to local forwarded ports |\n\n{.left-text}\n\nmore details on flag above with `man ssh`\n\n### Local Port Forwarding {.col-span-2}\n\n```bash\n# Forward a local port to a remote server\nssh -L local_port:remote_host:remote_port user@ssh_server\n\n# Example: Forward local port 8080 to remote port 80 on example.com\nssh -L 8080:example.com:80 user@ssh_server"
    },
    {
      "id": "s1-56",
      "sectionId": "s1",
      "title": "Dynamic Port Forwarding",
      "kind": "code",
      "lang": "bash",
      "code": "# Create a SOCKS proxy on a local port\nssh -D local_port user@ssh_server\n\n# Create a SOCKS proxy on local port 1080 in the background\nssh -f -N -D 1080 user@ssh_server"
    },
    {
      "id": "s1-57",
      "sectionId": "s1",
      "title": "Background Tunnel",
      "kind": "code",
      "lang": "bash",
      "code": "# Create a local port forwarding tunnel in the background\nssh -f -N -L local_port:remote_host:remote_port user@ssh_server"
    },
    {
      "id": "s1-58",
      "sectionId": "s1",
      "title": "Multiple Tunnels",
      "kind": "code",
      "lang": "bash",
      "code": "# Create multiple tunnels in a single SSH command\nssh -L 8080:example.com:80 -L 3306:db.example.com:3306 user@ssh_server"
    },
    {
      "id": "s1-59",
      "sectionId": "s1",
      "title": "Combining Options",
      "kind": "code",
      "lang": "bash",
      "code": "# In background, no command, allow remote host, local port forward, identity_file\nssh -f -N -g -L 8080:example.com:80 -i ~/.ssh/custom_key user@ssh_server"
    },
    {
      "id": "s2-60",
      "sectionId": "s2",
      "title": "Also see",
      "kind": "text",
      "body": "• [OpenSSH Config File Examples](https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/) _(cyberciti.biz)_\n• [ssh_config](https://linux.die.net/man/5/ssh_config) _(linux.die.net)_\n• [man-ssh](https://man7.org/linux/man-pages/man1/ssh.1.html)"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/ssh.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/ssh.md",
    "lang": "en",
    "mode": "local"
  }
}