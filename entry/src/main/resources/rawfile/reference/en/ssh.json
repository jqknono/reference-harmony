{
  "id": "ssh",
  "name": "SSH",
  "title": "This quick reference cheat sheet provides various for using SSH.",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "SSH keygen",
      "startIndex": 40
    },
    {
      "id": "s3",
      "title": "SSH Tunneling",
      "startIndex": 59
    },
    {
      "id": "s4",
      "title": "Also see",
      "startIndex": 66
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "body": "This quick reference cheat sheet provides various for using SSH."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Connecting",
      "body": "Connect to a server (default port 22)\n\n```shell script\n$ ssh root@192.168.1.5\n```\n\nConnect on a specific port\n\n```shell script\n$ ssh root@192.168.1.5 -p 6222\n```\n\nConnect via pem file (0400 permissions)\n\n```shell script\n$ ssh -i /path/file.pem root@192.168.1.5\n```\n\nSee: [SSH Permissions](/chmod#ssh-permissions)"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "Executing",
      "body": "Executes%20remote%20command%0A%0A%60%60%60shell%20script%0A%24%20ssh%20root%40192.168.1.5%20'ls%20-l'%0A%60%60%60%0A%0AInvoke%20a%20local%20script%0A%0A%60%60%60shell%20script%0A%24%20ssh%20root%40192.168.1.5%20bash%20%3C%20script.sh%0A%60%60%60%0A%0ACompresses%20and%20downloads%20from%20a%20server%0A%0A%60%60%60shell%20script%20%7B.wrap%7D%0A%24%20ssh%20root%40192.168.1.5%20%22tar%20cvzf%20-%20~%2Fsource%22%20%3E%20output.tgz%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "SCP",
      "body": "Copies from remote to local\n\n```shell script\n$ scp user@server:/dir/file.ext dest/\n```\n\nCopies between two servers\n\n```shell script\n$ scp user@server:/file user@server:/dir\n```\n\nCopies from local to remote\n\n```shell script\n$ scp dest/file.ext user@server:/dir\n```\n\nCopies a whole folder\n\n```shell script\n$ scp -r user@server:/dir dest/\n```\n\nCopies all files from a folder\n\n```shell script\n$ scp user@server:/dir/* dest/\n```\n\nCopies from a server folder to the current folder\n\n```shell script\n$ scp user@server:/dir/* .\n```"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "Config location",
      "body": "| File Path                | Description          |\n| ------------------------ | -------------------- |\n| `/etc/ssh/ssh_config`    | System-wide config   |\n| `~/.ssh/config`          | User-specific config |\n| `~/.ssh/id_{type}`       | Private key          |\n| `~/.ssh/id_{type}.pub`   | Public key           |\n| `~/.ssh/known_hosts`     | Known Servers        |\n| `~/.ssh/authorized_keys` | Authorized login key |"
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "SCP Options",
      "body": "| Options       | Description                                    |\n| ------------- | ---------------------------------------------- |\n| scp `-r`      | Recursively copy entire directories |\n| scp `-C`      | Compresses data                     |\n| scp `-v`      | Prints verbose info                 |\n| scp `-P` 8080 | Uses a specific Port                |\n| scp `-B`      | Batch mode _(Prevents password)_    |\n| scp `-p`      | Preserves times and modes           |"
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "Config sample",
      "body": "```toml\nHost server1\n    HostName 192.168.1.5\n    User root\n    Port 22\n    IdentityFile ~/.ssh/server1.key\n```\n\nLaunch by alias\n\n```shell script\n$ ssh server1\n```\n\nSee: Full [Config Options](https://linux.die.net/man/5/ssh_config)"
    },
    {
      "id": "s1-32",
      "sectionId": "s1",
      "title": "ProxyJump",
      "body": "```shell script\n$ ssh -J proxy_host1 remote_host2\n```\n\n```shell script {.wrap}\n$ ssh -J user@proxy_host1 user@remote_host2\n```\n\nMultiple jumps\n\n```shell script {.wrap}\n$ ssh -J user@proxy_host1:port1,user@proxy_host2:port2 user@remote_host3\n```"
    },
    {
      "id": "s1-35",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "body": "```shell script {.wrap}\n$ ssh-copy-id user@server\n```\n\nCopy to alias server\n\n```shell script {.wrap}\n$ ssh-copy-id server1\n```\n\nCopy specific key\n\n```shell script {.wrap}\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@server\n```"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "ssh-keygen",
      "body": "%60%60%60shell%20script%0A%24%20ssh-keygen%20-t%20rsa%20-b%204096%20-C%20%22your%40mail.com%22%0A%60%60%60%0A%0A%7C%20-%20%20%20%7C%20-%20%20%20%20%7C%20-%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20---%20%7C%20----%20%7C%20-----------------------------%20%7C%0A%7C%20%20%20%20%20%7C%20%60-t%60%20%7C%20%5BType%5D(%23key-type)%20of%20key%20%20%20%20%20%20%7C%0A%7C%20%20%20%20%20%7C%20%60-b%60%20%7C%20The%20number%20of%20bits%20in%20the%20key%20%7C%0A%7C%20%20%20%20%20%7C%20%60-C%60%20%7C%20Provides%20a%20new%20comment%20%20%20%20%20%20%20%20%7C%0A%0AGenerate%20an%20RSA%204096%20bit%20key%20with%20email%20as%20a%20comment%2C%20or%20use%20%5BSSH%20Key%20Generator%5D(https%3A%2F%2Fsshkeygenerator.com%2F)%20online",
      "encoded": true
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "Generate",
      "body": "Generate a key interactively\n\n```shell script\n$ ssh-keygen\n```\n\nSpecify filename\n\n```shell script\n$ ssh-keygen -f ~/.ssh/filename\n```\n\nGenerate public key from private key\n\n```shell script\n$ ssh-keygen -y -f private.key > public.pub\n```\n\nChange comment\n\n```shell script\n$ ssh-keygen -c -f ~/.ssh/id_rsa\n```\n\nChange private key passphrase\n\n```shell script\n$ ssh-keygen -p -f ~/.ssh/id_rsa\n```"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "Key type",
      "body": "• rsa\n• ed25519\n• dsa\n• ecdsa"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "known_hosts",
      "body": "Search from known_hosts\n\n```shell script\n$ ssh-keygen -F <ip/hostname>\n```\n\nRemove from known_hosts\n\n```shell script\n$ ssh-keygen -R <ip/hostname>\n```"
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "Key format",
      "body": "• PEM\n• PKCS8"
    },
    {
      "id": "s3-59",
      "sectionId": "s3",
      "title": "SSH Tunnel Options",
      "body": "| Option | Description                                            |\n| ------ | :----------------------------------------------------- |\n| `-L`   | Local port forwarding                                  |\n| `-R`   | Remote port forwarding                                 |\n| `-D`   | Dynamic port forwarding                                |\n| `-f`   | Run in background                                      |\n| `-N`   | Do not execute a remote command                        |\n| `-g`   | Allow remote hosts to connect to local forwarded ports |\n\nmore details on flag above with `man ssh`"
    },
    {
      "id": "s3-61",
      "sectionId": "s3",
      "title": "Local Port Forwarding",
      "body": "```bash\n# Forward a local port to a remote server\nssh -L local_port:remote_host:remote_port user@ssh_server\n\n# Example: Forward local port 8080 to remote port 80 on example.com\nssh -L 8080:example.com:80 user@ssh_server\n```"
    },
    {
      "id": "s3-62",
      "sectionId": "s3",
      "title": "Dynamic Port Forwarding",
      "body": "```bash\n# Create a SOCKS proxy on a local port\nssh -D local_port user@ssh_server\n\n# Create a SOCKS proxy on local port 1080 in the background\nssh -f -N -D 1080 user@ssh_server\n```"
    },
    {
      "id": "s3-63",
      "sectionId": "s3",
      "title": "Background Tunnel",
      "body": "```bash\n# Create a local port forwarding tunnel in the background\nssh -f -N -L local_port:remote_host:remote_port user@ssh_server\n```"
    },
    {
      "id": "s3-64",
      "sectionId": "s3",
      "title": "Multiple Tunnels",
      "body": "```bash\n# Create multiple tunnels in a single SSH command\nssh -L 8080:example.com:80 -L 3306:db.example.com:3306 user@ssh_server\n```"
    },
    {
      "id": "s3-65",
      "sectionId": "s3",
      "title": "Combining Options",
      "body": "```bash\n# In background, no command, allow remote host, local port forward, identity_file\nssh -f -N -g -L 8080:example.com:80 -i ~/.ssh/custom_key user@ssh_server\n```"
    },
    {
      "id": "s4-66",
      "sectionId": "s4",
      "title": "Also see",
      "body": "• [OpenSSH Config File Examples](https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/) _(cyberciti.biz)_\n• [ssh_config](https://linux.die.net/man/5/ssh_config) _(linux.die.net)_\n• [man-ssh](https://man7.org/linux/man-pages/man1/ssh.1.html)"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/ssh.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/ssh.md",
    "lang": "en",
    "mode": "local"
  }
}