{
  "id": "pm2",
  "name": "PM2",
  "title": "[PM2] is a daemon process manager that will help you manage and keep your application online. Getting started with PM2 is straightforward, it is offered as a simple and intuitive CLI.",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/pm2.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Also see",
      "startIndex": 63
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "kind": "text",
      "body": "[PM2] is a daemon process manager that will help you manage and keep your application online. Getting started with PM2 is straightforward, it is offered as a simple and intuitive CLI."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Install",
      "kind": "text",
      "body": "The latest PM2 version is installable with NPM or Yarn"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ npm install pm2@latest -g"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nOR\n\n```shell script\n$ yarn global add pm2"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Start an app",
      "kind": "text",
      "body": "The simplest way to start, daemonize and monitor your application is by using this command line"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 start app.js"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nOr start any other application easily\n\n```shell script\n$ pm2 start bashscript.sh\n$ pm2 start python-app.py --watch\n$ pm2 start binary-file -- --port 1520"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "Some options you can pass to the CLI",
      "kind": "text",
      "body": "Specify an app name"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n--name <app_name>"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nWatch and Restart app when files change\n\n```shell script\n--watch"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Set memory threshold for app reload"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n--max-memory-restart <200MB>"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nSpecify log file\n\n```shell script\n--log <log_path>"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Pass extra arguments to the script"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n-- arg1 arg2 arg3"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nDelay between automatic restarts\n\n```shell script\n--restart-delay <delay in ms>"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Prefix logs with time"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n--time"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nDo not auto restart app\n\n```shell script\n--no-autorestart"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Specify cron for forced restart"
    },
    {
      "id": "s1-20",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n--cron <cron_pattern>"
    },
    {
      "id": "s1-21",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nAttach to application log\n\n```shell script\n--no-daemon"
    },
    {
      "id": "s1-22",
      "sectionId": "s1",
      "title": "Managing processes",
      "kind": "text",
      "body": "Managing application state is simple here are the commands"
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 restart app_name\n$ pm2 reload app_name\n$ pm2 stop app_name\n$ pm2 delete app_name"
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n#### Instead of app_name you can pass\n\n- `all` to act on all processes\n- `id` to act on a specific process id\n\n### Check status, logs, metrics {.row-span-2}\n\nNow that you have started this application, you can check its status, logs, metrics and even get the online dashboard\nwith [pm2.io](https://pm2.io/).\n\nList the status of all application managed by PM2\n\n```shell script\n$ pm2 [list|ls|status]"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "To display logs in realtime"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 logs"
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nTo dig in older logs\n\n```shell script\n$ pm2 logs --lines 200"
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Here is a realtime dashboard that fits directly into your terminal"
    },
    {
      "id": "s1-29",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 monit"
    },
    {
      "id": "s1-30",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nWeb based dashboard, cross servers with diagnostic system\n\n```shell script\n$ pm2 plus"
    },
    {
      "id": "s1-31",
      "sectionId": "s1",
      "title": "Cluster mode",
      "kind": "text",
      "body": "For Node.js applications, PM2 includes an automatic load balancer that will share all HTTP[s]/Websocket/TCP/UDP\nconnections between each spawned processes."
    },
    {
      "id": "s1-32",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "To start an application in Cluster mode"
    },
    {
      "id": "s1-33",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 start app.js -i max"
    },
    {
      "id": "s1-34",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nRead more about cluster mode [here](https://pm2.keymetrics.io/docs/usage/quick-start/).\n\n### Ecosystem File {.row-span-2}\n\nYou can also create a configuration file, called Ecosystem File, to manage multiple applications. To generate an\nEcosystem file\n\n```shell script\n$ pm2 ecosystem"
    },
    {
      "id": "s1-35",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "This will generate an ecosystem.config.js file"
    },
    {
      "id": "s1-36",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "module.exports%20%3D%20%7B%0A%20%20apps%20%3A%20%5B%7B%0A%20%20%20%20name%3A%20%22app%22%2C%0A%20%20%20%20script%3A%20%22.%2Fapp.js%22%2C%0A%20%20%20%20env%3A%20%7B%0A%20%20%20%20%20%20NODE_ENV%3A%20%22development%22%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20env_production%3A%20%7B%0A%20%20%20%20%20%20NODE_ENV%3A%20%22production%22%2C%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20%20name%3A%20'worker'%2C%0A%20%20%20%20%20script%3A%20'worker.js'%0A%20%20%7D%5D%0A%7D",
      "encoded": true
    },
    {
      "id": "s1-37",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "And start it easily"
    },
    {
      "id": "s1-38",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 start ecosystem.config.js"
    },
    {
      "id": "s1-39",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nRead more about application declaration [here](https://pm2.keymetrics.io/docs/usage/application-declaration/)\n\n### Setup startup script\n\nRestarting PM2 with the processes you manage on server boot/reboot is critical. To solve this, just run this command to\ngenerate an active startup script\n\n```shell script\n$ pm2 save"
    },
    {
      "id": "s1-40",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Read more about startup script generator [here](https://pm2.keymetrics.io/docs/usage/startup/)"
    },
    {
      "id": "s1-41",
      "sectionId": "s1",
      "title": "Restart application on changes",
      "kind": "text",
      "body": "It’s pretty easy with the `--watch` option"
    },
    {
      "id": "s1-42",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%24%20cd%20%2Fpath%2Fto%2Fmy%2Fapp%0A%24%20pm2%20start%20env.js%20--watch%20--ignore-watch%3D%22node_modules%22",
      "encoded": true
    },
    {
      "id": "s1-43",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "This%20will%20watch%20%26%20restart%20the%20app%20on%20any%20file%20change%20from%20the%20current%20directory%20%2B%20all%20subfolders%20and%20it%20will%20ignore%20any%0Achanges%20in%20the%20node_modules%20folder%20%60--ignore-watch%3D%22node_modules%22%60.",
      "encoded": true
    },
    {
      "id": "s1-44",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "You can then use `pm2 logs` to check for restarted app logs."
    },
    {
      "id": "s1-45",
      "sectionId": "s1",
      "title": "CheatSheet",
      "kind": "text",
      "body": "Here are some commands that are worth knowing. Just try them with a sample application or with your current web\napplication on your development machine"
    },
    {
      "id": "s1-46",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Fork mode"
    },
    {
      "id": "s1-47",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 start app.js --name my-api # Name process"
    },
    {
      "id": "s1-48",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nCluster mode\n\n```shell script\n$ pm2 start app.js -i 0        # Will start maximum processes with LB depending on available CPUs\n$ pm2 start app.js -i max      # Same as above, but deprecated.\n$ pm2 scale app +3             # Scales `app` up by 3 workers\n$ pm2 scale app 2              # Scales `app` up or down to 2 workers total"
    },
    {
      "id": "s1-49",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Listing"
    },
    {
      "id": "s1-50",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 list               # Display all processes status\n$ pm2 jlist              # Print process list in raw JSON\n$ pm2 prettylist         # Print process list in beautified JSON"
    },
    {
      "id": "s1-51",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "$ pm2 describe 0         # Display all information about a specific process"
    },
    {
      "id": "s1-52",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "$ pm2 monit              # Monitor all processes"
    },
    {
      "id": "s1-53",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nLogs\n\n```shell script\n$ pm2 logs [--raw]       # Display all processes logs in streaming\n$ pm2 flush              # Empty all log files\n$ pm2 reloadLogs         # Reload all logs"
    },
    {
      "id": "s1-54",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Actions"
    },
    {
      "id": "s1-55",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ pm2 stop all           # Stop all processes\n$ pm2 restart all        # Restart all processes"
    },
    {
      "id": "s1-56",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "$ pm2 reload all         # Will 0s downtime reload (for NETWORKED apps)"
    },
    {
      "id": "s1-57",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "$ pm2 stop 0             # Stop specific process id\n$ pm2 restart 0          # Restart specific process id"
    },
    {
      "id": "s1-58",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "$ pm2 delete 0           # Will remove process from pm2 list\n$ pm2 delete all         # Will remove all processes from pm2 list"
    },
    {
      "id": "s1-59",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nMisc\n\n```shell script\n$ pm2 reset <process>    # Reset meta data (restarted time...)\n$ pm2 updatePM2          # Update in memory pm2\n$ pm2 ping               # Ensure pm2 daemon has been launched\n$ pm2 sendSignal SIGUSR2 my-app # Send system signal to script\n$ pm2 start app.js --no-daemon\n$ pm2 start app.js --no-vizion\n$ pm2 start app.js --no-autorestart"
    },
    {
      "id": "s1-60",
      "sectionId": "s1",
      "title": "Updating PM2",
      "kind": "text",
      "body": "We made it simple, there is no breaking change between releases and the procedure is straightforward"
    },
    {
      "id": "s1-61",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ npm install pm2@latest -g"
    },
    {
      "id": "s1-62",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nThen update the in-memory PM2\n\n```shell script\n$ pm2 update"
    },
    {
      "id": "s2-63",
      "sectionId": "s2",
      "title": "Also see",
      "kind": "text",
      "body": "• [QUICK START](https://pm2.keymetrics.io/docs/usage/quick-start/) _(pm2.keymetrics.io)_"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/pm2.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/pm2.md",
    "lang": "en",
    "mode": "local"
  }
}