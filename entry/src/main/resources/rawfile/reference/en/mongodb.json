{
  "id": "mongodb",
  "name": "MongoDB",
  "title": "MongoDB",
  "icon": "reference/icons/en/mongodb.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 0
    },
    {
      "id": "s2",
      "title": "Crud",
      "startIndex": 9
    },
    {
      "id": "s3",
      "title": "Databases and Collections",
      "startIndex": 30
    },
    {
      "id": "s4",
      "title": "Indexes",
      "startIndex": 33
    },
    {
      "id": "s5",
      "title": "Others",
      "startIndex": 37
    }
  ],
  "cards": [
    {
      "id": "s1-0",
      "sectionId": "s1",
      "title": "Connect%20MongoDB%20Shell",
      "body": "%60%60%60mongosh%0Amongo%20%23%20connects%20to%20mongodb%3A%2F%2F127.0.0.1%3A27017%20by%20default%0A%60%60%60%0A%0A%60%60%60mongosh%0Amongo%20--host%20%3Chost%3E%20--port%20%3Cport%3E%20-u%20%3Cuser%3E%20-p%20%3Cpwd%3E%20%23%20omit%20the%20password%20if%20you%20want%20a%20prompt%0A%60%60%60%0A%0A%60%60%60mongosh%0Amongo%20%22mongodb%3A%2F%2F192.168.1.1%3A27017%22%0A%60%60%60%0A%0A%60%60%60mongosh%0Amongo%20%22mongodb%2Bsrv%3A%2F%2Fcluster-name.abcde.mongodb.net%2F%3Cdbname%3E%22%20--username%20%3Cusername%3E%20%23%20MongoDB%20Atlas%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Helpers",
      "body": "Show%20dbs%20%3A%0A%0A%60%60%60mongosh%0Adb%20%2F%2F%20prints%20the%20current%20database%0A%60%60%60%0A%0ASwitch%20database%20%3A%0A%0A%60%60%60mongosh%0Ause%20%3Cdatabase_name%3E%0A%60%60%60%0A%0AShow%20collections%20%3A%0A%0A%60%60%60mongosh%0Ashow%20collections%0A%60%60%60%0A%0ARun%20JavaScript%20file%20%3A%0A%0A%60%60%60mongosh%0Aload(%22myScript.js%22)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-9",
      "sectionId": "s2",
      "title": "Create",
      "body": "%60%60%60mongosh%0Adb.coll.insertOne(%7Bname%3A%20%22Max%22%7D)%0Adb.coll.insertMany(%5B%7Bname%3A%20%22Max%22%7D%2C%20%7Bname%3A%22Alex%22%7D%5D)%20%2F%2F%20ordered%20bulk%20insert%0Adb.coll.insertMany(%5B%7Bname%3A%20%22Max%22%7D%2C%20%7Bname%3A%22Alex%22%7D%5D%2C%20%7Bordered%3A%20false%7D)%20%2F%2F%20unordered%20bulk%20insert%0Adb.coll.insertOne(%7Bdate%3A%20ISODate()%7D)%0Adb.coll.insertMany(%7Bname%3A%20%22Max%22%7D%2C%20%7B%22writeConcern%22%3A%20%7B%22w%22%3A%20%22majority%22%2C%20%22wtimeout%22%3A%205000%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "Delete",
      "body": "%60%60%60mongosh%0Adb.coll.deleteOne(%7Bname%3A%20%22Max%22%7D)%0Adb.coll.deleteMany(%20%24and%3A%20%5B%7Bname%3A%20%22Max%22%7D%2C%20%7BjustOne%3A%20true%7D%5D)%20%2F%2Fdelete%20all%20entries%20which%20contain%20both%20values%0Adb.coll.deleteMany(%20%24or%3A%20%5B%7Bname%3A%20%22Max%22%7D%2C%20%7BjustOne%3A%20true%7D%5D)%20%20%2F%2Fdelete%20all%20entries%20which%20contain%20any%20of%20the%20specified%20values%0Adb.coll.deleteMany(%7B%7D)%20%2F%2F%20WARNING!%20Deletes%20all%20the%20docs%20but%20not%20the%20collection%20itself%20and%20its%20index%20definitions%0Adb.coll.deleteMany(%7Bname%3A%20%22Max%22%7D%2C%20%7B%22writeConcern%22%3A%20%7B%22w%22%3A%20%22majority%22%2C%20%22wtimeout%22%3A%205000%7D%7D)%0Adb.coll.findOneAndDelete(%7B%22name%22%3A%20%22Max%22%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "Update",
      "body": "%60%60%60mongosh%0Adb.coll.updateMany(%7B%22_id%22%3A%201%7D%2C%20%7B%24set%3A%20%7B%22year%22%3A%202016%7D%7D)%20%2F%2F%20WARNING!%20Replaces%20the%20entire%20document%20where%20%22_id%22%20%3D%201%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24set%3A%20%7B%22year%22%3A%202016%2C%20name%3A%20%22Max%22%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24unset%3A%20%7B%22year%22%3A%201%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24rename%3A%20%7B%22year%22%3A%20%22date%22%7D%20%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24inc%3A%20%7B%22year%22%3A%205%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24mul%3A%20%7Bprice%3A%202%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24min%3A%20%7B%22imdb%22%3A%205%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24max%3A%20%7B%22imdb%22%3A%208%7D%7D)%0Adb.coll.updateMany(%7B%22_id%22%3A%20%7B%24lt%3A%2010%7D%7D%2C%20%7B%24set%3A%20%7B%22lastModified%22%3A%20ISODate()%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "Array",
      "body": "%60%60%60mongosh%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24push%20%3A%7B%22array%22%3A%201%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24pull%20%3A%7B%22array%22%3A%201%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24addToSet%20%3A%7B%22array%22%3A%202%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24pop%3A%20%7B%22array%22%3A%201%7D%7D)%20%20%2F%2F%20last%20element%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24pop%3A%20%7B%22array%22%3A%20-1%7D%7D)%20%2F%2F%20first%20element%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24pullAll%3A%20%7B%22array%22%20%3A%5B3%2C%204%2C%205%5D%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24push%3A%20%7Bscores%3A%20%7B%24each%3A%20%5B90%2C%2092%2C%2085%5D%7D%7D%7D)%0Adb.coll.updateOne(%7B%22_id%22%3A%201%2C%20%22grades%22%3A%2080%7D%2C%20%7B%24set%3A%20%7B%22grades.%24%22%3A%2082%7D%7D)%0Adb.coll.updateMany(%7B%7D%2C%20%7B%24inc%3A%20%7B%22grades.%24%5B%5D%22%3A%2010%7D%7D)%0Adb.coll.updateMany(%7B%7D%2C%20%7B%24set%3A%20%7B%22grades.%24%5Belement%5D%22%3A%20100%7D%7D%2C%20%7BarrayFilters%3A%20%5B%7B%22element%22%3A%20%7B%24gte%3A%20100%7D%7D%5D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "Update%20many",
      "body": "%60%60%60mongosh%0Adb.coll.updateMany(%7B%22year%22%3A%201999%7D%2C%20%7B%24set%3A%20%7B%22decade%22%3A%20%2290's%22%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "FindOneAndUpdate",
      "body": "%60%60%60mongosh%0Adb.coll.findOneAndUpdate(%7B%22name%22%3A%20%22Max%22%7D%2C%20%7B%24inc%3A%20%7B%22points%22%3A%205%7D%7D%2C%20%7BreturnNewDocument%3A%20true%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "Upsert",
      "body": "%60%60%60mongosh%0Adb.coll.updateOne(%7B%22_id%22%3A%201%7D%2C%20%7B%24set%3A%20%7Bitem%3A%20%22apple%22%7D%2C%20%24setOnInsert%3A%20%7BdefaultQty%3A%20100%7D%7D%2C%20%7Bupsert%3A%20true%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "Replace",
      "body": "%60%60%60mongosh%0Adb.coll.replaceOne(%7B%22name%22%3A%20%22Max%22%7D%2C%20%7B%22firstname%22%3A%20%22Maxime%22%2C%20%22surname%22%3A%20%22Beugnet%22%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "Write%20concern",
      "body": "%60%60%60mongosh%0Adb.coll.updateMany(%7B%7D%2C%20%7B%24set%3A%20%7B%22x%22%3A%201%7D%7D%2C%20%7B%22writeConcern%22%3A%20%7B%22w%22%3A%20%22majority%22%2C%20%22wtimeout%22%3A%205000%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "Find",
      "body": "%60%60%60mongosh%0Adb.coll.findOne()%20%2F%2F%20returns%20a%20single%20document%0Adb.coll.find()%20%20%20%20%2F%2F%20returns%20a%20cursor%20-%20show%2020%20results%20-%20%22it%22%20to%20display%20more%0Adb.coll.find().pretty()%0Adb.coll.find(%7Bname%3A%20%22Max%22%2C%20age%3A%2032%7D)%20%2F%2F%20implicit%20logical%20%22AND%22.%0Adb.coll.find(%7Bdate%3A%20ISODate(%222020-09-25T13%3A57%3A17.180Z%22)%7D)%0Adb.coll.find(%7Bname%3A%20%22Max%22%2C%20age%3A%2032%7D).explain(%22executionStats%22)%20%2F%2F%20or%20%22queryPlanner%22%20or%20%22allPlansExecution%22%0Adb.coll.distinct(%22name%22)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "Count",
      "body": "```mongosh\ndb.coll.estimatedDocumentCount()  // estimation based on collection metadata\ndb.coll.countDocuments({age: 32}) // alias for an aggregation pipeline - accurate count\n```"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "Comparison",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7B%22year%22%3A%20%7B%24gt%3A%201970%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24gte%3A%201970%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24lt%3A%201970%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24lte%3A%201970%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24ne%3A%201970%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24in%3A%20%5B1958%2C%201959%5D%7D%7D)%0Adb.coll.find(%7B%22year%22%3A%20%7B%24nin%3A%20%5B1958%2C%201959%5D%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "Logical",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7Bname%3A%7B%24not%3A%20%7B%24eq%3A%20%22Max%22%7D%7D%7D)%0Adb.coll.find(%7B%24or%3A%20%5B%7B%22year%22%20%3A%201958%7D%2C%20%7B%22year%22%20%3A%201959%7D%5D%7D)%0Adb.coll.find(%7B%24nor%3A%20%5B%7Bprice%3A%201.99%7D%2C%20%7Bsale%3A%20true%7D%5D%7D)%0Adb.coll.find(%7B%0A%24and%3A%20%5B%0A%20%20%20%20%7B%24or%3A%20%5B%7Bqty%3A%20%7B%24lt%20%3A10%7D%7D%2C%20%7Bqty%20%3A%7B%24gt%3A%2050%7D%7D%5D%7D%2C%0A%7B%24or%3A%20%5B%7Bsale%3A%20true%7D%2C%20%7Bprice%3A%20%7B%24lt%3A%205%20%7D%7D%5D%7D%0A%5D%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "Element",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7Bname%3A%20%7B%24exists%3A%20true%7D%7D)%0Adb.coll.find(%7B%22zipCode%22%3A%20%7B%24type%3A%202%20%7D%7D)%0Adb.coll.find(%7B%22zipCode%22%3A%20%7B%24type%3A%20%22string%22%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "Aggregation%20Pipeline",
      "body": "%60%60%60mongosh%0Adb.coll.aggregate(%5B%0A%7B%24match%3A%20%7Bstatus%3A%20%22A%22%7D%7D%2C%0A%7B%24group%3A%20%7B_id%3A%20%22%24cust_id%22%2C%20total%3A%20%7B%24sum%3A%20%22%24amount%22%7D%7D%7D%2C%0A%7B%24sort%3A%20%7Btotal%3A%20-1%7D%7D%0A%5D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "Text%20search%20with%20a%20%22text%22%20index",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7B%24text%3A%20%7B%24search%3A%20%22cake%22%7D%7D%2C%20%7Bscore%3A%20%7B%24meta%3A%20%22textScore%22%7D%7D).sort(%7Bscore%3A%20%7B%24meta%3A%20%22textScore%22%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "Regex",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7Bname%3A%20%2F%5EMax%2F%7D)%20%2F%2F%20regex%3A%20starts%20by%20letter%20%22M%22%0Adb.coll.find(%7Bname%3A%20%2F%5EMax%24%2Fi%7D)%20%2F%2F%20regex%20case%20insensitive%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "Array",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7Btags%3A%20%7B%24all%3A%20%5B%22Realm%22%2C%20%22Charts%22%5D%7D%7D)%0Adb.coll.find(%7Bfield%3A%20%7B%24size%3A%202%7D%7D)%20%2F%2F%20impossible%20to%20index%20-%20prefer%20storing%20the%20size%20of%20the%20array%20%26%20update%20it%0Adb.coll.find(%7Bresults%3A%20%7B%24elemMatch%3A%20%7Bproduct%3A%20%22xyz%22%2C%20score%3A%20%7B%24gte%3A%208%7D%7D%7D%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "Projections",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7B%22x%22%3A%201%7D%2C%20%7B%22actors%22%3A%201%7D)%20%2F%2F%20actors%20%2B%20%5C_id%0Adb.coll.find(%7B%22x%22%3A%201%7D%2C%20%7B%22actors%22%3A%201%2C%20%22%5C_id%22%3A%200%7D)%20%2F%2F%20actors%0Adb.coll.find(%7B%22x%22%3A%201%7D%2C%20%7B%22actors%22%3A%200%2C%20%22summary%22%3A%200%7D)%20%2F%2F%20all%20but%20%22actors%22%20and%20%22summary%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "Sort%2C%20skip%2C%20limit",
      "body": "%60%60%60mongosh%0Adb.coll.find(%7B%7D).sort(%7B%22year%22%3A%201%2C%20%22rating%22%3A%20-1%7D).skip(10).limit(3)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "Read%20Concern",
      "body": "%60%60%60mongosh%0Adb.coll.find().readConcern(%22majority%22)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s3-30",
      "sectionId": "s3",
      "title": "Drop",
      "body": "```mongosh\ndb.coll.drop()    // removes the collection and its index definitions\ndb.dropDatabase() // double check that you are *NOT* on the PROD cluster... :-)\n```"
    },
    {
      "id": "s3-31",
      "sectionId": "s3",
      "title": "Create%20Collection",
      "body": "%60%60%60mongosh%0Adb.createCollection(%22contacts%22%2C%20%7B%0A%20%20%20validator%3A%20%7B%24jsonSchema%3A%20%7B%0A%20%20%20%20%20%20bsonType%3A%20%22object%22%2C%0A%20%20%20%20%20%20required%3A%20%5B%22phone%22%5D%2C%0A%20%20%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%20%20%20phone%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bsonType%3A%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22must%20be%20a%20string%20and%20is%20required%22%0A%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20email%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bsonType%3A%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pattern%3A%20%22%40mongodb%5C.com%24%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22must%20be%20a%20string%20and%20match%20the%20regular%20expression%20pattern%22%0A%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20status%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20enum%3A%20%5B%20%22Unknown%22%2C%20%22Incomplete%22%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22can%20only%20be%20one%20of%20the%20enum%20values%22%0A%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%7D%7D%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s3-32",
      "sectionId": "s3",
      "title": "Other%20Collection%20Functions",
      "body": "%60%60%60mongosh%0Adb.coll.stats()%0Adb.coll.storageSize()%0Adb.coll.totalIndexSize()%0Adb.coll.totalSize()%0Adb.coll.validate(%7Bfull%3A%20true%7D)%0Adb.coll.renameCollection(%22new_coll%22%2C%20true)%20%2F%2F%202nd%20parameter%20to%20drop%20the%20target%20collection%20if%20exists%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-33",
      "sectionId": "s4",
      "title": "Basics - List",
      "body": "```mongosh\ndb.coll.getIndexes()\ndb.coll.getIndexKeys()\n```"
    },
    {
      "id": "s4-34",
      "sectionId": "s4",
      "title": "Drop%20Indexes",
      "body": "%60%60%60mongosh%0Adb.coll.dropIndex(%22name_1%22)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-35",
      "sectionId": "s4",
      "title": "Hide%2FUnhide%20Indexes",
      "body": "%60%60%60mongosh%0Adb.coll.hideIndex(%22name_1%22)%0Adb.coll.unhideIndex(%22name_1%22)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-36",
      "sectionId": "s4",
      "title": "Create%20Indexes",
      "body": "%60%60%60mongosh%0A%2F%2F%20Index%20Types%0Adb.coll.createIndex(%7B%22name%22%3A%201%7D)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20single%20field%20index%0Adb.coll.createIndex(%7B%22name%22%3A%201%2C%20%22date%22%3A%201%7D)%20%20%20%20%20%2F%2F%20compound%20index%0Adb.coll.createIndex(%7Bfoo%3A%20%22text%22%2C%20bar%3A%20%22text%22%7D)%20%2F%2F%20text%20index%0Adb.coll.createIndex(%7B%22%24**%22%3A%20%22text%22%7D)%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wildcard%20text%20index%0Adb.coll.createIndex(%7B%22userMetadata.%24**%22%3A%201%7D)%20%20%20%20%2F%2F%20wildcard%20index%0Adb.coll.createIndex(%7B%22loc%22%3A%20%222d%22%7D)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%202d%20index%0Adb.coll.createIndex(%7B%22loc%22%3A%20%222dsphere%22%7D)%20%20%20%20%20%20%20%20%2F%2F%202dsphere%20index%0Adb.coll.createIndex(%7B%22_id%22%3A%20%22hashed%22%7D)%20%20%20%20%20%20%20%20%20%20%2F%2F%20hashed%20index%0A%0A%2F%2F%20Index%20Options%0Adb.coll.createIndex(%7B%22lastModifiedDate%22%3A%201%7D%2C%20%7BexpireAfterSeconds%3A%203600%7D)%20%20%20%20%20%20%2F%2F%20TTL%20index%0Adb.coll.createIndex(%7B%22name%22%3A%201%7D%2C%20%7Bunique%3A%20true%7D)%0Adb.coll.createIndex(%7B%22name%22%3A%201%7D%2C%20%7BpartialFilterExpression%3A%20%7Bage%3A%20%7B%24gt%3A%2018%7D%7D%7D)%20%2F%2F%20partial%20index%0Adb.coll.createIndex(%7B%22name%22%3A%201%7D%2C%20%7Bcollation%3A%20%7Blocale%3A%20'en'%2C%20strength%3A%201%7D%7D)%20%20%20%20%2F%2F%20case%20insensitive%20index%20with%20strength%20%3D%201%20or%202%0Adb.coll.createIndex(%7B%22name%22%3A%201%20%7D%2C%20%7Bsparse%3A%20true%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-37",
      "sectionId": "s5",
      "title": "Handy%20commands",
      "body": "%60%60%60mongosh%0Ause%20admin%0Adb.createUser(%7B%22user%22%3A%20%22root%22%2C%20%22pwd%22%3A%20passwordPrompt()%2C%20%22roles%22%3A%20%5B%22root%22%5D%7D)%0Adb.dropUser(%22root%22)%0Adb.auth(%20%22user%22%2C%20passwordPrompt()%20)%0A%0Ause%20test%0Adb.getSiblingDB(%22dbname%22)%0Adb.currentOp()%0Adb.killOp(123)%20%2F%2F%20opid%0A%0Adb.fsyncLock()%0Adb.fsyncUnlock()%0A%0Adb.getCollectionNames()%0Adb.getCollectionInfos()%0Adb.printCollectionStats()%0Adb.stats()%0A%0Adb.getReplicationInfo()%0Adb.printReplicationInfo()%0Adb.isMaster()%0Adb.hostInfo()%0Adb.printShardingStatus()%0Adb.shutdownServer()%0Adb.serverStatus()%0A%0Adb.setSlaveOk()%0Adb.getSlaveOk()%0A%0Adb.getProfilingLevel()%0Adb.getProfilingStatus()%0Adb.setProfilingLevel(1%2C%20200)%20%2F%2F%200%20%3D%3D%20OFF%2C%201%20%3D%3D%20ON%20with%20slowms%2C%202%20%3D%3D%20ON%0A%0Adb.enableFreeMonitoring()%0Adb.disableFreeMonitoring()%0Adb.getFreeMonitoringStatus()%0A%0Adb.createView(%22viewName%22%2C%20%22sourceColl%22%2C%20%5B%7B%24project%3A%7Bdepartment%3A%201%7D%7D%5D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-38",
      "sectionId": "s5",
      "title": "Replica%20Set",
      "body": "%60%60%60mongosh%0Ars.status()%0Ars.initiate(%7B%22_id%22%3A%20%22replicaTest%22%2C%0A%20%20members%3A%20%5B%0A%20%20%20%20%7B%20_id%3A%200%2C%20host%3A%20%22127.0.0.1%3A27017%22%20%7D%2C%0A%20%20%20%20%7B%20_id%3A%201%2C%20host%3A%20%22127.0.0.1%3A27018%22%20%7D%2C%0A%20%20%20%20%7B%20_id%3A%202%2C%20host%3A%20%22127.0.0.1%3A27019%22%2C%20arbiterOnly%3Atrue%20%7D%5D%0A%7D)%0Ars.add(%22mongodbd1.example.net%3A27017%22)%0Ars.addArb(%22mongodbd2.example.net%3A27017%22)%0Ars.remove(%22mongodbd1.example.net%3A27017%22)%0Ars.conf()%0Ars.isMaster()%0Ars.printReplicationInfo()%0Ars.printSlaveReplicationInfo()%0Ars.reconfig(%3Cvalid_conf%3E)%0Ars.slaveOk()%0Ars.stepDown(20%2C%205)%20%2F%2F%20(stepDownSecs%2C%20secondaryCatchUpPeriodSecs)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-39",
      "sectionId": "s5",
      "title": "Sharded%20Cluster",
      "body": "%60%60%60mongosh%0Ash.status()%0Ash.addShard(%22rs1%2Fmongodbd1.example.net%3A27017%22)%0Ash.shardCollection(%22mydb.coll%22%2C%20%7Bzipcode%3A%201%7D)%0A%0Ash.moveChunk(%22mydb.coll%22%2C%20%7B%20zipcode%3A%20%2253187%22%20%7D%2C%20%22shard0019%22)%0Ash.splitAt(%22mydb.coll%22%2C%20%7Bx%3A%2070%7D)%0Ash.splitFind(%22mydb.coll%22%2C%20%7Bx%3A%2070%7D)%0Ash.disableAutoSplit()%0Ash.enableAutoSplit()%0A%0Ash.startBalancer()%0Ash.stopBalancer()%0Ash.disableBalancing(%22mydb.coll%22)%0Ash.enableBalancing(%22mydb.coll%22)%0Ash.getBalancerState()%0Ash.setBalancerState(true%2Ffalse)%0Ash.isBalancerRunning()%0A%0Ash.addTagRange(%22mydb.coll%22%2C%20%7Bstate%3A%20%22NY%22%2C%20zip%3A%20MinKey%20%7D%2C%20%7B%20state%3A%20%22NY%22%2C%20zip%3A%20MaxKey%20%7D%2C%20%22NY%22)%0Ash.removeTagRange(%22mydb.coll%22%2C%20%7Bstate%3A%20%22NY%22%2C%20zip%3A%20MinKey%20%7D%2C%20%7B%20state%3A%20%22NY%22%2C%20zip%3A%20MaxKey%20%7D%2C%20%22NY%22)%0Ash.addShardTag(%22shard0000%22%2C%20%22NYC%22)%0Ash.removeShardTag(%22shard0000%22%2C%20%22NYC%22)%0A%0Ash.addShardToZone(%22shard0000%22%2C%20%22JFK%22)%0Ash.removeShardFromZone(%22shard0000%22%2C%20%22NYC%22)%0Ash.removeRangeFromZone(%22mydb.coll%22%2C%20%7Ba%3A%201%2C%20b%3A%201%7D%2C%20%7Ba%3A%2010%2C%20b%3A%2010%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-40",
      "sectionId": "s5",
      "title": "Change%20Streams",
      "body": "%60%60%60mongosh%0AwatchCursor%20%3D%20db.coll.watch(%20%5B%20%7B%20%24match%20%3A%20%7B%22operationType%22%20%3A%20%22insert%22%20%7D%20%7D%20%5D%20)%0A%0Awhile%20(!watchCursor.isExhausted())%7B%0A%20%20%20if%20(watchCursor.hasNext())%7B%0A%20%20%20%20%20%20print(tojson(watchCursor.next()))%3B%0A%20%20%20%7D%0A%7D%0A%60%60%60",
      "encoded": true
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/mongodb.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/mongodb.md",
    "lang": "en",
    "mode": "local"
  }
}