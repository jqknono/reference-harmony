{
  "id": "taskset",
  "name": "Taskset",
  "title": "Taskset",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/taskset.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 0
    },
    {
      "id": "s2",
      "title": "Example",
      "startIndex": 5
    },
    {
      "id": "s3",
      "title": "Also see",
      "startIndex": 25
    }
  ],
  "cards": [
    {
      "id": "s1-0",
      "sectionId": "s1",
      "title": "Usage",
      "kind": "text",
      "body": "The default behavior is to run a new command with a given affinity mask"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset [mask] [command] [arguments]"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Usage #2",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -p [pid]\n\n$ taskset -p [mask] [pid]"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "You can also retrieve the CPU affinity of an existing task"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Common Options",
      "kind": "text",
      "body": "| Command | Alternavite | Meaning                                                                                                                                                  |\n| ------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `-a`    | --all-tasks | Set or retrieve the CPU affinity of all the task (threads) for a given PID.                                                                              |\n| `-c`    | --cpu-list  | Interpret mask as numerical list of processors instead of a bitmask.</br>Numbers are separated by commas and may include ranges. For example: `0,5,8-11` |\n| `-p`    | --pid       | Operate on an existing PID and do not launch a new task.                                                                                                 |\n| `-h`    | --help      | Display help text and exit.                                                                                                                              |\n| `-v`    | --version   | Print version and exit.                                                                                                                                  |"
    },
    {
      "id": "s2-5",
      "sectionId": "s2",
      "title": "View CPU Affinity",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 29523\npid 29523's current affinity list: 0-15"
    },
    {
      "id": "s2-6",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "That mean process with PID `29523` is active on CPU range from `[0,1,...,15]` which means `16` total."
    },
    {
      "id": "s2-7",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "**PID**: Process Identifier - is a unique numerical identifier given to each running process, you can view PID of\nprocesses in `top` or `htop` tools"
    },
    {
      "id": "s2-8",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "_If you run the above command but get the message `bad usage`, try with PID = 1_"
    },
    {
      "id": "s2-9",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 1"
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "Set CPU Affinity",
      "kind": "text",
      "body": "Now let's try to set process in to a specify CPU. For example, we have a process has PID = 14846"
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Let's see the CPU affinity list of this process first:"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 14846\npid 14846's current affinity list: 0-15"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "Change CPU affinity to 1:",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 1 14846\npid 14846's current affinity list: 0-15\npid 14846's new affinity list: 1"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "As we see, CPU affinity was changed"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "Set CPU Affinity with multiple value",
      "kind": "text",
      "body": "That mean new CPU affinity list is `[0,1,2,3]`"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 0-3 14846\npid 14846's current affinity list: 1\npid 14846's new affinity list: 0-3"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "You can set single CPU with the following command:"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 5,8,12 14846\npid 14846's current affinity list: 0-3\npid 14846's new affinity list: 5,8,12"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "That mean new CPU affinity list is `[5,8,12]`"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "Other",
      "kind": "text",
      "body": "You can set affinity by range with other like a specify CPU"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 1-3,12 14846"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Or"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ taskset -cp 1-6:2 14846"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "The%20suffix%20%22%3AN%22%20specifies%20stride%20in%20the%20range%2C%20for%20example%200-10%3A3%20is%20interpreted%20as%200%2C3%2C6%2C9%20list.",
      "encoded": true
    },
    {
      "id": "s3-25",
      "sectionId": "s3",
      "title": "Also see",
      "kind": "text",
      "body": "[taskset â€” Linux manual page](https://man7.org/linux/man-pages/man1/taskset.1.html) _(man7.org)_"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/taskset.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/taskset.md",
    "lang": "en",
    "mode": "local"
  }
}