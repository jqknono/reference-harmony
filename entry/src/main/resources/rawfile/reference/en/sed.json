{
  "id": "sed",
  "name": "Sed",
  "title": "[Sed](https://www.gnu.org/software/sed/manual/sed.html) is a stream editor, this sed cheat sheet contains sed commands and some common sed tricks.",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/sed.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Sed commands",
      "startIndex": 10
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "kind": "text",
      "body": "[Sed](https://www.gnu.org/software/sed/manual/sed.html) is a stream editor, this sed cheat sheet contains sed commands and some common sed tricks."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "text",
      "body": "Syntax"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed [options] command [input-file]"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nWith pipeline\n\n```shell script\n$ cat report.txt | sed 's/Nick/John/g'"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ echo '123abc' | sed 's/[0-9]+//g'"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0A%23%23%23%20Option%20Examples%20%7B.col-span-2%7D%0A%0A%7C%20Option%20%7C%20Example%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20Description%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20------%20%7C%20------------------------------------------%20%7C%20---------------------------------------%20%7C%0A%7C%20%60-i%60%20%20%20%7C%20sed%20-ibak%20's%2FOn%2FOff%2F'%20php.ini%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20Backup%20and%20modify%20input%20file%20directly%20%20%20%7C%0A%7C%20%60-E%60%20%20%20%7C%20sed%20-E%20's%2F%5B0-9%5D%2B%2F%2Fg'%20input-file%20%20%20%20%20%20%20%20%20%20%20%20%7C%20Use%20extended%20regular%20expressions%20%20%20%20%20%20%20%20%7C%0A%7C%20%60-n%60%20%20%20%7C%20sed%20-n%20'3%20p'%20config.conf%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20Suppress%20default%20pattern%20space%20printing%20%7C%0A%7C%20%60-f%60%20%20%20%7C%20sed%20-f%20script.sed%20config.conf%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20Execute%20sed%20script%20file%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20%60-e%60%20%20%20%7C%20sed%20-e%20'command1'%20-e%20'command2'%20input-file%20%7C%20Execute%20multiple%20sed%20commands%20%20%20%20%20%20%20%20%20%20%20%7C%0A%0A%7B.show-header%7D%0A%0A%23%23%23%20Multiple%20commands%0A%0A%60%60%60shell%20script%20%7B.wrap%7D%0A%24%20echo%20%22hello%20world%22%20%7C%20sed%20-e%20's%2Fh%2FH%2Fg'%20-e%20's%2Fw%2FW%2Fg'%0AHello%20World",
      "encoded": true
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "Use `-e` to execute multiple sed commands"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "Sed%20script",
      "kind": "text",
      "body": "%60%60%60shell%20script%0A%24%20echo%20's%2Fh%2FH%2Fg'%20%3E%3E%20hello.sed%0A%24%20echo%20's%2Fw%2FW%2Fg'%20%3E%3E%20hello.sed%0A%24%20echo%20%22hello%20world%22%20%7C%20sed%20-f%20hello.sed%0AHello%20World",
      "encoded": true
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nUse `-f` to execute sed script file\n\n### Examples\n\n```shell script\n$ sed 's/old/new/g' file.txt\n$ sed 's/old/new/g' file.txt > new.txt\n\n$ sed 's/old/new/g' -i file.txt\n$ sed 's/old/new/g' -i.backup file.txt"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "See: [Sed examples](#sed-examples)"
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "text",
      "body": "| Command | Example                                | Description                 |\n| ------- | -------------------------------------- | --------------------------- |\n| `p`     | sed -n '1,4 p' input.txt               | Print lines 1-4             |\n| `p`     | sed -n -e '1,4 p' -e '6,7 p' input.txt | Print lines 1-4 and 6-7     |\n| `d`     | sed '1,4 d' input.txt                  | Print lines except 1-4      |\n| `w`     | sed -n '1,4 w output.txt' input.txt    | Write pattern space to file |\n| `a`     | sed '2 a new-line' input.txt           | Append line after           |\n| `i`     | sed '2 i new-line' input.txt           | Insert line before          |"
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "text",
      "body": "| Command | Description                                                  |\n| ------- | ------------------------------------------------------------ |\n| `n`     | Print pattern space, empty pattern space, and read next line |\n| `x`     | Swap pattern space with hold space                           |\n| `h`     | Copy pattern space to hold space                             |\n| `H`     | Append pattern space to hold space                           |\n| `g`     | Copy hold space to pattern space                             |\n| `G`     | Append hold space to pattern space                           |"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "See also: [File spacing](#file-spacing)"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "```shell script\n$ sed 's/old/new/[flags]' [input-file]"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n| Flag     | Description                                |\n| -------- | ------------------------------------------ |\n| `g`      | Global substitution                        |\n| `1,2...` | Substitute the nth occurrence              |\n| `p`      | Print only the substituted line            |\n| `w`      | Write only the substituted line to a file  |\n| `I`      | Ignore case while searching                |\n| `e`      | Substitute and execute in the command line |\n\n### Loops commands\n\n| Command   | Description                                                        |\n| --------- | ------------------------------------------------------------------ |\n| `b label` | Branch to a label (for looping)                                    |\n| `t label` | Branch to a label only on successful substitution<br>(for looping) |\n| `:label`  | Label for the b and t commands (for looping)                       |\n| `N`       | Append next line to pattern space                                  |\n| `P`       | Print 1st line in multi-line                                       |\n| `D`       | Delete 1st line in multi-line                                      |\n\n### Misc Flags\n\n| Flag                      | Description                                                                  |\n| ------------------------- | ---------------------------------------------------------------------------- |\n| <code>/ \\| ^ @ ! #</code> | Substitution delimiter can be any character                                  |\n| `&`                       | Gets the matched pattern                                                     |\n| `( ) \\1 \\2 \\3`            | Group using `(` and `)`.<br>Use `\\1`, `\\2` in replacement to refer the group |\n\n## Sed examples\n\n### Replacing text {.row-span-2}\n\nReplace all occurrences of a string\n\n```shell script\n$ sed 's/old/new/g' file.txt"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Replace only the nth occurrence of a string"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed 's/old/new/2' file.txt"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nReplace a string only on the 5th line\n\n```shell script\n$ sed '5 s/old/new/' file.txt"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Replace%20%22world%22%20with%20%22universe%22%20but%20only%20if%20the%20line%20begins%20with%20%22hello%22",
      "encoded": true
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '/hello/s/world/universe/' file.txt"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0ARemove%20%22%5C%22%20from%20the%20end%20of%20each%20line%0A%0A%60%60%60shell%20script%0A%24%20sed%20's%2F%5C%5C%24%2F%2F'%20file.txt",
      "encoded": true
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Remove all whitespace from beginning of each line"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed 's/^\\s*//' file.txt"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nRemove comments. Even those that are at the end of a line\n\n```shell script\n$ sed 's/#.*$//' file.txt"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "Search for a string and only print the lines that were matched"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed -n '/hello/p' file.txt"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nCase insensitive search\n\n```shell script\n$ sed -n '/hello/Ip' file.txt"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Search for a string but only output lines that do not match"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed -n '/hello/!p' file.txt"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n### Appending lines\n\nAppend line after line 2\n\n```shell script\n$ sed '2a Text after line 2' file.txt"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Append line at the end of the file"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '$a THE END!' file.txt"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nAppend line after every 3rd line starting from line 3\n\n```shell script\n$ sed '3~3a Some text' file.txt"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "text",
      "body": "Number line of a file (simple left alignment)"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed = file.txt | sed 'N;s/\\n/\\t/'"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nNumber line of a file (number on left, right-aligned)\n\n```shell script\n$ sed = file.txt | sed 'N; s/^/   /; s/ *\\(.\\{6,\\}\\)\\n/\\1  /'"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Number line of file, but only print numbers if line is not blank"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '/./=' file.txt | sed '/./N; s/\\n/ /'"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0ACount%20lines%20(emulates%20%22wc%20-l%22)%0A%0A%60%60%60shell%20script%0A%24%20sed%20-n%20'%24%3D'",
      "encoded": true
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "Prepending lines",
      "kind": "text",
      "body": "Insert text before line 5"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '5i line number five' file.txt"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0AInsert%20%22Example%3A%20%22%20before%20each%20line%20that%20contains%20%22hello%22%0A%0A%60%60%60shell%20script%0A%24%20sed%20'%2Fhello%2Fi%20Example%3A%20'%20file.txt",
      "encoded": true
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "Delete line 5-7 in file"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '5,7d' file.txt"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nDelete every 2nd line starting with line 3\n\n```shell script\n$ sed '3~2d' file.txt"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Delete the last line in file"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '$d' file.txt"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0ADelete%20lines%20starting%20with%20%22Hello%22%0A%0A%60%60%60shell%20script%0A%24%20sed%20'%2F%5EHello%2Fd'%20file.txt",
      "encoded": true
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Delete all empty lines"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '/^$/d' file.txt"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0ADelete%20lines%20starting%20with%20%22%23%22%0A%0A%60%60%60shell%20script%0A%24%20sed%20'%2F%5E%23%2Fd'%20file.txt",
      "encoded": true
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "Double space"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed G"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nDelete all blank lines and double space\n\n```shell script\n$ sed '/^$/d;G'"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Triple space a file"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed 'G;G'"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nUndo double-spacing\n\n```shell script\n$ sed 'n;d'"
    },
    {
      "id": "s2-57",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Insert%20a%20blank%20line%20above%20line%20which%20matches%20%22regex%22",
      "encoded": true
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '/regex/{x;p;x;}'"
    },
    {
      "id": "s2-59",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "%0AInsert%20a%20blank%20line%20below%20line%20which%20matches%20%22regex%22%0A%0A%60%60%60shell%20script%0A%24%20sed%20'%2Fregex%2FG'",
      "encoded": true
    },
    {
      "id": "s2-60",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "Insert%20a%20blank%20line%20around%20line%20which%20matches%20%22regex%22",
      "encoded": true
    },
    {
      "id": "s2-61",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```shell script\n$ sed '/regex/{x;p;x;G;}'"
    },
    {
      "id": "s2-62",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n## Also see {.cols-1}\n\n- [sed cheatsheet](https://gist.github.com/ssstonebraker/6140154) _(gist.github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/sed.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/sed.md",
    "lang": "en",
    "mode": "local"
  }
}