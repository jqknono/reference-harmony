{
  "id": "sed",
  "name": "Sed",
  "title": "[Sed](https://www.gnu.org/software/sed/manual/sed.html) is a stream editor, this sed cheat sheet contains sed commands and some common sed tricks.",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/sed.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Sed commands",
      "startIndex": 10
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "kind": "text",
      "body": "[Sed](https://www.gnu.org/software/sed/manual/sed.html) is a stream editor, this sed cheat sheet contains sed commands and some common sed tricks."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "text",
      "body": "Syntax"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "text",
      "body": "```shell script\n$ sed [options] command [input-file]"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "code",
      "lang": "",
      "code": "\nWith pipeline\n\n```shell script\n$ cat report.txt | sed 's/Nick/John/g'"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "text",
      "body": "```shell script\n$ echo '123abc' | sed 's/[0-9]+//g'"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "code",
      "lang": "",
      "code": "\n### Option Examples {.col-span-2}\n\n| Option | Example                                    | Description                             |\n| ------ | ------------------------------------------ | --------------------------------------- |\n| `-i`   | sed -ibak 's/On/Off/' php.ini              | Backup and modify input file directly   |\n| `-E`   | sed -E 's/[0-9]+//g' input-file            | Use extended regular expressions        |\n| `-n`   | sed -n '3 p' config.conf                   | Suppress default pattern space printing |\n| `-f`   | sed -f script.sed config.conf              | Execute sed script file                 |\n| `-e`   | sed -e 'command1' -e 'command2' input-file | Execute multiple sed commands           |\n\n{.show-header}\n\n### Multiple commands\n\n```shell script {.wrap}\n$ echo \"hello world\" | sed -e 's/h/H/g' -e 's/w/W/g'\nHello World"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "Sed Usage",
      "kind": "text",
      "body": "Use `-e` to execute multiple sed commands"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "Sed script",
      "kind": "text",
      "body": "```shell script\n$ echo 's/h/H/g' >> hello.sed\n$ echo 's/w/W/g' >> hello.sed\n$ echo \"hello world\" | sed -f hello.sed\nHello World"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "Sed script",
      "kind": "code",
      "lang": "",
      "code": "\nUse `-f` to execute sed script file\n\n### Examples\n\n```shell script\n$ sed 's/old/new/g' file.txt\n$ sed 's/old/new/g' file.txt > new.txt\n\n$ sed 's/old/new/g' -i file.txt\n$ sed 's/old/new/g' -i.backup file.txt"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "Sed script",
      "kind": "text",
      "body": "See: [Sed examples](#sed-examples)"
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`p`",
      "back": "sed -n '1,4 p' input.txt | Print lines 1-4"
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`p`",
      "back": "sed -n -e '1,4 p' -e '6,7 p' input.txt | Print lines 1-4 and 6-7"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`d`",
      "back": "sed '1,4 d' input.txt | Print lines except 1-4"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`w`",
      "back": "sed -n '1,4 w output.txt' input.txt | Write pattern space to file"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`a`",
      "back": "sed '2 a new-line' input.txt | Append line after"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "Commands",
      "kind": "qa",
      "front": "`i`",
      "back": "sed '2 i new-line' input.txt | Insert line before"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`n`",
      "back": "Print pattern space, empty pattern space, and read next line"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`x`",
      "back": "Swap pattern space with hold space"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`h`",
      "back": "Copy pattern space to hold space"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`H`",
      "back": "Append pattern space to hold space"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`g`",
      "back": "Copy hold space to pattern space"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "qa",
      "front": "`G`",
      "back": "Append hold space to pattern space"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "Space commands",
      "kind": "text",
      "body": "See also: [File spacing](#file-spacing)"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "```shell script\n$ sed 's/old/new/[flags]' [input-file]"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n| Flag     | Description                                |\n| -------- | ------------------------------------------ |\n| `g`      | Global substitution                        |\n| `1,2...` | Substitute the nth occurrence              |\n| `p`      | Print only the substituted line            |\n| `w`      | Write only the substituted line to a file  |\n| `I`      | Ignore case while searching                |\n| `e`      | Substitute and execute in the command line |\n\n### Loops commands\n\n| Command   | Description                                                        |\n| --------- | ------------------------------------------------------------------ |\n| `b label` | Branch to a label (for looping)                                    |\n| `t label` | Branch to a label only on successful substitution<br>(for looping) |\n| `:label`  | Label for the b and t commands (for looping)                       |\n| `N`       | Append next line to pattern space                                  |\n| `P`       | Print 1st line in multi-line                                       |\n| `D`       | Delete 1st line in multi-line                                      |\n\n### Misc Flags\n\n| Flag                      | Description                                                                  |\n| ------------------------- | ---------------------------------------------------------------------------- |\n| <code>/ \\| ^ @ ! #</code> | Substitution delimiter can be any character                                  |\n| `&`                       | Gets the matched pattern                                                     |\n| `( ) \\1 \\2 \\3`            | Group using `(` and `)`.<br>Use `\\1`, `\\2` in replacement to refer the group |\n\n## Sed examples\n\n### Replacing text {.row-span-2}\n\nReplace all occurrences of a string\n\n```shell script\n$ sed 's/old/new/g' file.txt"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "Replace only the nth occurrence of a string"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "```shell script\n$ sed 's/old/new/2' file.txt"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "code",
      "lang": "",
      "code": "\nReplace a string only on the 5th line\n\n```shell script\n$ sed '5 s/old/new/' file.txt"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "Replace \"world\" with \"universe\" but only if the line begins with \"hello\""
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "```shell script\n$ sed '/hello/s/world/universe/' file.txt"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "code",
      "lang": "",
      "code": "\nRemove \"\\\" from the end of each line\n\n```shell script\n$ sed 's/\\\\$//' file.txt"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "Remove all whitespace from beginning of each line"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "text",
      "body": "```shell script\n$ sed 's/^\\s*//' file.txt"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "Flags",
      "kind": "code",
      "lang": "",
      "code": "\nRemove comments. Even those that are at the end of a line\n\n```shell script\n$ sed 's/#.*$//' file.txt"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "Search for a string and only print the lines that were matched"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "```shell script\n$ sed -n '/hello/p' file.txt"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "code",
      "lang": "",
      "code": "\nCase insensitive search\n\n```shell script\n$ sed -n '/hello/Ip' file.txt"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "Search for a string but only output lines that do not match"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "```shell script\n$ sed -n '/hello/!p' file.txt"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "code",
      "lang": "",
      "code": "\n### Appending lines\n\nAppend line after line 2\n\n```shell script\n$ sed '2a Text after line 2' file.txt"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "Append line at the end of the file"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "text",
      "body": "```shell script\n$ sed '$a THE END!' file.txt"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "Search for text",
      "kind": "code",
      "lang": "",
      "code": "\nAppend line after every 3rd line starting from line 3\n\n```shell script\n$ sed '3~3a Some text' file.txt"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "text",
      "body": "Number line of a file (simple left alignment)"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "text",
      "body": "```shell script\n$ sed = file.txt | sed 'N;s/\\n/\\t/'"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "code",
      "lang": "",
      "code": "\nNumber line of a file (number on left, right-aligned)\n\n```shell script\n$ sed = file.txt | sed 'N; s/^/   /; s/ *\\(.\\{6,\\}\\)\\n/\\1  /'"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "text",
      "body": "Number line of file, but only print numbers if line is not blank"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "text",
      "body": "```shell script\n$ sed '/./=' file.txt | sed '/./N; s/\\n/ /'"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "Numbering",
      "kind": "code",
      "lang": "",
      "code": "\nCount lines (emulates \"wc -l\")\n\n```shell script\n$ sed -n '$='"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "Prepending lines",
      "kind": "text",
      "body": "Insert text before line 5"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "Prepending lines",
      "kind": "text",
      "body": "```shell script\n$ sed '5i line number five' file.txt"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "Prepending lines",
      "kind": "code",
      "lang": "",
      "code": "\nInsert \"Example: \" before each line that contains \"hello\"\n\n```shell script\n$ sed '/hello/i Example: ' file.txt"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "Delete line 5-7 in file"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "```shell script\n$ sed '5,7d' file.txt"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "code",
      "lang": "",
      "code": "\nDelete every 2nd line starting with line 3\n\n```shell script\n$ sed '3~2d' file.txt"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "Delete the last line in file"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "```shell script\n$ sed '$d' file.txt"
    },
    {
      "id": "s2-57",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "code",
      "lang": "",
      "code": "\nDelete lines starting with \"Hello\"\n\n```shell script\n$ sed '/^Hello/d' file.txt"
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "Delete all empty lines"
    },
    {
      "id": "s2-59",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "text",
      "body": "```shell script\n$ sed '/^$/d' file.txt"
    },
    {
      "id": "s2-60",
      "sectionId": "s2",
      "title": "Deleting lines",
      "kind": "code",
      "lang": "",
      "code": "\nDelete lines starting with \"#\"\n\n```shell script\n$ sed '/^#/d' file.txt"
    },
    {
      "id": "s2-61",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "Double space"
    },
    {
      "id": "s2-62",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "```shell script\n$ sed G"
    },
    {
      "id": "s2-63",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "code",
      "lang": "",
      "code": "\nDelete all blank lines and double space\n\n```shell script\n$ sed '/^$/d;G'"
    },
    {
      "id": "s2-64",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "Triple space a file"
    },
    {
      "id": "s2-65",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "```shell script\n$ sed 'G;G'"
    },
    {
      "id": "s2-66",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "code",
      "lang": "",
      "code": "\nUndo double-spacing\n\n```shell script\n$ sed 'n;d'"
    },
    {
      "id": "s2-67",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "Insert a blank line above line which matches \"regex\""
    },
    {
      "id": "s2-68",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "```shell script\n$ sed '/regex/{x;p;x;}'"
    },
    {
      "id": "s2-69",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "code",
      "lang": "",
      "code": "\nInsert a blank line below line which matches \"regex\"\n\n```shell script\n$ sed '/regex/G'"
    },
    {
      "id": "s2-70",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "Insert a blank line around line which matches \"regex\""
    },
    {
      "id": "s2-71",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "text",
      "body": "```shell script\n$ sed '/regex/{x;p;x;G;}'"
    },
    {
      "id": "s2-72",
      "sectionId": "s2",
      "title": "File spacing",
      "kind": "code",
      "lang": "",
      "code": "\n## Also see {.cols-1}\n\n- [sed cheatsheet](https://gist.github.com/ssstonebraker/6140154) _(gist.github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/sed.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/sed.md",
    "lang": "en",
    "mode": "local"
  }
}