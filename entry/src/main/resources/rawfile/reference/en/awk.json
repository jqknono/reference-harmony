{
  "id": "awk",
  "name": "Awk",
  "title": "This is a one page quick reference cheat sheet to the [GNU awk](https://www.gnu.org/software/gawk/manual/gawk.html), which covers commonly used awk expressions and commands.",
  "icon": "https://raw.githubusercontent.com/Fechin/reference/main/source/assets/icon/awk.svg",
  "sections": [
    {
      "id": "intro",
      "title": "Intro",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "Getting Started",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Awk Variables",
      "startIndex": 19
    },
    {
      "id": "s3",
      "title": "Awk Operators",
      "startIndex": 69
    },
    {
      "id": "s4",
      "title": "Awk Functions",
      "startIndex": 92
    },
    {
      "id": "s5",
      "title": "Awk Arrays",
      "startIndex": 107
    },
    {
      "id": "s6",
      "title": "Awk Conditions",
      "startIndex": 113
    },
    {
      "id": "s7",
      "title": "Awk Loops",
      "startIndex": 120
    },
    {
      "id": "s8",
      "title": "Awk Formatted Printing",
      "startIndex": 139
    },
    {
      "id": "s9",
      "title": "Also see",
      "startIndex": 157
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "Intro",
      "kind": "text",
      "body": "This is a one page quick reference cheat sheet to the [GNU awk](https://www.gnu.org/software/gawk/manual/gawk.html), which covers commonly used awk expressions and commands."
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "text",
      "body": "```shell script {.wrap}\n$ awk -F: '{print $1, $NF}' /etc/passwd"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n| -             | -                         |\n| ------------- | ------------------------- |\n| `-F:`         | Colon as a separator      |\n| `{...}`       | Awk program               |\n| `print`       | Prints the current record |\n| `$1`          | First field               |\n| `$NF`         | Last field                |\n| `/etc/passwd` | Input data file           |\n\n{.left-text}\n\n### Awk program"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "text",
      "body": "BEGIN          {<initializations>}\n<pattern 1> {<program actions>}\n<pattern 2> {<program actions>}\n...\nEND            {< final actions >}"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "code",
      "lang": "",
      "code": "\n#### Example"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "text",
      "body": "awk '\nBEGIN { print \"\\n>>>Start\" }\n!/(login|shutdown)/ { print NR, $0 }\nEND { print \"<<<END\\n\" }\n' /etc/passwd"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "code",
      "lang": "",
      "code": "\n### Variables {.row-span-2}\n\n```bash\n          $1      $2/$(NF-1)    $3/$NF\n           ▼          ▼           ▼\n        ┌──────┬──────────────────┬───────┐\n$0/NR ▶ │  ID  │  WEBSITE         │  URI  │\n        ├──────┼──────────────────┼───────┤\n$0/NR ▶ │  1   │  cheatsheets.zip │  awk  │\n        ├──────┼──────────────────┼───────┤\n$0/NR ▶ │  2   │  google.com      │  25   │\n        └──────┴──────────────────┴───────┘"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "code",
      "lang": "",
      "code": "# First and last field\nawk -F: '{print $1,$NF}' /etc/passwd\n\n# With line number\nawk -F: '{print NR, $0}' /etc/passwd\n\n# Second last field\nawk -F: '{print $(NF-1)}' /etc/passwd\n\n# Custom string\nawk -F: '{print $1 \"=\" $6}' /etc/passwd"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "Have a try",
      "kind": "text",
      "body": "See: [Variables](#awk-variables)"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "Awk program examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {print \"hello world\"}'        # Prints \"hello world\"\nawk -F: '{print $1}' /etc/passwd         # -F: Specify field separator\n\n# /pattern/ Execute actions only for matched pattern\nawk -F: '/root/ {print $1}' /etc/passwd\n\n# BEGIN block is executed once at the start\nawk -F: 'BEGIN { print \"uid\"} { print $1 }' /etc/passwd\n\n# END block is executed once at the end\nawk -F: '{print $1} END { print \"-done-\"}' /etc/passwd"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "Conditions",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '$3>30 {print $1}' /etc/passwd"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "Conditions",
      "kind": "text",
      "body": "See: [Conditions](#awk-conditions)"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "Generate 1000 spaces",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN{\n    while (a++ < 1000)\n        s=s \" \";\n    print s\n}'"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "Generate 1000 spaces",
      "kind": "text",
      "body": "See: [Loops](#awk-loops)"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "Arrays",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n   fruits[\"mango\"] = \"yellow\";\n   fruits[\"orange\"] = \"orange\"\n   for(fruit in fruits) {\n     print \"The color of \" fruit \" is \" fruits[fruit]\n   }\n}'"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "Arrays",
      "kind": "text",
      "body": "See: [Arrays](#awk-arrays)"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "Functions",
      "kind": "code",
      "lang": "",
      "code": "# => 5\nawk 'BEGIN{print length(\"hello\")}'\n# => HELLO\nawk 'BEGIN{print toupper(\"hello\")}'\n# => hel\nawk 'BEGIN{print substr(\"hello\", 1, 3)}'"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "Functions",
      "kind": "text",
      "body": "See: [Functions](#awk-functions)"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`$0`",
      "back": "Whole line"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`$1, $2...$NF`",
      "back": "First, second… last field"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`NR`",
      "back": "`N`umber of `R`ecords"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`NF`",
      "back": "`N`umber of `F`ields"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`OFS`",
      "back": "`O`utput `F`ield `S`eparator <br> _(default \" \")_"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`FS`",
      "back": "input `F`ield `S`eparator <br> _(default \" \")_"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`ORS`",
      "back": "`O`utput `R`ecord `S`eparator <br> _(default \"\\n\")_"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`RS`",
      "back": "input `R`ecord `S`eparator <br> _(default \"\\n\")_"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "Build-in variables",
      "kind": "qa",
      "front": "`FILENAME`",
      "back": "Name of the file"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`$1 == \"root\"`",
      "back": "First field equals root"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`{print $(NF-1)}`",
      "back": "Second last field"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`NR!=1{print $0}`",
      "back": "From 2nd record"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`NR > 3`",
      "back": "From 4th record"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`NR == 1`",
      "back": "First record"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`END{print NR}`",
      "back": "Total records"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`BEGIN{print OFMT}`",
      "back": "Output format"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`{print NR, $0}`",
      "back": "Line number"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`{print NR \"\t\" $0}`",
      "back": "Line number (tab)"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`{$1 = NR; print}`",
      "back": "Replace 1st field with line number"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`$NF > 4`",
      "back": "Last field > 4"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`NR % 2 == 0`",
      "back": "Even records"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`NR==10, NR==20`",
      "back": "Records 10 to 20"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`BEGIN{print ARGC}`",
      "back": "Total arguments"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "Expressions",
      "kind": "qa",
      "front": "`ORS=NR%5?\",\":\"\\n\"`",
      "back": "Concatenate records"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "text",
      "body": "Print sum and average"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{sum += $3}\n     END { print sum, sum/NR }\n' /etc/passwd"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "text",
      "body": "Printing parameters"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    for (i = 1; i < ARGC; i++)\n        print ARGV[i] }' a b c"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "text",
      "body": "Output field separator as a comma"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN { FS=\":\";OFS=\",\"}\n    {print $1,$2,$3,$4}' /etc/passwd"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "text",
      "body": "Position of match"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    if (match(\"One Two Three\", \"Tw\"))\n        print RSTART }'"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "text",
      "body": "Length of match"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    if (match(\"One Two Three\", \"re\"))\n        print RLENGTH }'"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`ARGC`",
      "back": "Number or arguments"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`ARGV`",
      "back": "Array of arguments"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`FNR`",
      "back": "`F`ile `N`umber of `R`ecords"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`OFMT`",
      "back": "Format for numbers <br> _(default \"%.6g\")_"
    },
    {
      "id": "s2-57",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`RSTART`",
      "back": "Location in the string"
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`RLENGTH`",
      "back": "Length of match"
    },
    {
      "id": "s2-59",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`SUBSEP`",
      "back": "Multi-dimensional array separator <br> _(default \"\\034\")_"
    },
    {
      "id": "s2-60",
      "sectionId": "s2",
      "title": "Environment Variables",
      "kind": "qa",
      "front": "`ARGIND`",
      "back": "Argument Index"
    },
    {
      "id": "s2-61",
      "sectionId": "s2",
      "title": "GNU awk only",
      "kind": "qa",
      "front": "`ENVIRON`",
      "back": "Environment variables"
    },
    {
      "id": "s2-62",
      "sectionId": "s2",
      "title": "GNU awk only",
      "kind": "qa",
      "front": "`IGNORECASE`",
      "back": "Ignore case"
    },
    {
      "id": "s2-63",
      "sectionId": "s2",
      "title": "GNU awk only",
      "kind": "qa",
      "front": "`CONVFMT`",
      "back": "Conversion format"
    },
    {
      "id": "s2-64",
      "sectionId": "s2",
      "title": "GNU awk only",
      "kind": "qa",
      "front": "`ERRNO`",
      "back": "System errors"
    },
    {
      "id": "s2-65",
      "sectionId": "s2",
      "title": "GNU awk only",
      "kind": "qa",
      "front": "`FIELDWIDTHS`",
      "back": "Fixed width fields"
    },
    {
      "id": "s2-66",
      "sectionId": "s2",
      "title": "Defining variable",
      "kind": "code",
      "lang": "",
      "code": "awk -v var1=\"Hello\" -v var2=\"Wold\" '\n    END {print var1, var2}\n' </dev/null"
    },
    {
      "id": "s2-67",
      "sectionId": "s2",
      "title": "Defining variable",
      "kind": "text",
      "body": "#### Use shell variables"
    },
    {
      "id": "s2-68",
      "sectionId": "s2",
      "title": "Defining variable",
      "kind": "code",
      "lang": "",
      "code": "awk -v varName=\"$PWD\" '\n    END {print varName}' </dev/null"
    },
    {
      "id": "s3-69",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`{print $1}`",
      "back": "First field"
    },
    {
      "id": "s3-70",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`$2 == \"foo\"`",
      "back": "Equals"
    },
    {
      "id": "s3-71",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`$2 != \"foo\"`",
      "back": "Not equals"
    },
    {
      "id": "s3-72",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`\"foo\" in array`",
      "back": "In array"
    },
    {
      "id": "s3-73",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "text",
      "body": "#### Regular expression"
    },
    {
      "id": "s3-74",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`/regex/`",
      "back": "Line matches"
    },
    {
      "id": "s3-75",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`!/regex/`",
      "back": "Line not matches"
    },
    {
      "id": "s3-76",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`$1 ~ /regex/`",
      "back": "Field matches"
    },
    {
      "id": "s3-77",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`$1 !~ /regex/`",
      "back": "Field not matches"
    },
    {
      "id": "s3-78",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "text",
      "body": "#### More conditions"
    },
    {
      "id": "s3-79",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`($2 <= 4 \\",
      "back": "\\ | $3 < 20)` | Or"
    },
    {
      "id": "s3-80",
      "sectionId": "s3",
      "title": "Operators",
      "kind": "qa",
      "front": "`($1 == 4 && $3 < 20)`",
      "back": "And"
    },
    {
      "id": "s3-81",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "#### Arithmetic operations"
    },
    {
      "id": "s3-82",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "• `+`\n• `-`\n• `*`\n• `/`\n• `%`\n• `++`\n• `--`"
    },
    {
      "id": "s3-83",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "#### Shorthand assignments"
    },
    {
      "id": "s3-84",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "• `+=`\n• `-=`\n• `*=`\n• `/=`\n• `%=`"
    },
    {
      "id": "s3-85",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "#### Comparison operators"
    },
    {
      "id": "s3-86",
      "sectionId": "s3",
      "title": "Operations",
      "kind": "text",
      "body": "• `==`\n• `!=`\n• `<`\n• `>`\n• `<=`\n• `>=`"
    },
    {
      "id": "s3-87",
      "sectionId": "s3",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    if (\"foo\" ~ \"^fo+$\")\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s3-88",
      "sectionId": "s3",
      "title": "Examples",
      "kind": "text",
      "body": "#### Not match"
    },
    {
      "id": "s3-89",
      "sectionId": "s3",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    if (\"boo\" !~ \"^fo+$\")\n        print \"Boo!\";\n}'"
    },
    {
      "id": "s3-90",
      "sectionId": "s3",
      "title": "Examples",
      "kind": "text",
      "body": "#### if in array"
    },
    {
      "id": "s3-91",
      "sectionId": "s3",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"foo\" in assoc)\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s4-92",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`index(s,t)`",
      "back": "Position in string s where string t occurs, 0 if not found"
    },
    {
      "id": "s4-93",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`length(s)`",
      "back": "Length of string s (or $0 if no arg)"
    },
    {
      "id": "s4-94",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`rand`",
      "back": "Random number between 0 and 1"
    },
    {
      "id": "s4-95",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`substr(s,index,len)`",
      "back": "Return len-char substring of s that begins at index (counted from 1)"
    },
    {
      "id": "s4-96",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`srand`",
      "back": "Set seed for rand and return previous seed"
    },
    {
      "id": "s4-97",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`int(x)`",
      "back": "Truncate x to integer value"
    },
    {
      "id": "s4-98",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`split(s,a,fs)`",
      "back": "Split string s into array a split by fs, returning length of a"
    },
    {
      "id": "s4-99",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`match(s,r)`",
      "back": "Position in string s where regex r occurs, or 0 if not found"
    },
    {
      "id": "s4-100",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`sub(r,t,s)`",
      "back": "Substitute t for first occurrence of regex r in string s (or $0 if s not given)"
    },
    {
      "id": "s4-101",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`gsub(r,t,s)`",
      "back": "Substitute t for all occurrences of regex r in string s"
    },
    {
      "id": "s4-102",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`system(cmd)`",
      "back": "Execute cmd and return exit status"
    },
    {
      "id": "s4-103",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`tolower(s)`",
      "back": "String s to lowercase"
    },
    {
      "id": "s4-104",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`toupper(s)`",
      "back": "String s to uppercase"
    },
    {
      "id": "s4-105",
      "sectionId": "s4",
      "title": "Common functions",
      "kind": "qa",
      "front": "`getline`",
      "back": "Set $0 to next input record from current input file."
    },
    {
      "id": "s4-106",
      "sectionId": "s4",
      "title": "User defined function",
      "kind": "code",
      "lang": "",
      "code": "awk '\n    # Returns minimum number\n    function find_min(num1, num2){\n       if (num1 < num2)\n       return num1\n       return num2\n    }\n    # Returns maximum number\n    function find_max(num1, num2){\n       if (num1 > num2)\n       return num1\n       return num2\n    }\n    # Main function\n    function main(num1, num2){\n       result = find_min(num1, num2)\n       print \"Minimum =\", result\n\n       result = find_max(num1, num2)\n       print \"Maximum =\", result\n    }\n    # Script execution starts here\n    BEGIN {\n       main(10, 60)\n    }\n'"
    },
    {
      "id": "s5-107",
      "sectionId": "s5",
      "title": "Array with index",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    arr[0] = \"foo\";\n    arr[1] = \"bar\";\n    print(arr[0]); # => foo\n    delete arr[0];\n    print(arr[0]); # => \"\"\n}'"
    },
    {
      "id": "s5-108",
      "sectionId": "s5",
      "title": "Array with key",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    print(\"baz\" in assoc); # => 0\n    print(\"foo\" in assoc); # => 1\n}'"
    },
    {
      "id": "s5-109",
      "sectionId": "s5",
      "title": "Array with split",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    split(\"foo:bar:baz\", arr, \":\");\n    for (key in arr)\n        print arr[key];\n}'"
    },
    {
      "id": "s5-110",
      "sectionId": "s5",
      "title": "Array with asort",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    arr[0] = 3\n    arr[1] = 2\n    arr[2] = 4\n    n = asort(arr)\n    for (i = 1; i <= n ; i++)\n        print(arr[i])\n}'"
    },
    {
      "id": "s5-111",
      "sectionId": "s5",
      "title": "Multi-dimensional",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    multidim[0,0] = \"foo\";\n    multidim[0,1] = \"bar\";\n    multidim[1,0] = \"baz\";\n    multidim[1,1] = \"boo\";\n}'"
    },
    {
      "id": "s5-112",
      "sectionId": "s5",
      "title": "Multi-dimensional iteration",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    array[1,2]=3;\n    array[2,3]=5;\n    for (comb in array) {\n        split(comb,sep,SUBSEP);\n        print sep[1], sep[2],\n        array[sep[1],sep[2]]\n    }\n}'"
    },
    {
      "id": "s6-113",
      "sectionId": "s6",
      "title": "if-else statement",
      "kind": "code",
      "lang": "",
      "code": "awk -v count=2 'BEGIN {\n    if (count == 1)\n        print \"Yes\";\n    else\n        print \"Huh?\";\n}'"
    },
    {
      "id": "s6-114",
      "sectionId": "s6",
      "title": "if-else statement",
      "kind": "text",
      "body": "#### Ternary operator"
    },
    {
      "id": "s6-115",
      "sectionId": "s6",
      "title": "if-else statement",
      "kind": "code",
      "lang": "",
      "code": "awk -v count=2 'BEGIN {\n    print (count==1) ? \"Yes\" : \"Huh?\";\n}'"
    },
    {
      "id": "s6-116",
      "sectionId": "s6",
      "title": "Exists",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"foo\" in assoc)\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s6-117",
      "sectionId": "s6",
      "title": "Exists",
      "kind": "text",
      "body": "#### Not exists"
    },
    {
      "id": "s6-118",
      "sectionId": "s6",
      "title": "Exists",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"Huh\" in assoc == 0 )\n        print \"Huh!\";\n}'"
    },
    {
      "id": "s6-119",
      "sectionId": "s6",
      "title": "switch",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{\n    switch (NR * 2 + 1) {\n        case 3:\n        case \"11\":\n            print NR - 1\n            break\n\n        case /2[[:digit:]]+/:\n            print NR\n\n        default:\n            print NR + 1\n\n        case -1:\n            print NR * -1\n    }\n}' /etc/passwd"
    },
    {
      "id": "s7-120",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    for (i = 0; i < 10; i++)\n        print \"i=\" i;\n}'"
    },
    {
      "id": "s7-121",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "text",
      "body": "#### Powers of two between 1 and 100"
    },
    {
      "id": "s7-122",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    for (i = 1; i <= 100; i *= 2)\n        print i\n}'"
    },
    {
      "id": "s7-123",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    assoc[\"key1\"] = \"val1\"\n    assoc[\"key2\"] = \"val2\"\n    for (key in assoc)\n        print assoc[key];\n}'"
    },
    {
      "id": "s7-124",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "text",
      "body": "#### Arguments"
    },
    {
      "id": "s7-125",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    for (argnum in ARGV)\n        print ARGV[argnum];\n}' a b c"
    },
    {
      "id": "s7-126",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "text",
      "body": "#### Reverse records"
    },
    {
      "id": "s7-127",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{ x[NR] = $0 }\n    END {\n        for (i = NR; i > 0; i--)\n        print x[i]\n    }\n' /etc/passwd"
    },
    {
      "id": "s7-128",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "text",
      "body": "#### Reverse fields"
    },
    {
      "id": "s7-129",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{\n    for (i = NF; i > 0; i--)\n        printf(\"%s \",$i);\n    print \"\"\n}' /etc/passwd"
    },
    {
      "id": "s7-130",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "text",
      "body": "#### Sum by record"
    },
    {
      "id": "s7-131",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{\n    s=0;\n    for (i = 1; i <= NF; i++)\n        s += $i;\n    print s\n}' /etc/passwd"
    },
    {
      "id": "s7-132",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "text",
      "body": "#### Sum whole file"
    },
    {
      "id": "s7-133",
      "sectionId": "s7",
      "title": "Examples",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '\n    {for (i = 1; i <= NF; i++)\n        s += $i;\n    };\n    END{print s}\n' /etc/passwd"
    },
    {
      "id": "s7-134",
      "sectionId": "s7",
      "title": "while",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    while (a < 10) {\n        print \"- \" \" concatenation: \" a\n        a++;\n    }\n}'"
    },
    {
      "id": "s7-135",
      "sectionId": "s7",
      "title": "while",
      "kind": "text",
      "body": "#### do...while"
    },
    {
      "id": "s7-136",
      "sectionId": "s7",
      "title": "while",
      "kind": "code",
      "lang": "",
      "code": "awk '{\n    i = 1\n    do {\n        print $0\n        i++\n    } while (i <= 5)\n}' /etc/passwd"
    },
    {
      "id": "s7-137",
      "sectionId": "s7",
      "title": "Break",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    break_num = 5\n    for (i = 0; i < 10; i++) {\n        print i\n        if (i == break_num)\n            break\n    }\n}'"
    },
    {
      "id": "s7-138",
      "sectionId": "s7",
      "title": "Continue",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN {\n    for (x = 0; x <= 10; x++) {\n        if (x == 5 || x == 6)\n            continue\n        printf \"%d \", x\n    }\n    print \"\"\n}'"
    },
    {
      "id": "s8-139",
      "sectionId": "s8",
      "title": "Usage",
      "kind": "text",
      "body": "#### Right align"
    },
    {
      "id": "s8-140",
      "sectionId": "s8",
      "title": "Usage",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN{printf \"|%10s|\\n\", \"hello\"}'\n\n|     hello|"
    },
    {
      "id": "s8-141",
      "sectionId": "s8",
      "title": "Usage",
      "kind": "text",
      "body": "#### Left align"
    },
    {
      "id": "s8-142",
      "sectionId": "s8",
      "title": "Usage",
      "kind": "code",
      "lang": "",
      "code": "awk 'BEGIN{printf \"|%-10s|\\n\", \"hello\"}'\n\n|hello     |"
    },
    {
      "id": "s8-143",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`c`",
      "back": "ASCII character"
    },
    {
      "id": "s8-144",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`d`",
      "back": "Decimal integer"
    },
    {
      "id": "s8-145",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`e`, `E`, `f`",
      "back": "Floating-point format"
    },
    {
      "id": "s8-146",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`o`",
      "back": "Unsigned octal value"
    },
    {
      "id": "s8-147",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`s`",
      "back": "String"
    },
    {
      "id": "s8-148",
      "sectionId": "s8",
      "title": "Common specifiers",
      "kind": "qa",
      "front": "`%`",
      "back": "Literal %"
    },
    {
      "id": "s8-149",
      "sectionId": "s8",
      "title": "Space",
      "kind": "code",
      "lang": "",
      "code": "awk -F: '{\n    printf \"%-10s %s\\n\", $1, $(NF-1)\n}' /etc/passwd | head -n 3"
    },
    {
      "id": "s8-150",
      "sectionId": "s8",
      "title": "Space",
      "kind": "text",
      "body": "Outputs"
    },
    {
      "id": "s8-151",
      "sectionId": "s8",
      "title": "Space",
      "kind": "text",
      "body": "```shell script\nroot       /root\nbin        /bin\ndaemon     /sbin"
    },
    {
      "id": "s8-152",
      "sectionId": "s8",
      "title": "Space",
      "kind": "code",
      "lang": "",
      "code": "\n### Header"
    },
    {
      "id": "s8-153",
      "sectionId": "s8",
      "title": "Space",
      "kind": "text",
      "body": "awk -F: 'BEGIN {\nprintf \"%-10s %s\\n\", \"User\", \"Home\"\nprintf \"%-10s %s\\n\", \"----\",\"----\"}\n{ printf \"%-10s %s\\n\", $1, $(NF-1) }\n' /etc/passwd | head -n 5"
    },
    {
      "id": "s8-154",
      "sectionId": "s8",
      "title": "Space",
      "kind": "code",
      "lang": "",
      "code": "\nOutputs"
    },
    {
      "id": "s8-155",
      "sectionId": "s8",
      "title": "Space",
      "kind": "text",
      "body": "User       Home\n----       ----\nroot       /root\nbin        /bin\ndaemon     /sbin"
    },
    {
      "id": "s8-156",
      "sectionId": "s8",
      "title": "Space",
      "kind": "code",
      "lang": "",
      "code": "\n## Miscellaneous\n\n### Regex Metacharacters\n\n- `\\`\n- `^`\n- `$`\n- `.`\n- `[`\n- `]`\n- `|`\n- `(`\n- `)`\n- `*`\n- `+`\n- `?`\n\n{.cols-3 .marker-none}\n\n### Escape Sequences\n\n| -    | -                   |\n| ---- | ------------------- |\n| `\\b` | Backspace           |\n| `\\f` | Form feed           |\n| `\\n` | Newline (line feed) |\n| `\\r` | Carriage return     |\n| `\\t` | Horizontal tab      |\n| `\\v` | Vertical tab        |\n\n### Run script\n\n```shell script\n$ cat demo.awk\n#!/usr/bin/awk -f\nBEGIN { x = 23 }\n      { x += 2 }\nEND   { print x }\n$ awk -f demo.awk /etc/passwd\n69"
    },
    {
      "id": "s9-157",
      "sectionId": "s9",
      "title": "Also see",
      "kind": "text",
      "body": "• [The GNU Awk User's Guide](https://www-zeuthen.desy.de/dv/documentation/unixguide/infohtml/gawk/gawk.html)"
    },
    {
      "id": "s9-158",
      "sectionId": "s9",
      "title": "Also see",
      "kind": "text",
      "body": "_(www-zeuthen.desy.de)_"
    },
    {
      "id": "s9-159",
      "sectionId": "s9",
      "title": "Also see",
      "kind": "text",
      "body": "• [AWK cheatsheet](https://gist.github.com/Rafe/3102414) _(gist.github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/Fechin/reference",
    "path": "source/_posts/awk.md",
    "ref": "main",
    "url": "https://github.com/Fechin/reference/tree/main/source/_posts/awk.md",
    "lang": "en",
    "mode": "local"
  }
}