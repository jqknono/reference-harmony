{
  "id": "nextjs",
  "name": "Next.js 备忘清单",
  "title": "[![NPM version](https://img.shields.io/npm/v/next.svg?style=flat)](https://www.npmjs.com/package/next)",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/nextjs.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 2
    },
    {
      "id": "s2",
      "title": "内置 CSS 支持",
      "startIndex": 27
    },
    {
      "id": "s3",
      "title": "Layouts",
      "startIndex": 52
    },
    {
      "id": "s4",
      "title": "图片优化",
      "startIndex": 59
    },
    {
      "id": "s5",
      "title": "优化字体",
      "startIndex": 64
    },
    {
      "id": "s6",
      "title": "优化 Scripts",
      "startIndex": 83
    },
    {
      "id": "s7",
      "title": "ESLint",
      "startIndex": 94
    },
    {
      "id": "s8",
      "title": "TypeScript",
      "startIndex": 116
    },
    {
      "id": "s9",
      "title": "路由",
      "startIndex": 137
    },
    {
      "id": "s10",
      "title": "另见",
      "startIndex": 167
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "[![NPM version](https://img.shields.io/npm/v/next.svg?style=flat)](https://www.npmjs.com/package/next)\n[![Downloads](https://img.shields.io/npm/dm/next.svg?style=flat)](https://www.npmjs.com/package/next)\n[![Repo Dependents](https://badgen.net/github/dependents-repo/vercel/next.js)](https://github.com/vercel/next.js/network/dependents)\n[![Github repo](https://badgen.net/badge/icon/Github?icon=github&label)](https://github.com/vercel/next.js)"
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "这是一份快速参考备忘单，包含 [Next.js](https://nextjs.org/) 的 API 参考列表和一些示例\n<!--rehype:style=padding-top: 12px;-->"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "创建项目",
      "kind": "code",
      "lang": "shell",
      "code": "npx create-next-app@latest\n# or\nyarn create next-app\n# or\npnpm create next-app"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "创建项目",
      "kind": "text",
      "body": "或者创建 [TypeScript](./typescript.md) 项目"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "创建项目",
      "kind": "code",
      "lang": "shell",
      "code": "npx create-next-app@latest --typescript\n# or\nyarn create next-app --typescript\n# or\npnpm create next-app --typescript"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "创建项目",
      "kind": "text",
      "body": "运行 `npm run dev` 或 `yarn dev` 或 `pnpm dev` 以在 <http://localhost:3000> 上启动开发服务器"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "添加首页",
      "kind": "text",
      "body": "使用以下内容填充 `pages/index.js`："
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "添加首页",
      "kind": "code",
      "lang": "jsx",
      "code": "function HomePage() {\n  return <div>Welcome to Next.js!</div>\n}\n\nexport default HomePage"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "添加首页",
      "kind": "text",
      "body": "`Next.js` 是围绕页面的概念构建的。 页面是从 `pages` 目录中的 `.js`、`.jsx`、`.ts` 或 `.tsx` 文件导出的 `React` 组件"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "getServerSideProps",
      "kind": "code",
      "lang": "jsx",
      "code": "function Page({ data }) {\n  // 渲染数据...\n}\n\n// 每个请求都会调用它\nexport async function getServerSideProps() {\n  // 从外部 API 获取数据\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // 通过 props 向页面传递数据\n  return { props: { data } }\n}\n\nexport default Page"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "getServerSideProps",
      "kind": "text",
      "body": "如果您从页面导出一个名为 `getServerSideProps`（服务器端渲染）的函数，`Next.js` 将使用 `getServerSideProps` 返回的数据在每个请求上预渲染该页面"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "getServerSideProps",
      "kind": "text",
      "body": "• 当您直接请求此页面时，`getServerSideProps` 在请求时运行，此页面将使用返回的 props 进行预渲染\n• 当您通过 `next/link` 或 `next/router` 在客户端页面转换上请求此页面时，`Next.js` 会向服务器发送 API 请求，服务器运行 `getServerSideProps`"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "getStaticPaths",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/posts/[id].js\nexport async function getStaticPaths() {\n  // 当这是真的时（在预览环境中）不要预呈现任何静态页面（更快的构建，但更慢的初始页面加载）\n  if (process.env.SKIP_BUILD_STATIC_GENERATION) {\n    return {\n      paths: [],\n      fallback: 'blocking',\n    }\n  }\n\n  // 调用外部 API 端点以获取帖子\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // 根据帖子获取我们要预渲染的路径 在生产环境中，预渲染所有页面\n  // （构建速度较慢，但初始页面加载速度较快）\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // { fallback: false } 表示其他路由应该 404\n  return { paths, fallback: false }\n}"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "getStaticPaths",
      "kind": "text",
      "body": "如果页面具有动态路由并使用 `getStaticProps`，则需要定义要静态生成的路径列表"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "getStaticPaths",
      "kind": "text",
      "body": "• 数据来自无头 CMS\n• 数据来自数据库\n• 数据来自文件系统\n• 数据可以公开缓存（非用户特定）\n• 页面必须预渲染（用于 SEO）并且速度非常快 —— `getStaticProps` 生成 HTML 和 JSON 文件，这两种文件都可以由 CDN 缓存以提高性能"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "getStaticProps",
      "kind": "code",
      "lang": "jsx",
      "code": "// 帖子将在构建时由 getStaticProps() 填充\nfunction Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\n// 这个函数在服务器端的构建时被调用。\n// 它不会在客户端调用，因此您甚至可以直接进行数据库查询。\nexport async function getStaticProps() {\n  // 调用外部 API 端点以获取帖子。 您可以使用任何数据获取库\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // 通过返回 { props: { posts } }，Blog 组件将在构建时接收 `posts` 作为 prop\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n\nexport default Blog"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "getStaticProps",
      "kind": "text",
      "body": "在服务器端的构建时被调用"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "增量静态再生",
      "kind": "code",
      "lang": "jsx",
      "code": "function Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li key={post.id}>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\n// 这个函数在服务器端的构建时被调用\n// 如果启用了重新验证并且有新请求进入，它可能会在无服务器功能上再次调用\nexport async function getStaticProps() {\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n    // Next.js 将尝试重新生成页面：\n    // - 当请求进来时\n    // - 最多每 10 秒一次\n    revalidate: 10, // 片刻之间\n  }\n}\n\n// 这个函数在服务器端的构建时被调用\n// 如果尚未生成路径，则可能会在无服务器函数上再次调用它\nexport async function getStaticPaths() {\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // 根据帖子获取我们要预渲染的路径\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // 我们将在构建时仅预渲染这些路径\n  // { fallback: blocking } 如果路径不存在，服务器将按需呈现页面\n  return { paths, fallback: 'blocking' }\n}\n\nexport default Blog"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "增量静态再生",
      "kind": "text",
      "body": "• 在初始请求之后和 10 秒之前对页面的任何请求也会被缓存和即时\n• 在 10 秒窗口之后，下一个请求仍将显示缓存的（陈旧的）页面\n• Next.js 在后台触发页面的重新生成\n• 一旦页面生成成功，Next.js 将使缓存失效并显示更新后的页面。如果后台重新生成失败，旧页面仍将保持不变"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "使用 useEffect 客户端数据获取",
      "kind": "code",
      "lang": "jsx",
      "code": "import { useState, useEffect } from 'react'\n\nfunction Profile() {\n  const [data, setData] = useState(null)\n  const [isLoading, setLoading] = useState(false)\n\n  useEffect(() => {\n    setLoading(true)\n    fetch('/api/profile-data')\n      .then((res) => res.json())\n      .then((data) => {\n        setData(data)\n        setLoading(false)\n      })\n  }, [])\n\n  if (isLoading) return <p>Loading...</p>\n  if (!data) return <p>No profile data</p>\n\n  return (\n    <div>\n      <h1>{data.name}</h1>\n      <p>{data.bio}</p>\n    </div>\n  )\n}"
    },
    {
      "id": "s1-20",
      "sectionId": "s1",
      "title": "使用 SWR 获取客户端数据",
      "kind": "code",
      "lang": "jsx",
      "code": "import useSWR from 'swr'\n\nconst fetcher = (...args) => fetch(...args).then((res) => res.json())\n\nfunction Profile() {\n  const { data, error } = useSWR('/api/profile-data', fetcher)\n\n  if (error) return <div>Failed to load</div>\n  if (!data) return <div>Loading...</div>\n\n  return (\n    <div>\n      <h1>{data.name}</h1>\n      <p>{data.bio}</p>\n    </div>\n  )\n}"
    },
    {
      "id": "s1-21",
      "sectionId": "s1",
      "title": "静态文件服务",
      "kind": "text",
      "body": "Next.js 可以在根目录中名为 `public` 的文件夹下提供静态文件，如图像。 然后，您的代码可以从基本 URL (`/`) 开始引用 `public` 中的文件"
    },
    {
      "id": "s1-22",
      "sectionId": "s1",
      "title": "静态文件服务",
      "kind": "code",
      "lang": "jsx",
      "code": "import Image from 'next/image'\n\nfunction Avatar() {\n  return (\n    <Image\n      src=\"/me.png\"\n      alt=\"me\"\n      width=\"64\"\n      height=\"64\"\n    />\n  )\n}\n\nexport default Avatar"
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "支持的浏览器和功能",
      "kind": "text",
      "body": "Next.js 支持零配置的现代浏览器"
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "支持的浏览器和功能",
      "kind": "text",
      "body": "• Chrome 64+\n• Edge 79+\n• Firefox 67+\n• Opera 51+\n• Safari 12+"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "支持的浏览器和功能",
      "kind": "text",
      "body": "Next.js 支持在 `package.json` 文件中配置 `Browserslist`"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "支持的浏览器和功能",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"browserslist\": [\n    \"chrome 64\",\n    \"edge 79\",\n    \"firefox 67\",\n    \"opera 51\",\n    \"safari 12\"\n  ]\n}"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "添加全局样式表",
      "kind": "text",
      "body": "如果不存在，请创建一个 `pages/_app.js` 文件。 然后，导入 `styles.css` 文件"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "添加全局样式表",
      "kind": "code",
      "lang": "jsx",
      "code": "import '../styles.css';\n\n// 在新的“pages/_app.js”文件中需要此默认导出\nexport default function MyApp({\n  Component, pageProps\n}) {\n  return <Component {...pageProps} />\n}"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "添加全局样式表",
      "kind": "text",
      "body": "例如，考虑以下名为 `styles.css` 的样式表"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "添加全局样式表",
      "kind": "code",
      "lang": "css",
      "code": "body {\n  font-family:\n    'SF Pro Text', 'SF Pro Icons',\n    'Helvetica Neue', 'Helvetica',\n    'Arial', sans-serif;\n  margin: 0 auto;\n}"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "从 node_modules 导入样式",
      "kind": "text",
      "body": "对于全局样式表，如 `bootstrap` 或 `nprogress`，您应该在 `pages/_app.js` 中导入文件"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "从 node_modules 导入样式",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport 'bootstrap/dist/css/bootstrap.css'\n\nexport default function MyApp({\n  Component, pageProps\n}) {\n  return <Component {...pageProps} />\n}"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "从 node_modules 导入样式",
      "kind": "text",
      "body": "从 <red>Next.js 9.5.4</red> 开始，您的应用程序中的任何地方都允许从 `node_modules` 导入 CSS 文件"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "添加组件级 CSS (CSS Modules)",
      "kind": "text",
      "body": "您无需担心 .error {} 与任何其他 `.css` 或 `.module.css` 文件！他将被生成 `hash` 名称"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "添加组件级 CSS (CSS Modules)",
      "kind": "code",
      "lang": "css",
      "code": ".error {\n  color: white;\n  background-color: red;\n}"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "添加组件级 CSS (CSS Modules)",
      "kind": "text",
      "body": "然后，创建 `components/Button.js`，导入并使用上面的 CSS 文件："
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "添加组件级 CSS (CSS Modules)",
      "kind": "code",
      "lang": "jsx",
      "code": "import styles from './Button.module.css'\n\nexport function Button() {\n  return (\n    <button\n      type=\"button\"\n      // 请注意“error”类\n      // 是如何作为导入的“styles”对象的属性访问的\n      className={styles.error}\n    >\n      Destroy\n    </button>\n  )\n}"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "Sass 支持",
      "kind": "text",
      "body": "Next.js 允许您使用 `.scss` 和 `.sass` 扩展名导入 Sass，可以通过 CSS 模块和 `.module.scss` 或 `.module.sass` 扩展名使用组件级 `Sass`"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "Sass 支持",
      "kind": "code",
      "lang": "shell",
      "code": "$ npm install --save-dev sass"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "Sass 支持",
      "kind": "text",
      "body": "在使用 Next.js 的内置 `Sass` 支持之前，请务必<pur>安装 `sass`</pur>"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "text",
      "body": "通过在 `next.config.js` 中使用 `sassOptions` 来实现配置 `Sass` 编译器。例如添加 `includePaths`："
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "code",
      "lang": "js",
      "code": "const path = require('path')\n\nmodule.exports = {\n  sassOptions: {\n    includePaths:\n        [path.join(__dirname, 'styles')],\n  },\n}"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "text",
      "body": "#### Sass 变量"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "code",
      "lang": "sass",
      "code": "/* variables.module.scss */\n$primary-color: #64ff00;\n\n:export {\n  primaryColor: $primary-color;\n}"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "text",
      "body": "在 `pages/_app.js` 中导入 `variables.module.scss`"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "自定义 Sass 选项",
      "kind": "code",
      "lang": "jsx",
      "code": "import variables from '../styles/variables.module.scss'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Layout color={variables.primaryColor}>\n      <Component {...pageProps} />\n    </Layout>\n  )\n}"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "CSS-in-JS",
      "kind": "text",
      "body": "最简单的一种是内联样式："
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "CSS-in-JS",
      "kind": "code",
      "lang": "jsx",
      "code": "function HiThere() {\n  return (\n    <p style={{ color: 'red' }}>hi 这里</p>\n  )\n}\n\nexport default HiThere"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "CSS-in-JS",
      "kind": "text",
      "body": "使用 [styled-jsx](https://github.com/vercel/styled-jsx) 的组件如下所示："
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "CSS-in-JS",
      "kind": "code",
      "lang": "jsx",
      "code": "function HelloWorld() {\n  return (\n    <div>\n      Hello world\n      <p>scoped!</p>\n      <style jsx>{`\n        p { color: blue; }\n        div { background: red; }\n        @media (max-width: 600px) {\n          div { background: blue; }\n        }\n      `}</style>\n      <style global jsx>{`\n        body { background: black; }\n      `}</style>\n    </div>\n  )\n}\n\nexport default HelloWorld"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "CSS-in-JS",
      "kind": "text",
      "body": "当然，你也可以使用 [styled-components](./styled-components.md)"
    },
    {
      "id": "s3-52",
      "sectionId": "s3",
      "title": "基础示例",
      "kind": "code",
      "lang": "jsx",
      "code": "// components/layout.js\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  return (\n    <>\n      <Navbar />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}"
    },
    {
      "id": "s3-53",
      "sectionId": "s3",
      "title": "带有自定义应用程序的单一共享布局",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport Layout from '../components/layout'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Layout>\n      <Component {...pageProps} />\n    </Layout>\n  )\n}"
    },
    {
      "id": "s3-54",
      "sectionId": "s3",
      "title": "使用 TypeScript",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/index.tsx\nimport type { ReactElement } from 'react'\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\nimport type { NextPageWithLayout } from './_app'\n\nconst Page: NextPageWithLayout = () => {\n  return <p>hello world</p>\n}\n\nPage.getLayout = function getLayout(page: ReactElement) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}\n\nexport default Page"
    },
    {
      "id": "s3-55",
      "sectionId": "s3",
      "title": "使用 TypeScript",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.tsx\n\nimport type { ReactElement, ReactNode } from 'react'\nimport type { NextPage } from 'next'\nimport type { AppProps } from 'next/app'\n\nexport type NextPageWithLayout<P = {}, IP = P> = NextPage<P, IP> & {\n  getLayout?: (page: ReactElement) => ReactNode\n}\n\ntype AppPropsWithLayout = AppProps & {\n  Component: NextPageWithLayout\n}\n\nexport default function MyApp({ Component, pageProps }: AppPropsWithLayout) {\n  // 使用在页面级别定义的布局（如果可用）\n  const getLayout = Component.getLayout ?? ((page) => page)\n\n  return getLayout(<Component {...pageProps} />)\n}"
    },
    {
      "id": "s3-56",
      "sectionId": "s3",
      "title": "每页布局",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/index.js\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\n\nexport default function Page() {\n  return (\n    /** Your content */\n  )\n}\n\nPage.getLayout = function getLayout(page) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}"
    },
    {
      "id": "s3-57",
      "sectionId": "s3",
      "title": "每页布局",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nexport default function MyApp({ Component, pageProps }) {\n  // 使用在页面级别定义的布局（如果可用）\n  const getLayout = Component.getLayout || ((page) => page)\n  return getLayout(<Component {...pageProps} />)\n}"
    },
    {
      "id": "s3-58",
      "sectionId": "s3",
      "title": "数据请求",
      "kind": "code",
      "lang": "jsx",
      "code": "// components/layout.js\nimport useSWR from 'swr'\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  const { data, error } = useSWR('/api/navigation', fetcher)\n  if (error) return <div>Failed to load</div>\n  if (!data) return <div>Loading...</div>\n  return (\n    <>\n      <Navbar links={data.links} />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}"
    },
    {
      "id": "s4-59",
      "sectionId": "s4",
      "title": "本地图片",
      "kind": "code",
      "lang": "jsx",
      "code": "import Image from 'next/image'\nimport profilePic from '../public/me.png'\n\nfunction Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src={profilePic}\n        alt=\"Picture of the author\"\n        // width={500} 自动提供\n        // height={500} 自动提供\n        // blurDataURL=\"data:...\" 自动提供\n        // placeholder=\"blur\" // 加载时可选的模糊处理\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}"
    },
    {
      "id": "s4-60",
      "sectionId": "s4",
      "title": "远程图片",
      "kind": "code",
      "lang": "jsx",
      "code": "import Image from 'next/image'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}"
    },
    {
      "id": "s4-61",
      "sectionId": "s4",
      "title": "远程图片",
      "kind": "text",
      "body": "要使用远程图像，`src` 属性应该是一个 `URL` 字符串，可以是相对的也可以是绝对的"
    },
    {
      "id": "s4-62",
      "sectionId": "s4",
      "title": "Priority",
      "kind": "text",
      "body": "您应该将优先级属性添加到将成为每个页面的 [Largest Contentful Paint (LCP) 元素](https://web.dev/lcp/#what-elements-are-considered)的图像。 这样做允许 Next.js 专门确定要加载的图像的优先级（例如，通过预加载标签或优先级提示），从而显着提高 LCP"
    },
    {
      "id": "s4-63",
      "sectionId": "s4",
      "title": "Priority",
      "kind": "code",
      "lang": "jsx",
      "code": "import Image from 'next/image'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n        priority\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}"
    },
    {
      "id": "s5-64",
      "sectionId": "s5",
      "title": "Google 字体",
      "kind": "text",
      "body": "自动托管任何 Google 字体。 字体包含在部署中，并从与您的部署相同的域提供服务。 浏览器不会向 Google 发送任何请求"
    },
    {
      "id": "s5-65",
      "sectionId": "s5",
      "title": "Google 字体",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport { Inter } from '@next/font/google'\n\n// 如果加载可变字体，则无需指定字体粗细\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function MyApp({\n  Component, pageProps\n}) {\n  return (\n    <main className={inter.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}"
    },
    {
      "id": "s5-66",
      "sectionId": "s5",
      "title": "指定粗细",
      "kind": "text",
      "body": "如果不能使用可变字体，则需要指定粗细："
    },
    {
      "id": "s5-67",
      "sectionId": "s5",
      "title": "指定粗细",
      "kind": "text",
      "body": "```jsx {5}\n// pages/_app.js\nimport { Roboto } from '@next/font/google'"
    },
    {
      "id": "s5-68",
      "sectionId": "s5",
      "title": "指定粗细",
      "kind": "text",
      "body": "const roboto = Roboto({\nweight: '400',\nsubsets: ['latin'],\n})"
    },
    {
      "id": "s5-69",
      "sectionId": "s5",
      "title": "指定粗细",
      "kind": "text",
      "body": "export default function MyApp({\nComponent, pageProps\n}) {\nreturn (\n<main className={roboto.className}>\n<Component {...pageProps} />\n</main>\n)\n}"
    },
    {
      "id": "s5-70",
      "sectionId": "s5",
      "title": "指定粗细",
      "kind": "code",
      "lang": "",
      "code": "\n### 数组指定多个 weight 或 style\n\n```jsx\nconst roboto = Roboto({\n  weight: ['400', '700'],\n  style: ['normal', 'italic'],\n  subsets: ['latin'],\n})"
    },
    {
      "id": "s5-71",
      "sectionId": "s5",
      "title": "在 \\<head> 中应用字体",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport { Inter } from '@next/font/google'\nconst inter = Inter({ subsets: ['latin'] })\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      <style jsx global>{`\n        html {\n          font-family: ${inter.style.fontFamily};\n        }\n      `}</style>\n      <Component {...pageProps} />\n    </>\n  )\n}"
    },
    {
      "id": "s5-72",
      "sectionId": "s5",
      "title": "单页使用",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/index.js\nimport { Inter } from '@next/font/google'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function Home() {\n  return (\n    <div className={inter.className}>\n      <p>Hello World</p>\n    </div>\n  )\n}"
    },
    {
      "id": "s5-73",
      "sectionId": "s5",
      "title": "指定一个子集",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nconst inter = Inter({ subsets: ['latin'] })"
    },
    {
      "id": "s5-74",
      "sectionId": "s5",
      "title": "指定一个子集",
      "kind": "text",
      "body": "在 `next.config.js` 中全局使用所有字体"
    },
    {
      "id": "s5-75",
      "sectionId": "s5",
      "title": "指定一个子集",
      "kind": "code",
      "lang": "js",
      "code": "// next.config.js\nmodule.exports = {\n  experimental: {\n    fontLoaders: [\n      {\n        loader: '@next/font/google',\n        options: { subsets: ['latin'] }\n      },\n    ],\n  },\n}"
    },
    {
      "id": "s5-76",
      "sectionId": "s5",
      "title": "指定一个子集",
      "kind": "text",
      "body": "如果两者都配置，则使用函数调用中的子集"
    },
    {
      "id": "s5-77",
      "sectionId": "s5",
      "title": "本地字体",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport localFont from '@next/font/local'\n\n// 字体文件可以位于“pages”内\nconst myFont = localFont({\n  src: './my-font.woff2'\n})\n\nexport default function MyApp({\n  Component, pageProps\n}) {\n  return (\n    <main className={myFont.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}"
    },
    {
      "id": "s5-78",
      "sectionId": "s5",
      "title": "本地字体",
      "kind": "text",
      "body": "如果要为单个字体系列使用多个文件，`src` 可以是一个数组："
    },
    {
      "id": "s5-79",
      "sectionId": "s5",
      "title": "本地字体",
      "kind": "code",
      "lang": "jsx",
      "code": "const roboto = localFont({\n  src: [\n    {\n      path: './Roboto-Regular.woff2',\n      weight: '400',\n      style: 'normal',\n    },\n    {\n      path: './Roboto-Italic.woff2',\n      weight: '400',\n      style: 'italic',\n    },\n    {\n      path: './Roboto-Bold.woff2',\n      weight: '700',\n      style: 'normal',\n    },\n    {\n      path: './Roboto-BoldItalic.woff2',\n      weight: '700',\n      style: 'italic',\n    },\n  ],\n})"
    },
    {
      "id": "s5-80",
      "sectionId": "s5",
      "title": "使用 Tailwind CSS",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/_app.js\nimport { Inter } from '@next/font/google'\nconst inter = Inter({\n  subsets: ['latin'],\n  variable: '--font-inter',\n});\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={`${inter.variable} font-sans`}>\n      <Component {...pageProps} />\n    </main>\n  )\n}"
    },
    {
      "id": "s5-81",
      "sectionId": "s5",
      "title": "使用 Tailwind CSS",
      "kind": "text",
      "body": "最后，将 CSS 变量添加到您的 Tailwind CSS 配置中："
    },
    {
      "id": "s5-82",
      "sectionId": "s5",
      "title": "使用 Tailwind CSS",
      "kind": "code",
      "lang": "jsx",
      "code": "// tailwind.config.js\nconst { fontFamily } = require('tailwindcss/defaultTheme')\n\nmodule.exports = {\n  content: [\n    './pages/**/*.{js,ts,jsx,tsx}',\n    './components/**/*.{js,ts,jsx,tsx}',\n  ],\n  theme: {\n    extend: {\n      fontFamily: {\n        sans: ['var(--font-inter)', ...fontFamily.sans],\n      },\n    },\n  },\n  plugins: [],\n}"
    },
    {
      "id": "s6-83",
      "sectionId": "s6",
      "title": "页面脚本",
      "kind": "code",
      "lang": "jsx",
      "code": "import Script from 'next/script'\n\nexport default function Dashboard() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n      />\n    </>\n  )\n}"
    },
    {
      "id": "s6-84",
      "sectionId": "s6",
      "title": "App 脚本",
      "kind": "text",
      "body": "要为所有路由加载第三方脚本，导入 `next/script` 并将脚本直接包含在 `pages/_app.js` 中"
    },
    {
      "id": "s6-85",
      "sectionId": "s6",
      "title": "App 脚本",
      "kind": "code",
      "lang": "jsx",
      "code": "import Script from 'next/script'\n\nexport default function MyApp({\n  Component, pageProps\n}) {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n      />\n      <Component {...pageProps} />\n    </>\n  )\n}"
    },
    {
      "id": "s6-86",
      "sectionId": "s6",
      "title": "将脚本卸载到 Web Worker（实验性的）",
      "kind": "text",
      "body": "此策略仍处于试验阶段，只有在 `next.config.js` 中启用了 `nextScriptWorkers` 标志时才能使用："
    },
    {
      "id": "s6-87",
      "sectionId": "s6",
      "title": "将脚本卸载到 Web Worker（实验性的）",
      "kind": "code",
      "lang": "js",
      "code": "module.exports = {\n  experimental: {\n    nextScriptWorkers: true,\n  },\n}"
    },
    {
      "id": "s6-88",
      "sectionId": "s6",
      "title": "将脚本卸载到 Web Worker（实验性的）",
      "kind": "text",
      "body": "设置完成后，定义 `strategy=\"worker\"` 将自动在您的应用程序中实例化 `Partytown` 并将脚本卸载到网络工作者"
    },
    {
      "id": "s6-89",
      "sectionId": "s6",
      "title": "将脚本卸载到 Web Worker（实验性的）",
      "kind": "code",
      "lang": "jsx",
      "code": "import Script from 'next/script'\n\nexport default function Home() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        strategy=\"worker\"\n      />\n    </>\n  )\n}"
    },
    {
      "id": "s6-90",
      "sectionId": "s6",
      "title": "其他属性",
      "kind": "code",
      "lang": "jsx",
      "code": "import Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        id=\"example-script\"\n        nonce=\"XUENAJFW\"\n        data-test=\"script\"\n      />\n    </>\n  )\n}"
    },
    {
      "id": "s6-91",
      "sectionId": "s6",
      "title": "内联脚本",
      "kind": "code",
      "lang": "jsx",
      "code": "<Script id=\"show-banner\">\n  {`document.getElementById('banner').classList.remove('hidden')`}\n</Script>"
    },
    {
      "id": "s6-92",
      "sectionId": "s6",
      "title": "内联脚本",
      "kind": "code",
      "lang": "jsx",
      "code": "<Script\n  id=\"show-banner\"\n  dangerouslySetInnerHTML={{\n    __html: `document.getElementById('banner').classList.remove('hidden')`,\n  }}\n/>"
    },
    {
      "id": "s6-93",
      "sectionId": "s6",
      "title": "执行附加代码",
      "kind": "code",
      "lang": "jsx",
      "code": "import Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        onLoad={() => {\n          console.log('Script has loaded')\n        }}\n      />\n    </>\n  )\n}"
    },
    {
      "id": "s7-94",
      "sectionId": "s7",
      "title": "集成 ESLint",
      "kind": "code",
      "lang": "json",
      "code": "\"scripts\": {\n  \"lint\": \"next lint\"\n}"
    },
    {
      "id": "s7-95",
      "sectionId": "s7",
      "title": "集成 ESLint",
      "kind": "text",
      "body": "然后运行 `npm run lint` 或 `yarn lint`："
    },
    {
      "id": "s7-96",
      "sectionId": "s7",
      "title": "集成 ESLint",
      "kind": "code",
      "lang": "shell",
      "code": "yarn lint\n# 你会看到这样的提示：\n#\n# ? 您想如何配置 ESLint？\n#\n# ❯   基本配置 + Core Web Vitals 规则集（推荐）\n#     基本配置\n#     None"
    },
    {
      "id": "s7-97",
      "sectionId": "s7",
      "title": "Strict",
      "kind": "text",
      "body": "Strict 严格配置：包括 Next.js 的基本 ESLint 配置以及更严格的 [Core Web Vitals 规则集](https://nextjs.org/docs/basic-features/eslint#core-web-vitals)"
    },
    {
      "id": "s7-98",
      "sectionId": "s7",
      "title": "Strict",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": \"next/core-web-vitals\"\n}"
    },
    {
      "id": "s7-99",
      "sectionId": "s7",
      "title": "Strict",
      "kind": "text",
      "body": "Base 基础配置：包括 Next.js 的基本 ESLint 配置"
    },
    {
      "id": "s7-100",
      "sectionId": "s7",
      "title": "Strict",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": \"next\"\n}"
    },
    {
      "id": "s7-101",
      "sectionId": "s7",
      "title": "Strict",
      "kind": "text",
      "body": "项目的根目录中创建一个包含所选配置的 `.eslintrc.json` 文件"
    },
    {
      "id": "s7-102",
      "sectionId": "s7",
      "title": "自定义设置",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": \"next\",\n  \"settings\": {\n    \"next\": {\n      \"rootDir\": \"packages/my-app/\"\n    }\n  }\n}"
    },
    {
      "id": "s7-103",
      "sectionId": "s7",
      "title": "自定义设置",
      "kind": "text",
      "body": "`rootDir` 可以是路径（相对或绝对）、glob（即“`packages/*/`”）或路径和/或 `glob` 数组"
    },
    {
      "id": "s7-104",
      "sectionId": "s7",
      "title": "对自定义目录和文件进行检查",
      "kind": "code",
      "lang": "js",
      "code": "module.exports = {\n  eslint: {\n    dirs: ['pages', 'utils'],\n  },\n}"
    },
    {
      "id": "s7-105",
      "sectionId": "s7",
      "title": "对自定义目录和文件进行检查",
      "kind": "text",
      "body": "在生产构建期间（`next build`）仅在“`pages`”和“`utils`”目录上运行 `ESLint`，或者使用命令"
    },
    {
      "id": "s7-106",
      "sectionId": "s7",
      "title": "对自定义目录和文件进行检查",
      "kind": "code",
      "lang": "bash",
      "code": "$ next lint --dir pages --dir utils --file bar.js"
    },
    {
      "id": "s7-107",
      "sectionId": "s7",
      "title": "禁用规则",
      "kind": "text",
      "body": "您可以使用 `.eslintrc` 中的 `rules` 属性直接更改它们："
    },
    {
      "id": "s7-108",
      "sectionId": "s7",
      "title": "禁用规则",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": \"next\",\n  \"rules\": {\n    \"react/no-unescaped-entities\": \"off\",\n    \"@next/next/no-page-custom-font\": \"off\"\n  }\n}"
    },
    {
      "id": "s7-109",
      "sectionId": "s7",
      "title": "禁用规则",
      "kind": "text",
      "body": "修改或禁用受支持的插件（`react`、`react-hooks`、`next`）提供的任何规则"
    },
    {
      "id": "s7-110",
      "sectionId": "s7",
      "title": "Core Web Vitals",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": \"next/core-web-vitals\"\n}"
    },
    {
      "id": "s7-111",
      "sectionId": "s7",
      "title": "Prettier",
      "kind": "code",
      "lang": "bash",
      "code": "npm install -S eslint-config-prettier\n# or\nyarn add --dev eslint-config-prettier"
    },
    {
      "id": "s7-112",
      "sectionId": "s7",
      "title": "Prettier",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s7-113",
      "sectionId": "s7",
      "title": "Prettier",
      "kind": "code",
      "lang": "js",
      "code": "{\n  \"extends\": [\"next\", \"prettier\"]\n}"
    },
    {
      "id": "s7-114",
      "sectionId": "s7",
      "title": "lint-staged",
      "kind": "code",
      "lang": "js",
      "code": "const path = require('path')\n\nconst buildEslintCommand = (filenames) =>\n  `next lint --fix --file ${filenames\n    .map((f) => path.relative(process.cwd(), f))\n    .join(' --file ')}`;\n\nmodule.exports = {\n  '*.{js,jsx,ts,tsx}': [buildEslintCommand],\n}"
    },
    {
      "id": "s7-115",
      "sectionId": "s7",
      "title": "lint-staged",
      "kind": "text",
      "body": "内容添加到项目根目录中的 `.lintstagedrc.js` 文件中，以指定 `--file` 标志"
    },
    {
      "id": "s8-116",
      "sectionId": "s8",
      "title": "create-next-app",
      "kind": "code",
      "lang": "bash",
      "code": "npx create-next-app@latest --ts\n# or\nyarn create next-app --typescript\n# or\npnpm create next-app --ts"
    },
    {
      "id": "s8-117",
      "sectionId": "s8",
      "title": "静态生成和服务端渲染",
      "kind": "code",
      "lang": "tsx",
      "code": "import { GetStaticProps, GetStaticPaths, GetServerSideProps } from 'next'\nexport const getStaticProps: GetStaticProps = async (context) => {\n  // ...\n}\nexport const getStaticPaths: GetStaticPaths = async () => {\n  // ...\n}\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  // ...\n}"
    },
    {
      "id": "s8-118",
      "sectionId": "s8",
      "title": "现有项目添加 ts 配置",
      "kind": "code",
      "lang": "bash",
      "code": "touch tsconfig.json"
    },
    {
      "id": "s8-119",
      "sectionId": "s8",
      "title": "现有项目添加 ts 配置",
      "kind": "text",
      "body": "您还可以通过在 `next.config.js` 文件中设置 `typescript.tsconfigPath` 属性来提供 `tsconfig.json` 文件的相对路径"
    },
    {
      "id": "s8-120",
      "sectionId": "s8",
      "title": "API 路由",
      "kind": "code",
      "lang": "tsx",
      "code": "import type {\n  NextApiRequest, NextApiResponse\n} from 'next'\n\nexport default (\n  req: NextApiRequest,\n  res: NextApiResponse\n) => {\n  res.status(200).json({ name:'John Doe' })\n}"
    },
    {
      "id": "s8-121",
      "sectionId": "s8",
      "title": "API 路由",
      "kind": "text",
      "body": "您还可以键入响应数据："
    },
    {
      "id": "s8-122",
      "sectionId": "s8",
      "title": "API 路由",
      "kind": "code",
      "lang": "tsx",
      "code": "import type {\n  NextApiRequest, NextApiResponse\n} from 'next'\n\ntype Data = {\n  name: string\n}\n\nexport default (\n  req: NextApiRequest,\n  res: NextApiResponse<Data>\n) => {\n  res.status(200).json({ name:'John Doe' })\n}"
    },
    {
      "id": "s8-123",
      "sectionId": "s8",
      "title": "自定义应用",
      "kind": "text",
      "body": "使用内置类型 `AppProps` 并将文件名更改为 `./pages/_app.tsx`，如下所示："
    },
    {
      "id": "s8-124",
      "sectionId": "s8",
      "title": "自定义应用",
      "kind": "code",
      "lang": "tsx",
      "code": "import type { AppProps } from 'next/app'\n\nexport default function MyApp({\n  Component, pageProps\n}: AppProps) {\n  return <Component {...pageProps} />\n}"
    },
    {
      "id": "s8-125",
      "sectionId": "s8",
      "title": "类型检查 next.config.js",
      "kind": "code",
      "lang": "tsx",
      "code": "// @ts-check\n/**\n * @type {import('next').NextConfig}\n **/\nconst nextConfig = {\n  /* 配置选项在这里 */\n}\n\nmodule.exports = nextConfig"
    },
    {
      "id": "s8-126",
      "sectionId": "s8",
      "title": "忽略 TypeScript 错误",
      "kind": "text",
      "body": "```tsx {3}\nmodule.exports = {\ntypescript: {\nignoreBuildErrors: true,\n},\n}"
    },
    {
      "id": "s8-127",
      "sectionId": "s8",
      "title": "忽略 TypeScript 错误",
      "kind": "code",
      "lang": "",
      "code": "\n危险地允许生产构建成功完成，即使您的项目有类型错误\n\n环境变量\n---\n\n### 加载环境变量\n\n将环境变量从 `.env.local` 加载到 `process.env` 中\n\n```ini\nDB_HOST=localhost\nDB_USER=myuser\nDB_PASS=mypassword"
    },
    {
      "id": "s8-128",
      "sectionId": "s8",
      "title": "忽略 TypeScript 错误",
      "kind": "text",
      "body": "使用环境变量"
    },
    {
      "id": "s8-129",
      "sectionId": "s8",
      "title": "忽略 TypeScript 错误",
      "kind": "code",
      "lang": "js",
      "code": "// pages/index.js\nexport async function getStaticProps() {\n  const db = await myDB.connect({\n    host: process.env.DB_HOST,\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n  })\n  // ...\n}"
    },
    {
      "id": "s8-130",
      "sectionId": "s8",
      "title": "自动扩展 .env* 文件中的变量",
      "kind": "code",
      "lang": "bash",
      "code": "# .env\nHOSTNAME=localhost\nPORT=8080\nHOST=http://$HOSTNAME:$PORT"
    },
    {
      "id": "s8-131",
      "sectionId": "s8",
      "title": "自动扩展 .env* 文件中的变量",
      "kind": "text",
      "body": "如果您尝试使用实际值中带有 `$` 的变量，则需要像这样对其进行转义：`\\$`"
    },
    {
      "id": "s8-132",
      "sectionId": "s8",
      "title": "自动扩展 .env* 文件中的变量",
      "kind": "code",
      "lang": "bash",
      "code": "# .env\nA=abc\n\n# becomes \"preabc\"\nWRONG=pre$A\n\n# becomes \"pre$A\"\nCORRECT=pre\\$A"
    },
    {
      "id": "s8-133",
      "sectionId": "s8",
      "title": "向浏览器公开环境变量",
      "kind": "text",
      "body": "为了向浏览器公开变量，您必须在变量前加上 `NEXT_PUBLIC_` 前缀"
    },
    {
      "id": "s8-134",
      "sectionId": "s8",
      "title": "向浏览器公开环境变量",
      "kind": "code",
      "lang": "bash",
      "code": "NEXT_PUBLIC_ANALYTICS_ID=abcdefghijk"
    },
    {
      "id": "s8-135",
      "sectionId": "s8",
      "title": "向浏览器公开环境变量",
      "kind": "text",
      "body": "`NEXT_PUBLIC_ANALYTICS_ID` 可以在此处使用，因为它的前缀是 `NEXT_PUBLIC_`"
    },
    {
      "id": "s8-136",
      "sectionId": "s8",
      "title": "向浏览器公开环境变量",
      "kind": "code",
      "lang": "jsx",
      "code": "// pages/index.js\nimport setupAnalyticsService from '../lib/my-analytics-service'\n\n//\n// 它将在构建时转换为 `setupAnalyticsService('abcdefghijk')`\nsetupAnalyticsService(process.env.NEXT_PUBLIC_ANALYTICS_ID)\n\nfunction HomePage() {\n  return <h1>Hello World</h1>\n}\n\nexport default HomePage"
    },
    {
      "id": "s9-137",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": "路由器将自动将名为 `index` 的文件路由到目录的根目录"
    },
    {
      "id": "s9-138",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": ":-- | --\n:-- | --\n`pages/index.js` | <pur>`/`</pur>\n`pages/blog/index.js` | <pur>`/blog`</pur>"
    },
    {
      "id": "s9-139",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": "路由器支持嵌套文件。如果创建嵌套文件夹结构，文件将以同样的方式自动路由"
    },
    {
      "id": "s9-140",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": ":-- | --\n:-- | --\n`pages/blog/first-post.js` | <pur>`/blog/first-post`</pur>\n`pages/dashboard/settings/username.js` | <pur>`/dashboard/settings/username`</pur>\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s9-141",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": "动态路由"
    },
    {
      "id": "s9-142",
      "sectionId": "s9",
      "title": "介绍",
      "kind": "text",
      "body": ":-- | --\n:-- | --\n`pages/blog/[slug].js` | <pur>`/blog/:slug`</pur> (<yel>`/blog/hello-world`</yel>)\n`pages/[username]/settings.js` | <pur>`/:username/settings`</pur> (<yel>`/foo/settings`</yel>)\n`pages/post/[...all].js` | <pur>`/post/*`</pur> (<yel>`/post/2020/id/title`</yel>)\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s9-143",
      "sectionId": "s9",
      "title": "具有动态路由的页面",
      "kind": "text",
      "body": "如果您创建一个名为 `pages/posts/[pid].js` 的文件，那么它可以在 `posts/1`、`posts/2` 等处访问"
    },
    {
      "id": "s9-144",
      "sectionId": "s9",
      "title": "具有动态路由的页面",
      "kind": "code",
      "lang": "jsx",
      "code": "import { useRouter } from 'next/router'\n\nconst Post = () => {\n  const router = useRouter()\n  const { pid } = router.query\n\n  return <p>Post: {pid}</p>\n}\n\nexport default Post"
    },
    {
      "id": "s9-145",
      "sectionId": "s9",
      "title": "具有动态路由的页面",
      "kind": "text",
      "body": "使用 `useRouter` 获取动态路由参数 `pid`"
    },
    {
      "id": "s9-146",
      "sectionId": "s9",
      "title": "页面之间的链接",
      "kind": "code",
      "lang": "jsx",
      "code": "import Link from 'next/link'\n\nexport default function Home() {\n  return (\n    <ul>\n      <li>\n        <Link href=\"/\">首页</Link>\n      </li>\n      <li>\n        <Link href=\"/about\">关于我们</Link>\n      </li>\n      <li>\n        <Link href=\"/blog/hello-world\">\n          博文\n        </Link>\n      </li>\n    </ul>\n  )\n}"
    },
    {
      "id": "s9-147",
      "sectionId": "s9",
      "title": "页面之间的链接",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s9-148",
      "sectionId": "s9",
      "title": "页面之间的链接",
      "kind": "text",
      "body": ":-- | --\n:-- | --\n`/` | <pur>`pages/index.js`</pur>\n`/about` | <pur>`pages/about.js`</pur>\n`/blog/hello-world` | <pur>`pages/blog/[slug].js`</pur>"
    },
    {
      "id": "s9-149",
      "sectionId": "s9",
      "title": "链接到动态路径",
      "kind": "code",
      "lang": "jsx",
      "code": "import Link from 'next/link'\n\nexport default function Posts({ posts }) {\n  return (\n    <Link href={`/blog/${encodeURIComponent(post.slug)}`}>\n      标题\n    </Link>\n  )\n}"
    },
    {
      "id": "s9-150",
      "sectionId": "s9",
      "title": "URL 对象",
      "kind": "code",
      "lang": "jsx",
      "code": "import Link from 'next/link'\n\nexport default function Posts({ posts }) {\n  return (\n    <Link\n      href={{\n        pathname: '/blog/[slug]',\n        query: { slug: posts.slug },\n      }}\n    >\n      标题\n    </Link>\n  )\n}"
    },
    {
      "id": "s9-151",
      "sectionId": "s9",
      "title": "动态路由",
      "kind": "text",
      "body": "考虑以下页面 `pages/post/[pid].js`："
    },
    {
      "id": "s9-152",
      "sectionId": "s9",
      "title": "动态路由",
      "kind": "code",
      "lang": "jsx",
      "code": "import { useRouter } from 'next/router'\n\nconst Post = () => {\n  const router = useRouter()\n  const { pid } = router.query\n\n  return <p>Post: {pid}</p>\n}\n\nexport default Post"
    },
    {
      "id": "s9-153",
      "sectionId": "s9",
      "title": "动态路由",
      "kind": "text",
      "body": "到动态路由的客户端导航由 `next/link` 处理"
    },
    {
      "id": "s9-154",
      "sectionId": "s9",
      "title": "动态路由",
      "kind": "code",
      "lang": "jsx",
      "code": "import Link from 'next/link'\n\nexport default function Home() {\n  return (\n    <div>\n      <Link href=\"/post/abc\">\n        转到 pages/post/[pid].js\n      </Link>\n      <Link href=\"/post/abc?foo=bar\">\n        也转到 pages/post/[pid].js\n      </Link>\n      <Link href=\"/post/abc/a-comment\">\n        转到 pages/post/[pid]/[comment].js\n      </Link>\n    </div>\n  )\n}"
    },
    {
      "id": "s9-155",
      "sectionId": "s9",
      "title": "多个动态路由",
      "kind": "text",
      "body": "工作方式相同。 页面 `pages/post/[pid]/[comment].js` 将匹配路由 `/post/abc/a-comment` 并且它的查询对象将是："
    },
    {
      "id": "s9-156",
      "sectionId": "s9",
      "title": "多个动态路由",
      "kind": "code",
      "lang": "js",
      "code": "{ \"pid\": \"abc\", \"comment\": \"a-comment\" }"
    },
    {
      "id": "s9-157",
      "sectionId": "s9",
      "title": "捕捉所有路由",
      "kind": "text",
      "body": "可以通过在括号内添加三个点 (`...`) 来扩展动态路由以捕获所有路径，`pages/post/[...slug].js` 匹配 `/post/a`，也匹配 `/post/a/b`、`/post/a/b/c` 等"
    },
    {
      "id": "s9-158",
      "sectionId": "s9",
      "title": "捕捉所有路由",
      "kind": "code",
      "lang": "js",
      "code": "// /post/a\n{ \"slug\": [\"a\"] }\n\n// /post/a/b\n{ \"slug\": [\"a\", \"b\"] }"
    },
    {
      "id": "s9-159",
      "sectionId": "s9",
      "title": "可选捕获所有路由",
      "kind": "text",
      "body": "使用 `[[...slug]]`，`pages/post/[[...slug]].js` 将匹配 `/post`、`/post/a`、`/post/a/b` 等"
    },
    {
      "id": "s9-160",
      "sectionId": "s9",
      "title": "可选捕获所有路由",
      "kind": "code",
      "lang": "js",
      "code": "// GET `/post` (empty object)\n{ }\n// `GET /post/a` (single-element array)\n{ \"slug\": [\"a\"] }\n// `GET /post/a/b` (multi-element array)\n{ \"slug\": [\"a\", \"b\"] }"
    },
    {
      "id": "s9-161",
      "sectionId": "s9",
      "title": "事件执行调整页面",
      "kind": "code",
      "lang": "jsx",
      "code": "import { useRouter } from 'next/router'\n\nexport default function ReadMore() {\n  const router = useRouter()\n\n  return (\n    <button\n      onClick={() => router.push('/about')}\n    >\n      点击这里阅读更多\n    </button>\n  )\n}"
    },
    {
      "id": "s9-162",
      "sectionId": "s9",
      "title": "浅路由",
      "kind": "code",
      "lang": "jsx",
      "code": "import { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\n// 当前网址为“/”\nexport default function Page() {\n  const router = useRouter()\n\n  useEffect(() => {\n    // 始终在第一次渲染后进行导航\n    router.push('/?counter=10', undefined, { shallow: true })\n  }, [])\n\n  useEffect(() => {\n    // counter 变了！\n  }, [router.query.counter])\n}"
    },
    {
      "id": "s9-163",
      "sectionId": "s9",
      "title": "浅路由",
      "kind": "text",
      "body": "#### 注意事项"
    },
    {
      "id": "s9-164",
      "sectionId": "s9",
      "title": "浅路由",
      "kind": "text",
      "body": "浅路由仅适用于当前页面中的 URL 更改。 例如，假设我们有另一个名为 `pages/about.js` 的页面，并且您运行以下命令："
    },
    {
      "id": "s9-165",
      "sectionId": "s9",
      "title": "浅路由",
      "kind": "code",
      "lang": "jsx",
      "code": "router.push('/?counter=10', '/about?counter=10', { shallow: true })"
    },
    {
      "id": "s9-166",
      "sectionId": "s9",
      "title": "浅路由",
      "kind": "text",
      "body": "由于这是一个新页面，它会卸载当前页面，加载新页面并等待数据获取，即使我们要求进行浅层路由"
    },
    {
      "id": "s10-167",
      "sectionId": "s10",
      "title": "另见",
      "kind": "text",
      "body": "• [Next.js 文档](https://nextjs.org/docs/getting-started)"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/nextjs.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/nextjs.md",
    "lang": "zh",
    "mode": "local"
  }
}