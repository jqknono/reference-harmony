{
  "id": "ejs",
  "name": "Ejs 备忘清单",
  "title": "[![NPM version](https://img.shields.io/npm/v/ejs.svg?style=flat)](https://www.npmjs.com/package/ejs)",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/ejs.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 2
    },
    {
      "id": "s2",
      "title": "文档",
      "startIndex": 20
    },
    {
      "id": "s3",
      "title": "客户端支持",
      "startIndex": 26
    },
    {
      "id": "s4",
      "title": "选项",
      "startIndex": 28
    },
    {
      "id": "s5",
      "title": "标签",
      "startIndex": 29
    },
    {
      "id": "s6",
      "title": "Cli",
      "startIndex": 30
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "[![NPM version](https://img.shields.io/npm/v/ejs.svg?style=flat)](https://www.npmjs.com/package/ejs)\n[![Downloads](https://img.shields.io/npm/dm/ejs.svg?style=flat)](https://www.npmjs.com/package/ejs)\n[![Repo Dependents](https://badgen.net/github/dependents-repo/mde/ejs)](https://github.com/mde/ejs/network/dependents)\n[![Github repo](https://badgen.net/badge/icon/Github?icon=github&label)](https://github.com/mde/ejs)"
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "EJS（嵌入式 JavaScript）是一种简单的模板语言，可让您使用纯 JavaScript 生成 HTML 标记\n<!--rehype:style=padding-top: 12px;-->"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Hello world - 安装",
      "kind": "code",
      "lang": "shell",
      "code": "$ npm install ejs"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "hello.ejs",
      "kind": "code",
      "lang": "ejs",
      "code": "<% if (user.email) { %>\n  <h1><%= user.email %></h1>\n<% } %>"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "命令 CLI",
      "kind": "code",
      "lang": "shell",
      "code": "$ ejs hello.ejs -o hello.html"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93",
      "kind": "code",
      "lang": "js",
      "code": "let%20ejs%20%3D%20require('ejs')%3B%0A%0Alet%20people%20%3D%20%5B'geddy'%2C%20'neil'%2C%20'alex'%5D%3B%0Alet%20tpl%20%3D%20'%3C%25%3D%20people.join(%22%2C%20%22)%3B%20%25%3E'%3B%0A%0Alet%20html%20%3D%20ejs.render(tpl%2C%20%7B%0A%20%20people%3A%20people%0A%7D)%3B%0Aconsole.log(html)%3B",
      "encoded": true
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "向 `EJS` 传递模板字符串和一些数据"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81",
      "kind": "code",
      "lang": "html",
      "code": "%3Cscript%20src%3D%22ejs.js%22%3E%3C%2Fscript%3E%0A%3Cscript%3E%0A%20%20let%20people%20%3D%20%5B'geddy'%2C%20'neil'%2C%20'alex'%5D%3B%0A%20%20let%20html%20%3D%20ejs.render(%0A%20%20%20%20'%3C%25%3D%20people.join(%22%2C%20%22)%3B%20%25%3E'%2C%0A%20%20%20%20%7B%20people%3A%20people%20%7D%0A%20%20)%3B%0A%3C%2Fscript%3E",
      "encoded": true
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "在脚本标签中使用 `ejs`"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "变量",
      "kind": "text",
      "body": "|              |                                  |\n|--------------|----------------------------------|\n| `<%= var %>` | 打印变量的值 |\n| `<%- var %>` | 打印时不进行 HTML 转义 |"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "CLI",
      "kind": "text",
      "body": "渲染并指定输出文件"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ejs hello.ejs -o hello.html"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "为其提供模板文件和数据文件"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ejs hello.ejs -f data.json -o hello.html"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "注释",
      "kind": "code",
      "lang": "ejs",
      "code": "<%# 该行将表示一条注释 %>\n\n<%# 这是一个多行 EJS 注释。\n    它可以跨越多行，\n    但不会显示\n    在最终的 HTML 输出中。\n%>"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "方法",
      "kind": "code",
      "lang": "js",
      "code": "let ejs = require('ejs');\nlet template = ejs.compile(str, options);\n\ntemplate(data);\n// => 渲染的 HTML 字符串\n\nejs.render(str, data, options);\n// => 渲染的 HTML 字符串\n\nejs.renderFile(filename, data, options,\n  function(err, str){\n      // str => 渲染的 HTML 字符串\n  }\n);"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "包括文件",
      "kind": "code",
      "lang": "ejs",
      "code": "<%- include('partials/navbar.ejs') %>"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "包含带有数据的模板："
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "ejs",
      "code": "<% include('header', { title: 'My Page' }) %>\n\n<ul>\n  <% users.forEach(function(user){ %>\n    <%- include('item', {user: user}); %>\n  <% }); %>\n</ul>"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "要包含模板，需要文件名选项，路径是相对的"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "条件句",
      "kind": "code",
      "lang": "ejs",
      "code": "<% if (userLoggedIn) { %>\n  <p>Welcome, <%= username %>!</p>\n<% } else { %>\n  <p>Please log in.</p>\n<% } %>"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "使用循环",
      "kind": "code",
      "lang": "ejs",
      "code": "<% if (userLoggedIn) { %>\n  <p>Welcome, <%= username %>!</p>\n<% } else { %>\n  <p>Please log in.</p>\n<% } %>"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9A%94%E7%AC%A6",
      "kind": "code",
      "lang": "js",
      "code": "let%20ejs%20%3D%20require('ejs')%2C%0A%20%20%20%20users%20%3D%20%5B'geddy'%2C%20'neil'%2C%20'alex'%5D%3B%0A%0A%2F%2F%20%E5%8F%AA%E9%9C%80%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%9D%BF%0Aejs.render('%3C%3F%3D%20users.join(%22%20%7C%20%22)%3B%20%3F%3E'%2C%0A%20%20%20%20%7Busers%3A%20users%7D%2C%0A%20%20%20%20%7Bdelimiter%3A%20'%3F'%7D)%3B%0A%2F%2F%20%3D%3E%20'geddy%20%7C%20neil%20%7C%20alex'%0A%0A%2F%2F%20%E6%88%96%E5%85%A8%E5%B1%80%E8%8C%83%E5%9B%B4%E5%86%85%0Aejs.delimiter%20%3D%20'%24'%3B%0Aejs.render('%3C%24%3D%20users.join(%22%20%7C%20%22)%3B%20%24%3E'%2C%0A%20%20%20%20%7Busers%3A%20users%7D)%3B%0A%2F%2F%20%3D%3E%20'geddy%20%7C%20neil%20%7C%20alex'",
      "encoded": true
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "缓存",
      "kind": "code",
      "lang": "js",
      "code": "let ejs = require('ejs'),\nLRU = require('lru-cache');\n\n// LRU 缓存具有 100 项限制\nejs.cache = LRU(100);"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "布局",
      "kind": "code",
      "lang": "ejs",
      "code": "<%- include('header'); -%>\n<h1> Title </h1>\n<p>\n  My page\n</p>\n<%- include('footer'); -%>"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "自定义文件加载器",
      "kind": "code",
      "lang": "js",
      "code": "let ejs = require('ejs');\nlet myFileLoader = function (filePath) {\n  return 'myFileLoader: ' + fs.readFileSync(filePath);\n};\n\nejs.fileLoader = myFileLoader;"
    },
    {
      "id": "s3-26",
      "sectionId": "s3",
      "title": "%E4%BE%8B%E5%AD%90",
      "kind": "code",
      "lang": "html",
      "code": "%3Cdiv%20id%3D%22output%22%3E%3C%2Fdiv%3E%0A%3Cscript%20src%3D%22ejs.min.js%22%3E%3C%2Fscript%3E%0A%3Cscript%3E%0A%20%20let%20people%20%3D%20%5B'geddy'%2C%20'neil'%2C%20'alex'%5D%2C%0A%20%20%20%20%20%20html%20%3D%20ejs.render('%3C%25%3D%20people.join(%22%2C%20%22)%3B%20%25%3E'%2C%20%7Bpeople%3A%20people%7D)%3B%0A%20%20%2F%2F%20With%20jQuery%3A%0A%20%20%24('%23output').html(html)%3B%0A%20%20%2F%2F%20Vanilla%20JS%3A%0A%20%20document.getElementById('output').innerHTML%20%3D%20html%3B%0A%3C%2Fscript%3E",
      "encoded": true
    },
    {
      "id": "s3-27",
      "sectionId": "s3",
      "title": "%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9",
      "kind": "code",
      "lang": "js",
      "code": "let%20str%20%3D%20%22Hello%20%3C%25%3D%20include('file'%2C%20%7Bperson%3A%20'John'%7D)%3B%20%25%3E%22%2C%0A%20%20%20%20%20%20fn%20%3D%20ejs.compile(str%2C%20%7Bclient%3A%20true%7D)%3B%0A%0Afn(data%2C%20null%2C%20function(path%2C%20d)%7B%20%2F%2F%20include%20callback%0A%20%20%2F%2F%20path%20-%3E%20'file'%0A%20%20%2F%2F%20d%20-%3E%20%7Bperson%3A%20'John'%7D%0A%20%20%2F%2F%20Put%20your%20code%20here%0A%20%20%2F%2F%20Return%20the%20contents%20of%20file%20as%20a%20string%0A%7D)%3B%20%2F%2F%20returns%20rendered%20string",
      "encoded": true
    },
    {
      "id": "s4-28",
      "sectionId": "s4",
      "title": "选项列表",
      "kind": "text",
      "body": "选项 | 描述\n:---|---\n`cache`              | 编译后的函数被缓存，需要文件名\n`filename`           | 由缓存用于关键缓存，并用于包含\n`root`               | 使用绝对路径（例如 `/file.ejs`）设置包含项目的根目录。 可以是一个数组来尝试解析来自多个目录的包含。\n`views`              | 解析包含相对路径时要使用的路径数组。\n`context`            | 函数执行上下文\n`compileDebug`       | 当 `false` 时，不编译任何调试工具\n`client`             | 返回独立编译的函数\n`delimiter`          | 用于内部分隔符的字符，默认为 `%`\n`openDelimiter`      | 用于打开分隔符的字符，默认为 `<`\n`closeDelimiter`     | 用于结束分隔符的字符，默认为 `>`\n`debug`              | 输出生成的函数体\n`strict`             | 当设置为 `true` 时，生成的函数处于严格模式\n`_with`              | 是否使用 `with() {}` 构造。 如果为 `false`，则局部变量将存储在局部变量对象中。 （暗示`--strict`）\n`localsName`         | 不使用时用于存储局部变量的对象的名称 默认为局部变量\n`rmWhitespace`       | 删除所有可安全删除的空格，包括前导和尾随空格。 它还为所有 `scriptlet` 标记启用了更安全版本的 `-%>` 行吸收（它不会在行中间去除新的标记行）\n`escape`             | 与 `<%=` 构造一起使用的转义函数。 它用于渲染，并在生成客户端函数时进行 `.toString()` 处理。 （默认情况下转义 XML）\n`outputFunctionName` | 设置为字符串（例如 `echo` 或 `print`），以便函数在 `scriptlet` 标签内打印输出\n`async`              | 当 `true` 时，EJS 将使用异步函数进行渲染。 （取决于 `JS` 运行时中的 `async`/`await` 支持"
    },
    {
      "id": "s5-29",
      "sectionId": "s5",
      "title": "标签列表",
      "kind": "text",
      "body": "标签 | 描述\n:---|---\n`<%`  | 'Scriptlet' 标签，用于控制流，无输出\n`<%_`  | “Whitespace Slurping”Scriptlet 标签，删除其前面的所有空格\n`<%=`  | 将值输出到模板中（HTML 转义）\n`<%-`  | 将未转义的值输出到模板中\n`<%#`  | 注释标签，不执行，不输出\n`<%%`  | 输出文字 `<%`\n`%>`  | 普通结束标签\n`-%>`  | 修剪模式（'newline slurp'）标签，修剪换行符后的内容\n`_%>`  | “Whitespace Slurping”结束标签，删除其后的所有空格"
    },
    {
      "id": "s6-30",
      "sectionId": "s6",
      "title": "Cli 列表",
      "kind": "text",
      "body": "选项 | 描述\n:---|---\n`cache`                           | 编译后的函数被缓存，需要文件名\n`-o / --output-file FILE`         | 将渲染的输出写入 FILE 而不是 stdout。\n`-f / --data-file FILE`           | 必须是 JSON 格式。 使用来自 FILE 的解析输入作为渲染数据。\n`-i / --data-input STRING`        | 必须采用 JSON 格式和 URI 编码。 使用来自 STRING 的解析输入作为渲染数据。\n`-m / --delimiter CHARACTER`      | 使用带有尖括号的 CHARACTER 来表示打开/关闭（默认为 %）。\n`-p / --open-delimiter CHARACTER` | 使用 CHARACTER 而不是左尖括号来打开。\n`-c / --close-delimiter CHARACTER` | 使用 CHARACTER 而不是右尖括号来结束。\n`-s / --strict`                   | 当设置为 `true` 时，生成的函数处于严格模式\n`-n / --no-with`                   | 对变量使用 `locals` 对象，而不是使用 `with`（隐含--strict）。\n`-l / --locals-name`               | 不使用“with”时用于存储局部变量的对象的名称。\n`-w / --rm-whitespace`             | 删除所有可安全删除的空格，包括前导和尾随空格。\n`-d / --debug`                     | 输出生成的函数体\n`-h / --help`                     | 显示此帮助消息。\n`-V/v / --version`                 | 显示 EJS 版本。"
    },
    {
      "id": "s6-31",
      "sectionId": "s6",
      "title": "",
      "kind": "text",
      "body": "使用示例："
    },
    {
      "id": "s6-32",
      "sectionId": "s6",
      "title": "",
      "kind": "code",
      "lang": "bash",
      "code": "$ ejs -p [ -c ] ./template_file.ejs -o ./output.html\n$ ejs ./test/fixtures/user.ejs name=Lerxst\n$ ejs -n -l _ ./some_template.ejs -f ./data_file.json"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/ejs.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/ejs.md",
    "lang": "zh",
    "mode": "local"
  }
}