{
  "id": "jest",
  "name": "Jest 备忘清单",
  "title": "[![NPM version](https://img.shields.io/npm/v/jest.svg?style=flat)](https://www.npmjs.com/package/jest)",
  "icon": "reference/icons/zh/jest.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 2
    },
    {
      "id": "s2",
      "title": "匹配器",
      "startIndex": 31
    },
    {
      "id": "s3",
      "title": "异步测试",
      "startIndex": 48
    },
    {
      "id": "s4",
      "title": "模拟",
      "startIndex": 58
    },
    {
      "id": "s5",
      "title": "数据驱动测试（Jest 23+）",
      "startIndex": 93
    },
    {
      "id": "s6",
      "title": "跳过测试",
      "startIndex": 97
    },
    {
      "id": "s7",
      "title": "测试有副作用的模块",
      "startIndex": 99
    },
    {
      "id": "s8",
      "title": "命令参数参考",
      "startIndex": 101
    },
    {
      "id": "s9",
      "title": "另见",
      "startIndex": 102
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "body": "[![NPM version](https://img.shields.io/npm/v/jest.svg?style=flat)](https://www.npmjs.com/package/jest)\n[![Downloads](https://img.shields.io/npm/dm/jest.svg?style=flat)](https://www.npmjs.com/package/jest)\n[![Repo Dependents](https://badgen.net/github/dependents-repo/facebook/jest)](https://github.com/facebook/jest/network/dependents)\n[![Github repo](https://badgen.net/badge/icon/Github?icon=github&label)](https://github.com/facebook/jest)"
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "body": "Jest 是一款优雅、简洁的 JavaScript 测试框架，这里介绍了它的入门和 一些 API 的索引\n<!--rehype:style=padding-top: 12px;-->"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "介绍",
      "body": "[Jest v29](https://jestjs.io/) 是一款优雅、简洁的 JavaScript 测试框架。\n\n• `无需配置` 大多数 JS 项目中即装即用，无需配置\n• `优秀接口` 从 `it` 到 `expect` - Jest 将工具包整合在一处。文档齐全、不断维护，非常不错。\n• `隔离的` 并行进行测试，发挥每一丝算力。\n• `快照` 轻松编写持续追踪大型对象的测试，并在测试旁或代码内显示实时快照。\n• `代码覆盖` 无需其他操作，您仅需添加 `--coverage` 参数来生成代码覆盖率报告。"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B",
      "body": "%60%60%60bash%0Anpm%20install%20--save-dev%20jest%0A%60%60%60%0A%0AAdd%20to%20%60package.json%60%0A%0A%60%60%60js%0A%22scripts%22%3A%20%7B%0A%20%20%22test%22%3A%20%22jest%22%0A%7D%0A%60%60%60%0A%0A%E8%BF%90%E8%A1%8C%E4%BD%A0%E7%9A%84%E6%B5%8B%E8%AF%95%0A%0A%60%60%60bash%0Anpm%20test%20--%20--watch%0A%60%60%60%0A%0A%E6%9F%A5%E7%9C%8B%3A%20%5BGetting%20started%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fgetting-started)",
      "encoded": true
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "常用命令",
      "body": "```bash\n# 指定测试文件的名称\n$ jest my-test\n# 指定测试文件的路径\n$ jest path/to/my-test.js\n# 仅运行在 hg/git 上有改动但尚未提交的文件\n$ jest -o\n# 仅运行与 fileA.js 和 fileB.js相关的测试\n$ jest --findRelatedTests fileA.js fileB.js\n# 仅运行匹配特定名称的测试用例\n$ jest -t name-of-spec\n# 运行监视模式默认执行 jest -o 监视有改动的测试\n$ jest --watch \n$ jest --watchAll # 监视所有测试\n```"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "支持驼峰和串式命名的参数",
      "body": "```bash\n# 下面给出的命令执行的结果是一样的：\n$ jest --collect-coverage\n$ jest --collectCoverage\n# 不同命名形式的参数还可以混用，如：\n$ jest --update-snapshot \\\n       --detectOpenHandles\n```"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95",
      "body": "%60%60%60js%0Adescribe('My%20work'%2C%20()%20%3D%3E%20%7B%0A%20%20test('works'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20expect(2).toEqual(2)%0A%20%20%7D)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "BDD%20%E8%AF%AD%E6%B3%95",
      "body": "%60%60%60js%20%7B2%7D%0Adescribe('My%20work'%2C%20()%20%3D%3E%20%7B%0A%20%20it('works'%2C%20()%20%3D%3E%20%7B%20%2F%2F%20%60it%60%E6%98%AF%60test%60%E7%9A%84%E5%88%AB%E5%90%8D%0A%20%20%20%20%C2%B7%C2%B7%C2%B7%0A%20%20%7D)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84",
      "body": "%60%60%60js%0Adescribe('makePoniesPink'%2C%20()%20%3D%3E%20%7B%0A%20%20beforeAll(()%20%3D%3E%20%7B%0A%20%20%20%20%2F*%20%E5%9C%A8%E6%89%80%E6%9C%89%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%89%8D%E8%BF%90%E8%A1%8C%20*%2F%0A%20%20%7D)%0A%20%20afterAll(()%20%3D%3E%20%7B%0A%20%20%20%20%2F*%20%E5%9C%A8%E6%89%80%E6%9C%89%E6%B5%8B%E8%AF%95%E5%90%8E%E8%BF%90%E8%A1%8C%20*%2F%0A%20%20%7D)%0A%20%20beforeEach(()%20%3D%3E%20%7B%0A%20%20%20%20%2F*%20%E5%9C%A8%E6%AF%8F%E6%AC%A1%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%89%8D%E8%BF%90%E8%A1%8C%20*%2F%0A%20%20%7D)%0A%20%20afterEach(()%20%3D%3E%20%7B%0A%20%20%20%20%2F*%20%E6%AF%8F%E6%AC%A1%E6%B5%8B%E8%AF%95%E5%90%8E%E8%BF%90%E8%A1%8C%20*%2F%0A%20%20%7D)%0A%20%20test('make%20each%20pony%20pink'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20actual%20%3D%20fn(%5B'Alice'%2C%20'Bob'%2C%20'Eve'%5D)%0A%20%20%20%20expect(actual).toEqual(%5B'Pink%20Alice'%2C%20'Pink%20Bob'%2C%20'Pink%20Eve'%5D)%0A%20%20%7D)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "聚焦测试",
      "body": "```js\ndescribe.only(···)\n\nit.only(···)\n// 别名: fit()\n```\n\n查看: [test.only](https://jestjs.io/docs/api#testonlyname-fn-timeout)"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "可选参数",
      "body": "| Flag                  | Description                              |\n| --------------------- | ---------------------------------------- |\n| `--coverage`          | 查看测试覆盖率摘要 |\n| `--detectOpenHandles` | 查看未关闭端口的摘要 |\n| `--runInBand`         | 一个接一个地运行所有测试 |\n| `--bail,-b`         | 失败跳出测试 |\n\n更多参数查看 [Jest CLI Options](https://jestjs.io/docs/next/cli#--bailn)"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "跳过测试",
      "body": "```js\ndescribe.skip(···)\n\nit.skip(···)\n// 别名: xit()\n```\n\n查看: [test.skip](https://jestjs.io/docs/next/api#testskipname-fn)"
    },
    {
      "id": "s1-21",
      "sectionId": "s1",
      "title": "基本测试用例",
      "body": "```js\nexpect(value).not.toBe(value)\n  .toEqual(value)\n  .toBeTruthy()\n// Errors 测试\nexpect(value).toThrow(error)\n  .toThrowErrorMatchingSnapshot()\n```"
    },
    {
      "id": "s1-22",
      "sectionId": "s1",
      "title": "快照",
      "body": "```js\nexpect(value)\n  .toMatchSnapshot()\n  .toMatchInlineSnapshot()\n```"
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "Errors",
      "body": "```js\nexpect(value)\n  .toThrow(error)\n  .toThrowErrorMatchingSnapshot()\n```"
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "Objects",
      "body": "```js\nexpect(value)\n  .toBeInstanceOf(Class)\n  .toMatchObject(object)\n  .toHaveProperty(keyPath, value)\n```"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "Objects",
      "body": "```js\nexpect(value)\n  .toContain(item)\n  .toContainEqual(item)\n  .toHaveLength(number)\n```"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "Numbers",
      "body": "```js\nexpect(value)\n  .toBeCloseTo(number, numDigits)\n  .toBeGreaterThan(number)\n  .toBeGreaterThanOrEqual(number)\n  .toBeLessThan(number)\n  .toBeLessThanOrEqual(number)\n```"
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "Booleans",
      "body": "```js\nexpect(value)\n  .toBeFalsy()\n  .toBeNull()\n  .toBeTruthy()\n  .toBeUndefined()\n  .toBeDefined()\n```"
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "Strings",
      "body": "```js\nexpect(value)\n  .toMatch(regexpOrString)\n```"
    },
    {
      "id": "s1-29",
      "sectionId": "s1",
      "title": "NaN",
      "body": "%60%60%60js%0Atest('%E5%BD%93%E5%80%BC%E4%B8%BA%20NaN%20%E6%97%B6%E9%80%9A%E8%BF%87'%2C%20()%20%3D%3E%20%7B%0A%20%20expect(NaN).toBeNaN()%3B%0A%20%20expect(1).not.toBeNaN()%3B%0A%7D)%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-30",
      "sectionId": "s1",
      "title": "Others",
      "body": "```js\nexpect.extend(matchers)\nexpect.any(constructor)\nexpect.addSnapshotSerializer(serializer)\n\nexpect.assertions(1)\n```"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "基本匹配器",
      "body": "```js\nexpect(42).toBe(42)    // 严格相等 (===)\nexpect(42).not.toBe(3) // 严格相等 (!==)\nexpect([1, 2]).toEqual([1, 2]) // 深度相等\n\n// 深度相等\nexpect({ a: undefined, b: 2 })\n  .toEqual({ b: 2 })\n\n// 严格相等 (Jest 23+)\nexpect({ a: undefined, b: 2 })\n  .not.toStrictEqual({ b: 2 })\n```\n\n[Using matchers](http://jestjs.io/docs/en/using-matchers), [matchers docs](https://jestjs.io/docs/en/expect)"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "%E7%9C%9F%E5%AE%9E%E6%80%A7",
      "body": "%60%60%60js%0A%2F%2F%20%E5%8C%B9%E9%85%8D%20if%20%E8%AF%AD%E5%8F%A5%E8%A7%86%E4%B8%BA%20true%20%E7%9A%84%E4%BB%BB%E4%BD%95%E5%86%85%E5%AE%B9%0A%2F%2F%20%EF%BC%88not%20false%E3%80%810%E3%80%81''%E3%80%81null%E3%80%81undefined%E3%80%81NaN%EF%BC%89%0Aexpect('foo').toBeTruthy()%0A%2F%2F%20%E5%8C%B9%E9%85%8D%20if%20%E8%AF%AD%E5%8F%A5%E8%A7%86%E4%B8%BA%20false%20%E7%9A%84%E4%BB%BB%E4%BD%95%E5%86%85%E5%AE%B9%0A%2F%2F%20%EF%BC%88false%E3%80%810%E3%80%81''%E3%80%81null%E3%80%81undefined%E3%80%81NaN%EF%BC%89%0Aexpect('').toBeFalsy()%0A%2F%2F%20%E4%BB%85%E5%8C%B9%E9%85%8D%20null%0Aexpect(null).toBeNull()%0A%2F%2F%20%E4%BB%85%E5%8C%B9%E9%85%8D%E6%9C%AA%E5%AE%9A%E4%B9%89%0Aexpect(undefined).toBeUndefined()%0A%2F%2F%20toBeUndefined%20%E7%9A%84%E5%8F%8D%E4%B9%89%E8%AF%8D%0Aexpect(7).toBeDefined()%0A%2F%2F%20%E5%8C%B9%E9%85%8D%E7%9C%9F%E5%81%87%0Aexpect(true).toEqual(expect.any(Boolean))%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "数字",
      "body": "```js\n// 大于\nexpect(2).toBeGreaterThan(1)\n// 大于或等于\nexpect(1).toBeGreaterThanOrEqual(1)\n// 小于\nexpect(1).toBeLessThan(2)\n// 小于或等于\nexpect(1).toBeLessThanOrEqual(1)\n// 接近于\nexpect(0.2 + 0.1).toBeCloseTo(0.3, 5)\n// 原始值的传递类型\nexpect(NaN).toEqual(expect.any(Number))\n```"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "%E5%AD%97%E7%AC%A6%E4%B8%B2",
      "body": "%60%60%60js%0A%2F%2F%20%E6%A3%80%E6%9F%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D%E3%80%82%0Aexpect('long%20string').toMatch('str')%0Aexpect('string').toEqual(expect.any(String))%0Aexpect('coffee').toMatch(%2Fff%2F)%0Aexpect('pizza').not.toMatch('coffee')%0Aexpect(%5B'pizza'%2C%20'coffee'%5D).toEqual(%0A%20%20%5B%0A%20%20%20%20expect.stringContaining('zz')%2C%20%0A%20%20%20%20expect.stringMatching(%2Fff%2F)%0A%20%20%5D%0A)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "%E6%95%B0%E7%BB%84",
      "body": "%60%60%60js%0Aexpect(%5B%5D).toEqual(expect.any(Array))%0Aconst%20exampleArray%20%3D%20%5B%0A%20%20'Alice'%2C%20'Bob'%2C%20'Eve'%0A%5D%0Aexpect(exampleArray).toHaveLength(3)%0Aexpect(exampleArray).toContain('Alice')%0Aexpect(exampleArray).toEqual(%0A%20%20expect.arrayContaining(%5B'Alice'%2C%20'Bob'%5D)%0A)%0Aexpect(%5B%7B%20a%3A%201%20%7D%2C%20%7B%20a%3A%202%20%7D%5D)%0A%20%20%20%20.toContainEqual(%7B%20a%3A%201%20%7D)%20%2F%2F%20%E5%8C%85%E5%90%AB%E7%9B%B8%E7%AD%89%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "%E5%AF%B9%E8%B1%A1",
      "body": "%60%60%60js%0Aexpect(%7B%20a%3A1%20%7D).toHaveProperty('a')%0Aexpect(%7B%20a%3A1%20%7D).toHaveProperty('a'%2C%201)%0Aexpect(%7B%20a%3A%20%7Bb%3A1%7D%20%7D).toHaveProperty('a.b')%0Aexpect(%7B%20a%3A1%2C%20b%3A2%20%7D).toMatchObject(%7Ba%3A1%7D)%0Aexpect(%7B%20a%3A1%2C%20b%3A2%20%7D).toMatchObject(%7B%0A%20%20a%3A%20expect.any(Number)%2C%0A%20%20b%3A%20expect.any(Number)%2C%0A%7D)%0Aexpect(%5B%7B%20a%3A%201%20%7D%2C%20%7B%20b%3A%202%20%7D%5D).toEqual(%5B%0A%20%20expect.objectContaining(%0A%20%20%20%20%7B%20a%3A%20expect.any(Number)%20%7D%0A%20%20)%2C%0A%20%20expect.anything()%2C%0A%5D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "%E6%A8%A1%E6%8B%9F%E5%87%BD%E6%95%B0",
      "body": "%60%60%60js%0A%2F%2F%20const%20fn%20%3D%20jest.fn()%0A%2F%2F%20const%20fn%20%3D%20jest.fn().mockName('Unicorn')%20--%20%E5%91%BD%E5%90%8D%E4%B8%BA%20mock%2C%20Jest%2022%2B%0A%2F%2F%20%E5%87%BD%E6%95%B0%E8%A2%AB%E8%B0%83%E7%94%A8%0Aexpect(fn).toBeCalled()%0A%2F%2F%20%E5%87%BD%E6%95%B0*%E6%9C%AA*%E8%B0%83%E7%94%A8%0Aexpect(fn).not.toBeCalled()%0A%2F%2F%20%E5%87%BD%E6%95%B0%E5%8F%AA%E8%A2%AB%E8%B0%83%E7%94%A8%E4%B8%80%E6%AC%A1%0Aexpect(fn).toHaveBeenCalledTimes(1)%0A%2F%2F%20%E4%BB%BB%E4%BD%95%E6%89%A7%E8%A1%8C%E9%83%BD%E5%B8%A6%E6%9C%89%E8%BF%99%E4%BA%9B%E5%8F%82%E6%95%B0%0Aexpect(fn).toBeCalledWith(arg1%2C%20arg2)%0A%2F%2F%20%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8C%E6%98%AF%E7%94%A8%E8%BF%99%E4%BA%9B%E5%8F%82%E6%95%B0%0Aexpect(fn).toHaveBeenLastCalledWith(arg1%2C%20arg2)%0A%2F%2F%20%E7%AC%AC%20N%20%E4%B8%AA%E6%89%A7%E8%A1%8C%E5%B8%A6%E6%9C%89%E8%BF%99%E4%BA%9B%E5%8F%82%E6%95%B0%EF%BC%88Jest%2023%2B%EF%BC%89%0Aexpect(fn).toHaveBeenNthCalledWith(callNumber%2C%20args)%0A%2F%2F%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E6%B2%A1%E6%9C%89%E6%8A%9B%E5%87%BA%E9%94%99%E8%AF%AF%EF%BC%88Jest%2023%2B%EF%BC%89%0Aexpect(fn).toHaveReturnedTimes(2)%0A%2F%2F%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%80%BC%EF%BC%88Jest%2023%2B%EF%BC%89%0Aexpect(fn).toHaveReturnedWith(value)%0A%2F%2F%20%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%80%BC%EF%BC%88Jest%2023%2B%EF%BC%89%0Aexpect(fn).toHaveLastReturnedWith(value)%0A%2F%2F%20%E7%AC%AC%20N%20%E4%B8%AA%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%80%BC%EF%BC%88Jest%2023%2B%EF%BC%89%0Aexpect(fn).toHaveNthReturnedWith(value)%0Aexpect(fn.mock.calls).toEqual(%5B%0A%20%20%5B'first'%2C%20'call'%2C%20'args'%5D%2C%0A%20%20%5B'second'%2C%20'call'%2C%20'args'%5D%2C%0A%5D)%20%2F%2F%20%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8%0A%2F%2F%20fn.mock.calls%5B0%5D%5B0%5D%20%E2%80%94%20%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%B0%83%E7%94%A8%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%0Aexpect(fn.mock.calls%5B0%5D%5B0%5D).toBe(2)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "别名",
      "body": "• `toBeCalled` → `toHaveBeenCalled`\n• `toBeCalledWith` → `toHaveBeenCalledWith`\n• `lastCalledWith` → `toHaveBeenLastCalledWith`\n• `nthCalledWith` → `toHaveBeenNthCalledWith`\n• `toReturnTimes` → `toHaveReturnedTimes`\n• `toReturnWith` → `toHaveReturnedWith`\n• `lastReturnedWith` → `toHaveLastReturnedWith`\n• `nthReturnedWith` → `toHaveNthReturnedWith`"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "%E6%9D%82%E9%A1%B9",
      "body": "%60%60%60js%0A%2F%2F%20%E6%A3%80%E6%9F%A5%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%98%AF%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82%0Aexpect(new%20A()).toBeInstanceOf(A)%0A%0A%2F%2F%20%E6%A3%80%E6%9F%A5%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%98%AF%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82%0Aexpect(()%20%3D%3E%20%7B%7D).toEqual(%0A%20%20expect.any(Function)%0A)%0A%0A%2F%2F%20%E5%8C%B9%E9%85%8D%E9%99%A4%20null%20%E6%88%96%20undefined%20%E4%B9%8B%E5%A4%96%E7%9A%84%E4%BB%BB%E4%BD%95%E5%86%85%E5%AE%B9%0Aexpect('pizza').toEqual(expect.anything())%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "快照",
      "body": "```js\n// 这可确保某个值与最近的快照匹配。\nexpect(node).toMatchSnapshot()\n\n// Jest 23+\nexpect(user).toMatchSnapshot({\n  date: expect.any(Date),\n})\n\n// 确保值与最近的快照匹配。\nexpect(user).toMatchInlineSnapshot()\n```"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "Promise%20%E5%8C%B9%E9%85%8D%E5%99%A8%EF%BC%88Jest%2020%2B%EF%BC%89",
      "body": "%60%60%60js%0Atest('resolve%20to%20lemon'%2C%20()%20%3D%3E%20%7B%0A%20%20%2F%2F%20%E9%AA%8C%E8%AF%81%E5%9C%A8%E6%B5%8B%E8%AF%95%E6%9C%9F%E9%97%B4%E6%98%AF%E5%90%A6%E8%B0%83%E7%94%A8%E4%BA%86%E4%B8%80%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%96%AD%E8%A8%80%E3%80%82%0A%20%20expect.assertions(1)%0A%20%20%2F%2F%20%E7%A1%AE%E4%BF%9D%E6%B7%BB%E5%8A%A0return%E8%AF%AD%E5%8F%A5%0A%20%20return%20expect(Promise.resolve('lemon'))%0A%20%20%20%20%20%20%20%20%20%20%20%20.resolves.toBe('lemon')%0A%0A%20%20return%20expect(Promise.reject('octopus'))%0A%20%20%20%20%20%20%20%20%20%20%20%20.rejects.toBeDefined()%0A%0A%20%20return%20expect(Promise.reject(%0A%20%20%20%20Error('pizza')%0A%20%20)).rejects.toThrow()%0A%7D)%0A%60%60%60%0A%0A%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%20async%2Fawait%3A%0A%0A%60%60%60js%0Atest('resolve%20to%20lemon'%2C%20async%20()%20%3D%3E%20%7B%0A%20%20expect.assertions(2)%0A%20%20await%20expect(Promise.resolve('lemon'))%0A%20%20%20%20%20%20%20%20%20%20.resolves.toBe('lemon')%0A%0A%20%20await%20expect(Promise.resolve('lemon'))%0A%20%20%20%20%20%20%20%20%20%20.resolves.not.toBe('octopus')%0A%7D)%0A%60%60%60%0A%0A%5Bresolves%20%E6%96%87%E6%A1%A3%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fexpect%23resolves)",
      "encoded": true
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "%E4%BE%8B%E5%A4%96",
      "body": "%60%60%60js%0A%2F%2F%20const%20fn%20%3D%20()%20%3D%3E%20%7B%0A%2F%2F%20%20%20%20throw%20new%20Error('Out%20of%20cheese!')%0A%2F%2F%20%7D%0A%0Aexpect(fn).toThrow()%0Aexpect(fn).toThrow('Out%20of%20cheese')%0A%0A%2F%2F%20%E6%B5%8B%E8%AF%95%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF%E5%9C%A8%E6%9F%90%E5%A4%84%E8%AF%B4%E2%80%9Ccheese%E2%80%9D%EF%BC%9A%E8%BF%99%E4%BA%9B%E6%98%AF%E7%AD%89%E4%BB%B7%E7%9A%84%0Aexpect(fn).toThrowError(%2Fcheese%2F)%3B%0Aexpect(fn).toThrowError('cheese')%3B%0A%0A%2F%2F%20%E6%B5%8B%E8%AF%95%E5%87%86%E7%A1%AE%E7%9A%84%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%0Aexpect(fn).toThrowError(%0A%20%20%2F%5EOut%20of%20cheese!%24%2F%0A)%3B%0Aexpect(fn).toThrowError(%0A%20%20new%20Error('Out%20of%20cheese!')%0A)%3B%0A%0A%2F%2F%20%E6%B5%8B%E8%AF%95%E5%87%BD%E6%95%B0%E5%9C%A8%E8%B0%83%E7%94%A8%E6%97%B6%E6%98%AF%E5%90%A6%E6%8A%9B%E5%87%BA%E4%B8%8E%E6%9C%80%E6%96%B0%E5%BF%AB%E7%85%A7%E5%8C%B9%E9%85%8D%E7%9A%84%E9%94%99%E8%AF%AF%E3%80%82%0Aexpect(fn).toThrowErrorMatchingSnapshot()%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "别名",
      "body": "• `toThrowError` → `toThrow`"
    },
    {
      "id": "s3-48",
      "sectionId": "s3",
      "title": "%E5%AE%9E%E4%BE%8B",
      "body": "%E5%9C%A8%E5%BC%82%E6%AD%A5%E6%B5%8B%E8%AF%95%E4%B8%AD%E6%8C%87%E5%AE%9A%E4%B8%80%E4%BA%9B%E9%A2%84%E6%9C%9F%E7%9A%84%E6%96%AD%E8%A8%80%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BE%88%E5%A5%BD%E7%9A%84%E5%81%9A%E6%B3%95%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%9A%84%E6%96%AD%E8%A8%80%E6%A0%B9%E6%9C%AC%E6%B2%A1%E6%9C%89%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E6%B5%8B%E8%AF%95%E5%B0%86%E4%BC%9A%E5%A4%B1%E8%B4%A5%E3%80%82%0A%0A%60%60%60js%0Atest('async%20test'%2C%20()%20%3D%3E%20%7B%0A%20%20%2F%2F%20%E5%9C%A8%E6%B5%8B%E8%AF%95%E6%9C%9F%E9%97%B4%E6%81%B0%E5%A5%BD%E8%B0%83%E7%94%A8%E4%BA%86%E4%B8%89%E4%B8%AA%E6%96%AD%E8%A8%80%0A%20%20expect.assertions(3)%20%0A%20%20%2F%2F%20%E6%88%96%E8%80%85%20-%20%E5%9C%A8%E6%B5%8B%E8%AF%95%E6%9C%9F%E9%97%B4%E8%87%B3%E5%B0%91%E8%B0%83%E7%94%A8%E4%B8%80%E4%B8%AA%E6%96%AD%E8%A8%80%0A%20%20expect.hasAssertions()%0A%20%20%2F%2F%20%E4%BD%A0%E7%9A%84%E5%BC%82%E6%AD%A5%E6%B5%8B%E8%AF%95%0A%7D)%0A%60%60%60%0A%0A%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%8C%E6%82%A8%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E4%BB%BB%E4%BD%95%20%60describe%60%20%E5%92%8C%20%60test%60%20%E4%B9%8B%E5%A4%96%E5%AF%B9%E6%AF%8F%E4%B8%AA%E6%96%87%E4%BB%B6%E6%89%A7%E8%A1%8C%E6%AD%A4%E6%93%8D%E4%BD%9C%EF%BC%9A%0A%0A%60%60%60js%0AbeforeEach(expect.hasAssertions)%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E9%AA%8C%E8%AF%81%E6%AF%8F%E4%B8%AA%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E8%87%B3%E5%B0%91%E5%AD%98%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%96%AD%E8%A8%80%E3%80%82%20%E5%AE%83%E8%BF%98%E5%8F%AF%E4%BB%A5%E4%B8%8E%E6%9B%B4%E5%85%B7%E4%BD%93%E7%9A%84%20%60expect.assertions(3)%60%20%E5%A3%B0%E6%98%8E%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8%E3%80%82%0A%E8%AF%B7%E5%8F%82%E9%98%85%20Jest%20%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%20%5B%E6%9B%B4%E5%A4%9A%E7%A4%BA%E4%BE%8B%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Ftutorial-async)",
      "encoded": true
    },
    {
      "id": "s3-53",
      "sectionId": "s3",
      "title": "async%2Fawait",
      "body": "%60%60%60js%0Atest('async%20test'%2C%20async%20()%20%3D%3E%20%7B%0A%20%20expect.assertions(1)%0A%0A%20%20const%20result%20%3D%20await%20runAsyncOperation()%0A%20%20expect(result).toBe(true)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s3-54",
      "sectionId": "s3",
      "title": "done()%20%E5%9B%9E%E8%B0%83",
      "body": "%60%60%60js%0Atest('async%20test'%2C%20(done)%20%3D%3E%20%7B%0A%20%20expect.assertions(1)%0A%0A%20%20runAsyncOperation()%0A%20%20%0A%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20const%20res%20%3D%20getAsyncOperatResult()%0A%20%20%20%20%20%20expect(res).toBe(true)%0A%20%20%20%20%20%20done()%0A%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20done.fail(err)%0A%20%20%20%20%7D%0A%20%20%7D)%0A%7D)%0A%60%60%60%0A%0A%E5%B0%86%E6%96%AD%E8%A8%80%E5%8C%85%E8%A3%85%E5%9C%A8%20%60try%2Fcatch%60%20%E5%9D%97%E4%B8%AD%EF%BC%8C%E5%90%A6%E5%88%99%20%60Jest%60%20%E5%B0%86%E5%BF%BD%E7%95%A5%E5%A4%B1%E8%B4%A5",
      "encoded": true
    },
    {
      "id": "s3-56",
      "sectionId": "s3",
      "title": "Promises",
      "body": "%60%60%60js%0Atest('async%20test'%2C%20()%20%3D%3E%20%7B%0A%20%20expect.assertions(1)%0A%0A%20%20return%20runAsyncOperation().then((result)%20%3D%3E%20%7B%0A%20%20%20%20expect(result).toBe(true)%0A%20%20%7D)%0A%7D)%0A%60%60%60%0A%0A%E4%BB%8E%E4%BD%A0%E7%9A%84%E6%B5%8B%E8%AF%95%E4%B8%AD%20_%E8%BF%94%E5%9B%9E_%20%E4%B8%80%E4%B8%AA%20%60Promise%60",
      "encoded": true
    },
    {
      "id": "s4-58",
      "sectionId": "s4",
      "title": "%E6%A8%A1%E6%8B%9F%E5%87%BD%E6%95%B0",
      "body": "%60%60%60js%0Atest('call%20the%20callback'%2C%20()%20%3D%3E%20%7B%0A%20%20const%20callback%20%3D%20jest.fn()%0A%20%20fn(callback)%0A%20%20expect(callback).toBeCalled()%0A%20%20expect(callback.mock.calls%5B0%5D%5B1%5D.baz)%0A%20%20%20%20.toBe('pizza')%20%2F%2F%20%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%B0%83%E7%94%A8%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0%0A%20%20%0A%20%20%2F%2F%20%E5%8C%B9%E9%85%8D%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E4%BD%86%E5%BF%BD%E7%95%A5%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0%0A%20%20expect(callback)%0A%20%20%20%20.toHaveBeenLastCalledWith(%0A%20%20%20%20%20%20'meal'%2C%0A%20%20%20%20%20%20expect.anything()%2C%0A%20%20%20%20%20%20'margarita'%0A%20%20%20%20)%0A%7D)%0A%60%60%60%0A%0A%E6%82%A8%E8%BF%98%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%BF%AB%E7%85%A7%EF%BC%9A%0A%0A%60%60%60js%0Atest('call%20the%20callback'%2C%20()%20%3D%3E%20%7B%0A%20%20%2F%2F%20mockName%20%E5%9C%A8%20Jest%2022%2B%20%E4%B8%AD%E5%8F%AF%E7%94%A8%0A%20%20const%20callback%20%3D%20jest.fn()%0A%20%20%20%20.mockName('Unicorn')%0A%0A%20%20fn(callback)%0A%20%20expect(callback).toMatchSnapshot()%0A%20%20%2F%2F%20-%3E%0A%20%20%2F%2F%20%5BMockFunction%20Unicorn%5D%20%7B%0A%20%20%2F%2F%20%20%20%22calls%22%3A%20Array%20%5B%0A%20%20%2F%2F%20...%0A%7D)%0A%60%60%60%0A%0A%E5%B9%B6%E5%B0%86%E5%AE%9E%E7%8E%B0%E4%BC%A0%E9%80%92%E7%BB%99%20%60jest.fn%60%20%E5%87%BD%E6%95%B0%EF%BC%9A%0A%0A%60%60%60js%0Aconst%20callback%20%3D%20jest.fn(()%20%3D%3E%20true)%0A%60%60%60%0A%0A%5B%E6%A8%A1%E6%8B%9F%E5%87%BD%E6%95%B0%E6%96%87%E6%A1%A3%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fmock-function-api)",
      "encoded": true
    },
    {
      "id": "s4-64",
      "sectionId": "s4",
      "title": "%E8%BF%94%E5%9B%9E%E3%80%81%E8%A7%A3%E6%9E%90%E5%92%8C%E6%8B%92%E7%BB%9D%E5%80%BC",
      "body": "%E6%82%A8%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%8F%AF%E4%BB%A5%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%9A%0A%0A%60%60%60js%0Aconst%20callback%0A%20%20%20%20%3D%20jest.fn().mockReturnValue(true)%0A%0Aconst%20callbackOnce%0A%20%20%20%20%3D%20jest.fn().mockReturnValueOnce(true)%0A%60%60%60%0A%0A%E6%88%96%E8%A7%A3%E6%9E%90%E5%80%BC%EF%BC%9A%0A%0A%60%60%60js%0Aconst%20promise%0A%20%20%20%20%3D%20jest.fn().mockResolvedValue(true)%0A%0Aconst%20promiseOnce%0A%20%20%20%20%3D%20jest.fn().mockResolvedValueOnce(true)%0A%60%60%60%0A%0A%E4%BB%96%E4%BB%AC%E7%94%9A%E8%87%B3%E5%8F%AF%E4%BB%A5%E6%8B%92%E7%BB%9D%E5%80%BC%EF%BC%9A%0A%0A%60%60%60js%0Aconst%20failedPromise%20%3D%0A%20%20jest.fn().mockRejectedValue('Error')%0A%0Aconst%20failedPromiseOnce%20%3D%0A%20%20jest.fn().mockRejectedValueOnce('Error')%0A%60%60%60%0A%0A%E4%BD%A0%E7%94%9A%E8%87%B3%E5%8F%AF%E4%BB%A5%E7%BB%93%E5%90%88%E8%BF%99%E4%BA%9B%EF%BC%9A%0A%0A%60%60%60js%0Aconst%20callback%20%3D%20jest.fn()%0A%20%20%20%20%20%20%20%20.mockReturnValueOnce(false)%0A%20%20%20%20%20%20%20%20.mockReturnValue(true)%0A%2F%2F%20-%3E%0A%2F%2F%20%20call%201%3A%20false%0A%2F%2F%20%20call%202%2B%3A%20true%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-72",
      "sectionId": "s4",
      "title": "%E4%BD%BF%E7%94%A8%20%60jest.mock%60%20%E6%96%B9%E6%B3%95%E6%A8%A1%E6%8B%9F%E6%A8%A1%E5%9D%97",
      "body": "%60%60%60js%0A%2F%2F%20%E5%8E%9F%E6%9D%A5%E7%9A%84%20lodash%2Fmemoize%20%E5%BA%94%E8%AF%A5%E5%AD%98%E5%9C%A8%0Ajest.mock(%0A%20%20'lodash%2Fmemoize'%2C%0A%20%20()%20%3D%3E%20(a)%20%3D%3E%20a%0A)%0A%2F%2F%20%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8E%9F%E5%A7%8B%E7%9A%84%20lodash%2Fmemoize%0Ajest.mock(%0A%20%20'lodash%2Fmemoize'%2C%0A%20%20()%20%3D%3E%20(a)%20%3D%3E%20a%2C%0A%20%20%7B%20virtual%3A%20true%20%7D%0A)%0A%60%60%60%0A%0A%E6%B3%A8%E6%84%8F%EF%BC%9A%E5%BD%93%E4%BD%BF%E7%94%A8%20%60babel-jest%60%20%E6%97%B6%EF%BC%8C%E5%AF%B9%20%5B%60jest.mock%60%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fjest-object%23jestmockmodulename-factory-options)%20%E7%9A%84%E8%B0%83%E7%94%A8%E5%B0%86%E8%87%AA%E5%8A%A8%E6%8F%90%E5%8D%87%E5%88%B0%E4%BB%A3%E7%A0%81%E5%9D%97%E7%9A%84%E9%A1%B6%E9%83%A8%E3%80%82%20%E5%A6%82%E6%9E%9C%E6%82%A8%E6%83%B3%E6%98%8E%E7%A1%AE%E9%81%BF%E5%85%8D%E8%BF%99%E7%A7%8D%E8%A1%8C%E4%B8%BA%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%20%60jest.doMock%60%E3%80%82",
      "encoded": true
    },
    {
      "id": "s4-74",
      "sectionId": "s4",
      "title": "%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%8B%9F%E6%96%87%E4%BB%B6%E6%A8%A1%E6%8B%9F%E6%A8%A1%E5%9D%97",
      "body": "%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BC%BC%20%60__mocks__%2Flodash%2Fmemoize.js%60%20%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%9A%0A%0A%60%60%60js%0Amodule.exports%20%3D%20(a)%20%3D%3E%20a%0A%60%60%60%0A%0A%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%82%A8%E7%9A%84%E6%B5%8B%E8%AF%95%E4%B8%AD%EF%BC%9A%0A%0A%60%60%60js%0Ajest.mock('lodash%2Fmemoize')%0A%60%60%60%0A%0A%E6%B3%A8%E6%84%8F%EF%BC%9A%E5%BD%93%E4%BD%BF%E7%94%A8%20%60babel-jest%60%20%E6%97%B6%EF%BC%8C%E5%AF%B9%20%60jest.mock%60%20%E7%9A%84%E8%B0%83%E7%94%A8%E5%B0%86%E8%87%AA%E5%8A%A8%E6%8F%90%E5%8D%87%E5%88%B0%E4%BB%A3%E7%A0%81%E5%9D%97%E7%9A%84%E9%A1%B6%E9%83%A8%E3%80%82%20%E5%A6%82%E6%9E%9C%E6%82%A8%E6%83%B3%E6%98%8E%E7%A1%AE%E9%81%BF%E5%85%8D%E8%BF%99%E7%A7%8D%E8%A1%8C%E4%B8%BA%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%20%60jest.doMock%60%E3%80%82%5B%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E6%96%87%E6%A1%A3%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fmanual-mocks)",
      "encoded": true
    },
    {
      "id": "s4-79",
      "sectionId": "s4",
      "title": "%E6%A8%A1%E6%8B%9F%20getters%20%E5%92%8C%20setters",
      "body": "%60%60%60js%0Aconst%20getTitle%20%3D%20jest.fn(()%20%3D%3E%20'pizza')%0Aconst%20setTitle%20%3D%20jest.fn()%0Aconst%20location%20%3D%20%7B%7D%0AObject.defineProperty(location%2C%20'title'%2C%20%7B%0A%20%20get%3A%20getTitle%2C%0A%20%20set%3A%20setTitle%2C%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-80",
      "sectionId": "s4",
      "title": "%E6%A8%A1%E6%8B%9F%20getter%20%E5%92%8C%20setter%20(Jest%2022.1.0%2B)",
      "body": "%60%60%60js%0Aconst%20location%20%3D%20%7B%7D%0Aconst%20getTitle%20%3D%20jest%0A%20%20%20%20.spyOn(location%2C%20'title'%2C%20'get')%0A%20%20%20%20.mockImplementation(()%20%3D%3E%20'pizza')%0Aconst%20setTitle%20%3D%20jest%0A%20%20%20%20.spyOn(location%2C%20'title'%2C%20'set')%0A%20%20%20%20.mockImplementation(()%20%3D%3E%20%7B%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-81",
      "sectionId": "s4",
      "title": "%E5%AE%9A%E6%97%B6%E5%99%A8%E6%A8%A1%E6%8B%9F",
      "body": "%E4%B8%BA%E4%BD%BF%E7%94%A8%E6%9C%AC%E6%9C%BA%E8%AE%A1%E6%97%B6%E5%99%A8%E5%87%BD%E6%95%B0%EF%BC%88%60setTimeout%60%E3%80%81%60setInterval%60%E3%80%81%60clearTimeout%60%E3%80%81%60clearInterval%60%EF%BC%89%E7%9A%84%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E5%90%8C%E6%AD%A5%E6%B5%8B%E8%AF%95%E3%80%82%0A%0A%60%60%60js%0A%2F%2F%20%E5%90%AF%E7%94%A8%E5%81%87%E8%AE%A1%E6%97%B6%E5%99%A8%0Ajest.useFakeTimers()%0Atest('kill%20the%20time'%2C%20()%20%3D%3E%20%7B%0A%20%20const%20callback%20%3D%20jest.fn()%0A%20%20%2F%2F%20%E8%BF%90%E8%A1%8C%E4%BD%BF%E7%94%A8%20setTimeout%E6%88%96setInterval%20%E7%9A%84%E4%BB%A3%E7%A0%81%0A%20%20const%20actual%20%0A%20%20%20%20%3D%20someFunctionThatUseTimers(callback)%0A%20%20%2F%2F%20%E5%BF%AB%E8%BF%9B%E7%9B%B4%E5%88%B0%E6%89%80%E6%9C%89%E5%AE%9A%E6%97%B6%E5%99%A8%E9%83%BD%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%AF%95%0A%20%20jest.runAllTimers()%0A%20%20%2F%2F%20%E5%90%8C%E6%AD%A5%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%9C%0A%20%20expect(callback).toHaveBeenCalledTimes(1)%0A%7D)%0A%60%60%60%0A%0A%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%20%5BadvanceTimersByTime()%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Ftimer-mocks%23advance-timers-by-time)%20%E6%8C%89%E6%97%B6%E9%97%B4%E8%B0%83%E6%95%B4%E8%AE%A1%E6%97%B6%E5%99%A8%EF%BC%9A%0A%0A%60%60%60js%0A%2F%2F%20%E5%90%AF%E7%94%A8%E5%81%87%E8%AE%A1%E6%97%B6%E5%99%A8%0Ajest.useFakeTimers()%0Atest('kill%20the%20time'%2C%20()%20%3D%3E%20%7B%0A%20%20const%20callback%20%3D%20jest.fn()%0A%20%20%2F%2F%20%E8%BF%90%E8%A1%8C%E4%BD%BF%E7%94%A8%20setTimeout%E6%88%96setInterval%20%E7%9A%84%E4%BB%A3%E7%A0%81%0A%20%20const%20actual%20%0A%20%20%20%20%3D%20someFunctionThatUseTimers(callback)%0A%20%20%2F%2F%20%E5%BF%AB%E8%BF%9B%20250%20%E6%AF%AB%E7%A7%92%0A%20%20jest.advanceTimersByTime(250)%0A%20%20%2F%2F%20%E5%90%8C%E6%AD%A5%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%9C%0A%20%20expect(callback).toHaveBeenCalledTimes(1)%0A%7D)%0A%60%60%60%0A%0A%3E%20%E5%AF%B9%E4%BA%8E%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%20%5Bjest.runOnlyPendingTimers()%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Ftimer-mocks%23run-pending-timers)%E3%80%82%0A%0A**%E6%B3%A8%E6%84%8F%EF%BC%9A**%20%E6%82%A8%E5%BA%94%E8%AF%A5%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E4%B8%AD%E8%B0%83%E7%94%A8%20%60jest.useFakeTimers()%60%20%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%85%B6%E4%BB%96%E5%81%87%E8%AE%A1%E6%97%B6%E5%99%A8%E6%96%B9%E6%B3%95%E3%80%82",
      "encoded": true
    },
    {
      "id": "s4-87",
      "sectionId": "s4",
      "title": "%E6%A8%A1%E6%8B%9F%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95",
      "body": "%60%60%60js%0Aconst%20spy%20%3D%20jest.spyOn(console%2C%20'log')%0A%20%20.mockImplementation(()%20%3D%3E%20%7B%7D)%0A%0Aexpect(console.log.mock.calls)%0A%20%20.toEqual(%5B%5B'dope'%5D%2C%20%5B'nope'%5D%5D)%0Aspy.mockRestore()%0A%60%60%60%0A%0A%60%60%60js%0Aconst%20spy%20%3D%20jest.spyOn(ajax%2C%20'request')%0A%20%20.mockImplementation(%0A%20%20%20%20()%20%3D%3E%20Promise.resolve(%7Bsuccess%3A%20true%7D)%0A%20%20)%0A%0Aexpect(spy).toHaveBeenCalled()%0Aspy.mockRestore()%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-88",
      "sectionId": "s4",
      "title": "清除和恢复模拟",
      "body": "对于一个模拟\n\n```js\n// 清除模拟使用日期\n// （fn.mock.calls、fn.mock.instances）\nfn.mockClear()\n\n// 清除并删除任何模拟的返回值或实现\nfn.mockReset()\n\n// 重置并恢复初始实现\nfn.mockRestore()\n```\n\n> 注意：`mockRestore` 仅适用于由`jest.spyOn` 创建的模拟。对于所有模拟：\n\n```js\n// 清除所有 mock 的 \n// mock.calls、mock.instances、\n// mock.contexts 和 mock.results 属性。\njest.clearAllMocks()\n// 重置所有模拟的状态。\njest.resetAllMocks()\n// 将所有模拟恢复到其原始值。\njest.restoreAllMocks()\n```"
    },
    {
      "id": "s4-92",
      "sectionId": "s4",
      "title": "%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%8B%9F%E6%97%B6%E8%AE%BF%E9%97%AE%E5%8E%9F%E5%A7%8B%E6%A8%A1%E5%9D%97",
      "body": "%60%60%60js%0Ajest.mock('fs')%0A%2F%2F%20%E6%A8%A1%E6%8B%9F%E6%A8%A1%E5%9D%97%0Aconst%20fs%20%3D%20require('fs')%0A%2F%2F%20%E5%8E%9F%E5%A7%8B%E6%A8%A1%E5%9D%97%0Aconst%20fs%20%3D%20require.requireActual('fs')%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-93",
      "sectionId": "s5",
      "title": "%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%90%E8%A1%8C%E7%9B%B8%E5%90%8C%E7%9A%84%E6%B5%8B%E8%AF%95",
      "body": "%60%60%60js%0Atest.each(%5B%0A%20%20%5B1%2C%201%2C%202%5D%2C%0A%20%20%5B1%2C%202%2C%203%5D%2C%0A%20%20%5B2%2C%201%2C%203%5D%2C%0A%5D)('.add(%25s%2C%20%25s)'%2C%20(a%2C%20b%2C%20expected)%20%3D%3E%20%7B%0A%20%20expect(a%20%2B%20b).toBe(expected)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-94",
      "sectionId": "s5",
      "title": "%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E6%96%87%E5%AD%97%E7%9B%B8%E5%90%8C",
      "body": "%60%60%60js%0Atest.each%60%0A%20%20a%20%20%20%20%7C%20b%20%20%20%20%7C%20expected%0A%20%20%24%7B1%7D%20%7C%20%24%7B1%7D%20%7C%20%24%7B2%7D%0A%20%20%24%7B1%7D%20%7C%20%24%7B2%7D%20%7C%20%24%7B3%7D%0A%20%20%24%7B2%7D%20%7C%20%24%7B1%7D%20%7C%20%24%7B3%7D%0A%60('returns%20%24expected%20when%20%24a%20is%20added%20%24b'%2C%20(%7B%20a%2C%20b%2C%20expected%20%7D)%20%3D%3E%20%7B%0A%20%20expect(a%20%2B%20b).toBe(expected)%0A%7D)%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-95",
      "sectionId": "s5",
      "title": "%E6%88%96%E5%9C%A8%E2%80%9Cdescribe%E2%80%9D%E7%BA%A7%E5%88%AB",
      "body": "%60%60%60js%0Adescribe.each(%5B%0A%20%20%5B'mobile'%5D%2C%20%5B'tablet'%5D%2C%20%5B'desktop'%5D%0A%5D)('checkout%20flow%20on%20%25s'%2C%20(viewport)%20%3D%3E%20%7B%0A%20%20test('displays%20success%20page'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%0A%20%20%7D)%0A%7D)%0A%60%60%60%0A%0A%5Bdescribe.each()%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fapi%23describeeachtablename-fn-timeout)%20%E6%96%87%E6%A1%A3%E3%80%81%5Btest.each()%5D(https%3A%2F%2Fjestjs.io%2Fdocs%2Fen%2Fapi%23testeachtablename-fn-timeout)%20%E6%96%87%E6%A1%A3",
      "encoded": true
    },
    {
      "id": "s6-97",
      "sectionId": "s6",
      "title": "%E4%B8%8D%E8%A6%81%E8%BF%90%E8%A1%8C%E8%BF%99%E4%BA%9B%E6%B5%8B%E8%AF%95",
      "body": "%60%60%60js%0Adescribe.skip('makePoniesPink'...%0Atests.skip('make%20each%20pony%20pink'...%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s6-98",
      "sectionId": "s6",
      "title": "%E4%BB%85%E8%BF%90%E8%A1%8C%E4%BB%A5%E4%B8%8B%E6%B5%8B%E8%AF%95",
      "body": "%60%60%60js%0Adescribe.only('makePoniesPink'...%0Atests.only('make%20each%20pony%20pink'...%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s7-99",
      "sectionId": "s7",
      "title": "%E5%AE%9E%E4%BE%8B",
      "body": "%60%60%60js%0Aconst%20modulePath%20%3D%20'..%2Fmodule-to-test'%0AafterEach(()%20%3D%3E%20%7B%0A%20%20jest.resetModules()%0A%7D)%0Atest('%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%B5%8B%E8%AF%95'%2C%20()%20%3D%3E%20%7B%0A%20%20%2F%2F%20%E5%87%86%E5%A4%87%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%B5%8B%E8%AF%95%E7%9A%84%E6%9D%A1%E4%BB%B6%0A%20%20const%20result%20%3D%20require(modulePath)%0A%20%20expect(result).toMatchSnapshot()%0A%7D)%0Atest('%E7%AC%AC%E4%BA%8C%E4%B8%AA%E6%96%87%E6%9C%AC'%2C%20()%20%3D%3E%20%7B%0A%20%20%2F%2F%20%E5%87%86%E5%A4%87%E7%AC%AC%E4%BA%8C%E6%AC%A1%E6%B5%8B%E8%AF%95%E7%9A%84%E6%9D%A1%E4%BB%B6%0A%20%20const%20fn%20%3D%20()%20%3D%3E%20require(modulePath)%0A%20%20expect(fn).toThrow()%0A%7D)%0A%60%60%60%0A%0A%60Node.js%60%20%E5%92%8C%20%60Jest%60%20%E4%BC%9A%E7%BC%93%E5%AD%98%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9A%84%E6%A8%A1%E5%9D%97%E3%80%82%20%E8%A6%81%E6%B5%8B%E8%AF%95%E5%85%B7%E6%9C%89%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E6%A8%A1%E5%9D%97%EF%BC%8C%E6%82%A8%E9%9C%80%E8%A6%81%E5%9C%A8%E6%B5%8B%E8%AF%95%E4%B9%8B%E9%97%B4%E9%87%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E6%B3%A8%E5%86%8C%E8%A1%A8",
      "encoded": true
    },
    {
      "id": "s8-101",
      "sectionId": "s8",
      "title": "命令参数",
      "body": ":-- | --\n:-- | --\n`--bail[=<n>]`, `-b` | 在 `n` 个测试套件失败后立即退出测试套件\n`--cache` | 是否使用缓存\n`--changedFilesWithAncestor` | 运行与当前更改和上次提交中所做更改相关的测试\n`--changedSince` | 运行与自提供的分支或提交哈希以来的更改相关的测试\n`--ci` | 指定该参数时，`Jest` 会认为正在 `CI` 环境上运行\n`--clearCache` | 删除 `Jest` 的缓存目录, 然后不运行测试直接退出\n`--clearMocks` | 在每次测试前自动清除模拟的上下文\n`--collectCoverageFrom=<glob>` | 相对于 `rootDir` 的 `glob` 模式匹配需要从中收集覆盖信息的文件\n`--colors` | 即便 `stdout` 不是 `TTY` 模式，也要强制高亮显示测试结果\n`--config=<path>` | 指定配置文件的路径\n`--coverage[=<boolean>]`, `--collectCoverage` | 将测试覆盖率信息输出为报告\n`--coverageProvider=<provider>` | 指示应该使用哪个提供程序来检测代码的覆盖率\n`--debug` | 打印关于 `Jest` 配置的调试信息\n`--detectOpenHandles` | 尝试收集并打印打开的句柄以防止 `Jest` 干净地退出\n`--env=<environment>` | 所有测试都使用该测试环境设定\n`--errorOnDeprecated` | 使调用已弃用的 `API` 抛出有用的错误消息\n`--expand`, `-e` | 使用该参数来对比完整的差异和错误，而非修复\n`--filter=<file>` | 导出过滤功能的模块的路径\n`--findRelatedTests <spaceSeparatedListOfSourceFiles>` | 查找并运行涵盖作为参数传入的以空格分隔的源文件列表的测试\n`--forceExit` | 强制 `Jest` 在所有测试运行完后退出\n`--help` | 显示帮助信息，类似于本页文档\n`--ignoreProjects <project1> ... <projectN>` | 忽略特定的测试项目\n`--init` | 生成一个基础配置文件\n`--injectGlobals` | 将全局变量（`expect`,`test`,`describe`,`beforeEach`等）插入到全局环境中\n`--json` | 以 `JSON` 模式显示测试结果\n`--lastCommit` | 运行受上次提交中的文件更改影响的所有测试\n`--listTests` | 以 `JSON` 数组的形式列出所有将要运行的测试并退出\n`--logHeapUsage` | 记录每个测试后的记录堆使用情况\n`--maxConcurrency=<num>` | 防止 `Jest` 同时执行超过指定数量的测试\n`--maxWorkers=<num>\\|<string>` | 设定运行测试的最大工作池数目\n`--noStackTrace` | 禁止栈跟踪信息在测试结果输出中\n`--notify` | 激活测试结果通知\n`--onlyChanged` `-o` | 尝试确定根据当前存储库中哪些已经更改的文件来运行的测试\n`--outputFile=<filename>` | 通过 `——json` 参数可以将测试结果写入到指定文件\n`--passWithNoTests` | 允许在没有找到文件的情况下通过测试\n`--projects <path1> ... <pathN>` | 从指定路径中找到的一个或多个项目运行测试；也采用路径 `globs`\n`--reporters` | 使用指定的记者进行测试\n`--resetMocks` | 每次测试前自动重置模拟状态\n`--restoreMocks` | 在每次测试前自动恢复模拟状态和实现\n`--roots` | `Jest` 应该用来搜索文件的目录路径列表\n`--runInBand`, `-i` | 仅在当前的进程中连续运行所有测试，而非通过创建的子进程的工作池来运行测试\n`--runTestsByPath` | 仅运行使用其确切路径指定的测试\n`--selectProjects <project1> ... <projectN>` | 运行指定的测试项目\n`--setupFilesAfterEnv <path1> ... <pathN>` | 运行某些代码以在每次测试之前配置或设置测试框架的模块的路径列表\n`--shard` | 测试套件分片以 `(?<shardIndex>\\d+)/(?<shardCount>\\d+)` 的格式执行\n`--showConfig` | 输出 `Jest` 配置，然后退出\n`--silent` | 阻止所有测试通过控制台输出信息\n`--testEnvironmentOptions=<json string>` | 带有将传递给 `testEnvironment` 的选项的 `JSON` 字符串\n`--testLocationInResults` | 向测试结果添加 `location` 字段\n`--testMatch glob1 ... globN` | `Jest` 用于检测测试文件的 `glob` 模式\n`--testNamePattern=<regex>`, `-t` | 仅运行名称与正则表达式匹配的测试\n`--testPathIgnorePatterns=<regex>\\|[array]` | 在执行测试之前针对所有测试路径进行测试的单个或一组正则表达式模式字符串\n`--testPathPattern=<regex>` | 在运行测试前，匹配的 `regexp` 模式字符串的测试文件路径\n`--testRunner=<path>` | 允许你指定自定义测试运行程序\n`--testSequencer=<path>` | 允许您指定自定义测试定序器\n`--testTimeout=<number>` | 测试的默认超时时间(以毫秒为单位)。默认值：`5000`\n`--updateSnapshot`, `-u` | 在运行测试中使用这个参数来重新录制每个失败测试的快照\n`--useStderr` | 转移所有输出到 `stderr` (标准错误输出)\n`--verbose` | 层次显示测试套件中每个测试的结果\n`--version`, `-v` | 打印版本并退出\n`--watch` | 监视文件更改，并重新运行与已更改的文件相关的测试\n`--watchAll` | 监视文件的更改并在任何更改时重新运行所有测试\n`--watchman` | 是否使用 `watchman` 进行文件爬取。 默认为 `true`\n<!--rehype:className=left-align-->"
    },
    {
      "id": "s9-102",
      "sectionId": "s9",
      "title": "另见",
      "body": "• [Jest cheat sheet](https://github.com/sapegin/jest-cheat-sheet) _(github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/jest.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/jest.md",
    "lang": "zh",
    "mode": "local"
  }
}