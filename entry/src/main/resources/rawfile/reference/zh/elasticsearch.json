{
  "id": "elasticsearch",
  "title": "elasticsearch",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "Elasticsearch 备忘清单\n==="
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "这是 [Elasticsearch](https://www.elastic.co/guide/index.html) 的官方文档。 你可以在这里找到 elasticsearch 的所有文档。"
    },
    {
      "id": "intro-2",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "入门\n---"
    },
    {
      "id": "intro-3",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "Elasticsearch 是一个基于 Lucene 库的搜索引擎。它提供了一个分布式、支持多租户的全文搜索引擎，具有HTTP Web接口和无模式JSON文档。"
    },
    {
      "id": "intro-4",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "#### 下载"
    },
    {
      "id": "intro-5",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "注意： `${VERSION}` 需替换为指定版本，官方包有的功能只能试用，完整功能需要付费，请仔细阅读官网文档。"
    },
    {
      "id": "intro-6",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "#### Windows"
    },
    {
      "id": "intro-7",
      "sectionId": "intro",
      "title": "入门",
      "kind": "code",
      "lang": "",
      "code": "https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-${VERSION}-windows-x86_64.zip"
    },
    {
      "id": "intro-8",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "#### linux"
    },
    {
      "id": "intro-9",
      "sectionId": "intro",
      "title": "入门",
      "kind": "code",
      "lang": "shell",
      "code": "$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-${VERSION}-linux-x86_64.tar.gz\n\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-${VERSION}-linux-x86_64.tar.gz.sha512\n\n$ shasum -a 512 -c elasticsearch-${VERSION}-linux-x86_64.tar.gz.sha512 \n\n$ tar -xzf elasticsearch-${VERSION}-linux-x86_64.tar.gz\n\n$ cd elasticsearch-${VERSION}/"
    },
    {
      "id": "intro-10",
      "sectionId": "intro",
      "title": "入门",
      "kind": "text",
      "body": "#### macos"
    },
    {
      "id": "intro-11",
      "sectionId": "intro",
      "title": "入门",
      "kind": "code",
      "lang": "shell",
      "code": "$ curl -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-${VERSION}-darwin-x86_64.tar.gz\n\n$ curl https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-${VERSION}-darwin-x86_64.tar.gz.sha512 | shasum -a 512 -c - \n\n$ tar -xzf elasticsearch-${VERSION}-darwin-x86_64.tar.gz\n\n$ cd elasticsearch-${VERSION}/"
    },
    {
      "id": "intro-12",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "• 启动 Elasticsearch"
    },
    {
      "id": "intro-13",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "```shell\n$ ./bin/elasticsearch\n```"
    },
    {
      "id": "intro-14",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "• 设置密码"
    },
    {
      "id": "intro-15",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "```shell\nexport ELASTIC_PASSWORD=\"your_password\"\n```"
    },
    {
      "id": "intro-16",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "• 测试是否启动成功"
    },
    {
      "id": "intro-17",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "```shell\ncurl --cacert $ES_HOME/config/certs/http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200\n```\n<!--rehype:className=wrap-text-->"
    },
    {
      "id": "intro-18",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "• 成功则返回样例如下:"
    },
    {
      "id": "intro-19",
      "sectionId": "intro",
      "title": "启动",
      "kind": "text",
      "body": "```json\n{\n\"name\" : \"Cp8oag6\",\n\"cluster_name\" : \"elasticsearch\",\n\"cluster_uuid\" : \"AT69_T_DTp-1qgIJlatQqA\",\n\"version\" : {\n\"number\" : \"${VERSION}\",\n\"build_type\" : \"tar\",\n\"build_hash\" : \"f27399d\",\n\"build_flavor\" : \"default\",\n\"build_date\" : \"2016-03-30T09:51:41.449Z\",\n\"build_snapshot\" : false,\n\"lucene_version\" : \"9.10.0\",\n\"minimum_wire_compatibility_version\" : \"1.2.3\",\n\"minimum_index_compatibility_version\" : \"1.2.3\"\n},\n\"tagline\" : \"You Know, for Search\"\n}\n```\n<!--rehype:className=style-timeline-->"
    },
    {
      "id": "intro-20",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "数据库(database)",
      "back": "索引(index)"
    },
    {
      "id": "intro-21",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "表(table)",
      "back": "类型(type)"
    },
    {
      "id": "intro-22",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "行(row)",
      "back": "文档(document)"
    },
    {
      "id": "intro-23",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "列(column)",
      "back": "字段(field)"
    },
    {
      "id": "intro-24",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "表结构",
      "back": "映射"
    },
    {
      "id": "intro-25",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "索引",
      "back": "全文索引"
    },
    {
      "id": "intro-26",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "SQL",
      "back": "查询DSL"
    },
    {
      "id": "intro-27",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "SELECT * FROM tablename",
      "back": "GET http://..."
    },
    {
      "id": "intro-28",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "UPDATE table SET",
      "back": "PUT http://..."
    },
    {
      "id": "intro-29",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "qa",
      "front": "DELETE",
      "back": "DELETE http://..."
    },
    {
      "id": "intro-30",
      "sectionId": "intro",
      "title": "Elasticsearch 和 RDMS 的对比",
      "kind": "text",
      "body": "操作\n---"
    },
    {
      "id": "intro-31",
      "sectionId": "intro",
      "title": "基础语法规则",
      "kind": "code",
      "lang": "shell",
      "code": "$ curl -X<VERB> '<PROTOCOL>://<HOST>:<PORT>/<PATH>?<QUERY_STRING>' -d '<BODY>'"
    },
    {
      "id": "intro-32",
      "sectionId": "intro",
      "title": "基础语法规则",
      "kind": "text",
      "body": "• `VERB HTTP` 方法：GET, POST, PUT, HEAD, DELETE\n• `PROTOCOL`：http 或者 https 协议（只有在 Elasticsearch 前面有 https 代理的时候可用）\n• `HOST`：Elasticsearch 集群中的任何一个节点的主机名，如果是在本地的节点，那么就叫 localhost\n• `PORT`：Elasticsearch HTTP 服务所在的端口，默认为 9200\n• `PATH API 路径`（例如_count 将返回集群中文档的数量），PATH：可以包含多个组件，例如_cluster/stats 或者_nodes/stats/jvm\n• `QUERY_STRING`：一些可选的查询请求参数，例如?pretty 参数将使请求返回更加美观易读的 JSON 数据\n• `BODY`：一个 JSON 格式的请求主体（如果请求需要的话）"
    },
    {
      "id": "intro-33",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "#### 统一请求 api 前缀"
    },
    {
      "id": "intro-34",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "code",
      "lang": "",
      "code": "http://localhost:9200/"
    },
    {
      "id": "intro-35",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-36",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "code",
      "lang": "json",
      "code": "PUT /user_info\n{\n  \"settings\": { \"number_of_replicas\": 1, \"number_of_shards\": 1 },\n  \"mappings\": {\n    \"properties\": {\n      \"id\": { \"type\": \"long\", \"index\": true },\n      \"username\": { \"type\": \"keyword\", \"index\": true },\n      \"nickname\": { \"type\": \"keyword\", \"index\": true },\n      \"password\": { \"type\": \"keyword\", \"index\": false },\n      \"age\": { \"type\": \"integer\", \"index\": true },\n      \"info\": { \"type\": \"text\", \"index\": true },\n      \"remark\": { \"type\": \"text\", \"index\": true }\n    }\n  }\n}"
    },
    {
      "id": "intro-37",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "#### curl"
    },
    {
      "id": "intro-38",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPUT \"http://localhost:9200/user_info\" -H 'Content-Type: application/json' -d'{ \"settings\": { \"number_of_replicas\": 1, \"number_of_shards\": 1 }, \"mappings\": { \"properties\": { \"id\": { \"type\": \"long\", \"index\": true }, \"username\": { \"type\": \"keyword\", \"index\": true }, \"nickname\": { \"type\": \"keyword\", \"index\": true }, \"password\": { \"type\": \"keyword\", \"index\": false }, \"age\": { \"type\": \"integer\", \"index\": true }, \"info\": { \"type\": \"text\", \"index\": true }, \"remark\": { \"type\": \"text\", \"index\": true } } } }'"
    },
    {
      "id": "intro-39",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "#### 参数说明"
    },
    {
      "id": "intro-40",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "• `settings`: 设置索引的信息\n• `number_of_shards`: 每个索引的主分片数，一旦索引创建后，无法修改此配置\n• `number_of_replicas`: 每个主分片的副本数，此配置可随时修改\n• `mappings`: 索引映射定义\n• `properties`: 字段定义。使用 JSON 配置，键为字段名称（自定义），值为嵌套 JSON，其中 `type` 指定字段的类型"
    },
    {
      "id": "intro-41",
      "sectionId": "intro",
      "title": "创建索引",
      "kind": "text",
      "body": "其他参数很多，请参考官网资料"
    },
    {
      "id": "intro-42",
      "sectionId": "intro",
      "title": "删除索引",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-43",
      "sectionId": "intro",
      "title": "删除索引",
      "kind": "code",
      "lang": "http",
      "code": "DELETE /user_info"
    },
    {
      "id": "intro-44",
      "sectionId": "intro",
      "title": "删除索引",
      "kind": "text",
      "body": "#### curl"
    },
    {
      "id": "intro-45",
      "sectionId": "intro",
      "title": "删除索引",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XDELETE \"http://localhost:9200/user_info\""
    },
    {
      "id": "intro-46",
      "sectionId": "intro",
      "title": "判断索引是否存在",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-47",
      "sectionId": "intro",
      "title": "判断索引是否存在",
      "kind": "code",
      "lang": "http",
      "code": "# 查看索引是否存在\nHEAD /user_info"
    },
    {
      "id": "intro-48",
      "sectionId": "intro",
      "title": "判断索引是否存在",
      "kind": "text",
      "body": "#### curl"
    },
    {
      "id": "intro-49",
      "sectionId": "intro",
      "title": "判断索引是否存在",
      "kind": "code",
      "lang": "shell",
      "code": "# 查看索引是否存在\ncurl -XHEAD \"http://localhost:9200/user_info\""
    },
    {
      "id": "intro-50",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "text",
      "body": "#### 开启DSL语法"
    },
    {
      "id": "intro-51",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "code",
      "lang": "shell",
      "code": "POST /user_info/_open"
    },
    {
      "id": "intro-52",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "text",
      "body": "`curl`"
    },
    {
      "id": "intro-53",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPOST \"http://localhost:9200/user_info/_open\""
    },
    {
      "id": "intro-54",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "text",
      "body": "#### 关闭 DSL 语法"
    },
    {
      "id": "intro-55",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "code",
      "lang": "shell",
      "code": "POST /user_info/_close"
    },
    {
      "id": "intro-56",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "text",
      "body": "`curl`"
    },
    {
      "id": "intro-57",
      "sectionId": "intro",
      "title": "开启/关闭索引",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPOST \"http://localhost:9200/user_info/_close\""
    },
    {
      "id": "intro-58",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "text",
      "body": "• 添加别名 DSL 语法"
    },
    {
      "id": "intro-59",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "POST /user_info/_alias/user1"
    },
    {
      "id": "intro-60",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPOST \"http://localhost:9200/user_info/_alias/user1\""
    },
    {
      "id": "intro-61",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "text",
      "body": "• 删除别名DSL语法"
    },
    {
      "id": "intro-62",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "DELETE /user_info/_alias/user1"
    },
    {
      "id": "intro-63",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XDELETE \"http://localhost:9200/user_info/_alias/user1\""
    },
    {
      "id": "intro-64",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "text",
      "body": "• 查看别名DSL语法"
    },
    {
      "id": "intro-65",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "GET /_alias/user1"
    },
    {
      "id": "intro-66",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/_alias/useraa\""
    },
    {
      "id": "intro-67",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "text",
      "body": "Mapping 操作\n---"
    },
    {
      "id": "intro-68",
      "sectionId": "intro",
      "title": "索引的别名",
      "kind": "text",
      "body": "类似修改数据库中列的操作"
    },
    {
      "id": "intro-69",
      "sectionId": "intro",
      "title": "查看 mapping",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-70",
      "sectionId": "intro",
      "title": "查看 mapping",
      "kind": "code",
      "lang": "shell",
      "code": "GET /user_info/_mapping"
    },
    {
      "id": "intro-71",
      "sectionId": "intro",
      "title": "查看 mapping",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-72",
      "sectionId": "intro",
      "title": "查看 mapping",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_mapping\""
    },
    {
      "id": "intro-73",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-74",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "code",
      "lang": "shell",
      "code": "PUT /user_info/_mapping\n{\n    \"properties\":{\n        \"sex\":{ \"type\":\"keyword\" }\n    }\n}"
    },
    {
      "id": "intro-75",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-76",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPUT \"http://localhost:9200/user_info/_mapping\" -H 'Content-Type: application/json' -d'{ \"properties\":{ \"sex\":{ \"type\":\"keyword\" } } }'"
    },
    {
      "id": "intro-77",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "text",
      "body": "`注意`: 需要注意的是字段映射只能增加，不能更改删除"
    },
    {
      "id": "intro-78",
      "sectionId": "intro",
      "title": "新增 mapping",
      "kind": "text",
      "body": "文档的操作\n---"
    },
    {
      "id": "intro-79",
      "sectionId": "intro",
      "title": "添加文档",
      "kind": "text",
      "body": "#### 新增一条数据 - DSL语法"
    },
    {
      "id": "intro-80",
      "sectionId": "intro",
      "title": "添加文档",
      "kind": "code",
      "lang": "shell",
      "code": "POST /user_info/_doc/1\n{\n    \"id\":1,\n    \"username\":\"username\",\n    \"password\":\"123456\",\n    \"nickname\":\"nickname\",\n    \"age\":18,\n    \"info\":\"一些个人相关的介绍\",\n    \"remark\":\"备注信息\",\n    \"sex\":\"男\"\n}"
    },
    {
      "id": "intro-81",
      "sectionId": "intro",
      "title": "添加文档",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-82",
      "sectionId": "intro",
      "title": "添加文档",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPOST \"http://localhost:9200/user_info/_doc/1\" -H 'Content-Type: application/json' -d'{ \"id\":1, \"username\":\"username\", \"password\":\"123456\", \"nickname\":\"nickname\", \"age\":18, \"info\":\"一些个人相关的介绍\", \"remark\":\"备注信息\", \"sex\":\"男\" }'"
    },
    {
      "id": "intro-83",
      "sectionId": "intro",
      "title": "查询指定索引的所有文档",
      "kind": "text",
      "body": "类似数据库中的 `select * from user_info;`"
    },
    {
      "id": "intro-84",
      "sectionId": "intro",
      "title": "查询指定索引的所有文档",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-85",
      "sectionId": "intro",
      "title": "查询指定索引的所有文档",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search\n{\n    \"query\": {\n        \"match_all\": {}\n    }\n}"
    },
    {
      "id": "intro-86",
      "sectionId": "intro",
      "title": "查询指定索引的所有文档",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-87",
      "sectionId": "intro",
      "title": "查询指定索引的所有文档",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match_all\": {} } }'"
    },
    {
      "id": "intro-88",
      "sectionId": "intro",
      "title": "通过 id 查询文档",
      "kind": "text",
      "body": "类似数据库中的 `select * from user_info where id = 1;`"
    },
    {
      "id": "intro-89",
      "sectionId": "intro",
      "title": "通过 id 查询文档",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-90",
      "sectionId": "intro",
      "title": "通过 id 查询文档",
      "kind": "code",
      "lang": "shell",
      "code": "GET /user_info/_doc/1"
    },
    {
      "id": "intro-91",
      "sectionId": "intro",
      "title": "通过 id 查询文档",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-92",
      "sectionId": "intro",
      "title": "通过 id 查询文档",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_doc/1\""
    },
    {
      "id": "intro-93",
      "sectionId": "intro",
      "title": "模糊查找",
      "kind": "text",
      "body": "类似数据库中的模糊查询 `select * from user_info where info like '%人%';`"
    },
    {
      "id": "intro-94",
      "sectionId": "intro",
      "title": "模糊查找",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-95",
      "sectionId": "intro",
      "title": "模糊查找",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search\n{\n    \"query\": { \"match\": { \"info\": \"人\" } }\n}"
    },
    {
      "id": "intro-96",
      "sectionId": "intro",
      "title": "通过条件查询文档",
      "kind": "text",
      "body": "类似数据库中的 `select * from user_info where username = 'username';`"
    },
    {
      "id": "intro-97",
      "sectionId": "intro",
      "title": "通过条件查询文档",
      "kind": "text",
      "body": "#### 通过条件查询 - DSL语法"
    },
    {
      "id": "intro-98",
      "sectionId": "intro",
      "title": "通过条件查询文档",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [ { \"term\": { \"username\": \"username\" } } ]\n        }\n    }\n}"
    },
    {
      "id": "intro-99",
      "sectionId": "intro",
      "title": "通过条件查询文档",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-100",
      "sectionId": "intro",
      "title": "通过条件查询文档",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"query\": { \"bool\": { \"must\": [ { \"term\": { \"username\": \"username\" } } ] } } }'"
    },
    {
      "id": "intro-101",
      "sectionId": "intro",
      "title": "范围查找",
      "kind": "text",
      "body": "类似数据库中的范围查询 `select * from user_info where age between 18 and 30;`"
    },
    {
      "id": "intro-102",
      "sectionId": "intro",
      "title": "范围查找",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-103",
      "sectionId": "intro",
      "title": "范围查找",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search\n{\n    \"query\": {\n        \"range\": {\n            \"age\": {\n                \"gt\": 18,\n                \"lt\": 30\n            }\n        }\n    }\n}"
    },
    {
      "id": "intro-104",
      "sectionId": "intro",
      "title": "范围查找",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-105",
      "sectionId": "intro",
      "title": "范围查找",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"query\": { \"range\": { \"age\": { \"gt\": 18, \"lt\": 30 } } } }'"
    },
    {
      "id": "intro-106",
      "sectionId": "intro",
      "title": "and 查询",
      "kind": "text",
      "body": "类似数据库中的 and 查询 `select * from user_info where age > 18 and sex = '男';`"
    },
    {
      "id": "intro-107",
      "sectionId": "intro",
      "title": "and 查询",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-108",
      "sectionId": "intro",
      "title": "and 查询",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search  \n{  \n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        { \"range\": { \"age\": { \"gt\": 18 } } },\n        { \"term\": { \"sex\": \"男\" } }\n      ]   \n    }\n  }\n}"
    },
    {
      "id": "intro-109",
      "sectionId": "intro",
      "title": "and 查询",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-110",
      "sectionId": "intro",
      "title": "and 查询",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"query\": { \"bool\": { \"must\": [ { \"range\": { \"age\": { \"gt\": 17 } } }, { \"term\": { \"sex\": \"男\" } } ] } } }'"
    },
    {
      "id": "intro-111",
      "sectionId": "intro",
      "title": "limit 查找",
      "kind": "text",
      "body": "类似数据库中的 limit 查询 `select * from user_info limit 10;`"
    },
    {
      "id": "intro-112",
      "sectionId": "intro",
      "title": "limit 查找",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-113",
      "sectionId": "intro",
      "title": "limit 查找",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search  \n{  \n    \"size\": 10,  \n    \"query\": {  \n        \"match_all\": {}     \n    }\n}"
    },
    {
      "id": "intro-114",
      "sectionId": "intro",
      "title": "limit 查找",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-115",
      "sectionId": "intro",
      "title": "limit 查找",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"size\": 1, \"query\": { \"match_all\": {} } }'"
    },
    {
      "id": "intro-116",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "text",
      "body": "类似数据库中的 limit 查询 `select * from user_info limit 0,10;`"
    },
    {
      "id": "intro-117",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-118",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "code",
      "lang": "http",
      "code": "GET /user_info/_search  \n{  \n    \"size\": 2,  \n    \"from\": 1,  \n    \"query\": {  \n        \"match_all\": {}  \n    }  \n}"
    },
    {
      "id": "intro-119",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-120",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"size\": 2, \"from\": 1, \"query\": { \"match_all\": {} } }'"
    },
    {
      "id": "intro-121",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "text",
      "body": "#### 参数说明"
    },
    {
      "id": "intro-122",
      "sectionId": "intro",
      "title": "limit offset 查找",
      "kind": "text",
      "body": "• `size`: 10 表示我们想要返回的结果数量是10条\n• `from`: 20 表示我们想要从结果集中的第21条记录开始返回（因为偏移是从0开始的）\n• `query`: `{\"match_all\": {}}` 是一个匹配所有文档的查询，因为我们没有特定的查询条件，只是想要分页结果"
    },
    {
      "id": "intro-123",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "text",
      "body": "类似数据库中的 or 查询 `select * from user_info where age > 18 or sex = '男';`"
    },
    {
      "id": "intro-124",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-125",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "code",
      "lang": "json",
      "code": "GET /user_info/_search\n{\n    \"query\": {\n        \"bool\": {\n        \"should\": [\n            {\n                \"range\": {\n                    \"age\": { \"gt\": 18 }\n                }\n            },\n            {\n                \"term\": { \"sex\": \"男\" }\n            }\n        ]\n        }\n    }\n}"
    },
    {
      "id": "intro-126",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-127",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XGET \"http://localhost:9200/user_info/_search\" -H 'Content-Type: application/json' -d'{ \"query\": { \"bool\": { \"should\": [ { \"range\": { \"age\": { \"gt\": 18 } } }, { \"term\": { \"sex\": \"男\" } } ] } } }'"
    },
    {
      "id": "intro-128",
      "sectionId": "intro",
      "title": "or 查询",
      "kind": "text",
      "body": "删除文档\n---"
    },
    {
      "id": "intro-129",
      "sectionId": "intro",
      "title": "删除指定 id",
      "kind": "text",
      "body": "类似数据库中的 delete 查询 `delete from user_info where id = 3;`"
    },
    {
      "id": "intro-130",
      "sectionId": "intro",
      "title": "删除指定 id",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-131",
      "sectionId": "intro",
      "title": "删除指定 id",
      "kind": "code",
      "lang": "shell",
      "code": "# 删除文档\nDELETE /user_info/_doc/3"
    },
    {
      "id": "intro-132",
      "sectionId": "intro",
      "title": "删除指定 id",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-133",
      "sectionId": "intro",
      "title": "删除指定 id",
      "kind": "code",
      "lang": "shell",
      "code": "# 删除文档\ncurl -XDELETE \"http://localhost:9200/user_info/_doc/3\""
    },
    {
      "id": "intro-134",
      "sectionId": "intro",
      "title": "删除指定条件",
      "kind": "text",
      "body": "类似数据库中的 delete 查询 `delete from user_info where age > 18;`"
    },
    {
      "id": "intro-135",
      "sectionId": "intro",
      "title": "删除指定条件",
      "kind": "text",
      "body": "#### DSL语法"
    },
    {
      "id": "intro-136",
      "sectionId": "intro",
      "title": "删除指定条件",
      "kind": "code",
      "lang": "json",
      "code": "POST /user_info/_delete_by_query\n{\n    \"query\": {\n        \"range\": { \"age\": { \"gt\": 18 } }\n    }\n}"
    },
    {
      "id": "intro-137",
      "sectionId": "intro",
      "title": "删除指定条件",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-138",
      "sectionId": "intro",
      "title": "删除指定条件",
      "kind": "code",
      "lang": "shell",
      "code": "curl -XPOST \"http://localhost:9200/user_info/_delete_by_query\" -H 'Content-Type: application/json' -d'{\"query\":{\"range\":{\"age\":{\"gt\":18}}}}'"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/elasticsearch.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/elasticsearch.md",
    "generatedAt": "2025-12-16T07:36:11.185Z",
    "lang": "zh",
    "mode": "local"
  }
}