{
  "id": "lerna",
  "title": "在所有模块中安装 babel-core",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "Lerna 备忘清单\n==="
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "[![NPM version](https://img.shields.io/npm/v/lerna.svg?style=flat)](https://www.npmjs.com/package/lerna)\n[![Downloads](https://img.shields.io/npm/dm/lerna.svg?style=flat)](https://www.npmjs.com/package/lerna)\n[![Repo Dependents](https://badgen.net/github/dependents-repo/lerna/lerna/nest)](https://github.com/lerna/lerna/nest/network/dependents)\n[![Github repo](https://badgen.net/badge/icon/Github?icon=github&label)](https://github.com/lerna/lerna/nest)"
    },
    {
      "id": "intro-2",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "本备忘单旨在快速理解 [Lerna v6](https://github.com/lerna/lerna) 所涉及的主要概念，显示了它的常用命令使用清单\n<!--rehype:style=padding-top: 12px;-->"
    },
    {
      "id": "intro-3",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "入门\n----"
    },
    {
      "id": "intro-4",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "现代构建系统，用于管理和发布来自同一存储库的多个 JavaScript/TypeScript 包。"
    },
    {
      "id": "intro-5",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "bash",
      "code": "$ npx lerna@latest init"
    },
    {
      "id": "intro-6",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "下面是示例目录结构"
    },
    {
      "id": "intro-7",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "```shell {15}\n├── README.md\n├── remixapp   # web 应用 (remixapp)\n│   ├── src\n│   └── package.json\n│\n├── packages\n│   ├── footer # 组件(@remixapp/footer)\n│   │   ├── src\n│   │   └── package.json\n│   │\n│   └── header # 组件(@remixapp/header)\n│       ├── src\n│       └── package.json\n│\n├── lerna.json\n└── package.json"
    },
    {
      "id": "intro-8",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n### 引导程序 (Bootstrap)\n<!--rehype:wrap-class=row-span-2-->\n\n它在 `package.json` 中依赖于它们，如下所示："
    },
    {
      "id": "intro-9",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "\"dependencies\": {\n// ....\n\"@remixapp/header\": \"*\",\n\"@remixapp/footer\": \"*\"\n}"
    },
    {
      "id": "intro-10",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n`remixapp` 应用程序导入`页眉`和`页脚`库，如下所示："
    },
    {
      "id": "intro-11",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "import { Header } from \"header\";\nimport { Footer } from \"footer\";"
    },
    {
      "id": "intro-12",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "export default function Home() {\nreturn (\n<>\n<Header />\n<div>Content!</div>\n<Footer />\n</>\n);\n}"
    },
    {
      "id": "intro-13",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n### useWorkspaces"
    },
    {
      "id": "intro-14",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "{\n\"$schema\": \"node_modules/lerna/schemas/lerna-schema.json\",\n\"useWorkspaces\": true,\n\"version\": \"0.0.0\"\n}"
    },
    {
      "id": "intro-15",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "<!--rehype:className=wrap-text -->\n\n在 `lerna.json` 中配置 `useWorkspaces` 告诉 `Lerna` 将包链接过程委托给你的包管理器 (此功能由 npm、yarn 和 pnpm 支持)。\n\n### 任务运行"
    },
    {
      "id": "intro-16",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "npx lerna run test --scope=header # 单个"
    },
    {
      "id": "intro-17",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n多个任务运行"
    },
    {
      "id": "intro-18",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "npx lerna run test --scope=header,footer"
    },
    {
      "id": "intro-19",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n忽略 `header`,`footer` 其它包中运行任务运行"
    },
    {
      "id": "intro-20",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "text",
      "body": "npx lerna run build --ignore=header,footer"
    },
    {
      "id": "intro-21",
      "sectionId": "intro",
      "title": "介绍",
      "kind": "code",
      "lang": "",
      "code": "\n命令索引\n---\n\n### run/exec 运行命令"
    },
    {
      "id": "intro-22",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna run <script> -- [..args]\n$ lerna run test\n$ lerna run build"
    },
    {
      "id": "intro-23",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna run --parallel watch"
    },
    {
      "id": "intro-24",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna exec -- <command> [..args]\n$ lerna exec -- rm -rf ./node_modules\n$ lerna exec -- protractor conf.js"
    },
    {
      "id": "intro-25",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n:- | :-\n:- | :-\n`--npm-client <client>` [#](https://github.com/lerna/lerna/tree/main/commands/run#--npm-client-client) | 必须是知道如何运行 npm 生命周期脚本的可执行文件，默认值是 `npm`\n`--stream` [#](https://github.com/lerna/lerna/tree/main/commands/run#--stream) | 立即从子进程流式输出，以原始包名称为前缀\n`--parallel` [#](https://github.com/lerna/lerna/tree/main/commands/run#--parallel) | 类似于 `--stream` 但完全忽略并发和拓扑排序，立即在所有匹配的包中运行给定的命令或脚本，并带有前缀流输出\n`--no-bail` [#](https://github.com/lerna/lerna/tree/main/commands/run#--no-bail) | 默认情况下，如果任何脚本运行返回非零退出代码，`lerna run` 将退出并出现错误。传递 `--no-bail` 以禁用此行为\n`--no-prefix` [#](https://github.com/lerna/lerna/tree/main/commands/run#--no-prefix) | 当输出为流式传输（`--stream` 或 `--parallel`）时禁用包名称前缀。当将结果传送到其他进程（例如编辑器插件）时，此选项很有用\n`--profile` [#](https://github.com/lerna/lerna/tree/main/commands/run#--profile) | 分析脚本执行并生成性能配置文件\n`--profile-location <location>` [#](https://github.com/lerna/lerna/tree/main/commands/run#--profile-location-location) | 您可以为性能配置文件输出提供自定义位置。提供的路径将相对于当前工作目录进行解析。\n`useNx=false` [#](https://github.com/lerna/lerna/tree/main/commands/run#usenxfalse) | 通过将 `useNx` 设置为 `false`，您可以使用 `lerna` 中的遗留任务运行实现 (`p-map` 和 `p-queue`)，而不是使用由 [Nx](https://nx.dev) 提供支持的默认现代任务运行器实现。\n<!--rehype:className=style-list-arrow-->\n\n### publish 发布包\n<!--rehype:wrap-class=row-span-3-->"
    },
    {
      "id": "intro-26",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish"
    },
    {
      "id": "intro-27",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish from-git"
    },
    {
      "id": "intro-28",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish from-package"
    },
    {
      "id": "intro-29",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish --canary"
    },
    {
      "id": "intro-30",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish --canary --preid beta"
    },
    {
      "id": "intro-31",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna publish --canary minor\n$ lerna publish --canary preminor"
    },
    {
      "id": "intro-32",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n:- | :-\n:- | :-\n`--canary` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--canary) | 使用此标志运行时，以更精细的方式（每次提交）发布包\n`--contents <dir>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--contents-dir) | 要发布的子目录。 必须适用于所有包，并且必须包含 `package.json` 文件\n`--dist-tag <tag>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--dist-tag-tag) | 使用此标志运行时，将使用给定的 `npm dist-tag`（默认为 `latest`）发布到 `npm`\n`--git-head <sha>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--git-head-sha) | 打包 `tarball` 时将显式 `SHA` 设置为清单上的 `gitHead`，仅允许使用 `from-package` 位置\n`--graph-type <all\\|dependencies>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--graph-type-alldependencies) | 设置在构建包图时使用哪种依赖项。默认值是依赖项，即仅包含包的 `package.json` 的依赖项部分中列出的包\n`--ignore-scripts` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-scripts) | 传递时，此标志将在 `lerna` 发布期间禁用运行[生命周期脚本](https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts)\n`--ignore-prepublish` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-prepublish) | 传递时，此标志将禁用在 `lerna` 发布期间运行[已弃用](https://docs.npmjs.com/cli/v8/using-npm/scripts#prepare-and-prepublish)的[预发布脚本](https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts)\n`--legacy-auth` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--legacy-auth) | 发布需要身份验证的包时，您正在使用仅使用旧版 `Base64` `用户名:密码` 的内部托管 NPM 注册表。这与 NPM 发布 `_auth` 标志相同\n`--no-git-reset` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--no-git-reset) | 默认情况下，`lerna publish` 确保对工作树的任何更改都已重置\n`--no-granular-pathspec` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--no-granular-pathspec) | 默认情况下，`lerna publish` 将尝试（如果启用）`git checkout` 仅在发布过程中临时修改的叶包清单\n`--verify-access` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--verify-access) | 从历史上看，`lerna` 试图通过使用给定令牌执行一些抢占式 `npm API` 请求来快速解决授权/身份验证问题\n`--otp` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--otp) | 发布需要双重身份验证的包时，您可以使用 `--otp` 指定一次性密码\n`--preid` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--preid) | 与同名的 `lerna` 版本选项不同，该选项只适用于 `--canary` 版本计算\n`--pre-dist-tag <tag>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--pre-dist-tag-tag) | 与 `--dist-tag` 的工作方式相同，但仅适用于使用预发布版本发布的软件包\n`--registry <url>` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--registry-url) | 使用此标志运行时，转发的 `npm` 命令将为您的包使用指定的注册表\n`--tag-version-prefix` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--tag-version-prefix) | 此选项允许提供自定义前缀而不是默认前缀：`v`\n`--temp-tag` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--temp-tag) | 传递时，此标志将更改默认发布过程，首先将所有更改的包发布到临时 `dist-tag(lerna-temp)`，然后将新版本移动到 `--dist-tag` 配置的 `dist-tag` (默认`latest`)\n`--yes` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--yes) | 使用此标志运行时，`lerna publish` 将跳过所有确认提示\n<!--rehype:className=style-list-arrow-->\n\n#### 不推荐使用的选项\n\n:- | :-\n:- | :-\n`--no-verify-access` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--no-verify-access) | 旧的抢先访问验证现在默认关闭，因此不需要 `--no-verify-access`\n`--skip-npm` [#](https://github.com/lerna/lerna/tree/main/commands/publish#--skip-npm) | 直接调用 [lerna version](#version-修改版本号)\n<!--rehype:className=style-list-arrow-->\n\n#### 每个包中的配置"
    },
    {
      "id": "intro-33",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "\"publishConfig\": {\n\"access\": \"public\",\n\"registry\": \"http://my-registry.com\",\n\"tag\": \"flippin-sweet\",\n\"directory\": \"dist\"\n}"
    },
    {
      "id": "intro-34",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n:- | :-\n:- | :-\n`access` [#](https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigaccess) | 要发布具有范围的包(例如，`@mycompany/rocks`)\n`registry` [#](https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigregistry) | 通过设置注册表来自定义每个包的注册表\n`tag` [#](https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag) | 您可以通过设置标签来自定义每个包的 `dist-tag`\n`directory` [#](https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag) | 这个 _非标准_ 字段允许您像 `--contents` 一样自定义发布的子目录，但基于每个包\n<!--rehype:className=style-list-arrow-->\n\n### version 修改版本号\n<!--rehype:wrap-class=row-span-3-->"
    },
    {
      "id": "intro-35",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna version 1.0.1 # 明确的\n$ lerna version patch # semver 关键字\n$ lerna version       # 从提示中选择"
    },
    {
      "id": "intro-36",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna version [major | minor | ...]"
    },
    {
      "id": "intro-37",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna version --force-publish\n$ lerna version -m \"chore(doc): publish %s\""
    },
    {
      "id": "intro-38",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna version -m \"chore(doc): publish %v\""
    },
    {
      "id": "intro-39",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n- `major` 重大的\n- `minor` 次要的\n- `patch` 修补\n- `premajor` 主要的\n- `preminor` 初级\n- `prepatch` 预补丁\n- `prerelease` 预发行\n<!--rehype:className=cols-2-->\n\n---\n\n:- | :-\n:- | :-\n`--allow-branch <glob>` [#](https://github.com/lerna/lerna/tree/main/commands/version#--allow-branch-glob) | 与启用 `lerna version` 的 `git` 分支匹配的 `glob` 白名单\n`--amend` [#](https://github.com/lerna/lerna/tree/main/commands/version#--amend) | 使用此标志运行时，`lerna version` 将在当前提交上执行所有更改，而不是添加新的\n`--changelog-preset` [#](https://github.com/lerna/lerna/tree/main/commands/version#--changelog-preset) | 默认情况下，更改日志预设设置为 [angular](https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular#angular-convention)\n`--conventional-commits` [#](https://github.com/lerna/lerna/tree/main/commands/version#--conventional-commits) | 使用常规提交规范来确定[版本 bump](https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-recommended-bump) 并生成 CHANGELOG.md 文件\n`--conventional-graduate` [#](https://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate) | 将使用 `*` 对指定的包(逗号分隔)或所有包进行分级\n`--conventional-prerelease` [#](https://github.com/lerna/lerna/tree/main/commands/version#--conventional-prerelease) | 预发布版本发布指定的包\n`--create-release <type>` [#](https://github.com/lerna/lerna/tree/main/commands/version#--create-release-type) | 根据更改的包创建正式的 `GitHub` 或 `GitLab` 版本\n`--exact` [#](https://github.com/lerna/lerna/tree/main/commands/version#--exact) | 在更新的包中精确指定更新的依赖项（没有标点符号），而不是与 [semver](./semver.md) 兼容（使用`^`）\n`--force-publish` [#](https://github.com/lerna/lerna/tree/main/commands/version#--force-publish) | 强制发布指定的包\n`--git-remote <name>` [#](https://github.com/lerna/lerna/tree/main/commands/version#--git-remote-name) | 把 `git` 更改推送到指定的远程位置，而不是`origin`\n`--ignore-changes` [#](https://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes) | 检测更改的包时忽略与 `glob` 匹配的文件中的更改\n`--ignore-scripts` [#](https://github.com/lerna/lerna/tree/main/commands/version#--ignore-scripts) | 禁用在 `lerna version` 期间运行的生命周期脚本\n`--include-merged-tags` [#](https://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags) | 在检测到更改的包时包括来自合并分支的标签\n`--message <msg>` [#](https://github.com/lerna/lerna/tree/main/commands/version#--message-msg) | 此选项别名为 `-m` 以与 `git commit` 进行奇偶校验\n`--no-changelog` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-changelog) | 使用常规提交时，不要生成任何 CHANGELOG.md 文件\n`--no-commit-hooks` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-commit-hooks) | 允许 `git commit hooks` 在提交版本更改时运行。通过 `--no-commit-hooks` 禁用此行为\n`--no-git-tag-version` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-git-tag-version) | 将提交对 `package.json` 文件的更改并标记发布。通过 `--no-git-tag-version` 禁用该行为\n`--no-granular-pathspec` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-granular-pathspec) | 仅添加在版本控制过程中更改的叶包清单(可能还有变更日志)。这产生了 `git add --packages/*/package.json` 的等价物，但针对更改的内容量身定制\n`--no-private` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-private) | 在选择版本、提交和标记版本时包含私有包。通过 `--no-private` 禁用此行为\n`--no-push` [#](https://github.com/lerna/lerna/tree/main/commands/version#--no-push) | 将已提交和标记的更改推送到配置的 `git remote`。通过 `--no-push` 禁用此行为\n`--preid` [#](https://github.com/lerna/lerna/tree/main/commands/version#--preid) | 使用此标志运行时，lerna 版本将使用指定的[预发布标识符](https://semver.org/#spec-item-9)增加 `premajor`、`preminor`、`prepatch` 或 `prerelease` [semver](./semver.md) bumps\n`--sign-git-commit` [#](https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-commit) | 此选项类似于同名的 npm 版本选项\n`--sign-git-tag` [#](https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-tag) | 此选项类似于同名的 `npm` 版本选项\n`--force-git-tag` [#](https://github.com/lerna/lerna/tree/main/commands/version#--force-git-tag) | 此选项替换任何现有标记而不是失败\n`--tag-version-prefix` [#](https://github.com/lerna/lerna/tree/main/commands/version#--tag-version-prefix) | 此选项允许提供自定义前缀而不是默认前缀：`v`\n`--yes` [#](https://github.com/lerna/lerna/tree/main/commands/version#--yes) | 使用此标志运行时，`lerna` 版本将跳过所有确认提示\n<!--rehype:className=style-list-arrow-->\n\n#### 不推荐使用的选项\n\n:- | :-\n:- | :-\n`--cd-version` [#](https://github.com/lerna/lerna/tree/main/commands/version#--cd-version) | 将 `semver` 关键字传递给 [bump](https://github.com/lerna/lerna/tree/main/commands/version#semver-bump) 位置\n`--repo-version` [#](https://github.com/lerna/lerna/tree/main/commands/version#--repo-version) | 将明确的版本号传递给 [bump](https://github.com/lerna/lerna/tree/main/commands/version#semver-bump) 位置\n`--skip-git` [#](https://github.com/lerna/lerna/tree/main/commands/version#--skip-git) | 请改用 `--no-git-tag-version` 和 `--no-push`\n<!--rehype:className=style-list-arrow-->\n\n### bootstrap\n\n将本地包`链接`在一起，并`安装`其余的包依赖项"
    },
    {
      "id": "intro-40",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna bootstrap -- --production \\\n--no-optional\n$ lerna bootstrap --hoist"
    },
    {
      "id": "intro-41",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n:- | :-\n:- | :-\n`--hoist [glob]` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--strict) | 在 `repo` 根目录安装与 `glob` 匹配的外部依赖项，以便它们可用于所有包\n`--strict` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob) | 与提升 _(hoist)_ 一起使用时，会在发出版本警告后抛出错误并停止引导\n`--nohoist [glob]` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob) | 不要在 `repo` 根目录安装与 `glob` 匹配的外部依赖项。这可用于选择不提升某些依赖项\n`--ignore` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore) | 当与 `bootstrap` 命令一起使用时，还可以在 `lerna` 中设置 `--ignore` 标志\n<!--rehype:className=style-list-arrow-->\n\n#### 选项\n\n:- | :-\n:- | :-\n`--ignore-prepublish` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-prepublish) | 跳过默认在引导程序包中运行的预发布生命周期脚本\n`--ignore-scripts` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-scripts) | 跳过通常在引导程序包中运行（准备等）的任何生命周期脚本\n`--registry <url>` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--registry-url) | 指定 npm 包的仓库地址\n`--npm-client <client>` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--npm-client-client) | 必须是知道如何安装 `npm` 包依赖项的可执行文件\n`--use-workspaces` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--use-workspaces) | 启用与 `Yarn Workspaces` 的集成(从 `yarn@0.27+` 开始可用)\n`--no-ci` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--no-ci) | 在 `CI` 环境中调用 `npm ci` 而不是 `npm install`\n`--force-local` [#](https://github.com/lerna/lerna/tree/main/commands/bootstrap#--force-local) | 此标志会导致引导命令始终对本地依赖项进行符号链接，而不管匹配的版本范围如何\n<!--rehype:className=style-list-arrow-->\n\n### info 本地环境信息"
    },
    {
      "id": "intro-42",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna info"
    },
    {
      "id": "intro-43",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "lerna notice cli v6.0.0\nEnvironment info:"
    },
    {
      "id": "intro-44",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "System(系统):\nOS: macOS 12.2\nCPU: (8) x64 Apple M1\nBinaries(二进制文件):\nNode: 16.17.0 - /usr/local/bin/node\nYarn: 1.22.10 - /usr/local/bin/yarn\nnpm: 8.5.0 - /usr/local/bin/npm\nUtilities(实用程序):\nGit: 2.33.0 - /opt/homebrew/bin/git\nnpmPackages:\nlerna: ^6.0.0 => 6.0.0"
    },
    {
      "id": "intro-45",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n### 过滤选项\n<!--rehype:wrap-class=col-span-2 row-span-2-->"
    },
    {
      "id": "intro-46",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna exec --scope my-component -- ls -la\n$ lerna run --scope toolbar-* test\n$ lerna run --scope package-1 --scope *-2 lint"
    },
    {
      "id": "intro-47",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna exec --ignore package-{1,2,5}  -- ls -la\n$ lerna run --ignore package-1  test\n$ lerna run --ignore package-@(1|2) --ignore package-3 lint"
    },
    {
      "id": "intro-48",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna exec --since -- ls -la"
    },
    {
      "id": "intro-49",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna run test --since main"
    },
    {
      "id": "intro-50",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna ls --since some-branch"
    },
    {
      "id": "intro-51",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna bootstrap --scope my-component --include-dependencies"
    },
    {
      "id": "intro-52",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna bootstrap --scope \"package-*\" --ignore \"package-util-*\" --include-dependencies"
    },
    {
      "id": "intro-53",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n#### 选项\n\n:- | :-\n:- | :-\n`--scope <glob>` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--scope-glob) | 仅包括名称与给定 `glob` 匹配的包\n`--ignore <glob>` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--ignore-glob) | 排除名称与给定 `glob` 匹配的包\n`--no-private` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--no-private) | 排除私有包\n`--since [ref]` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref) | 仅包括自指定 `ref` 以来已更改的包\n`--exclude-dependents` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--exclude-dependents) | 使用 `--since` 运行命令时排除所有传递依赖项，覆盖默认的“changed”算法\n`--include-dependents` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependents) | 无论 `--scope`、`--ignore` 或 `--since` 是什么，在运行命令时都包括所有传递依赖项\n`--include-dependencies` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependencies) | 无论 `--scope`、`--ignore` 或 `--since` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref) 是什么，在运行命令时都包括所有传递依赖项\n`--include-merged-tags` [#](https://github.com/lerna/lerna/tree/main/core/filter-options#--include-merged-tags) | 使用 `--since` 运行命令时包括来自合并分支的标签\n\n### list\n\n列出本地程序包，也尊重所有可用的[过滤选项](#过滤选项)"
    },
    {
      "id": "intro-54",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "lerna ls"
    },
    {
      "id": "intro-55",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "lerna ll"
    },
    {
      "id": "intro-56",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "lerna la"
    },
    {
      "id": "intro-57",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n#### 选项\n\n:- | :-\n:- | :-\n`--json` | 显示为 JSON [#](https://github.com/lerna/lerna/tree/main/commands/publish#--json)\n`--ndjson` | 换行符分隔 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--ndjson)\n`-a,--all` | 所有包 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--all)\n`-l,--long` | 显示扩展信息 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--long)\n`-p,--parseable` | 显示可解析的输出 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--parseable)\n`--toposort` | 按拓扑排序 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--toposort)\n`--graph` | JSON 格式邻接依赖关系图 [#](https://github.com/lerna/lerna/tree/main/commands/publish#--graph)\n\n### changed\n\n列出自上次标记版本以来已更改的本地软件包\n\n- `lerna changed` 支持 `lerna ls` 支持的所有[选项](#选项-1)\n- 与 `lerna ls` 不同的是不支持过滤器选项\n<!--rehype:className=style-round-->\n\n`lerna changed` 支持 `lerna version` 的以下选项\n\n:- | :-\n:- | :-\n`--conventional-graduate` | [#](https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate)\n`--force-publish` | [#](https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--force-publish)\n`--ignore-changes` | [#](https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes)\n`--include-merged-tags` | [#](https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags)\n\n### init\n\n创建新的 Lerna 仓库或将现有仓库升级到当前版本 Lerna\n\n- 如果 `lerna` 不存在，请将其添加到 `package.json` 中的 `devDependency`\n- 创建一个 `lerna.json` 配置文件来存储版本号\n- 如果不存在 `.gitignore`，则生成一个忽略文件\n<!--rehype:className=style-timeline-->\n\n---"
    },
    {
      "id": "intro-58",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna init --independent"
    },
    {
      "id": "intro-59",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n:- | :-\n:- | :-\n`--independent` [#](https://github.com/lerna/lerna/tree/main/commands/init#--independent) | 使用独立版本控制模式 [#](https://github.com/lerna/lerna/tree/main/commands/init#--independent)\n`--exact` [#](https://github.com/lerna/lerna/tree/main/commands/init#--exact) | 添加或更新 `lerna` 的本地版本时将使用插入符范围 [#](https://github.com/lerna/lerna/tree/main/commands/init#--exact)\n\n它将配置 `lerna.json` 以强制所有后续执行完全匹配"
    },
    {
      "id": "intro-60",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "{\n\"command\": {\n\"init\": {\n\"exact\": true\n}\n},\n\"version\": \"0.0.0\"\n}"
    },
    {
      "id": "intro-61",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n### import\n\n将一个包导入到带有提交历史的 `monorepo`"
    },
    {
      "id": "intro-62",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ git init lerna-repo && cd lerna-repo\n$ npx lerna init\n$ npm install"
    },
    {
      "id": "intro-63",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ git add ."
    },
    {
      "id": "intro-64",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ git commit -m \"Initial lerna commit\""
    },
    {
      "id": "intro-65",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ npx lerna import <外部存储库的路径>\n$ npx lerna import ~/Product --flatten"
    },
    {
      "id": "intro-66",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n选项\n\n:- | :-\n:- | :-\n`--flatten` [#](https://github.com/lerna/lerna/tree/main/commands/import#--flatten) | 当导入具有冲突的合并提交的存储库时，导入命令将无法尝试应用所有提交\n`--dest` [#](https://github.com/lerna/lerna/tree/main/commands/import#--dest) | 导入仓库时，可以通过 `lerna.json` 中列出的目录来指定目标目录\n`--preserve-commit` [#](https://github.com/lerna/lerna/tree/main/commands/import#--preserve-commit) | 每个 git 提交都有一个作者和一个提交者\n<!--rehype:className=style-list-arrow-->\n\n### add\n<!--rehype:wrap-class=row-span-2-->\n\n将依赖项添加到匹配的包"
    },
    {
      "id": "intro-67",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add <package>[@version] \\\n[--dev] [--exact] [--peer]"
    },
    {
      "id": "intro-68",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n选项\n\n:- | :-\n:- | :-\n`--dev` [#](https://github.com/lerna/lerna/tree/main/commands/add#--dev) | 将新包添加到 `devDependencies`\n`--exact` [#](https://github.com/lerna/lerna/tree/main/commands/add#--exact) | 添加具有精确版本（例如 `1.0.1`）而不是默认 `^` semver 范围（例如 `^1.0.1`）的新包\n`--peer` [#](https://github.com/lerna/lerna/tree/main/commands/add#--peer) | 将新包添加到 `peerDependencies`\n`--registry <url>` [#](https://github.com/lerna/lerna/tree/main/commands/add#--registry-url) | 使用自定义注册表安装目标包\n`--no-bootstrap` [#](https://github.com/lerna/lerna/tree/main/commands/add#--no-bootstrap) | 跳过链式 `lerna bootstrap`\n<!--rehype:className=style-list-arrow-->\n\n实例"
    },
    {
      "id": "intro-69",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add mod-1 packages/prefix-*"
    },
    {
      "id": "intro-70",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add mod-1 --scope=mod-2"
    },
    {
      "id": "intro-71",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add mod-1 --scope=mod-2 --dev"
    },
    {
      "id": "intro-72",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add mod-1 --scope=mod-2 --peer"
    },
    {
      "id": "intro-73",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add mod-1"
    },
    {
      "id": "intro-74",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add babel-core"
    },
    {
      "id": "intro-75",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n### diff\n\n比较自上次发布以来的所有包或单个包"
    },
    {
      "id": "intro-76",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna diff [package]\n$ lerna diff\n$ lerna diff package-name # 区分一个特定的包"
    },
    {
      "id": "intro-77",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n类似于 `lerna changed`，此命令运行 `git diff`\n\n### clean\n\n从所有包中删除 `node_modules` 目录"
    },
    {
      "id": "intro-78",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna clean"
    },
    {
      "id": "intro-79",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n接受所有[过滤选项](#过滤选项)。`lerna clean` 不会从根 `node_modules` 目录中删除模块，即使您启用了 `--hoist` 选项\n\n### add-caching\n\n运行设置基本缓存选项的向导"
    },
    {
      "id": "intro-80",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna add-caching"
    },
    {
      "id": "intro-81",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n### link\n\n将所有相互依赖的包符号链接在一起"
    },
    {
      "id": "intro-82",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ lerna link"
    },
    {
      "id": "intro-83",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n[`--force-local`](https://github.com/lerna/lerna/tree/main/commands/link#--force-local) 设置会导致链接命令始终对本地依赖项进行符号链接\n\n### repair\n\n更新配置文件以匹配当前安装的 lerna 版本"
    },
    {
      "id": "intro-84",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "$ npm i lerna@latest\n$ lerna repair"
    },
    {
      "id": "intro-85",
      "sectionId": "intro",
      "title": "简介",
      "kind": "code",
      "lang": "",
      "code": "\n[`lerna repair`](https://github.com/lerna/lerna/tree/main/core/lerna/commands/repair#usage) 在升级后最有用，可确保应用新版本 lerna 的任何配置文件更改"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/lerna.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/lerna.md",
    "generatedAt": "2025-12-16T07:36:11.307Z",
    "lang": "zh",
    "mode": "local"
  }
}