{
  "id": "huawei-devices",
  "title": "huawei-devices",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "Huawei 网络设备备忘清单\n==="
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "本清单提供了对 Huawei 网络设备的入门简要概述，以及 Huawei 网络设备常用命令示例"
    },
    {
      "id": "intro-2",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "基本知识\n---"
    },
    {
      "id": "intro-3",
      "sectionId": "intro",
      "title": "VRP",
      "kind": "text",
      "body": "• 华为数据通信产品的通用网络操作平台，可用于设备管理和配置\n• 支持命令简写，输入命令时可通过提示获取完整写法\n• 例如：`undo in en` 取消系统信息显示，完整命令为 `undo info-center enable`\n• 如果简写存在歧义，则需要输入更完整的命令"
    },
    {
      "id": "intro-4",
      "sectionId": "intro",
      "title": "视图",
      "kind": "text",
      "body": "视图（View）是指命令行界面（CLI）的操作层级，不同视图可执行不同范围的命令。"
    },
    {
      "id": "intro-5",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "用户视图",
      "back": "登录设备后默认进入 | 可执行监控、查看信息等命令（如 `display version`）"
    },
    {
      "id": "intro-6",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "系统视图",
      "back": "`system-view` | 可执行全局配置命令"
    },
    {
      "id": "intro-7",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "接口视图",
      "back": "`interface 接口名`（如 `interface GigabitEthernet0/0/1`） | 用于配置接口相关参数（IP、速率、VLAN等）"
    },
    {
      "id": "intro-8",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "ACL 视图",
      "back": "`acl 编号`（如 `acl 3000`） | 用于定义访问控制规则"
    },
    {
      "id": "intro-9",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "VLAN 视图",
      "back": "`vlan VLAN_ID`（如 `vlan 10`） | 用于创建、修改或删除 VLAN"
    },
    {
      "id": "intro-10",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "OSPF 视图",
      "back": "`ospf 进程号`（如 `ospf 1`） | 用于配置 OSPF 动态路由"
    },
    {
      "id": "intro-11",
      "sectionId": "intro",
      "title": "视图",
      "kind": "qa",
      "front": "AAA 视图",
      "back": "`aaa` | 用于配置认证、授权与计费"
    },
    {
      "id": "intro-12",
      "sectionId": "intro",
      "title": "视图",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-13",
      "sectionId": "intro",
      "title": "视图",
      "kind": "code",
      "lang": "txt",
      "code": "用户视图\n  └── system-view （系统视图）\n        ├── interface GigabitEthernet0/0/1 （接口视图）\n        ├── vlan 10 （VLAN视图）\n        ├── acl 3000 （ACL视图）\n        ├── ospf 1 （OSPF视图）\n        └── aaa （AAA视图）"
    },
    {
      "id": "intro-14",
      "sectionId": "intro",
      "title": "视图",
      "kind": "text",
      "body": "基本操作\n---"
    },
    {
      "id": "intro-15",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "#### 查看信息"
    },
    {
      "id": "intro-16",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "code",
      "lang": "shell",
      "code": "display version # 查看版本信息\ndisplay current-configuration # 查看当前配置\ndisplay mac-address # 查看 mac 地址"
    },
    {
      "id": "intro-17",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "#### 重命名设备"
    },
    {
      "id": "intro-18",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "在系统视图下：`sysname RENAME`"
    },
    {
      "id": "intro-19",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "#### 切换语言"
    },
    {
      "id": "intro-20",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "code",
      "lang": "sh",
      "code": "# 用户视图下\nlanguage-mode [English, Chinese]"
    },
    {
      "id": "intro-21",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "#### 设置标题"
    },
    {
      "id": "intro-22",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "code",
      "lang": "shell",
      "code": "header login information 信息 # 载入时信息\nheader shell information 信息 # 远程时信息"
    },
    {
      "id": "intro-23",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "#### 取消调试信息"
    },
    {
      "id": "intro-24",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "code",
      "lang": "shell",
      "code": "undo terminal monitor"
    },
    {
      "id": "intro-25",
      "sectionId": "intro",
      "title": "系统信息",
      "kind": "text",
      "body": "&nbsp;"
    },
    {
      "id": "intro-26",
      "sectionId": "intro",
      "title": "撤销操作",
      "kind": "text",
      "body": "• 可用于恢复默认配置\n• 可用于禁用某些功能\n• 可用于删除某些配置"
    },
    {
      "id": "intro-27",
      "sectionId": "intro",
      "title": "撤销操作",
      "kind": "code",
      "lang": "shell",
      "code": "# 恢复默认名称\nundo sysname\n# 禁用信息显示\nundo in en\n# 删除接口配置\nundo ip address"
    },
    {
      "id": "intro-28",
      "sectionId": "intro",
      "title": "撤销操作",
      "kind": "text",
      "body": "#### 恢复出厂设置"
    },
    {
      "id": "intro-29",
      "sectionId": "intro",
      "title": "撤销操作",
      "kind": "text",
      "body": "`reset saved-configuration`"
    },
    {
      "id": "intro-30",
      "sectionId": "intro",
      "title": "历史命令",
      "kind": "text",
      "body": "使用上箭头或 ctrl+p 可访问上一命令"
    },
    {
      "id": "intro-31",
      "sectionId": "intro",
      "title": "历史命令",
      "kind": "text",
      "body": "使用下箭头或 ctrl+n 可访问下一命令"
    },
    {
      "id": "intro-32",
      "sectionId": "intro",
      "title": "历史命令",
      "kind": "text",
      "body": "默认保存10条命令"
    },
    {
      "id": "intro-33",
      "sectionId": "intro",
      "title": "历史命令",
      "kind": "text",
      "body": "#### 显示历史命令"
    },
    {
      "id": "intro-34",
      "sectionId": "intro",
      "title": "历史命令",
      "kind": "text",
      "body": "`display history-command`"
    },
    {
      "id": "intro-35",
      "sectionId": "intro",
      "title": "设置系统时钟",
      "kind": "code",
      "lang": "shell",
      "code": "# 在用户视图下\n# 为保证与其他设备协调工作需要配置系统时钟\nclock datetime 12:00:00 2020-02-02 # 时间\nclock timezone BJ add 08:00:00 # 时区"
    },
    {
      "id": "intro-36",
      "sectionId": "intro",
      "title": "mac 地址",
      "kind": "code",
      "lang": "shell",
      "code": "# 添加 mac 地址\n# MAC-Address mac 地址\n# e0/0/0 自定义接口\n# VlanID 自定义 vlanid\nmac-address static MAC-Address e0/0/0 vlan VlanID\n\n# 清除\nreset arp all"
    },
    {
      "id": "intro-37",
      "sectionId": "intro",
      "title": "退出",
      "kind": "text",
      "body": "`quit` 命令用于从任意视图退回上一个视图"
    },
    {
      "id": "intro-38",
      "sectionId": "intro",
      "title": "退出",
      "kind": "text",
      "body": "`return` 这是立刻退回至用户视图"
    },
    {
      "id": "intro-39",
      "sectionId": "intro",
      "title": "保存配置",
      "kind": "text",
      "body": "`save`"
    },
    {
      "id": "intro-40",
      "sectionId": "intro",
      "title": "重启",
      "kind": "code",
      "lang": "shell",
      "code": "reboot"
    },
    {
      "id": "intro-41",
      "sectionId": "intro",
      "title": "重启",
      "kind": "text",
      "body": "登录管理\n---"
    },
    {
      "id": "intro-42",
      "sectionId": "intro",
      "title": "STelnet 方式",
      "kind": "code",
      "lang": "shell",
      "code": "# 开启 ssh 服务\nstelnet server enable\n\n# 配置远程管理ip\nint vlanif 1\nip add 192.168.1.254 24\n\n# 生成本地 rsa 秘钥对\nrsa local-key-pair create\n\n# ssh 首次认证\nssh cl fi en\n# ssh 用户验证类型 password\nssh user admin authentication-type password\n# ssh 用户服务类型 stelnet\nssh user admin service-type stelnet"
    },
    {
      "id": "intro-43",
      "sectionId": "intro",
      "title": "STelnet 方式",
      "kind": "text",
      "body": "#### AAA 登录"
    },
    {
      "id": "intro-44",
      "sectionId": "intro",
      "title": "STelnet 方式",
      "kind": "code",
      "lang": "shell",
      "code": "aaa\n# 本地用户 admin 密码密文 123456 等级 2\nlocal-user admin password cipher 123456 privilege level 2\n# 本地用户 admin 登录方式 ssh\nlocal-user admin service-type ssh\nquit\nuser-interface vty 0 4\nauthentication-mode aaa # 认证模式 aaa\nprotocol inbound ssh # 仅支持 ssh 协议\nquit\n\n# ssh用户端首次认证\nssh client first-time enable"
    },
    {
      "id": "intro-45",
      "sectionId": "intro",
      "title": "STelnet 方式",
      "kind": "text",
      "body": "#### 命令级别"
    },
    {
      "id": "intro-46",
      "sectionId": "intro",
      "title": "STelnet 方式",
      "kind": "text",
      "body": "• 0 参观级 只能进行如诊断工具命令（ping，tracert），部分 display 命令\n• 1 监控级 主要用于系统维护，业务故障诊断，包括部分display，debugging命令\n• 2 配置级 主要用于业务配置，包括路由，各个网络层次命令，可向用户提供直接网络服务\n• 3 - 15 为管理级，涉及系统基本运行，系统支撑模块等"
    },
    {
      "id": "intro-47",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "text",
      "body": "#### 永不超时"
    },
    {
      "id": "intro-48",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "code",
      "lang": "shell",
      "code": "user-interface console 0 # 进入 console 接口\nidle-timeout 0 # 超时时间为 0 即 永不超时"
    },
    {
      "id": "intro-49",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "text",
      "body": "#### 密码认证"
    },
    {
      "id": "intro-50",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "code",
      "lang": "shell",
      "code": "user-interface console 0\nauthentication-mode password # 验证模式 密码认证\nset authentication password simple 123456 # 设置验证密码 简单密码 123456"
    },
    {
      "id": "intro-51",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "text",
      "body": "#### AAA认证"
    },
    {
      "id": "intro-52",
      "sectionId": "intro",
      "title": "Console 接口登录",
      "kind": "code",
      "lang": "shell",
      "code": "user-interface console 0\nauthentication-mode aaa # 验证模式 AAA认证\nquit\naaa # 进入 aaa 模式\nlocal-user admin password simple 123456 # 本地用户 admin 密码 简单密码 123456\nlocal-user admin password cipher 123456 # 本地用户 admin 密码 密文密码 123456\nlocal-user admin service-type terminal # 本地用户 admin 服务类型 终端"
    },
    {
      "id": "intro-53",
      "sectionId": "intro",
      "title": "Telnet 方式",
      "kind": "code",
      "lang": "shell",
      "code": "# 开启 Telnet\ntelnet server enable"
    },
    {
      "id": "intro-54",
      "sectionId": "intro",
      "title": "Telnet 方式",
      "kind": "text",
      "body": "#### password 登录"
    },
    {
      "id": "intro-55",
      "sectionId": "intro",
      "title": "Telnet 方式",
      "kind": "code",
      "lang": "shell",
      "code": "user-interface vty 0 4\nauthentication-mode password # 认证模式 password\nset authentication password simple 123456 # 设置 认证 密码 简单密码 123456\nuser privilege level 2 # 用户等级 2\nidle-timeout 15 # 断连时间 15 分"
    },
    {
      "id": "intro-56",
      "sectionId": "intro",
      "title": "Telnet 方式",
      "kind": "text",
      "body": "#### AAA 登录"
    },
    {
      "id": "intro-57",
      "sectionId": "intro",
      "title": "Telnet 方式",
      "kind": "code",
      "lang": "shell",
      "code": "aaa\n# 本地用户 admin 密码密文 123456 等级 2\nlocal-user admin password cipher 123456 privilege level 2\n# 本地用户 admin 登录方式 telnet\nlocal-user admin service-type telnet\nquit\nuser-interface vty 0 4\nauthentication-mode aaa # 认证模式 aaa\nquit"
    },
    {
      "id": "intro-58",
      "sectionId": "intro",
      "title": "远程 IP",
      "kind": "code",
      "lang": "shell",
      "code": "# 远程管理 ip\nint vlanif 1\nip add 192.168.1.254 24\n# pc\n192.168.1.1 24"
    },
    {
      "id": "intro-59",
      "sectionId": "intro",
      "title": "远程 IP",
      "kind": "text",
      "body": "接口配置\n---"
    },
    {
      "id": "intro-60",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "sh",
      "code": "# 组内配置会自动为组成员配置\nport-group 1 # 创建接口组 1\ngroup-member e0/0/2 to e0/0/8 # 划分组成员为 e0/0/2 - e0/0/8 即 2,3,4,5,6,7,8 接口"
    },
    {
      "id": "intro-61",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "text",
      "body": "#### 接口模式"
    },
    {
      "id": "intro-62",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "shell",
      "code": "# access 普通模式 只能在某个 vlan 中通信\n# trunk 中继器模式 可在任意 vlan 中通信\nint e0/0/1\nport link-type access # 接口模式为 access\nport link-type trunk # 接口模式为 trunk"
    },
    {
      "id": "intro-63",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "text",
      "body": "#### 接口带宽"
    },
    {
      "id": "intro-64",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "shell",
      "code": "# 接口每秒传输数据量\nint e0/0/1\n# 10Mbit/s\n# 100Mbit/s\n# Auto 自协商\nspeed 10 | 100 | Auto\n# 关闭自协商\n# 先关闭自协商再手动指定接口速率\nundo negotiation auto"
    },
    {
      "id": "intro-65",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "text",
      "body": "#### 接口双工模式"
    },
    {
      "id": "intro-66",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "shell",
      "code": "# 接口协商模式不一致会导致异常\nint e0/0/1\n# full 全双工 同时收发数据\n# half 半双工 同时只能接收或发送数据一个操作\nduplex full | half\n# 先关闭自协商再手动指定"
    },
    {
      "id": "intro-67",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "text",
      "body": "#### 配置 trunk"
    },
    {
      "id": "intro-68",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "sh",
      "code": "interface g0/0/1 # 进入接口\nport link-type trunk # 接口模式为 trunk"
    },
    {
      "id": "intro-69",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "text",
      "body": "`all` 为通过所有 `vlan`, VlanId 为指定 vlan，多个vlan以空格隔开"
    },
    {
      "id": "intro-70",
      "sectionId": "intro",
      "title": "接口组",
      "kind": "code",
      "lang": "sh",
      "code": "port trunk allow-pass vlan VlanId | all"
    },
    {
      "id": "intro-71",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "text",
      "body": "#### 查看 vlan"
    },
    {
      "id": "intro-72",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "text",
      "body": "`display vlan`"
    },
    {
      "id": "intro-73",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "text",
      "body": "#### 创建 vlan"
    },
    {
      "id": "intro-74",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "code",
      "lang": "sh",
      "code": "# VlanId 自定义vlanid 1 ~ 4094\nvlan VlanId \n# VLANNAME 自定义的 vlan 名称\ndescription VLANNAME \n\n# 删除vlan\nundo vlan VlanId \n\n# 创建 10,20,30 vlan\nvlan batch 10 20 30 \n# 创建 10 ~ 30 vlan\nvlan batch 10 to 30"
    },
    {
      "id": "intro-75",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "text",
      "body": "#### 分配 vlan"
    },
    {
      "id": "intro-76",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "code",
      "lang": "sh",
      "code": "# 进入接口\ninterface E0/0/1 \n# 接口模式设为 access\nport link-type access \n# 划分到 vlan 10 中\nport default vlan 10 \n\n# 创建接口组 1\nport-group 1\n# 组成员为 e0/0/5 - e0/0/8 .... 5,6,7,8\ngroup-member e0/0/5 to e0/0/8\n# 组成员接口模式设为 access\nport link-type access\n# 组成员划分到 vlan 10 中\nport default vlan 10"
    },
    {
      "id": "intro-77",
      "sectionId": "intro",
      "title": "vlan 配置",
      "kind": "text",
      "body": "交换机配置\n---"
    },
    {
      "id": "intro-78",
      "sectionId": "intro",
      "title": "STP (Spanning Tree Protocol)",
      "kind": "text",
      "body": "即生成树协议"
    },
    {
      "id": "intro-79",
      "sectionId": "intro",
      "title": "STP (Spanning Tree Protocol)",
      "kind": "text",
      "body": "可将有环路的物理拓扑变为无环路的逻辑拓扑，从而为网络提供安全机制，使得冗余拓扑中不会产生交换环路问题"
    },
    {
      "id": "intro-80",
      "sectionId": "intro",
      "title": "STP (Spanning Tree Protocol)",
      "kind": "code",
      "lang": "shell",
      "code": "# 三层交换机\n# 首先需要创建 vlan\n# 划分接口给 vlan\n# 所有与其他交换机相连接口需要做 trunk 放通划分 vlan\n\n# 二层交换机\n# 建立 vlan\n# 客户机接口划分默认 vlan\n# 与三层交换机相连接口做 trunk 放通 vlan\n\n# 开启 STP\n# 系统视图下\n# 交换机都要配置\n# stp 开启\nstp enable\n# stp 模式 stp\nstp mode stp\n\n# # 指定根交换机\n# 配置优先级\n# 系统视图下\n# 优先级为 0\n# 优先级值在 0 ~ 65535 默认 32768\n# 要求设为 4096 倍数\nstp priority 0\n\n# 使用命令\n# 系统视图下\n# 需要先删除配置优先级\n# 根交换机\nstp root primary\n# 备用根交换机\nstp root secondary"
    },
    {
      "id": "intro-81",
      "sectionId": "intro",
      "title": "链路聚合",
      "kind": "code",
      "lang": "shell",
      "code": "# 创建 id 为 1 的 eth-trunk 聚合接口\ninterface eth-trunk 1 \nquit\ninterface g0/0/1\neth-trunk 1 # 加入 g/0/01 到 eth-trunk 1 中\n# 添加完毕成员后\n# eth-trunk 接口下\n# 设置接口链路类型为 trunk\nport link-type trunk"
    },
    {
      "id": "intro-82",
      "sectionId": "intro",
      "title": "链路聚合",
      "kind": "text",
      "body": "在聚合接口下添加成员"
    },
    {
      "id": "intro-83",
      "sectionId": "intro",
      "title": "链路聚合",
      "kind": "code",
      "lang": "sh",
      "code": "trunkport g0/0/1\ntrunkport g0/0/1 to g0/0/2\n# 删除用 undo"
    },
    {
      "id": "intro-84",
      "sectionId": "intro",
      "title": "链路聚合",
      "kind": "text",
      "body": "`接口汇聚`是将交换机间的多条物理链路合并为一条逻辑链路，以提升带宽并实现链路冗余备份。"
    },
    {
      "id": "intro-85",
      "sectionId": "intro",
      "title": "RSTP（Rapid Spanning Tree Protocol）",
      "kind": "text",
      "body": "• RSTP（快速生成树协议）是对 STP 的改进版\n• 当网络故障发生时，STP 的拓扑结构需要较长时间收敛，而 RSTP 可在 1 秒内完成\n• 配置方式与 STP 基本一致"
    },
    {
      "id": "intro-86",
      "sectionId": "intro",
      "title": "RSTP（Rapid Spanning Tree Protocol）",
      "kind": "text",
      "body": "不同点："
    },
    {
      "id": "intro-87",
      "sectionId": "intro",
      "title": "RSTP（Rapid Spanning Tree Protocol）",
      "kind": "code",
      "lang": "shell",
      "code": "# 系统视图下\nstp enable\n# stp mode stp 变更\nstp mode rstp\n\n# 配置边缘接口\n# 接口视图下\n# 将该接口设置为边缘接口\n# 节省接口从初始启动到转发状态的时间间隔\n# 默认不参与生成树计算\n# 不经历转发延迟\n# 关闭或激活不触发 RSTP 拓扑变更\n# 通常将与终端设备连接的接口设置\nstp edged-port enable"
    },
    {
      "id": "intro-88",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "text",
      "body": "即动态主机配置协议"
    },
    {
      "id": "intro-89",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "text",
      "body": "可有规划的划分 IP 地址，也可避免用户私设 IP 引起的地址冲突"
    },
    {
      "id": "intro-90",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "text",
      "body": "三层交换机可充当 DHCP 服务器，能动态分配 IP 地址及 DNS 服务地址等网络参数"
    },
    {
      "id": "intro-91",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "text",
      "body": "可以使得用户零配置上网"
    },
    {
      "id": "intro-92",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "code",
      "lang": "sh",
      "code": "# 二层交换机\n# 首先创建 vlan\n# 一个 vlan 代表一个地址池范围\n# 然后划分接口配置默认 vlan\n# 进入与三层交换机相连的接口做 trunk 并放通 vlan\n\n# # 三层交换机\n# 创建 vlan\n# 进入与二层交换机相连的接口做 trunk 并放通 vlan\n\n# 开启 DHCP\n# 系统视图下\ndhcp enable\n\n# 系统视图下\n# 建立地址池 V10 V10 为自定义的合法地址池名称\nip pool V10\n# 发布网段 10.10.10\n# 掩码 255.0.0.0\nnetwork 10.10.10.0 mask 255.0.0.0\n# 配置网关\ngateway-list 10.10.10.254\n# 设置租期为 8 天\nlease 8\n# dns 服务器 5.5.5.5\ndns-list 5.5.5.5\n# 进入 vlan 视图\n# 为 vlan 配置对应的网关地址及掩码\n# 配置设备指定接口采取全局地址\n# vlan 视图下\n# dhcp 配置选择 全局配置\ndhcp select global\n# dhcp 配置选择 接口配置\n# 接口配置与全局配置基本相同\n# 此 dhcp 配置在接口中\ndhcp select interface\n# #\n\n# 保留地址\n# 保留了 5 - 15 这个范围的 IP 地址\nexcluded-ip-address 10.10.10.5 10.10.10.15"
    },
    {
      "id": "intro-93",
      "sectionId": "intro",
      "title": "DHCP（Dynamic Host Configuration Protocol）",
      "kind": "text",
      "body": "路由配置\n---"
    },
    {
      "id": "intro-94",
      "sectionId": "intro",
      "title": "查看路由",
      "kind": "code",
      "lang": "sh",
      "code": "# 查看路由表\ndisplay ip routing-table"
    },
    {
      "id": "intro-95",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "即虚拟路由器冗余协议"
    },
    {
      "id": "intro-96",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "是一种选择协议，可将虚拟路由器责任动态分配至局域网内的一台 VRRP 路由器"
    },
    {
      "id": "intro-97",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "控制虚拟路由器 IP 地址的 VRRP 路由器为 Master 路由器，负责将数据包进行分发"
    },
    {
      "id": "intro-98",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "一旦 Master 不可用，可提供动态的故障转移机制"
    },
    {
      "id": "intro-99",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "由 Backup 路由器代替 Master路由器故障时的工作"
    },
    {
      "id": "intro-100",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "允许虚拟路由器的 IP 地址作为 终端主机的默认第一跳路由"
    },
    {
      "id": "intro-101",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "text",
      "body": "优势为更高的默认路由的可用性，无须在终端主机上配置动态路由或路由发现协议"
    },
    {
      "id": "intro-102",
      "sectionId": "intro",
      "title": "VRRP (Virtual Router Redundancy Protocol)",
      "kind": "code",
      "lang": "sh",
      "code": "# 二层交换机\n# 创建 vlan\n# 划分接口默认 vlan\n# 与 三层交换机 相连的接口配置 trunk 放通 vlan\n\n# # 三层交换机\n# 创建 vlan\n# 与 二层交换机 相连的接口配置 trunk 放通 vlan\n# 配置 vlan 的 IP 地址\n\n# 配置 VRRP\n# vlan 视图下\n# 配置虚拟接口 IP\n# 与当前 vlan ip 同段\n# 一台虚拟路由器可拥有多个 IP 地址\n# vrid 虚拟路由器的标识，相同的 vrid 的路由器组成一台虚拟 Master 路由器\nvrrp vrid 1 virtual-ip 192.168.100.254\n# 配置优先级\n# 根据优先级确定虚拟路由器中每台路由器的地位\nvrrp vrid 1 priority 150\n# 配置抢占模式和延迟时间\n# 非抢占模式\n# Master 无故障， Backup 即使优先级比 Master 高也不会成为 Master\n# 抢占模式\n# Backup 优先级比 Master 高，则代替 Master\nvrrp vrid 1 preempt-mode timer delay 5\n# 将 g/0/23 配置为跟踪接口\nvrrp vrid 1 track interface g0/0/23\n\n# 查看 VRRP 服务\ndisplay vrrp brief\n# 1 为 vrrp id\ndisplay vrrp 1\n# #"
    },
    {
      "id": "intro-103",
      "sectionId": "intro",
      "title": "单臂路由",
      "kind": "text",
      "body": "划分 vlan 之后，vlan 是无法互通的，但是使用单臂路由可以解决此问题。"
    },
    {
      "id": "intro-104",
      "sectionId": "intro",
      "title": "单臂路由",
      "kind": "code",
      "lang": "sh",
      "code": "# 首先交换机划分 vlan\n# 划分接口默认 vlan\n# 与路由器相连接口进行 trunk 放通 vlan\n\n# 假设路由器与交换机连接的接口是 g0/0/0\n# 创建子接口\nint g0/0/0.1\n# 配置 ip 地址\n# 封装 802.1Q 协议\n# 假设当前接口对应的 vlan 是 vlan 10\ndot1q termination vid 10\n# 开启 arp 广播\n# 不配置会导致子接口不主动发送 arp 报文\n# 以及对外转发 ip 报文\narp broadcast enable"
    },
    {
      "id": "intro-105",
      "sectionId": "intro",
      "title": "静态路由",
      "kind": "text",
      "body": "适用于规模较小，不经常变动，简单的网络环境"
    },
    {
      "id": "intro-106",
      "sectionId": "intro",
      "title": "静态路由",
      "kind": "code",
      "lang": "sh",
      "code": "# 首先配置交换机\n# 创建 vlan 并划分接口默认 vlan\n# 配置 vlan 的 ip 地址\n\n# 路由器配置相连接口 ip\n# 添加 静态路由\n# 所有不能直达的网络都需要添加静态路由\nip route-static 目标网段 掩码 下一跳地址"
    },
    {
      "id": "intro-107",
      "sectionId": "intro",
      "title": "默认路由",
      "kind": "text",
      "body": "默认路由与静态路由配置基本相同。"
    },
    {
      "id": "intro-108",
      "sectionId": "intro",
      "title": "默认路由",
      "kind": "text",
      "body": "唯一不同的就是路由的配置。"
    },
    {
      "id": "intro-109",
      "sectionId": "intro",
      "title": "默认路由",
      "kind": "code",
      "lang": "bash",
      "code": "ip rou 0.0.0.0 0.0.0.0 下一跳地址"
    },
    {
      "id": "intro-110",
      "sectionId": "intro",
      "title": "浮动路由",
      "kind": "text",
      "body": "就是路由器之间多个接口相连，并配置接口优先级。"
    },
    {
      "id": "intro-111",
      "sectionId": "intro",
      "title": "浮动路由",
      "kind": "text",
      "body": "配置与静态，默认路由基本相同。"
    },
    {
      "id": "intro-112",
      "sectionId": "intro",
      "title": "浮动路由",
      "kind": "code",
      "lang": "bash",
      "code": "ip rou 目标网段 掩码 下一跳地址\nip rou 目标网段 掩码 下一跳地址 pr 权重"
    },
    {
      "id": "intro-113",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "text",
      "body": "首先配置完毕相关接口及IP。"
    },
    {
      "id": "intro-114",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "text",
      "body": "#### 单域"
    },
    {
      "id": "intro-115",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "code",
      "lang": "bash",
      "code": "# 系统视图下\n# 1 是 ospf 进程号\nospf 1\n# 0 是区域号 0 是骨干区域\narea 0\n# 发布网段\n# 网段需要根据掩码\nnet x.x.x.x 反码"
    },
    {
      "id": "intro-116",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "text",
      "body": "#### 多域"
    },
    {
      "id": "intro-117",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "text",
      "body": "与单域配置基本相同，只是需要划分多个 OSPF 区域。"
    },
    {
      "id": "intro-118",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "text",
      "body": "需要注意，路由器相连接口需要划分到一个区域。"
    },
    {
      "id": "intro-119",
      "sectionId": "intro",
      "title": "OSPF",
      "kind": "code",
      "lang": "bash",
      "code": "# 系统视图下\nospf 1\narea 0\n# 发布当前区域的网段\nnet x.x.x.x 反码\n# 切换区域\narea 1\n# 发布当前区域的网段\nnet x.x.x.x 反码"
    },
    {
      "id": "intro-120",
      "sectionId": "intro",
      "title": "动态路由 RIP",
      "kind": "text",
      "body": "配置基本相同。"
    },
    {
      "id": "intro-121",
      "sectionId": "intro",
      "title": "动态路由 RIP",
      "kind": "code",
      "lang": "bash",
      "code": "# 系统视图下\n# 进入 rip 视图\nrip\n# 切换版本 2\nv 2\n# 自动汇总\nsummary always\n# 发布网段 (需要根据掩码)\n# 如 掩码 255.0.0.0\n# 则 发布 x.0.0.0\nnet x.x.x.x"
    },
    {
      "id": "intro-122",
      "sectionId": "intro",
      "title": "路由重分发",
      "kind": "text",
      "body": "大型网络中，有时有多种路由协议共存，此时需要进行路由重分发。"
    },
    {
      "id": "intro-123",
      "sectionId": "intro",
      "title": "路由重分发",
      "kind": "code",
      "lang": "bash",
      "code": "# 首先完成相关路由配置\n# 假设 Router 左侧为 RIP 协议\n# 右侧为 OSPF 协议\n# 左右路由分别是 1.1.1.1 和 2.2.2.2\n# 因为 左侧为 RIP 协议\n# 因此需要先配置 RIP 发布 1.1.1.0 的网段\n# 右侧 OSPF 协议相同\n\n# Router 中\n# 进入 rip 中\n# 导入 ospf 1 的路由\nimport-route ospf 1\n# 进入 ospf\n# 导入 rip 1 的路由\nimport-route rip 1"
    },
    {
      "id": "intro-124",
      "sectionId": "intro",
      "title": "路由重分发",
      "kind": "text",
      "body": "网络安全\n---"
    },
    {
      "id": "intro-125",
      "sectionId": "intro",
      "title": "接口安全",
      "kind": "code",
      "lang": "shell",
      "code": "# 接口视图下\n# 开启接口安全\nport-security enable\n# 设置当前接口只能由 MAC 地址 MAC-ADDRESS 的设备访问\nport-security mac-address sticky MAC-ADDRESS\n# 设置安全 MAC 地址最大数为 1\nport-security max-mac-num 1\n# 设置其他非安全 MAC 地址数据帧处理动作为 关闭接口\nport-security protect-action shutdown\n# 设置安全 MAC 地址老化时间为 300s\nport-security aging-time 300"
    },
    {
      "id": "intro-126",
      "sectionId": "intro",
      "title": "访问控制列表（Access Control List）",
      "kind": "text",
      "body": "• 由一系列规则组成的集合，通过规则对报文分类处理。\n• 通常由若干条 <red>deny</red>（拒绝） | <code>permit</code>（允许） 语句组成。"
    },
    {
      "id": "intro-127",
      "sectionId": "intro",
      "title": "基本访问控制列表",
      "kind": "text",
      "body": "范围只能在 2000 - 2999。"
    },
    {
      "id": "intro-128",
      "sectionId": "intro",
      "title": "基本访问控制列表",
      "kind": "code",
      "lang": "shell",
      "code": "# 系统视图下\nacl 2000\n# 规则 拒绝 源 IP地址 反码\n# deny 拒绝 permit 允许\nrule deny source IP-ADDRESS MASK\n# 接口视图下\n# 传输过滤 输出 规则 2000\n# outbound 输出\n# inbound 输入\ntraffic-filter outbound acl 2000"
    },
    {
      "id": "intro-129",
      "sectionId": "intro",
      "title": "高级访问控制列表",
      "kind": "text",
      "body": "范围 3000 - 3999。"
    },
    {
      "id": "intro-130",
      "sectionId": "intro",
      "title": "高级访问控制列表",
      "kind": "code",
      "lang": "shell",
      "code": "# 系统视图下\nacl 3000\n# 规则 id5 拒绝 tcp 源 IP-ADDRESS 反码 访问目标 IP-ADDRESS 反码 目标端口 范围 20 21\nrule 5 deny tcp source IP-ADDRESS MASK destination IP-ADDRESS MASK destination-port range 20 21\n#规则 id10 允许 tcp 源 IP-ADDRESS 反码 访问目标 IP-ADDRESS 反码 目标端口 等于 80\n# gt 大于\n# lt 小于\nrule 10 permit tcp source IP-ADDRESS MASK destination IP-ADDRESS MASK destination-port eq 80"
    },
    {
      "id": "intro-131",
      "sectionId": "intro",
      "title": "高级访问控制列表",
      "kind": "text",
      "body": "应尽量在靠近源地址的接口上应用；允许某个网段后，应拒绝其他网段。对于 FTP，需要同时指定 FTP（21）和 FTP-DATA（20）端口。"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/huawei-devices.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/huawei-devices.md",
    "generatedAt": "2025-12-16T07:36:11.268Z",
    "lang": "zh",
    "mode": "local"
  }
}