{
  "id": "oracle",
  "name": "Oracle 备忘清单",
  "title": "Oracle 备忘清单",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/oracle.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 0
    },
    {
      "id": "s2",
      "title": "SEQUENCES",
      "startIndex": 8
    },
    {
      "id": "s3",
      "title": "DDL SQL",
      "startIndex": 51
    },
    {
      "id": "s4",
      "title": "INDEXES",
      "startIndex": 92
    },
    {
      "id": "s5",
      "title": "DBA 相关",
      "startIndex": 124
    },
    {
      "id": "s6",
      "title": "另见",
      "startIndex": 145
    }
  ],
  "cards": [
    {
      "id": "s1-0",
      "sectionId": "s1",
      "title": "SELECT%20%E8%AF%AD%E5%8F%A5",
      "body": "%60%60%60sql%0ASELECT%20*%20%0AFROM%20beverages%20%0AWHERE%20field1%20%3D%20'Kona'%20%0A%20%20AND%20field2%20%3D%20'coffee'%20%0A%20%20AND%20field3%20%3D%20122%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "SELECT INTO 语句",
      "body": "```sql\nSELECT name, address, phone_number \nINTO v_employee_name, v_employee_address, v_employee_phone_number \nFROM employee \nWHERE employee_id = 6;\n```"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "INSERT%20%E8%AF%AD%E5%8F%A5",
      "body": "%E4%BD%BF%E7%94%A8%20VALUES%20%E5%85%B3%E9%94%AE%E5%AD%97%E6%8F%92%E5%85%A5%0A%0A%60%60%60sql%0AINSERT%20INTO%20table_name%20%0AVALUES%20('Value1'%2C%20'Value2'%2C%20...%20)%3B%0A%0AINSERT%20INTO%20table_name%20(Column1%2C%20Column2%2C%20...%20)%20%0AVALUES%20(%20'Value1'%2C%20'Value2'%2C%20...%20)%3B%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20SELECT%20%E8%AF%AD%E5%8F%A5%E6%8F%92%E5%85%A5%0A%0A%60%60%60sql%0AINSERT%20INTO%20table_name%0ASELECT%20Value1%2C%20Value2%2C%20...%0AFROM%20table_name%3B%0A%0AINSERT%20INTO%20table_name%20(Column1%2C%20Column2%2C%20...)%0ASELECT%20Value1%2C%20Value2%2C%20...%0AFROM%20table_name%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "DELETE 语句",
      "body": "```sql\nDELETE FROM table_name \nWHERE some_column = some_value;\n\nDELETE FROM customer \nWHERE sold = 0;\n```"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "UPDATE%20%E8%AF%AD%E5%8F%A5",
      "body": "%60%60%60sql%0A--%20%E6%9B%B4%E6%96%B0%E8%AF%A5%E8%A1%A8%E7%9A%84%E6%95%B4%E4%B8%AA%E5%88%97%EF%BC%8C%E8%AE%BE%E7%BD%AE%20%60state%60%20%E5%88%97%E6%89%80%E6%9C%89%E5%80%BC%E4%B8%BA%20%60CA%60%0AUPDATE%20customer%20SET%20state%3D'CA'%3B%0A--%20%E6%9B%B4%E6%96%B0%E8%A1%A8%E7%9A%84%E5%85%B7%E4%BD%93%E8%AE%B0%E5%BD%95eg%EF%BC%9A%0AUPDATE%20customer%20SET%20name%3D'Joe'%20WHERE%20customer_id%3D10%3B%0A--%20%E5%BD%93%20%60paid%60%20%E5%88%97%E5%A4%A7%E4%BA%8E%E9%9B%B6%E6%97%B6%EF%BC%8C%E5%B0%86%E5%88%97%20%60invoice%60%20%E6%9B%B4%E6%96%B0%E4%B8%BA%20%60paid%60%0AUPDATE%20movies%20SET%20invoice%3D'paid'%20WHERE%20paid%20%3E%200%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-8",
      "sectionId": "s2",
      "title": "CREATE SEQUENCE",
      "body": "序列的语法是\n\n```sql\nCREATE SEQUENCE sequence_name\n    MINVALUE value\n    MAXVALUE value\n    START WITH value\n    INCREMENT BY value\n    CACHE value;\n```\n\n例如\n\n```sql\nCREATE SEQUENCE supplier_seq\n    MINVALUE 1\n    MAXVALUE 999999999999999999999999999\n    START WITH 1\n    INCREMENT BY 1\n    CACHE 20;\n```"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "body": "将序列增加一定数量\n\n```sql\nALTER SEQUENCE <sequence_name> INCREMENT BY <integer>;\nALTER SEQUENCE seq_inc_by_ten  INCREMENT BY 10;\n```\n\n改变序列的最大值\n\n```sql\nALTER SEQUENCE <sequence_name> MAXVALUE <integer>;\nALTER SEQUENCE seq_maxval  MAXVALUE  10;\n```\n\n设置序列循环或不循环\n\n```sql\nALTER SEQUENCE <sequence_name> <CYCLE | NOCYCLE>;\nALTER SEQUENCE seq_cycle NOCYCLE;\n```\n\n配置序列以缓存值\n\n```sql\nALTER SEQUENCE <sequence_name> CACHE <integer> | NOCACHE;\nALTER SEQUENCE seq_cache NOCACHE;\n```\n\n设置是否按顺序返回值\n\n```sql\nALTER SEQUENCE <sequence_name> <ORDER | NOORDER>;\nALTER SEQUENCE seq_order NOORDER;\nALTER SEQUENCE seq_order;\n```"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%94%9F%E6%88%90%E6%9F%A5%E8%AF%A2",
      "body": "%E6%9C%89%E6%97%B6%E9%9C%80%E8%A6%81%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%9B%E5%BB%BA%E6%9F%A5%E8%AF%A2%0A%0A%60%60%60sql%0APROCEDURE%20oracle_runtime_query_pcd%20IS%0A%20%20%20%20TYPE%20ref_cursor%20IS%20REF%20CURSOR%3B%0A%20%20%20%20l_cursor%20%20%20%20%20%20%20%20ref_cursor%3B%0A%0A%20%20%20%20v_query%20%20%20%20%20%20%20%20%20varchar2(5000)%3B%0A%20%20%20%20v_name%20%20%20%20%20%20%20%20%20%20varchar2(64)%3B%0ABEGIN%0A%20%20%20%20v_query%20%3A%3D%20'SELECT%20name%20FROM%20employee%20WHERE%20employee_id%3D5'%3B%0A%20%20%20%20OPEN%20l_cursor%20FOR%20v_query%3B%0A%20%20%20%20LOOP%0A%20%20%20%20%20%20FETCH%20l_cursor%20INTO%20v_name%3B%0A%20%20%20%20%20%20EXIT%20WHEN%20l_cursor%25NOTFOUND%3B%0A%20%20%20%20END%20LOOP%3B%0A%20%20%20%20CLOSE%20l_cursor%3B%0AEND%3B%0A%60%60%60%0A%0A%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A6%82%E4%BD%95%E5%AE%8C%E6%88%90%E5%8A%A8%E6%80%81%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%E7%9A%84%E7%A4%BA%E4%BE%8B",
      "encoded": true
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C",
      "body": "%60%60%60sql%0Alength(%20string1%20)%3B%0A%60%60%60%0A%0A%60%60%60sql%0ASELECT%20length('hello%20world')%20FROM%20dual%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%2011%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%8F%82%E6%95%B0%E7%94%B1%2011%20%E4%B8%AA%E5%AD%97%E7%AC%A6%E7%BB%84%E6%88%90%EF%BC%8C%E5%8C%85%E6%8B%AC%E7%A9%BA%E6%A0%BC%0A%0A%60%60%60sql%0ASELECT%20lengthb('hello%20world')%20FROM%20dual%3B%0ASELECT%20lengthc('hello%20world')%20FROM%20dual%3B%0ASELECT%20length2('hello%20world')%20FROM%20dual%3B%0ASELECT%20length4('hello%20world')%20FROM%20dual%3B%0A%60%60%60%0A%0A%E8%BF%99%E4%BA%9B%E4%B9%9F%E8%BF%94%E5%9B%9E%20%6011%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%E8%B0%83%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0%E6%98%AF%E7%AD%89%E4%BB%B7%E7%9A%84",
      "encoded": true
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "Instr",
      "body": "%60Instr%60%EF%BC%88%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%EF%BC%89%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%95%B4%E6%95%B0%EF%BC%8C%E8%AF%A5%E6%95%B4%E6%95%B0%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BD%8D%E7%BD%AE%E3%80%82%E7%A8%8B%E5%BA%8F%E5%91%98%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E4%BB%96%E4%BB%AC%E6%83%B3%E8%A6%81%E6%A3%80%E6%B5%8B%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%A4%96%E8%A7%82%E4%BB%A5%E5%8F%8A%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%E3%80%82%E4%B8%8D%E6%88%90%E5%8A%9F%E7%9A%84%E6%90%9C%E7%B4%A2%E8%BF%94%E5%9B%9E%20%600%60%0A%0A%60%60%60sql%0Ainstr(%20string1%2C%20string2%2C%20%5B%20start_position%20%5D%2C%20%5B%20nth_appearance%20%5D%20)%0A%60%60%60%0A%0A%60%60%60sql%0Ainstr(%20'oracle%20pl%2Fsql%20cheatsheet'%2C%20'%2F')%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%20%6010%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E7%9A%84%20%60%2F%60%20%E6%98%AF%E7%AC%AC%E5%8D%81%E4%B8%AA%E5%AD%97%E7%AC%A6%0A%0A%60%60%60sql%0Ainstr(%20'oracle%20pl%2Fsql%20cheatsheet'%2C%20'e'%2C%201%2C%202)%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%20%6017%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%87%BA%E7%8E%B0%E7%9A%84%20%60e%60%20%E6%98%AF%E7%AC%AC%20%6017%60%20%E4%B8%AA%E5%AD%97%E7%AC%A6%0A%0A%60%60%60sql%0Ainstr(%20'oracle%20pl%2Fsql%20cheatsheet'%2C%20'%2F'%2C%2012%2C%201)%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%20%600%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E7%9A%84%20%60%2F%60%20%E5%9C%A8%E8%B5%B7%E7%82%B9%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%8D%B3%E7%AC%AC%20%6012%60%20%E4%B8%AA%E5%AD%97%E7%AC%A6",
      "encoded": true
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "Replace",
      "body": "%60%60%60sql%0Areplace(string1%2C%20string_to_replace%2C%20%5B%20replacement_string%20%5D%20)%3B%0A%0Areplace('i%20am%20here'%2C'am'%2C'am%20not')%3B%0A%60%60%60%0A%0A%E8%BF%99%E8%BF%94%E5%9B%9E%20%60i%20am%20not%20here%60",
      "encoded": true
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "Substr",
      "body": "%60%60%60sql%0ASELECT%20substr(%20'oracle%20pl%2Fsql%20cheatsheet'%2C%208%2C%206)%20FROM%20dual%3B%0A%60%60%60%0A%0A%E8%BF%94%E5%9B%9E%20%60pl%2Fsql%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%20%60pl%2Fsql%60%20%E4%B8%AD%E7%9A%84%20%60p%60%20%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%AC%AC%20%608%60%20%E4%B8%AA%E4%BD%8D%E7%BD%AE%EF%BC%88%E4%BB%8E%20%60oracle%60%20%E4%B8%AD%E7%9A%84%20%60o%60%20%E5%A4%84%E7%9A%84%20%601%60%20%E5%BC%80%E5%A7%8B%E8%AE%A1%E7%AE%97%EF%BC%89%0A%0A%60%60%60sql%0ASELECT%20substr(%20'oracle%20pl%2Fsql%20cheatsheet'%2C%2015)%20FROM%20dual%3B%0A%60%60%60%0A%0A%E8%BF%94%E5%9B%9E%20%60cheatsheet%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%20%60c%60%20%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%AC%AC%20%6015%60%20%E4%B8%AA%E4%BD%8D%E7%BD%AE%EF%BC%8C%60t%60%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E3%80%82%0A%0A%60%60%60sql%0ASELECT%20substr('oracle%20pl%2Fsql%20cheatsheet'%2C%20-10%2C%205)%20FROM%20dual%3B%0A%60%60%60%0A%0A%E8%BF%94%E5%9B%9E%20%60cheat%60%EF%BC%8C%E5%9B%A0%E4%B8%BA%20%60c%60%20%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%AC%AC%20%6010%60%20%E4%B8%AA%E5%AD%97%E7%AC%A6%EF%BC%8C%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9C%AB%E5%B0%BE%E4%BB%A5%20%60t%60%20%E4%BD%9C%E4%B8%BA%E4%BD%8D%E7%BD%AE%20%601%60%20%E5%BC%80%E5%A7%8B%E8%AE%A1%E7%AE%97%E3%80%82",
      "encoded": true
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "Trim",
      "body": "%E8%BF%99%E4%BA%9B%E5%87%BD%E6%95%B0%E5%8F%AF%E7%94%A8%E4%BA%8E%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E8%BF%87%E6%BB%A4%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E5%AD%97%E7%AC%A6%E3%80%82%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%AE%83%E4%BB%AC%E4%BC%9A%E5%88%A0%E9%99%A4%E7%A9%BA%E6%A0%BC%EF%BC%8C%E4%BD%86%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E8%A6%81%E5%88%A0%E9%99%A4%E7%9A%84%E5%AD%97%E7%AC%A6%E9%9B%86%0A%0A%60%60%60sql%0Atrim%20(%20%5B%20leading%20%7C%20trailing%20%7C%20both%20%5D%20%5B%20trim-char%20%5D%20from%20string-to-be-trimmed%20)%3B%0Atrim%20('%20%20%20%E5%88%A0%E9%99%A4%E4%B8%A4%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%20%20%20%20%20')%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%E2%80%9C%60%E5%88%A0%E9%99%A4%E4%B8%A4%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%60%E2%80%9D%0A%0A%60%60%60sql%0Altrim%20(%20string-to-be-trimmed%20%5B%2C%20trimming-char-set%20%5D%20)%3B%0Altrim%20('%20%20%20%E5%88%A0%E9%99%A4%E5%B7%A6%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%20%20%20%20%20')%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%E2%80%9C%60%E5%88%A0%E9%99%A4%E5%B7%A6%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%60%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%E2%80%9D%0A%0A%60%60%60sql%0Artrim%20(%20string-to-be-trimmed%20%5B%2C%20trimming-char-set%20%5D%20)%3B%0Artrim%20('%20%20%20%E5%88%A0%E9%99%A4%E5%8F%B3%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%20%20%20%20%20')%3B%0A%60%60%60%0A%0A%E8%BF%99%E5%B0%86%E8%BF%94%E5%9B%9E%E2%80%9C%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%60%E5%88%A0%E9%99%A4%E5%8F%B3%E4%BE%A7%E7%9A%84%E7%A9%BA%E6%A0%BC%60%E2%80%9D",
      "encoded": true
    },
    {
      "id": "s3-51",
      "sectionId": "s3",
      "title": "创建表",
      "body": "创建表的语法\n\n```sql\nCREATE TABLE [table name]\n      ( [column name] [datatype], ... );\n```\n\n示例：\n\n```sql\n CREATE TABLE employee\n       (id int, name varchar(20));\n```"
    },
    {
      "id": "s3-55",
      "sectionId": "s3",
      "title": "添加列",
      "body": "添加列的语法\n\n```sql\nALTER TABLE [table name]\n    ADD ( [column name] [datatype], ... );\n```\n\n示例：\n\n```sql\nALTER TABLE employee\n    ADD (id int)\n```"
    },
    {
      "id": "s3-59",
      "sectionId": "s3",
      "title": "修改列",
      "body": "修改列的语法\n\n```sql\nALTER TABLE [table name]\n    MODIFY ( [column name] [new datatype]);\n```\n\n`ALTER` 表语法和示例：\n\n```sql\nALTER TABLE employee\n    MODIFY( sickHours s float );\n```"
    },
    {
      "id": "s3-63",
      "sectionId": "s3",
      "title": "删除列",
      "body": "删除列的语法\n\n```sql\nALTER TABLE [table name]\n    DROP COLUMN [column name];\n```\n\n示例：\n\n```sql\nALTER TABLE employee\n    DROP COLUMN vacationPay;\n```"
    },
    {
      "id": "s3-67",
      "sectionId": "s3",
      "title": "约束类型和代码",
      "body": "类型代码 | 类型描述 | 作用于级别\n:-- | -- | --\n`C` | 检查表 | Column\n`O` | 在视图上只读 | Object\n`P` | 首要的关键 | Object\n`R` | 参考 AKA 外键 | Column\n`U` | 唯一键 | Column\n`V` | 检查视图上的选项 | Object"
    },
    {
      "id": "s3-68",
      "sectionId": "s3",
      "title": "显示约束",
      "body": "以下语句显示了系统中的所有约束：\n\n```sql\nSELECT\n    table_name,\n    constraint_name,\n    constraint_type\nFROM user_constraints;\n```"
    },
    {
      "id": "s3-70",
      "sectionId": "s3",
      "title": "%E9%80%89%E6%8B%A9%E5%8F%82%E7%85%A7%E7%BA%A6%E6%9D%9F",
      "body": "%E4%BB%A5%E4%B8%8B%E8%AF%AD%E5%8F%A5%E6%98%BE%E7%A4%BA%E4%BA%86%E6%BA%90%E5%92%8C%E7%9B%AE%E6%A0%87%E8%A1%A8%2F%E5%88%97%E5%AF%B9%E7%9A%84%E6%89%80%E6%9C%89%E5%BC%95%E7%94%A8%E7%BA%A6%E6%9D%9F%EF%BC%88%E5%A4%96%E9%94%AE%EF%BC%89%EF%BC%9A%0A%0A%60%60%60sql%0ASELECT%0A%20%20%20%20c_list.CONSTRAINT_NAME%20as%20NAME%2C%0A%20%20%20%20c_src.TABLE_NAME%20as%20SRC_TABLE%2C%0A%20%20%20%20c_src.COLUMN_NAME%20as%20SRC_COLUMN%2C%0A%20%20%20%20c_dest.TABLE_NAME%20as%20DEST_TABLE%2C%0A%20%20%20%20c_dest.COLUMN_NAME%20as%20DEST_COLUMN%0AFROM%20ALL_CONSTRAINTS%20c_list%2C%0A%20%20%20%20ALL_CONS_COLUMNS%20c_src%2C%0A%20%20%20%20ALL_CONS_COLUMNS%20c_dest%0AWHERE%20c_list.CONSTRAINT_NAME%20%3D%20c_src.CONSTRAINT_NAME%0A%20%20%20%20AND%20c_list.R_CONSTRAINT_NAME%20%3D%20c_dest.CONSTRAINT_NAME%0A%20%20%20%20AND%20c_list.CONSTRAINT_TYPE%20%3D%20'R'%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s3-72",
      "sectionId": "s3",
      "title": "对表设置约束",
      "body": "使用 `CREATE TABLE` 语句创建检查约束的语法是：\n\n```sql\nCREATE TABLE table_name\n(\n    column1 datatype null/not null,\n    column2 datatype null/not null,\n    ...\n    CONSTRAINT constraint_name\n    CHECK (column_name condition) [DISABLE]\n);\n```\n\n例如：\n\n```sql\nCREATE TABLE suppliers\n(\n    supplier_id  numeric(4),\n    supplier_name  varchar2(50),\n    CONSTRAINT check_supplier_id\n    CHECK (supplier_id BETWEEN 100 and 9999)\n);\n```"
    },
    {
      "id": "s3-76",
      "sectionId": "s3",
      "title": "表上的唯一索引",
      "body": "使用 `CREATE TABLE` 语句创建唯一约束的语法是：\n\n```sql\nCREATE TABLE table_name\n(\n    column1 datatype null/not null,\n    column2 datatype null/not null,\n    ...\n    CONSTRAINT constraint_name \n    UNIQUE (column1, column2, column_n)\n);\n```\n\n例如：\n\n```sql\nCREATE TABLE customer\n(\n    id   integer not null,\n    name varchar2(20),\n    CONSTRAINT customer_id_constraint\n    UNIQUE (id)\n);\n```"
    },
    {
      "id": "s3-80",
      "sectionId": "s3",
      "title": "添加唯一约束",
      "body": "唯一约束的语法是：\n\n```sql\nALTER TABLE [table name]\n    ADD CONSTRAINT [constraint name] \n    UNIQUE([column name]) \n    USING INDEX [index name];\n```\n\n例如：\n\n```sql\nALTER TABLE employee\n    ADD CONSTRAINT uniqueEmployeeId \n    UNIQUE(employeeId) \n    USING INDEX ourcompanyIndx_tbs;\n```"
    },
    {
      "id": "s3-84",
      "sectionId": "s3",
      "title": "添加外部约束",
      "body": "foregin 约束的语法是：\n\n```sql\nALTER TABLE [table name]\n    ADD CONSTRAINT [constraint name] \n    FOREIGN KEY (column,...) \n    REFERENCES table [(column,...)] \n    [ON DELETE {CASCADE | SET NULL}];\n```\n\n例如：\n\n```sql\nALTER TABLE employee\n    ADD CONSTRAINT fk_departament \n    FOREIGN KEY (departmentId) \n    REFERENCES departments(Id);\n```"
    },
    {
      "id": "s3-88",
      "sectionId": "s3",
      "title": "删除约束",
      "body": "删除（删除）约束的语法是：\n\n```sql\nALTER TABLE [table name]\n    DROP CONSTRAINT [constraint name];\n```\n\n例如：\n\n```sql\nALTER TABLE employee\n    DROP CONSTRAINT uniqueEmployeeId;\n```"
    },
    {
      "id": "s4-92",
      "sectionId": "s4",
      "title": "创建索引",
      "body": "创建索引的语法是：\n\n```sql\nCREATE [UNIQUE] INDEX index_name\n    ON table_name (\n        column1,\n        column2,\n        . \n        column_n\n    )\n    [ COMPUTE STATISTICS ];\n```\n\n• `UNIQUE` 表示索引列中值的组合必须是唯一的\n• `COMPUTE STATISTICS` 告诉 Oracle 在创建索引期间收集统计信息。然后优化器使用这些统计信息来选择执行语句时的最佳执行计划。例如：\n\n```sql\nCREATE INDEX customer_idx\n    ON customer (customer_name);\n```\n\n在此示例中，已在名为 `customer_idx` 的客户表上创建了一个索引。它仅包含 `customer_name` 字段\n\n下面创建一个包含多个字段的索引：\n\n```sql\nCREATE INDEX customer_idx\n    ON supplier (customer_name, country);\n```\n\n以下内容在创建索引时收集统计信息：\n\n```sql\nCREATE INDEX customer_idx\n    ON supplier (customer_name, country)\n    COMPUTE STATISTICS;\n```"
    },
    {
      "id": "s4-101",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "body": "在 `Oracle` 中，您不仅限于在列上创建索引。您可以创建基于函数的索引\n\n创建基于函数的索引的语法是：\n\n```sql\nCREATE [UNIQUE] INDEX index_name\n    ON table_name (function1, function2, . function_n)\n    [ COMPUTE STATISTICS ];\n```\n\n例如：\n\n```sql\nCREATE INDEX customer_idx\n    ON customer (UPPER(customer_name));\n-- 已创建基于 customer_name 字段的大写评估的索引\n```\n\n为确保 `Oracle` 优化器在执行 SQL 语句时使用此索引，请确保 `UPPER(customer_name)` 的计算结果不为 `NULL` 值。 为确保这一点，请将 `UPPER(customer_name) IS NOT NULL` 添加到 `WHERE` 子句中，如下所示：\n\n```sql\nSELECT customer_id, customer_name, UPPER(customer_name)\nFROM customer\nWHERE UPPER(customer_name) IS NOT NULL\nORDER BY UPPER(customer_name);\n```"
    },
    {
      "id": "s4-108",
      "sectionId": "s4",
      "title": "重命名索引",
      "body": "重命名索引的语法是：\n\n```sql\nALTER INDEX index_name\n    RENAME TO new_index_name;\n```\n\n例如：\n\n```sql\nALTER INDEX customer_id\n    RENAME TO new_customer_id;\n```\n\n在此示例中，`customer_id` 重命名为 `new_customer_id`"
    },
    {
      "id": "s4-113",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "body": "如果您需要在索引首次创建后收集统计信息或者您想要更新统计信息，您总是可以使用 ALTER INDEX 命令来收集统计信息。 您收集统计信息以便 `oracle` 可以有效地使用索引。 这将重新计算表大小、行数、块数、段数并更新字典表，以便 `oracle` 在选择执行计划时可以有效地使用数据。\n\n收集索引统计信息的语法是：\n\n```sql\nALTER INDEX index_name\n    REBUILD COMPUTE STATISTICS;\n```\n\n例如：\n\n```sql\nALTER INDEX customer_idx\n    REBUILD COMPUTE STATISTICS;\n```\n\n在此示例中，为名为 `customer_idx` 的索引收集统计信息"
    },
    {
      "id": "s4-119",
      "sectionId": "s4",
      "title": "删除索引",
      "body": "删除索引的语法是：\n\n```sql\nDROP INDEX index_name;\n```\n\n例如：\n\n```sql\nDROP INDEX customer_idx;\n```\n\n在此示例中，删除了 `customer_idx`"
    },
    {
      "id": "s5-124",
      "sectionId": "s5",
      "title": "创建用户",
      "body": "创建用户的语法是：\n\n```sql\nCREATE USER username\n    IDENTIFIED BY password;\n```\n\n例如：\n\n```sql\nCREATE USER brian IDENTIFIED BY brianpass;\n```"
    },
    {
      "id": "s5-128",
      "sectionId": "s5",
      "title": "授予特权",
      "body": "授予权限的语法是：\n\n```sql\nGRANT privilege TO user;\n```\n\n例如：\n\n```sql\nGRANT dba TO brian;\n```"
    },
    {
      "id": "s5-132",
      "sectionId": "s5",
      "title": "更改密码",
      "body": "更改用户密码的语法是：\n\n```sql\nALTER USER username IDENTIFIED BY password;\n```\n\n例如：\n\n```sql\nALTER USER brian IDENTIFIED BY brianpassword;\n```"
    },
    {
      "id": "s5-136",
      "sectionId": "s5",
      "title": "查看表空间的名称以及大小",
      "body": "```sql\nSELECT t.table_name,\n       ROUND(SUM(bytes / (1024 * 1024)), 0) AS ts_size\nFROM dba_tablespaces t,\n     dba_data_files d\nWHERE t.table_name = d.table_name\nGROUP BY t.table_name;\n```"
    },
    {
      "id": "s5-137",
      "sectionId": "s5",
      "title": "查看还没提交的事务",
      "body": "```sql\nselect * from v$locked_object;\nselect * from v$transaction;\n```"
    },
    {
      "id": "s5-138",
      "sectionId": "s5",
      "title": "查看数据库库对象",
      "body": "```sql\nSELECT owner, object_type, status, COUNT(*) AS count#\nFROM all_objects\nGROUP BY owner, object_type, status;\n```"
    },
    {
      "id": "s5-139",
      "sectionId": "s5",
      "title": "%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%89%88%E6%9C%AC",
      "body": "%60%60%60sql%0ASELECT%20version%0AFROM%20Product_component_version%0AWHERE%20SUBSTR(PRODUCT%2C%201%2C%206)%20%3D%20'Oracle'%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-140",
      "sectionId": "s5",
      "title": "查看数据库的创建日期和归档方式",
      "body": "```sql\nSELECT created, Log_Mode, Log_Mode \nFROM v$Database;\n```"
    },
    {
      "id": "s5-141",
      "sectionId": "s5",
      "title": "查看控制文件",
      "body": "```sql\nselect name from v$controlfile;\n```"
    },
    {
      "id": "s5-142",
      "sectionId": "s5",
      "title": "查看日志文件",
      "body": "```sql\nselect member from v$logfile;\n```"
    },
    {
      "id": "s5-143",
      "sectionId": "s5",
      "title": "查看表空间的使用情況",
      "body": "```sql\nSELECT SUM(bytes)/(1024*1024) AS free_space,\n       tablespace_name\nFROM dba_free_space\nGROUP BY tablespace_name;\n```"
    },
    {
      "id": "s5-144",
      "sectionId": "s5",
      "title": "%E6%8D%95%E6%8D%89%E8%BF%90%E8%A1%8C%E5%BE%88%E4%B9%85%E7%9A%84SOL",
      "body": "%60%60%60sql%0ACOLUMN%20username%20FORMAT%20A12%0ACOLUMN%20opname%20FORMAT%20A16%0ACOLUMN%20progress%20FORMAT%20A8%0A%0ASELECT%20username%2C%0A%20%20%20%20%20%20%20sid%2C%0A%20%20%20%20%20%20%20opname%2C%0A%20%20%20%20%20%20%20ROUND(sofar%20*%20100%20%2F%20totalwork%2C%200)%20%7C%7C%20'%25'%20AS%20progress%2C%0A%20%20%20%20%20%20%20time_remaining%2C%0A%20%20%20%20%20%20%20sql_text%0AFROM%20v%24session_longops%2C%20v%24sql%0AWHERE%20time_remaining%20%3C%3E%200%0A%20%20AND%20sql_address%20%3D%20address%0A%20%20AND%20sql_hash_value%20%3D%20hash_value%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s6-145",
      "sectionId": "s6",
      "title": "另见",
      "body": "• [Oracle Database/SQL Cheatsheet](https://en.wikibooks.org/wiki/Oracle_Database/SQL_Cheatsheet) _(wikibooks.org)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/oracle.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/oracle.md",
    "lang": "zh",
    "mode": "local"
  }
}