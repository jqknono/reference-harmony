{
  "id": "oracle",
  "name": "Oracle 备忘清单",
  "title": "Oracle 备忘清单",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/oracle.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 0
    },
    {
      "id": "s2",
      "title": "SEQUENCES",
      "startIndex": 8
    },
    {
      "id": "s3",
      "title": "DDL SQL",
      "startIndex": 55
    },
    {
      "id": "s4",
      "title": "INDEXES",
      "startIndex": 96
    },
    {
      "id": "s5",
      "title": "DBA 相关",
      "startIndex": 128
    },
    {
      "id": "s6",
      "title": "另见",
      "startIndex": 149
    }
  ],
  "cards": [
    {
      "id": "s1-0",
      "sectionId": "s1",
      "title": "SELECT 语句",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT * \nFROM beverages \nWHERE field1 = 'Kona' \n  AND field2 = 'coffee' \n  AND field3 = 122;"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "SELECT INTO 语句",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT name, address, phone_number \nINTO v_employee_name, v_employee_address, v_employee_phone_number \nFROM employee \nWHERE employee_id = 6;"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "INSERT 语句",
      "kind": "text",
      "body": "使用 VALUES 关键字插入"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "INSERT 语句",
      "kind": "code",
      "lang": "sql",
      "code": "INSERT INTO table_name \nVALUES ('Value1', 'Value2', ... );\n\nINSERT INTO table_name (Column1, Column2, ... ) \nVALUES ( 'Value1', 'Value2', ... );"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "INSERT 语句",
      "kind": "text",
      "body": "使用 SELECT 语句插入"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "INSERT 语句",
      "kind": "code",
      "lang": "sql",
      "code": "INSERT INTO table_name\nSELECT Value1, Value2, ...\nFROM table_name;\n\nINSERT INTO table_name (Column1, Column2, ...)\nSELECT Value1, Value2, ...\nFROM table_name;"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "DELETE 语句",
      "kind": "code",
      "lang": "sql",
      "code": "DELETE FROM table_name \nWHERE some_column = some_value;\n\nDELETE FROM customer \nWHERE sold = 0;"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "UPDATE 语句",
      "kind": "code",
      "lang": "sql",
      "code": "-- 更新该表的整个列，设置 `state` 列所有值为 `CA`\nUPDATE customer SET state='CA';\n-- 更新表的具体记录eg：\nUPDATE customer SET name='Joe' WHERE customer_id=10;\n-- 当 `paid` 列大于零时，将列 `invoice` 更新为 `paid`\nUPDATE movies SET invoice='paid' WHERE paid > 0;"
    },
    {
      "id": "s2-8",
      "sectionId": "s2",
      "title": "CREATE SEQUENCE",
      "kind": "text",
      "body": "序列的语法是"
    },
    {
      "id": "s2-9",
      "sectionId": "s2",
      "title": "CREATE SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE SEQUENCE sequence_name\n    MINVALUE value\n    MAXVALUE value\n    START WITH value\n    INCREMENT BY value\n    CACHE value;"
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "CREATE SEQUENCE",
      "kind": "text",
      "body": "例如"
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "CREATE SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE SEQUENCE supplier_seq\n    MINVALUE 1\n    MAXVALUE 999999999999999999999999999\n    START WITH 1\n    INCREMENT BY 1\n    CACHE 20;"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "text",
      "body": "将序列增加一定数量"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER SEQUENCE <sequence_name> INCREMENT BY <integer>;\nALTER SEQUENCE seq_inc_by_ten  INCREMENT BY 10;"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "text",
      "body": "改变序列的最大值"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER SEQUENCE <sequence_name> MAXVALUE <integer>;\nALTER SEQUENCE seq_maxval  MAXVALUE  10;"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "text",
      "body": "设置序列循环或不循环"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER SEQUENCE <sequence_name> <CYCLE | NOCYCLE>;\nALTER SEQUENCE seq_cycle NOCYCLE;"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "text",
      "body": "配置序列以缓存值"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER SEQUENCE <sequence_name> CACHE <integer> | NOCACHE;\nALTER SEQUENCE seq_cache NOCACHE;"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "text",
      "body": "设置是否按顺序返回值"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "ALTER SEQUENCE",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER SEQUENCE <sequence_name> <ORDER | NOORDER>;\nALTER SEQUENCE seq_order NOORDER;\nALTER SEQUENCE seq_order;"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "从字符串生成查询",
      "kind": "text",
      "body": "有时需要从字符串创建查询"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "从字符串生成查询",
      "kind": "code",
      "lang": "sql",
      "code": "PROCEDURE oracle_runtime_query_pcd IS\n    TYPE ref_cursor IS REF CURSOR;\n    l_cursor        ref_cursor;\n\n    v_query         varchar2(5000);\n    v_name          varchar2(64);\nBEGIN\n    v_query := 'SELECT name FROM employee WHERE employee_id=5';\n    OPEN l_cursor FOR v_query;\n    LOOP\n      FETCH l_cursor INTO v_name;\n      EXIT WHEN l_cursor%NOTFOUND;\n    END LOOP;\n    CLOSE l_cursor;\nEND;"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "从字符串生成查询",
      "kind": "text",
      "body": "这是一个如何完成动态查询的非常简单的示例"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "code",
      "lang": "sql",
      "code": "length( string1 );"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT length('hello world') FROM dual;"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "text",
      "body": "这将返回 11，因为参数由 11 个字符组成，包括空格"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT lengthb('hello world') FROM dual;\nSELECT lengthc('hello world') FROM dual;\nSELECT length2('hello world') FROM dual;\nSELECT length4('hello world') FROM dual;"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "字符串操作",
      "kind": "text",
      "body": "这些也返回 `11`，因为调用的函数是等价的"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "text",
      "body": "`Instr`（在字符串中）返回一个整数，该整数指定字符串中子字符串的位置。程序员可以指定他们想要检测的字符串的外观以及起始位置。不成功的搜索返回 `0`"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "code",
      "lang": "sql",
      "code": "instr( string1, string2, [ start_position ], [ nth_appearance ] )"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "code",
      "lang": "sql",
      "code": "instr( 'oracle pl/sql cheatsheet', '/');"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "text",
      "body": "这将返回 `10`，因为第一次出现的 `/` 是第十个字符"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "code",
      "lang": "sql",
      "code": "instr( 'oracle pl/sql cheatsheet', 'e', 1, 2);"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "text",
      "body": "这将返回 `17`，因为第二次出现的 `e` 是第 `17` 个字符"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "code",
      "lang": "sql",
      "code": "instr( 'oracle pl/sql cheatsheet', '/', 12, 1);"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "Instr",
      "kind": "text",
      "body": "这将返回 `0`，因为第一次出现的 `/` 在起点之前，即第 `12` 个字符"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "Replace",
      "kind": "code",
      "lang": "sql",
      "code": "replace(string1, string_to_replace, [ replacement_string ] );\n\nreplace('i am here','am','am not');"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "Replace",
      "kind": "text",
      "body": "这返回 `i am not here`"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT substr( 'oracle pl/sql cheatsheet', 8, 6) FROM dual;"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "text",
      "body": "返回 `pl/sql`，因为 `pl/sql` 中的 `p` 在字符串中的第 `8` 个位置（从 `oracle` 中的 `o` 处的 `1` 开始计算）"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT substr( 'oracle pl/sql cheatsheet', 15) FROM dual;"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "text",
      "body": "返回 `cheatsheet`，因为 `c` 在字符串中的第 `15` 个位置，`t`是字符串中的最后一个字符。"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT substr('oracle pl/sql cheatsheet', -10, 5) FROM dual;"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "Substr",
      "kind": "text",
      "body": "返回 `cheat`，因为 `c` 是字符串中的第 `10` 个字符，从字符串末尾以 `t` 作为位置 `1` 开始计算。"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "text",
      "body": "这些函数可用于从字符串中过滤不需要的字符。默认情况下，它们会删除空格，但也可以指定要删除的字符集"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "code",
      "lang": "sql",
      "code": "trim ( [ leading | trailing | both ] [ trim-char ] from string-to-be-trimmed );\ntrim ('   删除两侧的空格     ');"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "text",
      "body": "这将返回“`删除两侧的空格`”"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "code",
      "lang": "sql",
      "code": "ltrim ( string-to-be-trimmed [, trimming-char-set ] );\nltrim ('   删除左侧的空格     ');"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "text",
      "body": "这将返回“`删除左侧的空格`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;”"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "code",
      "lang": "sql",
      "code": "rtrim ( string-to-be-trimmed [, trimming-char-set ] );\nrtrim ('   删除右侧的空格     ');"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "Trim",
      "kind": "text",
      "body": "这将返回“&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`删除右侧的空格`”"
    },
    {
      "id": "s3-55",
      "sectionId": "s3",
      "title": "创建表",
      "kind": "text",
      "body": "创建表的语法"
    },
    {
      "id": "s3-56",
      "sectionId": "s3",
      "title": "创建表",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE TABLE [table name]\n      ( [column name] [datatype], ... );"
    },
    {
      "id": "s3-57",
      "sectionId": "s3",
      "title": "创建表",
      "kind": "text",
      "body": "示例："
    },
    {
      "id": "s3-58",
      "sectionId": "s3",
      "title": "创建表",
      "kind": "code",
      "lang": "sql",
      "code": " CREATE TABLE employee\n       (id int, name varchar(20));"
    },
    {
      "id": "s3-59",
      "sectionId": "s3",
      "title": "添加列",
      "kind": "text",
      "body": "添加列的语法"
    },
    {
      "id": "s3-60",
      "sectionId": "s3",
      "title": "添加列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    ADD ( [column name] [datatype], ... );"
    },
    {
      "id": "s3-61",
      "sectionId": "s3",
      "title": "添加列",
      "kind": "text",
      "body": "示例："
    },
    {
      "id": "s3-62",
      "sectionId": "s3",
      "title": "添加列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    ADD (id int)"
    },
    {
      "id": "s3-63",
      "sectionId": "s3",
      "title": "修改列",
      "kind": "text",
      "body": "修改列的语法"
    },
    {
      "id": "s3-64",
      "sectionId": "s3",
      "title": "修改列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    MODIFY ( [column name] [new datatype]);"
    },
    {
      "id": "s3-65",
      "sectionId": "s3",
      "title": "修改列",
      "kind": "text",
      "body": "`ALTER` 表语法和示例："
    },
    {
      "id": "s3-66",
      "sectionId": "s3",
      "title": "修改列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    MODIFY( sickHours s float );"
    },
    {
      "id": "s3-67",
      "sectionId": "s3",
      "title": "删除列",
      "kind": "text",
      "body": "删除列的语法"
    },
    {
      "id": "s3-68",
      "sectionId": "s3",
      "title": "删除列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    DROP COLUMN [column name];"
    },
    {
      "id": "s3-69",
      "sectionId": "s3",
      "title": "删除列",
      "kind": "text",
      "body": "示例："
    },
    {
      "id": "s3-70",
      "sectionId": "s3",
      "title": "删除列",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    DROP COLUMN vacationPay;"
    },
    {
      "id": "s3-71",
      "sectionId": "s3",
      "title": "约束类型和代码",
      "kind": "text",
      "body": "类型代码 | 类型描述 | 作用于级别\n:-- | -- | --\n`C` | 检查表 | Column\n`O` | 在视图上只读 | Object\n`P` | 首要的关键 | Object\n`R` | 参考 AKA 外键 | Column\n`U` | 唯一键 | Column\n`V` | 检查视图上的选项 | Object"
    },
    {
      "id": "s3-72",
      "sectionId": "s3",
      "title": "显示约束",
      "kind": "text",
      "body": "以下语句显示了系统中的所有约束："
    },
    {
      "id": "s3-73",
      "sectionId": "s3",
      "title": "显示约束",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT\n    table_name,\n    constraint_name,\n    constraint_type\nFROM user_constraints;"
    },
    {
      "id": "s3-74",
      "sectionId": "s3",
      "title": "选择参照约束",
      "kind": "text",
      "body": "以下语句显示了源和目标表/列对的所有引用约束（外键）："
    },
    {
      "id": "s3-75",
      "sectionId": "s3",
      "title": "选择参照约束",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT\n    c_list.CONSTRAINT_NAME as NAME,\n    c_src.TABLE_NAME as SRC_TABLE,\n    c_src.COLUMN_NAME as SRC_COLUMN,\n    c_dest.TABLE_NAME as DEST_TABLE,\n    c_dest.COLUMN_NAME as DEST_COLUMN\nFROM ALL_CONSTRAINTS c_list,\n    ALL_CONS_COLUMNS c_src,\n    ALL_CONS_COLUMNS c_dest\nWHERE c_list.CONSTRAINT_NAME = c_src.CONSTRAINT_NAME\n    AND c_list.R_CONSTRAINT_NAME = c_dest.CONSTRAINT_NAME\n    AND c_list.CONSTRAINT_TYPE = 'R'"
    },
    {
      "id": "s3-76",
      "sectionId": "s3",
      "title": "对表设置约束",
      "kind": "text",
      "body": "使用 `CREATE TABLE` 语句创建检查约束的语法是："
    },
    {
      "id": "s3-77",
      "sectionId": "s3",
      "title": "对表设置约束",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE TABLE table_name\n(\n    column1 datatype null/not null,\n    column2 datatype null/not null,\n    ...\n    CONSTRAINT constraint_name\n    CHECK (column_name condition) [DISABLE]\n);"
    },
    {
      "id": "s3-78",
      "sectionId": "s3",
      "title": "对表设置约束",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s3-79",
      "sectionId": "s3",
      "title": "对表设置约束",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE TABLE suppliers\n(\n    supplier_id  numeric(4),\n    supplier_name  varchar2(50),\n    CONSTRAINT check_supplier_id\n    CHECK (supplier_id BETWEEN 100 and 9999)\n);"
    },
    {
      "id": "s3-80",
      "sectionId": "s3",
      "title": "表上的唯一索引",
      "kind": "text",
      "body": "使用 `CREATE TABLE` 语句创建唯一约束的语法是："
    },
    {
      "id": "s3-81",
      "sectionId": "s3",
      "title": "表上的唯一索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE TABLE table_name\n(\n    column1 datatype null/not null,\n    column2 datatype null/not null,\n    ...\n    CONSTRAINT constraint_name \n    UNIQUE (column1, column2, column_n)\n);"
    },
    {
      "id": "s3-82",
      "sectionId": "s3",
      "title": "表上的唯一索引",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s3-83",
      "sectionId": "s3",
      "title": "表上的唯一索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE TABLE customer\n(\n    id   integer not null,\n    name varchar2(20),\n    CONSTRAINT customer_id_constraint\n    UNIQUE (id)\n);"
    },
    {
      "id": "s3-84",
      "sectionId": "s3",
      "title": "添加唯一约束",
      "kind": "text",
      "body": "唯一约束的语法是："
    },
    {
      "id": "s3-85",
      "sectionId": "s3",
      "title": "添加唯一约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    ADD CONSTRAINT [constraint name] \n    UNIQUE([column name]) \n    USING INDEX [index name];"
    },
    {
      "id": "s3-86",
      "sectionId": "s3",
      "title": "添加唯一约束",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s3-87",
      "sectionId": "s3",
      "title": "添加唯一约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    ADD CONSTRAINT uniqueEmployeeId \n    UNIQUE(employeeId) \n    USING INDEX ourcompanyIndx_tbs;"
    },
    {
      "id": "s3-88",
      "sectionId": "s3",
      "title": "添加外部约束",
      "kind": "text",
      "body": "foregin 约束的语法是："
    },
    {
      "id": "s3-89",
      "sectionId": "s3",
      "title": "添加外部约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    ADD CONSTRAINT [constraint name] \n    FOREIGN KEY (column,...) \n    REFERENCES table [(column,...)] \n    [ON DELETE {CASCADE | SET NULL}];"
    },
    {
      "id": "s3-90",
      "sectionId": "s3",
      "title": "添加外部约束",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s3-91",
      "sectionId": "s3",
      "title": "添加外部约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    ADD CONSTRAINT fk_departament \n    FOREIGN KEY (departmentId) \n    REFERENCES departments(Id);"
    },
    {
      "id": "s3-92",
      "sectionId": "s3",
      "title": "删除约束",
      "kind": "text",
      "body": "删除（删除）约束的语法是："
    },
    {
      "id": "s3-93",
      "sectionId": "s3",
      "title": "删除约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE [table name]\n    DROP CONSTRAINT [constraint name];"
    },
    {
      "id": "s3-94",
      "sectionId": "s3",
      "title": "删除约束",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s3-95",
      "sectionId": "s3",
      "title": "删除约束",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER TABLE employee\n    DROP CONSTRAINT uniqueEmployeeId;"
    },
    {
      "id": "s4-96",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "text",
      "body": "创建索引的语法是："
    },
    {
      "id": "s4-97",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE [UNIQUE] INDEX index_name\n    ON table_name (\n        column1,\n        column2,\n        . \n        column_n\n    )\n    [ COMPUTE STATISTICS ];"
    },
    {
      "id": "s4-98",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "text",
      "body": "• `UNIQUE` 表示索引列中值的组合必须是唯一的\n• `COMPUTE STATISTICS` 告诉 Oracle 在创建索引期间收集统计信息。然后优化器使用这些统计信息来选择执行语句时的最佳执行计划。例如："
    },
    {
      "id": "s4-99",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE INDEX customer_idx\n    ON customer (customer_name);"
    },
    {
      "id": "s4-100",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "text",
      "body": "在此示例中，已在名为 `customer_idx` 的客户表上创建了一个索引。它仅包含 `customer_name` 字段"
    },
    {
      "id": "s4-101",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "text",
      "body": "下面创建一个包含多个字段的索引："
    },
    {
      "id": "s4-102",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE INDEX customer_idx\n    ON supplier (customer_name, country);"
    },
    {
      "id": "s4-103",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "text",
      "body": "以下内容在创建索引时收集统计信息："
    },
    {
      "id": "s4-104",
      "sectionId": "s4",
      "title": "创建索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE INDEX customer_idx\n    ON supplier (customer_name, country)\n    COMPUTE STATISTICS;"
    },
    {
      "id": "s4-105",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "text",
      "body": "在 `Oracle` 中，您不仅限于在列上创建索引。您可以创建基于函数的索引"
    },
    {
      "id": "s4-106",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "text",
      "body": "创建基于函数的索引的语法是："
    },
    {
      "id": "s4-107",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE [UNIQUE] INDEX index_name\n    ON table_name (function1, function2, . function_n)\n    [ COMPUTE STATISTICS ];"
    },
    {
      "id": "s4-108",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s4-109",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE INDEX customer_idx\n    ON customer (UPPER(customer_name));\n-- 已创建基于 customer_name 字段的大写评估的索引"
    },
    {
      "id": "s4-110",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "text",
      "body": "为确保 `Oracle` 优化器在执行 SQL 语句时使用此索引，请确保 `UPPER(customer_name)` 的计算结果不为 `NULL` 值。 为确保这一点，请将 `UPPER(customer_name) IS NOT NULL` 添加到 `WHERE` 子句中，如下所示："
    },
    {
      "id": "s4-111",
      "sectionId": "s4",
      "title": "创建基于函数的索引",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT customer_id, customer_name, UPPER(customer_name)\nFROM customer\nWHERE UPPER(customer_name) IS NOT NULL\nORDER BY UPPER(customer_name);"
    },
    {
      "id": "s4-112",
      "sectionId": "s4",
      "title": "重命名索引",
      "kind": "text",
      "body": "重命名索引的语法是："
    },
    {
      "id": "s4-113",
      "sectionId": "s4",
      "title": "重命名索引",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER INDEX index_name\n    RENAME TO new_index_name;"
    },
    {
      "id": "s4-114",
      "sectionId": "s4",
      "title": "重命名索引",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s4-115",
      "sectionId": "s4",
      "title": "重命名索引",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER INDEX customer_id\n    RENAME TO new_customer_id;"
    },
    {
      "id": "s4-116",
      "sectionId": "s4",
      "title": "重命名索引",
      "kind": "text",
      "body": "在此示例中，`customer_id` 重命名为 `new_customer_id`"
    },
    {
      "id": "s4-117",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "text",
      "body": "如果您需要在索引首次创建后收集统计信息或者您想要更新统计信息，您总是可以使用 ALTER INDEX 命令来收集统计信息。 您收集统计信息以便 `oracle` 可以有效地使用索引。 这将重新计算表大小、行数、块数、段数并更新字典表，以便 `oracle` 在选择执行计划时可以有效地使用数据。"
    },
    {
      "id": "s4-118",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "text",
      "body": "收集索引统计信息的语法是："
    },
    {
      "id": "s4-119",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER INDEX index_name\n    REBUILD COMPUTE STATISTICS;"
    },
    {
      "id": "s4-120",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s4-121",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER INDEX customer_idx\n    REBUILD COMPUTE STATISTICS;"
    },
    {
      "id": "s4-122",
      "sectionId": "s4",
      "title": "收集索引的统计信息",
      "kind": "text",
      "body": "在此示例中，为名为 `customer_idx` 的索引收集统计信息"
    },
    {
      "id": "s4-123",
      "sectionId": "s4",
      "title": "删除索引",
      "kind": "text",
      "body": "删除索引的语法是："
    },
    {
      "id": "s4-124",
      "sectionId": "s4",
      "title": "删除索引",
      "kind": "code",
      "lang": "sql",
      "code": "DROP INDEX index_name;"
    },
    {
      "id": "s4-125",
      "sectionId": "s4",
      "title": "删除索引",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s4-126",
      "sectionId": "s4",
      "title": "删除索引",
      "kind": "code",
      "lang": "sql",
      "code": "DROP INDEX customer_idx;"
    },
    {
      "id": "s4-127",
      "sectionId": "s4",
      "title": "删除索引",
      "kind": "text",
      "body": "在此示例中，删除了 `customer_idx`"
    },
    {
      "id": "s5-128",
      "sectionId": "s5",
      "title": "创建用户",
      "kind": "text",
      "body": "创建用户的语法是："
    },
    {
      "id": "s5-129",
      "sectionId": "s5",
      "title": "创建用户",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE USER username\n    IDENTIFIED BY password;"
    },
    {
      "id": "s5-130",
      "sectionId": "s5",
      "title": "创建用户",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s5-131",
      "sectionId": "s5",
      "title": "创建用户",
      "kind": "code",
      "lang": "sql",
      "code": "CREATE USER brian IDENTIFIED BY brianpass;"
    },
    {
      "id": "s5-132",
      "sectionId": "s5",
      "title": "授予特权",
      "kind": "text",
      "body": "授予权限的语法是："
    },
    {
      "id": "s5-133",
      "sectionId": "s5",
      "title": "授予特权",
      "kind": "code",
      "lang": "sql",
      "code": "GRANT privilege TO user;"
    },
    {
      "id": "s5-134",
      "sectionId": "s5",
      "title": "授予特权",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s5-135",
      "sectionId": "s5",
      "title": "授予特权",
      "kind": "code",
      "lang": "sql",
      "code": "GRANT dba TO brian;"
    },
    {
      "id": "s5-136",
      "sectionId": "s5",
      "title": "更改密码",
      "kind": "text",
      "body": "更改用户密码的语法是："
    },
    {
      "id": "s5-137",
      "sectionId": "s5",
      "title": "更改密码",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER USER username IDENTIFIED BY password;"
    },
    {
      "id": "s5-138",
      "sectionId": "s5",
      "title": "更改密码",
      "kind": "text",
      "body": "例如："
    },
    {
      "id": "s5-139",
      "sectionId": "s5",
      "title": "更改密码",
      "kind": "code",
      "lang": "sql",
      "code": "ALTER USER brian IDENTIFIED BY brianpassword;"
    },
    {
      "id": "s5-140",
      "sectionId": "s5",
      "title": "查看表空间的名称以及大小",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT t.table_name,\n       ROUND(SUM(bytes / (1024 * 1024)), 0) AS ts_size\nFROM dba_tablespaces t,\n     dba_data_files d\nWHERE t.table_name = d.table_name\nGROUP BY t.table_name;"
    },
    {
      "id": "s5-141",
      "sectionId": "s5",
      "title": "查看还没提交的事务",
      "kind": "code",
      "lang": "sql",
      "code": "select * from v$locked_object;\nselect * from v$transaction;"
    },
    {
      "id": "s5-142",
      "sectionId": "s5",
      "title": "查看数据库库对象",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT owner, object_type, status, COUNT(*) AS count#\nFROM all_objects\nGROUP BY owner, object_type, status;"
    },
    {
      "id": "s5-143",
      "sectionId": "s5",
      "title": "查看数据库的版本",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT version\nFROM Product_component_version\nWHERE SUBSTR(PRODUCT, 1, 6) = 'Oracle';"
    },
    {
      "id": "s5-144",
      "sectionId": "s5",
      "title": "查看数据库的创建日期和归档方式",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT created, Log_Mode, Log_Mode \nFROM v$Database;"
    },
    {
      "id": "s5-145",
      "sectionId": "s5",
      "title": "查看控制文件",
      "kind": "code",
      "lang": "sql",
      "code": "select name from v$controlfile;"
    },
    {
      "id": "s5-146",
      "sectionId": "s5",
      "title": "查看日志文件",
      "kind": "code",
      "lang": "sql",
      "code": "select member from v$logfile;"
    },
    {
      "id": "s5-147",
      "sectionId": "s5",
      "title": "查看表空间的使用情況",
      "kind": "code",
      "lang": "sql",
      "code": "SELECT SUM(bytes)/(1024*1024) AS free_space,\n       tablespace_name\nFROM dba_free_space\nGROUP BY tablespace_name;"
    },
    {
      "id": "s5-148",
      "sectionId": "s5",
      "title": "捕捉运行很久的SOL",
      "kind": "code",
      "lang": "sql",
      "code": "COLUMN username FORMAT A12\nCOLUMN opname FORMAT A16\nCOLUMN progress FORMAT A8\n\nSELECT username,\n       sid,\n       opname,\n       ROUND(sofar * 100 / totalwork, 0) || '%' AS progress,\n       time_remaining,\n       sql_text\nFROM v$session_longops, v$sql\nWHERE time_remaining <> 0\n  AND sql_address = address\n  AND sql_hash_value = hash_value;"
    },
    {
      "id": "s6-149",
      "sectionId": "s6",
      "title": "另见",
      "kind": "text",
      "body": "• [Oracle Database/SQL Cheatsheet](https://en.wikibooks.org/wiki/Oracle_Database/SQL_Cheatsheet) _(wikibooks.org)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/oracle.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/oracle.md",
    "lang": "zh",
    "mode": "local"
  }
}