{
  "id": "koajs",
  "name": "Koajs 备忘清单",
  "title": "[![NPM version](https://img.shields.io/npm/v/koa.svg?style=flat)](https://npmjs.org/package/koa)",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/koajs.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 2
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "body": "[![NPM version](https://img.shields.io/npm/v/koa.svg?style=flat)](https://npmjs.org/package/koa)\n[![Downloads](https://img.shields.io/npm/dm/koa.svg?style=flat)](https://www.npmjs.com/package/koa)\n[![Repo Dependents](https://badgen.net/github/dependents-repo/koajs/koa)](https://github.com/koajs/koa/network/dependents)\n[![Github repo](https://badgen.net/badge/icon/Github?icon=github&label)](https://github.com/koajs/koa)"
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "body": "基于 Node.js 平台的下一代 web 开发框架，包含 [Koa](https://koajs.com/) 的 API 参考列表和一些示例\n<!--rehype:style=padding-top: 12px;-->"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "Hello%20World",
      "body": "%5BKoa%5D(https%3A%2F%2Fkoajs.com%2F)%20%E9%9C%80%E8%A6%81%20%5Bnode%20v7.6.0%5D(https%3A%2F%2Fnodejs.org)%20%E6%88%96%E6%9B%B4%E9%AB%98%E7%89%88%E6%9C%AC%E6%9D%A5%E6%94%AF%E6%8C%81ES2015%E3%80%81%E5%BC%82%E6%AD%A5%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%AE%89%E8%A3%85%E8%87%AA%E5%B7%B1%E6%94%AF%E6%8C%81%E7%9A%84%20%60node%60%20%E7%89%88%E6%9C%AC%0A%0A%E2%80%A2%20%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%0A%0A%20%20%60%60%60bash%0A%20%20%24%20mkdir%20myapp%20%23%20%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%0A%20%20%24%20cd%20myapp%20%20%20%20%23%20%E8%BF%9B%E5%85%A5%E7%9B%AE%E5%BD%95%0A%20%20%24%20nvm%20install%207%0A%20%20%24%20npm%20init%20-y%20%23%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%0A%20%20%24%20npm%20install%20koa%20%23%20%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%0A%20%20%60%60%60%0A%0A%E2%80%A2%20%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%20%60index.js%60%20%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%EF%BC%9A%0A%0A%20%20%60%60%60js%0A%20%20const%20Koa%20%3D%20require('koa')%3B%0A%20%20const%20app%20%3D%20new%20Koa()%3B%0A%0A%20%20app.use(async%20ctx%20%3D%3E%20%7B%0A%20%20%20%20ctx.body%20%3D%20'Hello%20World'%3B%0A%20%20%7D)%3B%0A%0A%20%20app.listen(3000)%3B%0A%20%20%60%60%60%0A%0A%E2%80%A2%20%E4%BD%BF%E7%94%A8%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%E8%BF%90%E8%A1%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%0A%0A%20%20%60%60%60bash%0A%20%20%24%20node%20index.js%0A%20%20%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "%E7%BA%A7%E8%81%94",
      "body": "%60%60%60js%0Aconst%20Koa%20%3D%20require('koa')%3B%0Aconst%20app%20%3D%20new%20Koa()%3B%0A%2F%2F%20X-Response-Time%20x%20%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%0Aapp.use(async%20(ctx%2C%20next)%20%3D%3E%20%7B%0A%20%20const%20start%20%3D%20Date.now()%3B%0A%20%20await%20next()%3B%0A%20%20const%20ms%20%3D%20Date.now()%20-%20start%3B%0A%20%20ctx.set('X-Response-Time'%2C%20%60%24%7Bms%7Dms%60)%3B%0A%7D)%3B%0A%2F%2F%20%E8%AE%B0%E5%BD%95%E5%99%A8%20logger%0Aapp.use(async%20(ctx%2C%20next)%20%3D%3E%20%7B%0A%20%20const%20start%20%3D%20Date.now()%3B%0A%20%20await%20next()%3B%0A%20%20const%20ms%20%3D%20Date.now()%20-%20start%3B%0A%20%20console.log(%0A%20%20%20%20%60%24%7Bctx.method%7D%20%24%7Bctx.url%7D%20-%20%24%7Bms%7D%60%0A%20%20)%3B%0A%7D)%3B%0A%2F%2F%20%E5%93%8D%E5%BA%94%20response%0Aapp.use(async%20ctx%20%3D%3E%20%7B%0A%20%20ctx.body%20%3D%20'Hello%20World'%3B%0A%7D)%3B%0Aapp.listen(3000)%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "配置",
      "body": ":- | :-\n:- | :-\n`app.env` | 默认为 `NODE_ENV` 或 `development`\n`app.keys` | 签名 `cookie` 密钥数组\n`app.proxy` | 何时信任真正的代理头字段\n`app.subdomainOffset` | 要忽略的 `.subdomains` 的偏移量，默认为 `2`\n`app.proxyIpHeader` | 代理 `ip` 头，默认为 `X-Forwarded-For`\n`app.maxIpsCount` | 从代理 `ip` 头读取的最大 `ips` 数，默认为 `0`（表示无穷大）\n<!--rehype:className=style-list style-list-arrow-->"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "app.callback()",
      "body": ":- | :-\n:- | :-\n`app.listen(...)` [#](https://koajs.com/#app-listen-) | 为一个绑定 `3000` 端口的简单 `Koa` 应用\n`app.callback()` [#](https://koajs.com/#app-callback-) | 返回一个适合 `http.createServer()` 方法的回调函数用来处理请求\n`app.use(function)` [#](https://koajs.com/#app-use-function-) | 添加指定的中间件，详情请看 [Middleware](https://github.com/koajs/koa/wiki#middleware)\n`app.keys` [#](https://koajs.com/#app-keys-) | 设置签名 `cookie` 密钥\n`app.context` [#](https://koajs.com/#app-context) | 从中创建 `ctx` 的原型\n<!--rehype:className=style-list style-list-arrow-->"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86",
      "body": "%60%60%60js%0Aapp.on('error'%2C%20(err%2C%20ctx)%20%3D%3E%20%7B%0A%20%20log.error('server%20error'%2C%20err%2C%20ctx)%0A%7D)%3B%0A%60%60%60%0A%0A%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%20%60Koa%60%20%E4%BC%9A%E5%B0%86%E6%89%80%E6%9C%89%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E8%BE%93%E5%87%BA%E5%88%B0%20%60stderr%60%EF%BC%8C%20%E9%99%A4%E9%9D%9E%20%60app.silent%60%20%E6%98%AF%20%60true%60%E3%80%82%E5%BD%93%20%60err.status%60%20%E6%98%AF%20%60404%60%20%E6%88%96%E8%80%85%20%60err.expose%60%20%E6%97%B6%EF%BC%8C%E9%BB%98%E8%AE%A4%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E4%B9%9F%E4%B8%8D%E4%BC%9A%E8%BE%93%E5%87%BA%E9%94%99%E8%AF%AF",
      "encoded": true
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "Context 示例",
      "body": "```js\napp.use(async ctx => {\n  ctx; // 这是上下文 Context\n  ctx.request;  // 这是 koa Request\n  ctx.response; // 这是 koa Response\n});\n```"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "app.listen(...)",
      "body": "%60%60%60js%0Aconst%20Koa%20%3D%20require('koa')%3B%0Aconst%20app%20%3D%20new%20Koa()%3B%0Aapp.listen(3000)%3B%0A%60%60%60%0A%0A%60app.listen(...)%60%20%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96%3A%0A%0A%60%60%60js%0Aconst%20http%20%3D%20require('http')%3B%0Aconst%20Koa%20%3D%20require('koa')%3B%0Aconst%20app%20%3D%20new%20Koa()%3B%0Ahttp.createServer(app.callback()).listen(3000)%3B%0A%60%60%60%0A%0A%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E6%82%A8%E5%8F%AF%E4%BB%A5%E5%90%8C%E6%97%B6%E6%94%AF%E6%8C%81%20%60HTTPS%60%20%E5%92%8C%20%60HTTPS%60%EF%BC%8C%E6%88%96%E8%80%85%E5%9C%A8%20%60%E5%A4%9A%E4%B8%AA%E7%AB%AF%E5%8F%A3%60%20%E7%9B%91%E5%90%AC%E5%90%8C%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%0A%0A%60%60%60js%0Aconst%20http%20%3D%20require('http')%3B%0Aconst%20https%20%3D%20require('https')%3B%0Aconst%20Koa%20%3D%20require('koa')%3B%0Aconst%20app%20%3D%20new%20Koa()%3B%0Ahttp.createServer(app.callback()).listen(3000)%3B%0Ahttps.createServer(app.callback()).listen(3001)%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-20",
      "sectionId": "s1",
      "title": "ctx.throw%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0Actx.throw(400)%3B%0Actx.throw(400%2C%20'name%20required')%3B%0Actx.throw(400%2C%20'name%20required'%2C%20%7B%20user%3A%20user%20%7D)%3B%0A%60%60%60%0A%0A%60this.throw('name%20required'%2C%20400)%60%20%E7%AD%89%E4%BB%B7%E4%BA%8E%0A%0A%60%60%60js%0Aconst%20err%20%3D%20new%20Error('name%20required')%3B%0Aerr.status%20%3D%20400%3B%0Aerr.expose%20%3D%20true%3B%0Athrow%20err%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "ctx.assert%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0Actx.assert(%0A%20%20ctx.state.user%2C%0A%20%20401%2C%0A%20%20'User%20not%20found.%20Please%20login!'%0A)%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "Context(上下文) API",
      "body": ":- | :-\n:- | :-\n`ctx.req` | Node 的 request 对象\n`ctx.res` | Node 的 response 对象\n`ctx.request` | Koa 的 Request 对象\n`ctx.response` | Koa 的 Response 对象\n`ctx.state` | 推荐的命名空间，用于通过中间件传递信息到前端视图\n`ctx.app` | 应用实例引用\n`ctx.app.emit` | 发出由第一个参数定义的类型的事件\n`ctx.cookies.get(name, [options])` | 获得 `cookie` 中名为 `name` 的值\n`ctx.cookies.set(name, value, [options])` | 设置 `cookie` 中名为 `name` 的值\n`ctx.throw([status], [msg], [properties])` | 抛出包含 `.status` 属性的错误，默认为 `500`\n`ctx.assert(value, [status], [msg], [properties])` | 当 `!value` 时， `Helper` 方法抛出一个类似 `.throw()` 的错误\n`ctx.respond` | 避免使用 `Koa` 的内置响应处理功能，您可以直接赋值 `this.repond = false`\n<!--rehype:className=style-list style-list-arrow-->"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "ctx.cookies.set 参数",
      "body": ":- | :-\n:- | :-\n`maxAge` | 表示从Date开始的毫秒数 `now()` 到期。\n`expires` | 一个 `Date` 对象，指示 `cookie` 的到期日期（默认情况下在会话结束时到期）\n`path` | 表示 `cookie` 路径的字符串（默认为`/`）\n`domain` | 表示 `cookie` 的域的字符串（无默认值）\n`secure` | 一个布尔值，指示 `cookie` 是否只通过HTTPS发送（HTTP默认为false，HTTPS默认为true）。阅读有关此选项的更多信息\n`httpOnly` | 一个布尔值，指示cookie是否只通过HTTP（S）发送，而不可用于客户端 JavaScript（默认为true）\n`sameSite` | 一个布尔值或字符串，指示cookie是否为“同一站点”cookie（默认为false）。这可以设置为“strict”、“lax”、“none”或true（映射为“strect”）\n`signed` | 一个布尔值，指示是否对cookie进行签名（默认为false）。如果这是真的，还将发送另一个附加了.sig后缀的同名cookie，其中一个27字节的url安全base64 SHA1值表示cookie name=cookie值相对于第一个Keygrip键的哈希值。此签名密钥用于在下次收到cookie时检测篡改\n`overwrite` | 一个布尔值，指示是否覆盖以前设置的同名 `cookie`（默认为false）。如果为true，则在设置此Cookie时，将从set-Cookie标头中筛选出在同一请求期间设置的具有相同名称的所有Cookie（无论路径或域如何）\n<!--rehype:className=style-list style-list-arrow-->"
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "%E8%AF%B7%E6%B1%82(Request)",
      "body": "%3A-%20%7C%20%3A-%0A%3A-%20%7C%20%3A-%0A%60request.header%60%20%7C%20%E8%AF%B7%E6%B1%82%E5%A4%B4%E5%AF%B9%E8%B1%A1%0A%60request.header%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E5%A4%B4%E5%AF%B9%E8%B1%A1%0A%60request.headers%60%20%7C%20%E8%AF%B7%E6%B1%82%E5%A4%B4%E5%AF%B9%E8%B1%A1%E3%80%82%E7%AD%89%E4%BB%B7%E4%BA%8E%20request.header.%0A%60request.headers%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E5%A4%B4%E5%AF%B9%E8%B1%A1%E3%80%82%20%E7%AD%89%E4%BB%B7%E4%BA%8Erequest.header%3D.%0A%60request.method%60%20%7C%20%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%0A%60request.method%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%2C%20%E5%9C%A8%E5%AE%9E%E7%8E%B0%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%97%B6%E9%9D%9E%E5%B8%B8%E6%9C%89%E7%94%A8%EF%BC%8C%E6%AF%94%E5%A6%82%20methodOverride()%0A%60request.length%60%20%7C%20%E4%BB%A5%E6%95%B0%E5%AD%97%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%20request%20%E7%9A%84%E5%86%85%E5%AE%B9%E9%95%BF%E5%BA%A6(Content-Length)%EF%BC%8C%E6%88%96%E8%80%85%E8%BF%94%E5%9B%9E%20undefined%E3%80%82%0A%60request.url%60%20%7C%20%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82url%E5%9C%B0%E5%9D%80.%0A%60request.url%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E5%9C%B0%E5%9D%80%EF%BC%8C%E7%94%A8%E4%BA%8E%E9%87%8D%E5%86%99url%E5%9C%B0%E5%9D%80%E6%97%B6%0A%60request.originalUrl%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8E%9F%E5%A7%8B%E5%9C%B0%E5%9D%80%0A%60request.origin%60%20%7C%20%E8%8E%B7%E5%8F%96URL%E5%8E%9F%E5%A7%8B%E5%9C%B0%E5%9D%80%2C%20%E5%8C%85%E5%90%AB%20protocol%20%E5%92%8C%20host%0A%60request.href%60%20%7C%20%E8%8E%B7%E5%8F%96%E5%AE%8C%E6%95%B4%E7%9A%84%E8%AF%B7%E6%B1%82URL%2C%20%E5%8C%85%E5%90%AB%20protocol%2C%20host%20%E5%92%8C%20url%0A%60request.path%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E8%B7%AF%E5%BE%84%E5%90%8D%0A%60request.path%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E8%B7%AF%E5%BE%84%E5%90%8D%E5%B9%B6%E4%BF%9D%E7%95%99%E5%BD%93%E5%89%8D%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%0A%60request.querystring%60%20%7C%20%E8%8E%B7%E5%8F%96%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E5%AD%97%E7%AC%A6%E4%B8%B2(url%E4%B8%AD%3F%E5%90%8E%E9%9D%A2%E7%9A%84%E9%83%A8%E5%88%86)%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%3F%0A%60request.querystring%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E5%8E%9F%E5%A7%8B%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%0A%60request.search%60%20%7C%20%E8%8E%B7%E5%8F%96%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%8C%85%E5%90%AB%3F%0A%60request.search%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E5%8E%9F%E5%A7%8B%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%0A%60request.host%60%20%7C%20%E8%8E%B7%E5%8F%96%20host%20(hostname%3Aport)%E3%80%82%20%E5%BD%93%20app.proxy%20%E8%AE%BE%E7%BD%AE%E4%B8%BA%20true%20%E6%97%B6%EF%BC%8C%E6%94%AF%E6%8C%81%20X-Forwarded-Host%0A%60request.hostname%60%20%7C%20%E8%8E%B7%E5%8F%96%20hostname%E3%80%82%E5%BD%93%20app.proxy%20%E8%AE%BE%E7%BD%AE%E4%B8%BA%20true%20%E6%97%B6%EF%BC%8C%E6%94%AF%E6%8C%81%20X-Forwarded-Host%E3%80%82%0A%60request.URL%60%20%7C%20%E8%8E%B7%E5%8F%96%20WHATWG%20%E8%A7%A3%E6%9E%90%E7%9A%84%E5%AF%B9%E8%B1%A1.%0A%60request.type%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%20Content-Type%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E5%83%8F%20%22charset%22%20%E8%BF%99%E6%A0%B7%E7%9A%84%E5%8F%82%E6%95%B0%E3%80%82%0A%60request.charset%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%20charset%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%88%99%E8%BF%94%E5%9B%9E%20%60undefined%60%0A%60request.query%60%20%7C%20%E5%B0%86%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9B%E8%A1%8C%E8%A7%A3%E6%9E%90%E5%B9%B6%E4%BB%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%99%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E7%A9%BA%E5%AF%B9%E8%B1%A1%0A%60request.query%3D%60%20%7C%20%E6%A0%B9%E6%8D%AE%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%AE%BE%E7%BD%AE%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%0A%60request.fresh%60%20%7C%20%E6%A3%80%E6%9F%A5%E8%AF%B7%E6%B1%82%E7%BC%93%E5%AD%98%E6%98%AF%E5%90%A6%20%22fresh%22(%E5%86%85%E5%AE%B9%E6%B2%A1%E6%9C%89%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96)%0A%60request.stale%60%20%7C%20%E4%B8%8E%20req.fresh%20%E7%9B%B8%E5%8F%8D%0A%60request.protocol%60%20%7C%20%E8%BF%94%E5%9B%9E%E8%AF%B7%E6%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%8C%22https%22%20%E6%88%96%E8%80%85%20%22http%22%0A%60request.secure%60%20%7C%20%E7%AE%80%E5%8C%96%E7%89%88%20this.protocol%20%3D%3D%20%22https%22%EF%BC%8C%E7%94%A8%E6%9D%A5%E6%A3%80%E6%9F%A5%E8%AF%B7%E6%B1%82%E6%98%AF%E5%90%A6%E9%80%9A%E8%BF%87%20TLS%20%E5%8F%91%E9%80%81%0A%60request.ip%60%20%7C%20%E8%AF%B7%E6%B1%82%E8%BF%9C%E7%A8%8B%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%BD%93%20app.proxy%20%E8%AE%BE%E7%BD%AE%E4%B8%BA%20true%20%E6%97%B6%EF%BC%8C%E6%94%AF%E6%8C%81%20X-Forwarded-Host%0A%60request.ips%60%20%7C%20%E5%BD%93%20X-Forwarded-For%20%E5%AD%98%E5%9C%A8%E5%B9%B6%E4%B8%94%20app.proxy%20%E6%9C%89%E6%95%88%EF%BC%8C%E5%B0%86%E4%BC%9A%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%9C%89%E5%BA%8F%EF%BC%88%E4%BB%8E%20upstream%20%E5%88%B0%20downstream%EF%BC%89ip%20%E6%95%B0%E7%BB%84%0A%60request.subdomains%60%20%7C%20%E4%BB%A5%E6%95%B0%E7%BB%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%E5%AD%90%E5%9F%9F%E5%90%8D%0A%60request.is(types...)%60%20%7C%20%E6%A3%80%E6%9F%A5%E8%AF%B7%E6%B1%82%E6%89%80%E5%8C%85%E5%90%AB%E7%9A%84%20%22Content-Type%22%20%E6%98%AF%E5%90%A6%E4%B8%BA%E7%BB%99%E5%AE%9A%E7%9A%84%20type%20%E5%80%BC%0A%60request.accepts(types)%60%20%7C%20%E6%A3%80%E6%9F%A5%E7%BB%99%E5%AE%9A%E7%9A%84%E7%B1%BB%E5%9E%8B%20types(s)%20%E6%98%AF%E5%90%A6%E5%8F%AF%E8%A2%AB%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%BD%93%E4%B8%BA%20true%20%E6%97%B6%E8%BF%94%E5%9B%9E%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20false%0A%60request.acceptsEncodings(encodings)%60%20%7C%20%E6%A3%80%E6%9F%A5%20%60encodings%60%20%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%BD%93%E4%B8%BA%20%60true%60%20%E6%97%B6%E8%BF%94%E5%9B%9E%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20%60false%60%0A%60request.acceptsCharsets(charsets)%60%20%7C%20%E6%A3%80%E6%9F%A5%20%60charsets%60%20%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA%20%60true%60%20%E5%88%99%E8%BF%94%E5%9B%9E%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20%60false%60%0A%60request.acceptsLanguages(langs)%60%20%7C%20%E6%A3%80%E6%9F%A5%20%60langs%60%20%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA%20%60true%60%20%E5%88%99%E8%BF%94%E5%9B%9E%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20%60false%60%0A%60request.idempotent%60%20%7C%20%E6%A3%80%E6%9F%A5%E8%AF%B7%E6%B1%82%E6%98%AF%E5%90%A6%E4%B8%BA%E5%B9%82%E7%AD%89(idempotent)%0A%60request.socket%60%20%7C%20%E8%BF%94%E5%9B%9E%E8%AF%B7%E6%B1%82%E7%9A%84socket%0A%60request.get(field)%60%20%7C%20%E8%BF%94%E5%9B%9E%E8%AF%B7%E6%B1%82%E5%A4%B4%0A%3C!--rehype%3AclassName%3Dstyle-list%20style-list-arrow--%3E",
      "encoded": true
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "%E5%93%8D%E5%BA%94(Response)",
      "body": "%3A-%20%7C%20%3A-%0A%3A-%20%7C%20%3A-%0A%60response.header%60%20%7C%20Response%20header%20%E5%AF%B9%E8%B1%A1%0A%60response.headers%60%20%7C%20Response%20header%20%E5%AF%B9%E8%B1%A1%E3%80%82%E7%AD%89%E4%BB%B7%E4%BA%8E%20response.header.%0A%60response.socket%60%20%7C%20Request%20socket.%0A%60response.status%60%20%7C%20%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E3%80%82%20%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8Cresponse.status%E8%AE%BE%E7%BD%AE%E4%B8%BA404%EF%BC%8C%E8%80%8C%E4%B8%8D%E5%83%8Fnode's%20res.statusCode%E9%BB%98%E8%AE%A4%E4%B8%BA200%E3%80%82%0A%60response.status%3D%60%20%7C%20%E9%80%9A%E8%BF%87%E6%95%B0%E5%AD%97%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%0A%60response.message%60%20%7C%20%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E6%B6%88%E6%81%AF%E3%80%82%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%2C%20response.message%E5%85%B3%E8%81%94response.status%E3%80%82%0A%60response.message%3D%60%20%7C%20%E5%B0%86%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E6%B6%88%E6%81%AF%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%BB%99%E5%AE%9A%E5%80%BC%E3%80%82%0A%60response.length%3D%60%20%7C%20%E5%B0%86%E5%93%8D%E5%BA%94Content-Length%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%BB%99%E5%AE%9A%E5%80%BC%E3%80%82%0A%60response.length%60%20%7C%20%E5%A6%82%E6%9E%9C%20Content-Length%20%E4%BD%9C%E4%B8%BA%E6%95%B0%E5%80%BC%E5%AD%98%E5%9C%A8%EF%BC%8C%E6%88%96%E8%80%85%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%20ctx.body%20%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97%EF%BC%8C%E5%88%99%E8%BF%94%E5%9B%9E%E7%9B%B8%E5%BA%94%E6%95%B0%E5%80%BC%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20undefined%E3%80%82%0A%60response.body%60%20%7C%20%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E4%BD%93%E3%80%82%0A%60response.body%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E4%BD%93%E4%B8%BA%E5%A6%82%20%60string%60%2C%60Buffer%60%2C%60Stream%60%2C%60Object%5C%7CArray%60%2C%60null%60%0A%60response.get(field)%60%20%7C%20%E8%8E%B7%E5%8F%96%20response%20header%20%E4%B8%AD%E5%AD%97%E6%AE%B5%E5%80%BC%EF%BC%8Cfield%20%E4%B8%8D%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%99%0A%60response.set(field%2C%20value)%60%20%7C%20%E8%AE%BE%E7%BD%AE%20response%20header%20%E5%AD%97%E6%AE%B5%20field%20%E7%9A%84%E5%80%BC%E4%B8%BA%20value%0A%60response.append(field%2C%20value)%60%7C%20%E6%B7%BB%E5%8A%A0%E9%A2%9D%E5%A4%96%E7%9A%84%E5%AD%97%E6%AE%B5field%20%E7%9A%84%E5%80%BC%E4%B8%BA%20val%0A%60response.set(fields)%60%20%7C%20%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%20response%20header%20%E4%B8%AD%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E5%80%BC%0A%60response.remove(field)%60%20%7C%20%E7%A7%BB%E9%99%A4%20response%20header%20%E4%B8%AD%E5%AD%97%E6%AE%B5%20filed%0A%60response.type%60%20%7C%20%E8%8E%B7%E5%8F%96%20response%20Content-Type%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E5%83%8F%22charset%22%E8%BF%99%E6%A0%B7%E7%9A%84%E5%8F%82%E6%95%B0%0A%60response.type%3D%60%20%7C%20%E9%80%9A%E8%BF%87%20mime%20%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%96%E8%80%85%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E8%AE%BE%E7%BD%AE%20response%20Content-Type%0A%60response.is(types...)%60%20%7C%20%E8%B7%9F%20%60ctx.request.is()%60%20%E9%9D%9E%E5%B8%B8%E7%B1%BB%E4%BC%BC%E3%80%82%E7%94%A8%E6%9D%A5%E6%A3%80%E6%9F%A5%E5%93%8D%E5%BA%94%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%90%A6%E6%98%AF%E6%89%80%E6%8F%90%E4%BE%9B%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B9%8B%E4%B8%80%0A%60response.redirect(url%2C%20%5Balt%5D)%60%20%7C%20%E6%89%A7%E8%A1%8C%20%5B302%5D%20%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E5%AF%B9%E5%BA%94%20url%0A%60response.attachment(%5Bfilename%5D)%60%20%7C%20%E8%AE%BE%E7%BD%AE%20%22attachment%22%20%E7%9A%84%20Content-Disposition%EF%BC%8C%E7%94%A8%E4%BA%8E%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%E4%BF%A1%E5%8F%B7%E6%9D%A5%E6%8F%90%E7%A4%BA%E4%B8%8B%E8%BD%BD%0A%60response.headerSent%60%20%7C%20%E6%A3%80%E6%9F%A5%20response%20header%20%E6%98%AF%E5%90%A6%E5%B7%B2%E7%BB%8F%E5%8F%91%E9%80%81%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%9C%A8%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF%E6%97%B6%E6%A3%80%E6%9F%A5%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%98%AF%E5%90%A6%E8%A2%AB%E9%80%9A%E7%9F%A5%E3%80%82%0A%60response.lastModified%60%20%7C%20%E5%A6%82%E6%9E%9C%E5%AD%98%E5%9C%A8%20Last-Modified%EF%BC%8C%E5%88%99%E4%BB%A5%20Date%20%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%94%E5%9B%9E%E3%80%82%0A%60response.lastModified%3D%60%20%7C%20%E4%BB%A5%20UTC%20%E6%A0%BC%E5%BC%8F%E8%AE%BE%E7%BD%AE%20Last-Modified%E3%80%82%E6%82%A8%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20Date%20%E6%88%96%20date%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AE%BE%E7%BD%AE%E3%80%82%0A%60response.etag%3D%60%20%7C%20%E8%AE%BE%E7%BD%AE%20%E5%8C%85%E5%90%AB%20%22s%20%E7%9A%84%20ETag%0A%60response.vary(field)%60%20%7C%20%E4%B8%8D%E5%90%8C%E4%BA%8Efield.%0A%60response.flushHeaders()%60%20%7C%20%E5%88%B7%E6%96%B0%E4%BB%BB%E4%BD%95%E8%AE%BE%E7%BD%AE%E7%9A%84%E5%93%8D%E5%BA%94%E5%A4%B4%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%A7%8B%E5%93%8D%E5%BA%94%E4%BD%93%0A%3C!--rehype%3AclassName%3Dstyle-list%20style-list-arrow--%3E",
      "encoded": true
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "请求(Request)别名",
      "body": "以下访问器和别名与 [Request](#请求request) 等价：\n\n• `ctx.header`\n• `ctx.headers`\n• `ctx.method`\n• `ctx.method=`\n• `ctx.url`\n• `ctx.url=`\n• `ctx.originalUrl`\n• `ctx.origin`\n• `ctx.href`\n• `ctx.path`\n• `ctx.path=`\n• `ctx.query`\n• `ctx.query=`\n• `ctx.querystring`\n• `ctx.querystring=`\n• `ctx.host`\n• `ctx.hostname`\n• `ctx.fresh`\n• `ctx.stale`\n• `ctx.socket`\n• `ctx.protocol`\n• `ctx.secure`\n• `ctx.ip`\n• `ctx.ips`\n• `ctx.subdomains`\n• `ctx.is()`\n• `ctx.accepts()`\n• `ctx.acceptsEncodings()`\n• `ctx.acceptsCharsets()`\n• `ctx.acceptsLanguages()`\n• `ctx.get()`"
    },
    {
      "id": "s1-30",
      "sectionId": "s1",
      "title": "响应(Response)别名",
      "body": "以下访问器和别名与 [Response](#响应response) 等价：\n\n• `ctx.body`\n• `ctx.body=`\n• `ctx.status`\n• `ctx.status=`\n• `ctx.message`\n• `ctx.message=`\n• `ctx.length=`\n• `ctx.length`\n• `ctx.type=`\n• `ctx.type`\n• `ctx.headerSent`\n• `ctx.redirect()`\n• `ctx.attachment()`\n• `ctx.set()`\n• `ctx.append()`\n• `ctx.remove()`\n• `ctx.lastModified=`\n• `ctx.etag=`"
    },
    {
      "id": "s1-32",
      "sectionId": "s1",
      "title": "request.fresh%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0A%2F%2F%20freshness%20%E6%A3%80%E6%9F%A5%E9%9C%80%E8%A6%81%E7%8A%B6%E6%80%81%2020x%20%E6%88%96%20304%0Actx.status%20%3D%20200%3B%0Actx.set('ETag'%2C%20'123')%3B%0A%0A%2F%2F%20%E7%BC%93%E5%AD%98%E6%AD%A3%E5%B8%B8%0Aif%20(ctx.fresh)%20%7B%0A%20%20ctx.status%20%3D%20304%3B%0A%20%20return%3B%0A%7D%0A%0A%2F%2F%20%E7%BC%93%E5%AD%98%E5%B7%B2%E8%BF%87%E6%97%B6%0A%2F%2F%20%E8%8E%B7%E5%8F%96%E6%96%B0%E6%95%B0%E6%8D%AE%0Actx.body%20%3D%20await%20db.find('something')%3B%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-33",
      "sectionId": "s1",
      "title": "ctx.is%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0A%2F%2F%20Content-Type%3A%20text%2Fhtml%3B%20charset%3Dutf-8%0Actx.is('html')%3B%20%2F%2F%20%3D%3E%20'html'%0Actx.is('text%2Fhtml')%3B%20%2F%2F%20%3D%3E%20'text%2Fhtml'%0Actx.is('text%2F*'%2C%20'text%2Fhtml')%3B%0A%2F%2F%20%3D%3E%20'text%2Fhtml'%0A%2F%2F%20%E5%BD%93%20Content-Type%20%E4%B8%BA%20application%2Fjson%20%E6%97%B6%0Actx.is('json'%2C%20'urlencoded')%3B%20%2F%2F%20%3D%3E%20'json'%0Actx.is('application%2Fjson')%3B%0A%2F%2F%20%3D%3E%20'application%2Fjson'%0Actx.is('html'%2C%20'application%2F*')%3B%0A%2F%2F%20%3D%3E%20'application%2Fjson'%0A%0Actx.is('html')%3B%20%2F%2F%20%3D%3E%20false%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-34",
      "sectionId": "s1",
      "title": "ctx.accepts%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0A%2F%2F%20%E6%8E%A5%E5%8F%97%3A%20text%2F*%2C%20application%2Fjson%0Actx.accepts('html')%3B%0A%2F%2F%20%3D%3E%20%22html%22%0Actx.accepts('text%2Fhtml')%3B%0A%2F%2F%20%3D%3E%20%22text%2Fhtml%22%0Actx.accepts('json'%2C%20'text')%3B%0A%2F%2F%20%3D%3E%20%22json%22%0Actx.accepts('application%2Fjson')%3B%0A%2F%2F%20%3D%3E%20%22application%2Fjson%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-35",
      "sectionId": "s1",
      "title": "request.acceptsCharsets%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0A%2F%2F%20Accept-Charset%3A%20utf-8%2C%20iso-8859-1%3Bq%3D0.2%2C%20utf-7%3Bq%3D0.5%0Actx.acceptsCharsets('utf-8'%2C%20'utf-7')%3B%0A%2F%2F%20%3D%3E%20%22utf-8%22%0A%0Actx.acceptsCharsets(%5B'utf-7'%2C%20'utf-8'%5D)%3B%0A%2F%2F%20%3D%3E%20%22utf-8%22%0A%60%60%60%0A%0A%E6%A3%80%E6%9F%A5%20%60charsets%60%20%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA%20%60true%60%20%E5%88%99%E8%BF%94%E5%9B%9E%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%EF%BC%8C%20%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20%60false%60",
      "encoded": true
    },
    {
      "id": "s1-37",
      "sectionId": "s1",
      "title": "response.set%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0Actx.set(%7B%0A%20%20'Etag'%3A%20'1234'%2C%0A%20%20'Last-Modified'%3A%20date%0A%7D)%3B%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%20response%20header%20%E4%B8%AD%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E5%80%BC",
      "encoded": true
    },
    {
      "id": "s1-39",
      "sectionId": "s1",
      "title": "response.type%20%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60js%0Aconst%20ct%20%3D%20ctx.type%3B%0A%2F%2F%20%3D%3E%20%22image%2Fpng%22%0A%60%60%60%0A%0A%E8%8E%B7%E5%8F%96%20response%20Content-Type%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E5%83%8F%22charset%22%E8%BF%99%E6%A0%B7%E7%9A%84%E5%8F%82%E6%95%B0",
      "encoded": true
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/koajs.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/koajs.md",
    "lang": "zh",
    "mode": "local"
  }
}