{
  "id": "awk",
  "name": "Awk 备忘清单",
  "title": "这是 [GNU awk](https://www.gnu.org/software/gawk/manual/gawk.html) 的单页快速参考备忘单，其中涵盖了常用的 `awk` 表达式和命令。",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/awk.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "Awk 变量",
      "startIndex": 20
    },
    {
      "id": "s3",
      "title": "Awk 运算符",
      "startIndex": 37
    },
    {
      "id": "s4",
      "title": "Awk 函数",
      "startIndex": 53
    },
    {
      "id": "s5",
      "title": "Awk 数组",
      "startIndex": 55
    },
    {
      "id": "s6",
      "title": "Awk 条件",
      "startIndex": 61
    },
    {
      "id": "s7",
      "title": "Awk 循环",
      "startIndex": 68
    },
    {
      "id": "s8",
      "title": "Awk 格式化打印",
      "startIndex": 87
    },
    {
      "id": "s9",
      "title": "各种各样的",
      "startIndex": 98
    },
    {
      "id": "s10",
      "title": "另见",
      "startIndex": 101
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "这是 [GNU awk](https://www.gnu.org/software/gawk/manual/gawk.html) 的单页快速参考备忘单，其中涵盖了常用的 `awk` 表达式和命令。"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "试试",
      "kind": "text",
      "body": "该程序可用于选择文件中的特定记录并对其执行操作"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "试试",
      "kind": "code",
      "lang": "shell",
      "code": "$ awk -F: '{print $1, $NF}' /etc/passwd"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "试试",
      "kind": "text",
      "body": "----"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Awk 程序",
      "kind": "code",
      "lang": "bash",
      "code": "BEGIN          {<初始化>} \n   <pattern 1> {<计划动作>} \n   <pattern 2> {<计划动作>} \n   ...\nEND            {< 最后的动作 >}"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "Awk 程序",
      "kind": "text",
      "body": "#### 示例"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "Awk 程序",
      "kind": "code",
      "lang": "bash",
      "code": "awk '\n    BEGIN { print \"\\n>>>Start\" }\n    !/(login|shutdown)/ { print NR, $0 }\n    END { print \"<<<END\\n\" }\n' /etc/passwd"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "变量",
      "kind": "code",
      "lang": "bash",
      "code": "          $1      $2/$(NF-1)    $3/$NF\n           ▼          ▼           ▼ \n        ┌──────┬──────────────┬───────┐\n$0/NR ▶ │  ID  │  WEBSITE     │  URI  │\n        ├──────┼──────────────┼───────┤\n$0/NR ▶ │  1   │  baidu.com   │  awk  │\n        ├──────┼──────────────┼───────┤\n$0/NR ▶ │  2   │  google.com  │  25   │\n        └──────┴──────────────┴───────┘"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "变量",
      "kind": "text",
      "body": "----"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "变量",
      "kind": "code",
      "lang": "shell",
      "code": "# 第一个和最后一个字段\nawk -F: '{print $1,$NF}' /etc/passwd\n# 带行号\nawk -F: '{print NR, $0}' /etc/passwd\n# 倒数第二个字段\nawk -F: '{print $(NF-1)}' /etc/passwd\n# 自定义字符串\nawk -F: '{print $1 \"=\" $6}' /etc/passwd"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "变量",
      "kind": "text",
      "body": "查看: [Awk 变量](#awk-变量)"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "Awk 程序示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {print \"hello world\"}'        # 打印 \"hello world\"\nawk -F: '{print $1}' /etc/passwd         # -F: 指定字段分隔符\n# /pattern/ 仅对匹配的模式执行操作\nawk -F: '/root/ {print $1}' /etc/passwd                     \n# BEGIN 块在开始时执行一次\nawk -F: 'BEGIN { print \"uid\"} { print $1 }' /etc/passwd     \n# END 块在最后执行一次\nawk -F: '{print $1} END { print \"-done-\"}' /etc/passwd"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "条件",
      "kind": "code",
      "lang": "bash",
      "code": "awk -F: '$3>30 {print $1}' /etc/passwd"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "条件",
      "kind": "text",
      "body": "查看: [Conditions 条件](#awk-条件)"
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "生成 1000 个空格",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN{\n    while (a++ < 1000)\n        s=s \" \";\n    print s\n}'"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "生成 1000 个空格",
      "kind": "text",
      "body": "查看: [Loops](#awk-循环)"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "数组 Arrays",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n   fruits[\"mango\"] = \"yellow\";\n   fruits[\"orange\"] = \"orange\"\n   for(fruit in fruits) {\n     print fruit \" 的颜色是 \" fruits[fruit]\n   }\n}'"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "数组 Arrays",
      "kind": "text",
      "body": "查看: [Awk 数组](#awk-数组)"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "函数 Functions",
      "kind": "code",
      "lang": "shell",
      "code": "# => 5\nawk 'BEGIN{print length(\"hello\")}'\n# => HELLO\nawk 'BEGIN{print toupper(\"hello\")}'\n# => hel\nawk 'BEGIN{print substr(\"hello\", 1, 3)}'"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "函数 Functions",
      "kind": "text",
      "body": "查看: [Functions](#awk-函数)"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "内置变量",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`$0`           | 全线\n`$1, $2...$NF` | 第一个，第二个……最后一个字段\n`NR`           | 记录总数(`N`umber of `R`ecords)\n`NF`           | N个字段(`N`number of `F`ields)\n`OFS`          | `O`utput `F`ield `S`eparator<br> 输出字段分隔符 _(default \" \")_\n`FS`           | input `F`ield `S`eparator <br> 输入字段分隔符 _(default \" \")_\n`ORS`          | `O`utput `R`ecord `S`eparator <br> 输出记录分隔符 _(default \"\\n\")_\n`RS`           | input `R`ecord `S`eparator <br> 输入记录分隔符 _(default \"\\n\")_\n`FILENAME`     | 文件名"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "表达式",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`$1 == \"root\"`       | 第一个字段等于根\n`{print $(NF-1)}`    | 倒数第二个字段\n`NR!=1{print $0}`    | 从第 2 条记录开始\n`NR > 3`             | 从第 4 条记录开始\n`NR == 1`            | 第一次记录\n`END{print NR}`      | 总记录\n`BEGIN{print OFMT}`  | 输出格式\n`{print NR, $0}`     | 行号\n`{print NR \"  \" $0}` | 行号(选项卡)\n`{$1 = NR; print}`   | 用行号替换第一个字段\n`$NF > 4`            | 最后一个字段 > 4\n`NR % 2 == 0`        | 甚至记录\n`NR==10, NR==20`     | 记录 10 到 20\n`BEGIN{print ARGC}`  | 总 `arguments`\n`ORS=NR%5?\",\":\"\\n\"`  | 连接记录"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "示例",
      "kind": "text",
      "body": "打印总和和平均值"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{sum += $3}\n     END { print sum, sum/NR }\n' /etc/passwd"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "示例",
      "kind": "text",
      "body": "打印参数"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    for (i = 1; i < ARGC; i++)\n        print ARGV[i] }' a b c"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "示例",
      "kind": "text",
      "body": "输出字段分隔符为逗号"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN { FS=\":\";OFS=\",\"}\n    {print $1,$2,$3,$4}' /etc/passwd"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "示例",
      "kind": "text",
      "body": "匹配位置"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    if (match(\"One Two Three\", \"Tw\"))\n        print RSTART }'"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "示例",
      "kind": "text",
      "body": "匹配时长"
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    if (match(\"One Two Three\", \"re\"))\n        print RLENGTH }'"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "仅限 GNU awk",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`ENVIRON`     | 环境变量\n`IGNORECASE`  | 忽略大小写\n`CONVFMT`     | 转换格式\n`ERRNO`       | 系统错误\n`FIELDWIDTHS` | 固定宽度字段"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "环境变量",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`ARGC`    | 数字或参数\n`ARGV`    | 参数数组\n`FNR`     | 文件记录数(`F`ile `N`umber of `R`ecords)\n`OFMT`    | 数字格式 _(default \"%.6g\")_\n`RSTART`  | 字符串中的位置\n`RLENGTH` | 比赛时长\n`SUBSEP`  | 多维数组分隔符 _(default \"\\034\")_\n`ARGIND`  | 参数索引"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "定义变量",
      "kind": "code",
      "lang": "shell",
      "code": "awk -v var1=\"Hello\" -v var2=\"Wold\" '\n    END {print var1, var2}\n' </dev/null"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "定义变量",
      "kind": "text",
      "body": "#### 使用 shell 变量"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "定义变量",
      "kind": "code",
      "lang": "shell",
      "code": "awk -v varName=\"$PWD\" '\n    END {print varName}' </dev/null"
    },
    {
      "id": "s3-37",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`{print $1}`     | 第一个字段\n`$2 == \"foo\"`    | 等于\n`$2 != \"foo\"`    | 不等于\n`\"foo\" in array` | 在数组中"
    },
    {
      "id": "s3-38",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "#### 正则表达式"
    },
    {
      "id": "s3-39",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n| `/regex/`       | 行匹配|\n| `!/regex/`      | 行不匹配|\n| `$1 ~ /regex/`  | 字段匹配|\n| `$1 !~ /regex/` | 字段不匹配|"
    },
    {
      "id": "s3-40",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "#### 更多条件"
    },
    {
      "id": "s3-41",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`($2 <= 4 \\|\\| $3 < 20)` | 或者\n`($1 == 4 && $3 < 20)`   | 和"
    },
    {
      "id": "s3-42",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "#### 算术运算"
    },
    {
      "id": "s3-43",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "• `+`\n• `-`\n• `*`\n• `/`\n• `%`\n• `++`\n• `--`"
    },
    {
      "id": "s3-44",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "#### 速记作业"
    },
    {
      "id": "s3-45",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "• `+=`\n• `-=`\n• `*=`\n• `/=`\n• `%=`"
    },
    {
      "id": "s3-46",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "#### 比较运算符"
    },
    {
      "id": "s3-47",
      "sectionId": "s3",
      "title": "运算符",
      "kind": "text",
      "body": "• `==`\n• `!=`\n• `<`\n• `>`\n• `<=`\n• `>=`"
    },
    {
      "id": "s3-48",
      "sectionId": "s3",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    if (\"foo\" ~ \"^fo+$\")\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s3-49",
      "sectionId": "s3",
      "title": "示例",
      "kind": "text",
      "body": "#### 不匹配"
    },
    {
      "id": "s3-50",
      "sectionId": "s3",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    if (\"boo\" !~ \"^fo+$\")\n        print \"Boo!\";\n}'"
    },
    {
      "id": "s3-51",
      "sectionId": "s3",
      "title": "示例",
      "kind": "text",
      "body": "#### 如果在数组中"
    },
    {
      "id": "s3-52",
      "sectionId": "s3",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"foo\" in assoc)\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s4-53",
      "sectionId": "s4",
      "title": "常用功能",
      "kind": "text",
      "body": "函数 | 描述\n:- | :-\n`index(s,t)`          | 字符串 `s` 中出现字符串 `t` 的位置，如果未找到则为 `0`\n`length(s)`           | 字符串 `s` 的长度(如果没有 `arg`，则为 `$0`)\n`rand`                | `0` 到 `1` 之间的随机数\n`substr(s,index,len)` | 返回从索引开始的 `s` 的 `len-char` 子字符串(从 `1` 开始计数)\n`srand`               | 为 `rand` 设置种子并返回之前的种子\n`int(x)`              | 将 `x` 截断为整数值\n`split(s,a,fs)`       | 将字符串 `s` 拆分为数组 `a` 由 `fs` 拆分，返回 `a` 的长度\n`match(s,r)`          | 字符串 `s` 中出现正则表达式 `r` 的位置，如果未找到，则为 `0`\n`sub(r,t,s)`          | 将 `t` 替换为字符串 `s` 中第一次出现的正则表达式 `r`(如果未给出 `s`，则替换为 `$0`)\n`gsub(r,t,s)`         | 用 `t` 替换字符串 `s` 中所有出现的正则表达式 `r`\n`system(cmd)`         | 执行cmd并返回退出状态\n`tolower(s)`          | 字符串 `s` 转小写\n`toupper(s)`          | 字符串 `s` 转大写\n`getline`             | 将 `$0` 设置为当前输入文件中的下一个输入记录"
    },
    {
      "id": "s4-54",
      "sectionId": "s4",
      "title": "用户定义函数",
      "kind": "code",
      "lang": "shell",
      "code": "awk '\n    # 返回最小数量\n    function find_min(num1, num2){\n       if (num1 < num2)\n       return num1\n       return num2\n    }\n    # 返回最大数量\n    function find_max(num1, num2){\n       if (num1 > num2)\n       return num1\n       return num2\n    }\n    # 主功能\n    function main(num1, num2){\n       result = find_min(num1, num2)\n       print \"Minimum =\", result\n      \n       result = find_max(num1, num2)\n       print \"Maximum =\", result\n    }\n    # 脚本执行从这里开始\n    BEGIN {\n       main(10, 60)\n    }\n'"
    },
    {
      "id": "s5-55",
      "sectionId": "s5",
      "title": "带索引的数组",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    arr[0] = \"foo\";\n    arr[1] = \"bar\";\n    print(arr[0]); # => foo\n    delete arr[0];\n    print(arr[0]); # => \"\"\n}'"
    },
    {
      "id": "s5-56",
      "sectionId": "s5",
      "title": "带键的数组",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    print(\"baz\" in assoc); # => 0\n    print(\"foo\" in assoc); # => 1\n}'"
    },
    {
      "id": "s5-57",
      "sectionId": "s5",
      "title": "带拆分的数组",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    split(\"foo:bar:baz\", arr, \":\");\n    for (key in arr)\n        print arr[key];\n}'"
    },
    {
      "id": "s5-58",
      "sectionId": "s5",
      "title": "带有排序的数组",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    arr[0] = 3\n    arr[1] = 2\n    arr[2] = 4\n    n = asort(arr)\n    for (i = 1; i <= n ; i++)\n        print(arr[i])\n}'"
    },
    {
      "id": "s5-59",
      "sectionId": "s5",
      "title": "多维",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    multidim[0,0] = \"foo\";\n    multidim[0,1] = \"bar\";\n    multidim[1,0] = \"baz\";\n    multidim[1,1] = \"boo\";\n}'"
    },
    {
      "id": "s5-60",
      "sectionId": "s5",
      "title": "多维迭代",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    array[1,2]=3;\n    array[2,3]=5;\n    for (comb in array) {\n        split(comb,sep,SUBSEP);\n        print sep[1], sep[2], \n        array[sep[1],sep[2]]\n    }\n}'"
    },
    {
      "id": "s6-61",
      "sectionId": "s6",
      "title": "if-else 语句",
      "kind": "code",
      "lang": "shell",
      "code": "awk -v count=2 'BEGIN {\n    if (count == 1)\n        print \"Yes\";\n    else\n        print \"Huh?\";\n}'"
    },
    {
      "id": "s6-62",
      "sectionId": "s6",
      "title": "if-else 语句",
      "kind": "text",
      "body": "#### 三元运算符"
    },
    {
      "id": "s6-63",
      "sectionId": "s6",
      "title": "if-else 语句",
      "kind": "code",
      "lang": "shell",
      "code": "awk -v count=2 'BEGIN {\n    print (count==1) ? \"Yes\" : \"Huh?\";\n}'"
    },
    {
      "id": "s6-64",
      "sectionId": "s6",
      "title": "存在",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"foo\" in assoc)\n        print \"Fooey!\";\n}'"
    },
    {
      "id": "s6-65",
      "sectionId": "s6",
      "title": "存在",
      "kind": "text",
      "body": "#### 不存在"
    },
    {
      "id": "s6-66",
      "sectionId": "s6",
      "title": "存在",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    assoc[\"foo\"] = \"bar\";\n    assoc[\"bar\"] = \"baz\";\n    if (\"Huh\" in assoc == 0 )\n        print \"Huh!\";\n}'"
    },
    {
      "id": "s6-67",
      "sectionId": "s6",
      "title": "switch",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{\n    switch (NR * 2 + 1) {\n        case 3:\n        case \"11\":\n            print NR - 1\n            break\n        case /2[[:digit:]]+/:\n            print NR\n        default:\n            print NR + 1\n        case -1:\n            print NR * -1\n    }\n}' /etc/passwd"
    },
    {
      "id": "s7-68",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    for (i = 0; i < 10; i++)\n        print \"i=\" i;\n}'"
    },
    {
      "id": "s7-69",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "text",
      "body": "#### 1 到 100 之间的 2 的幂"
    },
    {
      "id": "s7-70",
      "sectionId": "s7",
      "title": "for...i",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    for (i = 1; i <= 100; i *= 2)\n        print i\n}'"
    },
    {
      "id": "s7-71",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    assoc[\"key1\"] = \"val1\"\n    assoc[\"key2\"] = \"val2\"\n    for (key in assoc)\n        print assoc[key];\n}'"
    },
    {
      "id": "s7-72",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "text",
      "body": "#### Arguments"
    },
    {
      "id": "s7-73",
      "sectionId": "s7",
      "title": "for...in",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    for (argnum in ARGV)\n        print ARGV[argnum];\n}' a b c"
    },
    {
      "id": "s7-74",
      "sectionId": "s7",
      "title": "示例",
      "kind": "text",
      "body": "#### 反向记录"
    },
    {
      "id": "s7-75",
      "sectionId": "s7",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{ x[NR] = $0 }\n    END {\n        for (i = NR; i > 0; i--)\n        print x[i]\n    }\n' /etc/passwd"
    },
    {
      "id": "s7-76",
      "sectionId": "s7",
      "title": "示例",
      "kind": "text",
      "body": "#### 反向字段"
    },
    {
      "id": "s7-77",
      "sectionId": "s7",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{\n    for (i = NF; i > 0; i--)\n        printf(\"%s \",$i);\n    print \"\"\n}' /etc/passwd"
    },
    {
      "id": "s7-78",
      "sectionId": "s7",
      "title": "示例",
      "kind": "text",
      "body": "#### 按记录求和"
    },
    {
      "id": "s7-79",
      "sectionId": "s7",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{\n    s=0;\n    for (i = 1; i <= NF; i++)\n        s += $i;\n    print s\n}' /etc/passwd"
    },
    {
      "id": "s7-80",
      "sectionId": "s7",
      "title": "示例",
      "kind": "text",
      "body": "#### 总结整个文件"
    },
    {
      "id": "s7-81",
      "sectionId": "s7",
      "title": "示例",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '\n    {for (i = 1; i <= NF; i++)\n        s += $i;\n    };\n    END{print s}\n' /etc/passwd"
    },
    {
      "id": "s7-82",
      "sectionId": "s7",
      "title": "while",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    while (a < 10) {\n        print \"- \" \" concatenation: \" a\n        a++;\n    }\n}'"
    },
    {
      "id": "s7-83",
      "sectionId": "s7",
      "title": "while",
      "kind": "text",
      "body": "#### do...while"
    },
    {
      "id": "s7-84",
      "sectionId": "s7",
      "title": "while",
      "kind": "code",
      "lang": "shell",
      "code": "awk '{\n    i = 1\n    do {\n        print $0\n        i++\n    } while (i <= 5)\n}' /etc/passwd"
    },
    {
      "id": "s7-85",
      "sectionId": "s7",
      "title": "Break",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    break_num = 5\n    for (i = 0; i < 10; i++) {\n        print i\n        if (i == break_num)\n            break\n    }\n}'"
    },
    {
      "id": "s7-86",
      "sectionId": "s7",
      "title": "Continue",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN {\n    for (x = 0; x <= 10; x++) {\n        if (x == 5 || x == 6)\n            continue\n        printf \"%d \", x\n    }\n    print \"\"\n}'"
    },
    {
      "id": "s8-87",
      "sectionId": "s8",
      "title": "用法",
      "kind": "text",
      "body": "#### 右对齐"
    },
    {
      "id": "s8-88",
      "sectionId": "s8",
      "title": "用法",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN{printf \"|%10s|\\n\", \"hello\"}'\n# |     hello|"
    },
    {
      "id": "s8-89",
      "sectionId": "s8",
      "title": "用法",
      "kind": "text",
      "body": "#### 左对齐"
    },
    {
      "id": "s8-90",
      "sectionId": "s8",
      "title": "用法",
      "kind": "code",
      "lang": "shell",
      "code": "awk 'BEGIN{printf \"|%-10s|\\n\", \"hello\"}'\n# |hello     |"
    },
    {
      "id": "s8-91",
      "sectionId": "s8",
      "title": "通用说明符",
      "kind": "text",
      "body": "特征符 | 描述\n:- | :-\n`c`           | ASCII 字符\n`d`           | 十进制整数\n`e`, `E`, `f` | 浮点格式\n`o`           | 无符号八进制值\n`s`           | 细绳\n`%`           | 文字百分比"
    },
    {
      "id": "s8-92",
      "sectionId": "s8",
      "title": "Space 空间",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: '{\n    printf \"%-10s %s\\n\", $1, $(NF-1)\n}' /etc/passwd | head -n 3"
    },
    {
      "id": "s8-93",
      "sectionId": "s8",
      "title": "Space 空间",
      "kind": "text",
      "body": "输出"
    },
    {
      "id": "s8-94",
      "sectionId": "s8",
      "title": "Space 空间",
      "kind": "code",
      "lang": "shell",
      "code": "root       /root\nbin        /bin\ndaemon     /sbin"
    },
    {
      "id": "s8-95",
      "sectionId": "s8",
      "title": "Header 标题头",
      "kind": "code",
      "lang": "shell",
      "code": "awk -F: 'BEGIN {\n    printf \"%-10s %s\\n\", \"User\", \"Home\"\n    printf \"%-10s %s\\n\", \"----\",\"----\"}\n    { printf \"%-10s %s\\n\", $1, $(NF-1) }\n' /etc/passwd | head -n 5"
    },
    {
      "id": "s8-96",
      "sectionId": "s8",
      "title": "Header 标题头",
      "kind": "text",
      "body": "输出"
    },
    {
      "id": "s8-97",
      "sectionId": "s8",
      "title": "Header 标题头",
      "kind": "code",
      "lang": "shell",
      "code": "User       Home\n----       ----\nroot       /root\nbin        /bin\ndaemon     /sbin"
    },
    {
      "id": "s9-98",
      "sectionId": "s9",
      "title": "正则表达式元字符",
      "kind": "text",
      "body": "• `\\`\n• `^`\n• `$`\n• `.`\n• `[`\n• `]`\n• `|`\n• `(`\n• `)`\n• `*`\n• `+`\n• `?`"
    },
    {
      "id": "s9-99",
      "sectionId": "s9",
      "title": "转义序列",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`\\b` | 退格\n`\\f` | 换页\n`\\n` | 换行(换行)\n`\\r` | 回车\n`\\t` | 水平选项卡\n`\\v` | 垂直选项卡"
    },
    {
      "id": "s9-100",
      "sectionId": "s9",
      "title": "运行脚本",
      "kind": "code",
      "lang": "shell",
      "code": "$ cat demo.awk\n#!/usr/bin/awk -f\nBEGIN { x = 23 }\n      { x += 2 }\nEND   { print x }\n$ awk -f demo.awk /etc/passwd\n69"
    },
    {
      "id": "s10-101",
      "sectionId": "s10",
      "title": "另见",
      "kind": "text",
      "body": "• [GNU awk 用户指南](https://www-zeuthen.desy.de/dv/documentation/unixguide/infohtml/gawk/gawk.html) _(www-zeuthen.desy.de)_\n• [AWK cheatsheet](https://gist.github.com/Rafe/3102414) _(gist.github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/awk.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/awk.md",
    "lang": "zh",
    "mode": "local"
  }
}