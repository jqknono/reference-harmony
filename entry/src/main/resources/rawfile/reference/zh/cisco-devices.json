{
  "id": "cisco-devices",
  "name": "Cisco 网络设备备忘清单",
  "title": "本清单提供了 Cisco 网络设备常用命令示例",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "模式",
      "startIndex": 2
    },
    {
      "id": "s2",
      "title": "基本操作",
      "startIndex": 13
    },
    {
      "id": "s3",
      "title": "vlan 配置",
      "startIndex": 22
    },
    {
      "id": "s4",
      "title": "接口操作",
      "startIndex": 35
    },
    {
      "id": "s5",
      "title": "设备调试",
      "startIndex": 42
    },
    {
      "id": "s6",
      "title": "路由配置",
      "startIndex": 47
    },
    {
      "id": "s7",
      "title": "交换机配置",
      "startIndex": 52
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "body": "本清单提供了 Cisco 网络设备常用命令示例"
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "body": "清单内容基于 [**Cisco Packet Tracer**](https://www.netacad.com/cisco-packet-tracer) 进行"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "模式简介",
      "body": "是指命令行界面的操作层级，不同模式可执行不同范围的命令\n\n以下列出了一些基本的模式\n\n| 模式 | 命令提示符 | 进入方式 |\n| :-: | :-: | :-: |\n| 用户模式 | `用户名称>` | 默认进入 |\n| 特权模式 | `用户名称#` | 通过 enable 进入 |\n| 全局配置模式 | `用户名称(config)#` | 通过 config terminal 进入 |\n| VLAN 模式 | `用户名称(config-vlan)#` | 通过 vlan vlan-ID 进入 |\n| 接口配置模式 | `用户名称(config-if)#` | 通过 interface 接口 进入 |\n| Line 模式 | `用户名称(config-line)#` | 通过 line vty 端口 进入 |\n<!--rehype:className=show-header-->"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "进入特权模式",
      "body": "```shell\nenable # 进入到特权模式\n```"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "进入全局模式",
      "body": "```shell\nconfigure terminal # 进入到全局模式\n```"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "进入 line 模式",
      "body": "```shell\nline vty 0 # 进入 line 模式 的 0 端口\n```"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "退回上级模式",
      "body": "退回到上一级模式， 如全局模式退到特权模式，特权模式退到普通模式\n\n```shell\nexit\n```"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "强制执行",
      "body": "在任何模式下均可\n\n```shell\ndo ~ # 强制执行 ~\n```"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "取消命令",
      "body": "```shell\nno ~ # 取消命令 ~\n```"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "修改主机名称",
      "body": "需要在全局模式下进行\n\n```shell\nhostname NAME # 修改名称为 NAME\n```"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "查看设备配置",
      "body": "需要在特权模式下进行\n\n```shell\nshow running-config # 查看设备配置\n```"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "关闭端口",
      "body": "需要在接口配置模式下进行\n\n```shell\nshutdown ~ # 关闭端口 ~\n```"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "设置进入特权模式密码",
      "body": "需要在全局模式下进行"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "明文密码",
      "body": "```shell\nenable password PASSWORD # 设置进入 特权模式 的密码为 PASSWORD\n```"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "密文密码",
      "body": "```shell\nenable secret PASSWORD # 设置进入 特权模式 的密码为 PASSWORD\n```"
    },
    {
      "id": "s3-22",
      "sectionId": "s3",
      "title": "创建并进入 vlan",
      "body": "需要在全局模式下进行\n\nvlan-ID 可以是任何符合 vlan 范围的数字，如果 vlan 存在，则直接进入\n\n```shell\nvlan vlan-ID\n```"
    },
    {
      "id": "s3-25",
      "sectionId": "s3",
      "title": "修改 vlan 名称",
      "body": "在进入 vlan 后，将当前 vlan 名称变更为 NAME\n\n```shell\nname NAME\n```"
    },
    {
      "id": "s3-27",
      "sectionId": "s3",
      "title": "取消 vlan",
      "body": "需要离开 vlan 后，在全局模式下才能取消 vlan\n\n```shell\nno vlan vlan-ID\n```"
    },
    {
      "id": "s3-29",
      "sectionId": "s3",
      "title": "配置 vlan trunk - 首先创建需要配置的对应 vlan",
      "body": "```sh\nvlan vlan-id\n```"
    },
    {
      "id": "s3-30",
      "sectionId": "s3",
      "title": "添加端口到 vlan 当中",
      "body": "```sh\n# 进入 范围在 1 - 10 的所有接口\ninterface range f0/1 - 10\n# 进入 范围在 1 - 10 的所有接口 和 单独的 f0/12 接口\ninterface range f0/1 - 11, f0/12\n# 进入 单个 接口 f0/1\ninterface f0/1\n```"
    },
    {
      "id": "s3-31",
      "sectionId": "s3",
      "title": "进入接口后",
      "body": "```sh\n# vlan-id 为 需要将 当前接口 添加到 的 vlan id，为数字\nswitchport access vlan vlan-id\n```"
    },
    {
      "id": "s3-32",
      "sectionId": "s3",
      "title": "进入两个交换机相连接口",
      "body": "```sh\n# 设置模式 trunk\nswitchport mode trunk\n```"
    },
    {
      "id": "s3-33",
      "sectionId": "s3",
      "title": "在 trunk 中 添加或删除 vlan",
      "body": "```sh\n# 首先需要进入 配置 trunk 的接口\nswitchport trunk allowed vlan add vlan-id\nswitchport trunk allowed vlan remove vlan-id\n```"
    },
    {
      "id": "s3-34",
      "sectionId": "s3",
      "title": "查看 trunk 配置",
      "body": "```sh\n# 特权模式下\n# interface-id 为配置 trunk 的接口名称\nshow interfaces interface-id switchport\n```"
    },
    {
      "id": "s4-35",
      "sectionId": "s4",
      "title": "进入接口",
      "body": "需要在全局模式下进行"
    },
    {
      "id": "s4-36",
      "sectionId": "s4",
      "title": "单个接口",
      "body": "```shell\n# 进入单个接口\n# 进入接口 f0/1\ninterface f0/1\n```"
    },
    {
      "id": "s4-37",
      "sectionId": "s4",
      "title": "多个接口",
      "body": "```shell\n# 进入接口 f0/1 直到 f0/8 和 f0/10\ninterface range f0/1 - 8, f0/10\n```"
    },
    {
      "id": "s4-38",
      "sectionId": "s4",
      "title": "添加接口到 vlan 中",
      "body": "将进入到的当前接口添加到对应 vlan-ID 的 vlan 中\n\n```shell\nswitchport access vlan vlan-ID\n```"
    },
    {
      "id": "s4-40",
      "sectionId": "s4",
      "title": "将接口从 vlan 中移出",
      "body": "取消添加到对应 vlan-ID 的 vlan 的接口\n\n```shell\nno switchport access vlan vlan-ID\n```"
    },
    {
      "id": "s5-42",
      "sectionId": "s5",
      "title": "配置 console 口令",
      "body": "设置进入终端的密码\n\n```shell\n# 配置端口\nline console 0\n# 设置密码为 123\npassword 123\n# 载入\nlogin\n```"
    },
    {
      "id": "s5-44",
      "sectionId": "s5",
      "title": "配置远程 - 配置远程用户",
      "body": "```shell\n# 0 为一个用户\n# 0 - 2 为 0， 1， 2 三个用户\n# 0 - 15 为 16 个用户\nline vty 0\nline vty 0 - 2\nline vty 0 - 15\n# 配置密码为 123456\npassword 123456\n# 载入设置\nlogin\n```"
    },
    {
      "id": "s5-45",
      "sectionId": "s5",
      "title": "配置接口",
      "body": "```shell\n# 进入 vlan 1\ninterface vlan 1\n# 配置 ip 地址\n# 192.168.100.254 为需要配置的 ip 地址\n# 255.255.255.0 为子网掩码\nip address 192.168.100.254 255.255.255.0\n# 启动远程\n# no 为取消 ~\n# shutdown 为关闭\n# no shutdown 就是取消关闭，即启动\nno shutdown\n```"
    },
    {
      "id": "s5-46",
      "sectionId": "s5",
      "title": "连接远程",
      "body": "```shell\n# 需要先配置远程的电脑 ip 地址\n# 需要与 配置的 远程 ip 地址频段一致\n# 如 远程 ip 地址为 192.168.100.254\n# 电脑 ip 地址需要与 远程 ip 地址在同一频段 即 192.168.100.~\n# 然后通过在 电脑 的命令提示行使用 ping 命令查看是否连接成功\n# 连接成功之后通过 telnet 访问远程\ntelnet 192.168.100.254\n```"
    },
    {
      "id": "s6-47",
      "sectionId": "s6",
      "title": "静态路由",
      "body": "```sh\n# 首先需要配置 IP 地址\n## 电脑配置\n### IP地址配置 （假设为：192.168.1.1）\n### 默认网关 （需与IP地址同段，假设为：192.168.1.254）\n## 路由器配置\n### 首先进入与电脑连接的接口 （假设为 f0/0）\n### 需在 全局模式 下\ninterface f0/0\n### 进入接口后\n### 在 接口模式 下\nip address 192.168.1.254 255.255.255.0\n### 192.168.1.254 为 在 电脑所配置的默认网关\n### 255.255.255.0 为 子网掩码\n### 然后启动接口 否则无法连接\nno shutdown\n### 进入两个路由器相连的接口 （假设为 s1/0）\ninterface s1/0\n### 同样需要配置 IP地址\nip address 10.10.10.1 255.0.0.0\n### 然后配置时钟\nclock rate 64000\n### 64000 为 时钟速率\n### 同时也需要启动接口\nno shutdown\n\n# 配置跳转路由\n## 在 全局模式 下\nip route 192.168.1.0 255.255.255.0 10.10.10.1\n### 其中 192.168.1.0 为 需要到达的目标 IP地址\n### 第四位 0 表示无指定值，即 1 - 254 的值都能匹配\n### 255.255.255.0 为 子网掩码\n### 目标地址有几位明确的，就需要几位255\n### 10.10.10.1 为 下一跳地址\n### 下一跳可以理解为 公交车的下一站\n### 而目标 IP地址则为公交车的终点站\n```"
    },
    {
      "id": "s6-48",
      "sectionId": "s6",
      "title": "默认路由",
      "body": "```sh\n# 首先需要清空所有路由\n## 然后重新配置\nip route 0.0.0.0 0.0.0.0 0.0.0.0\n\n# 第一个 0.0.0.0 为 目标 IP地址 固定不变\n## 0 表示无指定目标，因此匹配所有 IP地址\n\n# 第二个 0.0.0.0 为 目标地址的子网掩码 固定不变\n## 目标 IP地址 有几位不为 0 则有几位是 255\n## 如：目标 IP地址 为：10.10.0.0\n## 则 子网掩码为 255.255.0.0\n\n# 第三个 0.0.0.0 为 下一跳的 IP地址 随下一跳地址变化\n## 如：下一跳地址为 10.10.10.1 则 命令为\nip route 0.0.0.0 0.0.0.0 10.10.10.1\n```"
    },
    {
      "id": "s6-49",
      "sectionId": "s6",
      "title": "单臂路由",
      "body": "```sh\n# 首先需要在 PC 配置IP和网关 （假设分别为 192.168.1.1、192.168.1.254）\n# 然后进入交换机创建 vlan （假设 vlan 为 1）\nvlan 1\n## 并将与PC相连的接口 添加到 vlan 当中 （假设接口为 f0/1）\ninterface f0/1\n## 配置接口为access口\nswitchport mode access\nswitchport access vlan 1\n## 然后在于路由器相连的接口中放通vlan （假设为 g0/0接口）\nint g0/0\n## 设置 trunk\nswitchport mode trunk\n## 放通所有vlan\nswitchport trunk allowed vlan all\n# 进入路由器\n## 首先需要开启\n### 需要进入与交换机相连的接口 （假设为 f0/1）\ninterface f0/1\n### 开启接口\nno sh\n## 然后进入 f0/1.1 (f0/1.1 为 f0/1 的子接口)\nint f0/1.1\n## 配置封装 trunk 到 vlan 中 （假设 vlan 为 1）\nencapsulation dot1Q 1\n## 随后配置 IP 和 掩码\nip address 192.168.1.254 255.255.255.0\n```"
    },
    {
      "id": "s6-50",
      "sectionId": "s6",
      "title": "动态路由",
      "body": "```sh\n# 首先配置电脑IP及网关 （假设为 192.168.1.1、192.168.1.254）\n# 然后配置路由器\n## 进入与电脑相连的接口 （假设为 f0/1），开启，并配置IP地址\nint f0/1\nno sh\nip address 192.168.1.254 255.255.255.0\n## 然后进入与其它路由器相连的接口 （假设为 f0/0），开启\n## 并为接口配置IP （假设为 10.10.10.1）\nint f0/0\nip address 10.10.10.1 255.0.0.0\n## 然后回到全局模式开始RIP配置\nroute rip\nnetwork 192.168.1.0\n## network 后面跟的IP地址为与当前路由器所相连的接口所配置的IP，0表示全网段\n## 即 network 后，所有在 192.168.1.1 - 254 这个范围的IP都能联通\n```"
    },
    {
      "id": "s6-51",
      "sectionId": "s6",
      "title": "OSPF 配置",
      "body": "```sh\n# 添加环回地址\n## 进入环回接口\ninterface loopback 0\n## 配置ip\nip address IP-Address subnet-mask\n## 配置 ospf 点对点\nip ospf network point-to-point\n\n# OSPF 路由进程\n## 进程号可自定义\n## 用于识别当前路由器上的多个进程\nrouter ospf 进程号\n## 发布网段在区域\n### 网段 如：192.168.10.~\n### 网段可以是与子网地址，网络地址，接口地址...\n### 正向掩码若为 255.0.0.0 则反向掩码为 0.255.255.255\n### 255.255.255.192 - 0.0.0.63\n### 区域号可自定义\nnetwork 网段 反向掩码 area 区域号\n## 设置 router ID\n### ID 为 IP地址\n### 是在 OSPF区域当中唯一标识路由器的IP地址\n### 优先选取最大的环回接口IP\n### 若没有则选取最大物理接口IP\nrouter-id ID\n## 修改 接口 cost值\n### OSPF 使用 cost值来决定最佳路径\n### cost值类似权重值\n### 需要首先进入对应接口当中\nip ospf cost cost值\n## 配置 OSPF计时器\n### TIME 为 时间 单位为 s\nip ospf hello-interval TIME(s)\nip ospf dead-interval TIME(s)\n```"
    },
    {
      "id": "s7-52",
      "sectionId": "s7",
      "title": "VTP协议",
      "body": "```sh\n# 可以通过 VTP协议 在一台交换机上集中进行配置变更\n# 所做的变更会自动传播到当前网络中的所有交换机上\n\n# VTP 域\n## 域内的每台交换机必须使用相同 VTP域名\n## 一台交换机只能加入一个 VTP域\n## 交换机必须是相连的，且之间须启用 Trunk 中继\n\n# VTP 模式\n## 服务器模式\nvtp mode server\n### 充当VTP服务器，控制它所在域中的VLAN生成和修改，并向外发送VTP通告\n## 客户机模式\nvtp mode client\n### 此模式的交换机不允许增删VLAN，监听其它交换机的VTP通告，并修改对应配置\n## 透明模式\nvtp mode transparent\n### 不参与VTP，可增删本地VLAN，但不向外通告，也不接受VTP通告修改自身VLAN数据库，可转发VTP通告\n\n# 流程\n## 首先创建一个 VTP服务器\nvtp mode server\n### 配置 VTP域名 为 VTP\nvtp domain VTP\n## 然后创建 VTP客户端\nvtp mode client\n### 需要在创建 VTP客户端前 先配置 trunk\n### 进入当前交换机与 VTP服务器交换机 相连的接口 （假设为 f0/24）\nint f0/24\nswitchport mode trunk\n### VTP服务器交换机 与 当前交换机相连接口 在 f0/24 设 trunk 时自动变为 trunk\n### 不需要再手动配置 trunk\n### 并将客户端配置到 VTP 这个 VTP域名 下\nvtp domain VTP\n\n# VTP 相关命令\n## 查看配置\ndo sh vtp status\n## VTP 版本\nvtp version versions\n### VTP 版本号大的 VLAN信息 将覆盖 VTP版本号低的\n## 设置VTP口令 为 VTPPASSWORD\nvtp password VTPPASSWORD\n### 只有在 域名和口令 相同的情况下 才会同步 vlan\n\n```"
    },
    {
      "id": "s7-53",
      "sectionId": "s7",
      "title": "STP 协议",
      "body": "```shell\n# 概念\n## RB（Root Bridge） 根网桥\n### 网络中倒数的根，整个网络中只存在一个根\n## RP（Root Port）根端口\n## DP（design Port）指定端口\n\n# 命令\n## 查看STP的配置\nshow spanning-tree\n## 查看 f0/0 端口状态\nshow spanning-tree interface f0/0\n## 查看某个 vlan 下的 stp 配置信息\nshow spanning-tree vlan vlan-id\n## 配置生成树模式为 STP 或 RSTP\nspanning-tree mode pvst\nspanning-tree mode rapid-pvst\n## 配置交换机在 VLAN1 中的优先级\nspanning-tree vlan 1 priority <0-61440>\n## 配置为 vlan1 的根网桥\nspanning-tree vlan root primary\n## 配置为 vlan1 的次根网桥\nspanning-tree vlan 1 root secondary\n## 将 f0/0 接口在 vlan1 生成树的路径开销变更为 18\ninterface f0/0\nspanning-tree vlan 1 cost 18\n## 将 f0/0 接口在 vlan1 生成树的端口优先级变更为 16\ninterface f0/0\nspanning-tree vlan 1 port-priority 16\n```"
    },
    {
      "id": "s7-54",
      "sectionId": "s7",
      "title": "三层交换机",
      "body": "```shell\n# 首先在三层交换机上启动路由\nip routing\n# 然后配置vlan的ip地址\nint vlan vlan-id\n## 添加IP地址\nip address ip-address subnet-mask\n## 启动当前接口\nno sh\n# 然后进入交换机与添加到vlan中的ip地址一致的终端相连的接口\n## 将当前接口添加到赋予当前接口连接的终端ip地址一致的vlan中\n```"
    },
    {
      "id": "s7-55",
      "sectionId": "s7",
      "title": "三层交换机DHCP配置",
      "body": "```sh\n# 首先创建与连接的电脑终端数量一致的vlan\n# 然后进入到与中介交换机相连的接口\n## 使用trunk 放通创建的vlan\nswitchport trunk allowed vlan vlan-id/all\n# 进入创建的vlan当中\nint vlan vlan-id\n## 配置当前vlan的IP为对应当前vlan的终端IP\nip address IP-Address subnet-mask\n## 开启当前vlan接口\nno sh\n# 对 DHCP 地址池地址进行排除\n## 排除的为vlan的ip地址\nip dhcp exculded-address IP-Address\n# 创建DHCP地址池\n## DHCP_AddressName 为可自定义的地址名称\nip dhcp pool DHCP_AddressName\n## 设置当前DHCP地址池网段\n### ip-address 为可自定义的ip地址\n### subnet-mask 为可自定义的子网掩码\n### 需要注意，子网掩码需要与对应vlan的子网掩码一致\n### 否则无法接通\nnetwork ip-address subnet-mask\n## 设置DNS DNS-Address 为可自定义的 dns 地址\ndns-server DNS-Address\n## 设置默认网关 IP-Address 为可自定义的IP地址\ndefault-route IP-Address\n\n# 进入中介交换机\n## 创建与三层交换机相同的vlan\n## 进入与三层交换机相连的接口\n### 将接口模式设为 trunk 并 放通创建的vlan\n### 可使用 all 代替全部vlan\nswitchport mode trunk\nswitchport trunk allowed vlan vlan-id,vlan-id...\n## 进入与电脑终端相连的接口\n### 将接口分配到指定ip的vlan下\n### 最后在电脑终端IP配置为DHCP即可\n```"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/cisco-devices.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/cisco-devices.md",
    "lang": "zh",
    "mode": "local"
  }
}