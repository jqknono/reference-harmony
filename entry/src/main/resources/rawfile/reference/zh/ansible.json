{
  "id": "ansible",
  "name": "Ansible 备忘清单",
  "title": "此快速参考备忘单提供了使用 [Ansible](https://ansible.com) 的各种方法。",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/ansible.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "命令行(ad-hoc)",
      "startIndex": 14
    },
    {
      "id": "s3",
      "title": "另见",
      "startIndex": 57
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "此快速参考备忘单提供了使用 [Ansible](https://ansible.com) 的各种方法。"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "安装",
      "kind": "text",
      "body": "安装命令 | 环境\n:-|-\n`brew install ansible`   | macos\n`yum install -y ansible` | centos\n`pip install ansible`    | python"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "• [Ansible 官方文档](https://docs.ansible.com)"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "配置位置",
      "kind": "text",
      "body": "文件路径 | 说明\n:-|-\n`/etc/ansible/ansible.cfg`  | 系统范围的配置\n`~/ansible.cfg`             | 用户特定的配置\n`$pwd/ansible.cfg`          | 当前目录下的配置"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "配置文件优先级"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "• 如果没有任何其他配置文件，默认使用 `/etc/ansible/ansible.cfg`\n• `~/.ansible.cfg` `家`目录下的 `.ansible.cfg`\n• 当前目录下的 `ansible.cfg`，即在同一目录下 `ansible.cfg` 优先级高于 `~/.ansible.cfg`\n• 环境变量 `exoport ANSIBLE_CONFIG=/$DIR/ansible.cfg`"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "查看正在使用的 `ansible` 配置文件："
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "bash",
      "code": "ansible%20--version%20%7C%20grep%20%22config%20file%22",
      "encoded": true
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "Inventory文件(hosts列表) - 静态Inventory",
      "kind": "text",
      "body": "`/etc/ansible/hosts`"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "ini",
      "code": "mail.example.com\n\n[webservers]\nfoo.example.com\nbar.example.com"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "Inventory 主机组使用多个IP和域名",
      "kind": "code",
      "lang": "ini",
      "code": "[web]\n172.18.12.5[1:4]\n[webservers]\nwww[01:50].example.com"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "Inventory 主机组使用子主机组",
      "kind": "code",
      "lang": "ini",
      "code": "[usa:children]\nsoutheast\nnortheast\nsouthwest\nnorthwest"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "给多台主机设置变量",
      "kind": "text",
      "body": "`group variables`\n如果组中的所有主机共享一个变量值，则可以一次将该变量应用于整个组"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "ini",
      "code": "[atlanta]\nhost1\nhost2\n\n[atlanta:vars]\nntp_server=ntp.atlanta.example.com\nproxy=proxy.atlanta.example.com"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "ansible",
      "kind": "text",
      "body": "检查Inventory是否生效"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ansible all --list-hosts"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ping所有目标"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ansible all -m ping"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ping本地(不使用SSH连接)"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ansible%20all%20-i%20localhost%2C%20-e%20'%7B%22ansible_connection%22%3A%20%22local%22%7D'%20-m%20ping",
      "encoded": true
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "本地执行命令"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ansible%20all%20-i%20localhost%2C%20-e%20'%7B%22ansible_connection%22%3A%20%22local%22%7D'%20-a%20'hostname'",
      "encoded": true
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "获取本地主机的信息"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ansible%20all%20-i%20localhost%2C%20-e%20'%7B%22ansible_connection%22%3A%20%22local%22%7D'%20-m%20setup",
      "encoded": true
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "获取远程到本地"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ansible%20target%20-m%20fetch%20-a%20%22src%3D%2Ftmp%2Fseq%20dest%3D%2Ftmp%2Fseq%22",
      "encoded": true
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "拷贝本地到远程"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ansible%20target%20-m%20copy%20-a%20%22src%3D%2Ftmp%2Fseq%20dest%3D%2Ftmp%2Fseq%22",
      "encoded": true
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "Ansible 命令帮助",
      "kind": "code",
      "lang": "shell",
      "code": "$ ansible\n$ ansible <host-pattern> [options]"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-a MODULE_ARGS`, `--args=MODULE_ARGS` | 模块参数\n`--ask-vault-pass` | 询问保险库密码\n`-B SECONDS`, `--background=SECONDS` | 异步运行，X 秒后失败 (默认=N/A)\n`-C`, `--check` | 不要做任何改变；相反，尝试预测可能发生的一些变化\n`-D`, `--diff` | 更改(小)文件和模板时，显示这些文件中的差异； 与 `--check` 配合使用效果很好\n`-e EXTRA_VARS`, `--extra-vars=EXTRA_VARS` | 将附加变量设置为 key=value 或 YAML/JSON\n`-f FORKS`, `--forks=FORKS` | 指定要使用的并行进程数 (default=5)\n`-h`, `--help` | 显示此帮助信息并退出\n`-i INVENTORY`, `--inventory-file=INVENTORY` | 指定清单主机路径(默认=/etc/ansible/hosts)或逗号分隔的主机列表\n`-l SUBSET`, `--limit=SUBSET` | 进一步将选定主机限制为其他模式\n`--list-hosts` | 输出匹配主机列表；不执行任何其他操作\n`-m MODULE_NAME`, `--module-name=MODULE_NAME` | 要执行的模块名称 (default=command)\n`-M MODULE_PATH`, `--module-path=MODULE_PATH` | 指定模块库的路径 (default=None)\n`--new-vault-password-file=NEW_VAULT_PASSWORD_FILE` | 用于重新生成密钥的新保管库密码文件\n`-o`, `--one-line` | 压缩输出\n`--output=OUTPUT_FILE` | 用于加密或解密的输出文件名； 使用 - 用于标准输出\n`-P POLL_INTERVAL`, `--poll=POLL_INTERVAL` | 如果使用 -B 则设置轮询间隔(default=15)\n`--syntax-check` | 对 playbook 执行语法检查，但不要执行它\n`-t TREE`, `--tree=TREE` | 将输出记录到此目录\n`--vault-password-file=VAULT_PASSWORD_FILE` | 保险库密码文件\n`-v`, `--verbose` | 详细模式(-vvv 更多，-vvvv 启用连接调试)\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=left-align-->"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "控制谁以及如何连接到主机，连接选项："
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-k`, `--ask-pass` | 询问连接密码\n`--private-key=PRIVATE_KEY_FILE`, `--key-file=PRIVATE_KEY_FILE` | 使用此文件来验证连接\n`-u REMOTE_USER`, `--user=REMOTE_USER` | 以此用户身份连接(default=None)\n`-c CONNECTION`, `--connection=CONNECTION` | 要使用的连接类型 (default=smart)\n`-T TIMEOUT`, `--timeout=TIMEOUT` | 以秒为单位覆盖连接超时 (default=10)\n`--ssh-common-args=SSH_COMMON_ARGS` | 指定要传递给 sftp/scp/ssh 的常用参数 (e.g. ProxyCommand)\n`--sftp-extra-args=SFTP_EXTRA_ARGS` | 指定仅传递给 `sftp` 的额外参数 (e.g. -f, -l)\n`--scp-extra-args=SCP_EXTRA_ARGS` | 指定仅传递给 `scp` 的额外参数 (e.g. -l)\n`--ssh-extra-args=SSH_EXTRA_ARGS` | 指定仅传递给 `ssh` 的额外参数 (e.g. -R)\n<!--rehype:className=left-align-->"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "控制您成为目标主机上的用户的方式和用户，特权升级选项："
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n~~`-s`~~, ~~`--sudo`~~ | 使用 sudo (nopasswd) 运行操作(已弃用，使用 become)\n~~`-U SUDO_USER`~~, ~~`--sudo-user=SUDO_USER`~~ | 所需的 sudo 用户(默认=root)(已弃用，使用 become)\n~~`-S`~~, ~~`--su`~~ | 使用 su 运行操作(已弃用，使用 become)\n~~`-R SU_USER`~~, ~~`--su-user=SU_USER`~~ | 以该用户身份使用 su 运行操作(默认 = root)(已弃用，使用 become)\n`-b`, `--become` | 使用 become 运行操作(不暗示密码提示)\n`--become-method=BECOME_METHOD` | 要使用的权限提升方法(默认=sudo)，有效选择：\\[ `sudo` \\| `su` \\| `pbrun` \\| `pfexec` \\| `runas` \\| `doas` \\| `dzdo` \\]\n`--become-user=BECOME_USER` | 以该用户身份运行操作(默认=root)\n~~`--ask-sudo-pass`~~ | 询问 sudo 密码(已弃用，使用 become)\n~~`--ask-su-pass`~~ | 询问 su 密码(已弃用，使用 become)\n`-K`, `--ask-become-pass` | 要求提权密码\n<!--rehype:className=left-align-->"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "Ansible Galaxy 工具",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-galaxy [delete|import|info|init|install|list|login|remove|search|setup] [--help] [options] ..."
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-h`, `--help` | 显示此帮助信息并退出\n`-v`, `--verbose` | 详细模式(-vvv 更多，-vvvv 启用连接调试)\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-galaxy search --author <AUTHOR>\n$ ansible-galaxy search --platforms <PLATFORM>\n$ ansible-galaxy search --galaxy-tags <TAG>\n$ ansible-galaxy info <ROLE>\n$ ansible-galaxy install <ROLE> -p <ROLE_DIRECTORY>\n$ ansible-galaxy install -r <ROLE1> <ROLE2> <ROLE3> ...\n$ ansible-galaxy list\n$ ansible-galaxy remove <ROLE>\n$ ansible-galaxy init <ROLE>\n$ ansible-galaxy init --offline <ROLE>"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "ansible-doc",
      "kind": "text",
      "body": "在本地访问文档"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-doc\n$ ansible-doc [options] [module...]"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-h`, `--help` | 显示此帮助信息并退出\n`-l`, `--list` | 列出可用模块\n`-M MODULE_PATH`, `--module-path=MODULE_PATH` | 指定模块库的路径 (default=None)\n`-s`, `--snippet` | 显示指定模块的剧本片段\n`-v`, `--verbose` | 详细模式(-vvv 更多，-vvvv 启用连接调试)\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "ansible-vault",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-vault\n$ ansible-vault [create|decrypt|edit|encrypt|rekey|view] [--help] [options] vaultfile.yml"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`--ask-vault-pass` | 询问保险库密码\n`-h`, `--help` | 显示此帮助信息并退出\n`--new-vault-password-file=NEW_VAULT_PASSWORD_FILE` | 用于重新生成密钥的新保管库密码文件\n`--output=OUTPUT_FILE` | 用于加密或解密的输出文件名； 使用 - 用于标准输出\n`--vault-password-file=VAULT_PASSWORD_FILE` | 保险库密码文件\n`-v`, `--verbose` | 详细模式(-vvv 更多，-vvvv 启用连接调试)\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "ansible-playbook",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-playbook\n$ ansible-playbook playbook.yml"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`--ask-vault-pass` | 询问保险库密码\n`-C`, `--check` | 不要做任何改变；相反，尝试预测可能发生的一些变化\n`-D`, `--diff` | 更改（小）文件和模板时，显示这些文件中的差异；与 `--check` 配合使用效果很好\n`-e EXTRA_VARS`, `--extra-vars=EXTRA_VARS` | 将附加变量设置为 key=value 或 YAML/JSON\n`--flush-cache` | 清除事实缓存\n`--force-handlers` | 即使任务失败也运行处理程序\n`-f FORKS`, `--forks=FORKS` | 指定要使用的并行进程数（默认值=5）\n`-h`, `--help` | 显示此帮助信息并退出\n`-i INVENTORY`, `--inventory-file=INVENTORY` | 指定清单主机路径（默认=/etc/ansible/hosts）或逗号分隔的主机列表\n`-l SUBSET`, `--limit=SUBSET` | 进一步将选定主机限制为其他模式\n`--list-hosts` | 输出匹配主机列表；不执行任何其他操作\n`--list-tags` | 列出所有可用的标签\n`--list-tasks` | 列出所有将要执行的任务\n`-M MODULE_PATH`, `--module-path=MODULE_PATH` | 指定模块库的路径（默认=无）\n`--new-vault-password-file=NEW_VAULT_PASSWORD_FILE` | 用于重新生成密钥的新保管库密码文件\n`--output=OUTPUT_FILE` | 用于加密或解密的输出文件名；使用 - 用于标准输出\n`--skip-tags=SKIP_TAGS` | 只运行标签与这些值不匹配的播放和任务\n`--start-at-task=START_AT_TASK` | 在匹配此名称的任务处启动剧本\n`--step` | 一步一步：在运行前确认每个任务\n`--syntax-check` | 对 playbook 执行语法检查，但不要执行它\n`-t TAGS`, `--tags=TAGS` | 只运行带有这些值标记的播放和任务\n`--vault-password-file=VAULT_PASSWORD_FILE` | 保险库密码文件\n`-v`, `--verbose` | 详细模式（-vvv 更多，-vvvv 启用连接调试）\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "连接选项："
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-k`, `--ask-pass` | 询问连接密码\n`--private-key=PRIVATE_KEY_FILE`, `--key-file=PRIVATE_KEY_FILE` | 使用此文件来验证连接\n`-u REMOTE_USER`, `--user=REMOTE_USER` | 以此用户身份连接(默认=None)\n`-c CONNECTION`, `--connection=CONNECTION` | 要使用的连接类型(默认=smart)\n`-T TIMEOUT`, `--timeout=TIMEOUT` | 以秒为单位覆盖连接超时(默认值 = 10)\n`--ssh-common-args=SSH_COMMON_ARGS` | 指定要传递给 sftp/scp/ssh 的常用参数(例如 ProxyCommand)\n`--sftp-extra-args=SFTP_EXTRA_ARGS` | 指定仅传递给 sftp 的额外参数(例如 -f、-l)\n`--scp-extra-args=SCP_EXTRA_ARGS` | 指定仅传递给 scp 的额外参数(例如 -l)\n`--ssh-extra-args=SSH_EXTRA_ARGS` | 指定仅传递给 ssh 的额外参数(例如 -R)\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "特权升级选项："
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-s`, `--sudo` | 使用 sudo (nopasswd) 运行操作(已弃用，使用 become)\n`-U SUDO_USER`, `--sudo-user=SUDO_USER` | 所需的 sudo 用户(默认=root)(已弃用，使用become)\n`-S`, `--su` | 使用 su 运行操作(已弃用，使用 become)\n`-R SU_USER`, `--su-user=SU_USER` | 以该用户身份使用 su 运行操作(默认 = root)(已弃用，使用become)\n`-b`, `--become` | 使用 become 运行操作(不暗示密码提示)\n`--become-method=BECOME_METHOD` | 要使用的权限提升方法(默认=sudo)，有效选择：[ sudo \\| su \\| pbrun \\| pfexec \\| runas \\| doas \\| dzdo ]\n`--become-user=BECOME_USER` | 以该用户身份运行操作(默认=root)\n`--ask-sudo-pass` | 询问 sudo 密码(已弃用，使用 become)\n`--ask-su-pass` | 询问 su 密码(已弃用，使用 become)\n`-K`, `--ask-become-pass` | 要求提权密码\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "ansible-pull",
      "kind": "code",
      "lang": "bash",
      "code": "$ ansible-pull \n$ ansible-pull -U <repository> [options]"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`--accept-host-key` | 如果尚未添加，则添加 repo url 的主机密钥\n`--ask-vault-pass` | 询问保险库密码\n`-C CHECKOUT`, `--checkout=CHECKOUT` | 分支/标签/提交结帐。默认为存储库模块的行为。\n`-d DEST`, `--directory=DEST` | 签出存储库的目录\n`-e EXTRA_VARS`, `--extra-vars=EXTRA_VARS` | 将附加变量设置为 key=value 或 YAML/JSON\n`-f`, `--force` | 即使无法更新存储库也运行 playbook\n`--full` | 做一个完整的克隆，而不是一个浅的\n`-h`, `--help` | 显示此帮助信息并退出\n`-i INVENTORY`, `--inventory-file=INVENTORY` | 指定清单主机路径(默认=/etc/ansible/hosts)或逗号分隔的主机列表\n`-l SUBSET`, `--limit=SUBSET` | 进一步将选定主机限制为其他模式\n`--list-hosts` | 输出匹配主机列表；不执行任何其他操作\n`-m MODULE_NAME`, `--module-name=MODULE_NAME` | 存储库模块名称，ansible 将使用它来签出 repo。默认是 git\n`-M MODULE_PATH`, `--module-path=MODULE_PATH` | 指定模块库的路径(默认=无)\n`--new-vault-password-file=NEW_VAULT_PASSWORD_FILE` | 用于重新生成密钥的新保管库密码文件\n`-o`, `--only-if-changed` | 仅在存储库已更新时才运行 playbook\n`--output=OUTPUT_FILE` | 用于加密或解密的输出文件名；使用 - 用于标准输出\n`--purge` | 剧本运行后清除结帐\n`--skip-tags=SKIP_TAGS` | 只运行标签与这些值不匹配的播放和任务\n`-s SLEEP`, `--sleep=SLEEP` | 在开始之前休眠随机间隔(在 0 到 n 秒之间)。这是分散 git 请求的有用方法\n`-t TAGS`, `--tags=TAGS` | 只运行带有这些值标记的播放和任务\n`-U URL`, `--url=URL` | 剧本存储库的 URL\n`--vault-password-file=VAULT_PASSWORD_FILE` | 保险库密码文件\n`-v`, `--verbose` | 详细模式(-vvv 更多，-vvvv 启用连接调试)\n`--verify-commit` | 验证签出提交的 GPG 签名，如果失败则中止运行 playbook。这就需要对应的VCS模块来支持这样的操作\n`--version` | 显示程序的版本号并退出\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "连接选项："
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`-k`, `--ask-pass` | 询问连接密码\n`--private-key=PRIVATE_KEY_FILE`, `--key-file=PRIVATE_KEY_FILE` | 使用此文件来验证连接\n`-u REMOTE_USER`, `--user=REMOTE_USER` | 以此用户身份连接(默认=无)\n`-c CONNECTION`, `--connection=CONNECTION` | 要使用的连接类型(默认=智能)\n`-T TIMEOUT`, `--timeout=TIMEOUT` | 以秒为单位覆盖连接超时(默认值 = 10)\n`--ssh-common-args=SSH_COMMON_ARGS` | 指定要传递给 sftp/scp/ssh 的常用参数(例如 ProxyCommand)\n`--sftp-extra-args=SFTP_EXTRA_ARGS` | 指定仅传递给 sftp 的额外参数(例如 -f、-l)\n`--scp-extra-args=SCP_EXTRA_ARGS` | 指定仅传递给 scp 的额外参数(例如 -l)\n`--ssh-extra-args=SSH_EXTRA_ARGS` | 指定仅传递给 ssh 的额外参数(例如 -R)\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "特权升级选项："
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": ":- | -\n:- | -\n`--ask-sudo-pass` | 询问 sudo 密码(已弃用，使用become)\n`--ask-su-pass` | 询问 su 密码(已弃用，使用become)\n`-K`, `--ask-become-pass` | 要求提权密码\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "ansible常用模块",
      "kind": "text",
      "body": "`Ansible` 的模块已经高达 `3000+` 之多。但是个人在日常工作中，比较常见的大约 `20` 多个"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "bash",
      "code": "$  ansible-doc --list  #查询所有模块\n$  ansible <host-pattern> [options] # 标准使用方式"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "%7C%20%3A-%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20-%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20-%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20----------------%20%7C%20------------------------------------------------%20%7C%20------------------------------------------------------------%20%7C%0A%7C%20ping%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E6%A3%80%E6%9F%A5%E6%8C%87%E5%AE%9A%E8%8A%82%E7%82%B9%E6%9C%BA%E5%99%A8%E6%98%AF%E5%90%A6%E8%BF%98%E8%83%BD%E8%BF%9E%E9%80%9A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20ping%60%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20command%20%20%20%20%20%20%20%20%20%20%7C%20%E7%94%A8%E4%BA%8E%E5%9C%A8%E5%90%84%E5%8F%97%E6%8E%A7%E7%AB%AF%E8%8A%82%E7%82%B9%E8%BF%90%E8%A1%8C%E6%8C%87%E5%AE%9A%E7%9A%84%E5%91%BD%E4%BB%A4%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20command%20-a%20'hostname'%60%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20shell%20%20%20%20%20%20%20%20%20%20%20%20%7C%20shell%E6%A8%A1%E5%9D%97%E5%8F%AF%E4%BB%A5%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%EF%BC%8C%E8%80%8Ccommand%E6%98%AF%E4%B8%8D%E6%94%AF%E6%8C%81%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20shell%20-a%20'hostname%20%26%26%20date'%60%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20hostname%20%20%20%20%20%20%20%20%20%7C%20%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E5%8F%97%E6%8E%A7%E8%8A%82%E7%82%B9%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%9A%84%E6%A8%A1%E5%9D%97%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20-i%20%2Fopt%2Fhosts%20xx%20-m%20hostname%20-a%20'name%3Dansible-client-199'%60%20%7C%0A%7C%20copy%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E5%9C%A8%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E6%89%A7%E8%A1%8C%E5%A4%8D%E5%88%B6%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20copy%20-a%20'src%3D%2Fetc%2Fhosts%20dest%3D%2Fopt%2Fhosts%20backup%3Dyes'%60%20%7C%0A%7C%20fetch%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%88%B0%E7%AE%A1%E7%90%86%E8%8A%82%E7%82%B9%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C%20%7C%20%60ansible%20all%20-m%20fetch%20-a%20%22src%3D%2Fetc%2Fyum.repos.d%2Fepel.repo%20dest%3D%2Fusr%2Flocal%2Fsrc%22%60%20%7C%0A%7C%20script%20%20%20%20%20%20%20%20%20%20%20%7C%20%E7%AE%A1%E7%90%86%E7%AB%AF%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%89%A7%E8%A1%8C%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20%20-m%20script%20-a%20'%2Froot%2Ftime.sh'%60%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20file%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%B8%8A%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20file%20-a%20%22path%3D%2Froot%2Frsync.password%20mode%3D600%20state%3Dtouch%22%60%20%7C%0A%7C%20cron%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E7%AE%A1%E7%90%86%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92%E6%A8%A1%E5%9D%97%EF%BC%88%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%89%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20cron%20-a%20%22name%3D'test%20a%20job'%20user%3Droot%20job%3D'%2Fbin%2Fsh%20%2Fserver%2Fscripts%2Ftest.sh'%20minute%3D*%20hour%3D*%20day%3D*%20month%3D*%20weekday%3D*%22%60%20%7C%0A%7C%20yum%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20RedHat%E5%92%8CCentOS%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%AE%89%E8%A3%85%E5%92%8C%E7%AE%A1%E7%90%86%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E5%AE%89%E8%A3%85%3Cbr%20%2F%3E%60ansible%20all%20-m%20yum%20-a%20%22name%3Dhttpd%20state%3Dpresent%22%60%3Cbr%2F%3E%60ansible%20all%20-m%20yum%20-a%20%22name%3Dhttpd%20state%3Dinstalled%22%60%3Cbr%20%2F%3E%E5%8D%B8%E8%BD%BD%3Cbr%20%2F%3E%60ansible%20all%20-m%20yum%20-a%20%22name%3Dhttpd%20state%3Dabsent%22%60%3Cbr%2F%3E%60ansible%20all%20-m%20yum%20-a%20%22name%3Dhttpd%20state%3Dremoved%22%60%20%7C%0A%7C%20%60service%60%E5%92%8C%60systemd%60%20%7C%20%E7%94%A8%E4%BA%8E%E7%AE%A1%E7%90%86%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E7%9A%84%E6%9C%8D%E5%8A%A1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20systemd%20-a%20%22name%3Dhttpd%20state%3Dstarted%20enabled%3Dyes%22%60%3Cbr%20%2F%3E%60ansible%20all%20-m%20systemd%20-a%20%22name%3Dhttpd%20state%3Drestarted%22%60%20%7C%0A%7C%20user%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20useradd%2C%20userdel%2C%20usermod%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20user%20-a%20'name%3Dhaha%20remove%3Dno%20state%3Dabsent'%60%20%20%7C%0A%7C%20group%20%20%20%20%20%20%20%20%20%20%20%20%7C%20groupadd%2C%20groupdel%2C%20groupmod%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20group%20-a%20'name%3Dmygroup%20state%3Dabsent'%60%20%20%20%20%20%20%20%20%7C%0A%7C%20setup%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%E5%8F%AF%E6%94%B6%E9%9B%86%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E7%9A%84facts%E5%8F%98%E9%87%8F%E7%9A%84%E4%BF%A1%E6%81%AF%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20setup%20-a%20'filter%3Dansible_default_ipv4'%60%20%20%20%20%20%20%7C%0A%7C%20authorized_key%20%20%20%7C%20%E4%B8%BA%E7%89%B9%E5%AE%9A%E7%9A%84%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%20SSH%20authorized%20keys%20%20%20%7C%20%60ansible%20all%20-m%20authorized_key%20-a%20%22user%3Droot%20key%3D'%7B%7Blookup('file'%2C'%2Froot%2F.ssh%2Fid_rsa.pub')%7D%7D'%20path%3D%2Froot%2F.ssh%2Fauthorized_keys%20manage_dir%3Dno%22%60%20%7C%0A%7C%20replace%20%20%20%20%20%20%20%20%20%20%7C%20%E5%92%8C%20sed%20%E5%91%BD%E4%BB%A4%E6%AF%94%E8%BE%83%E7%B1%BB%E4%BC%BC%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E5%92%8C%E6%9B%BF%E6%8D%A2%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20replace%20-a%20%22path%3D%2Fetc%2Ffstab%20regexp%3D%5E(UUID.*)%20replace%3D'%23%5C1'%22%60%20%7C%0A%7C%20lineinfile%20%20%20%20%20%20%20%7C%20%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%EF%BC%8C%E6%9B%B4%E6%94%B9%E6%9F%90%E4%B8%AA%E5%85%B3%E9%94%AE%E5%8F%82%E6%95%B0%E5%80%BC%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20%60ansible%20all%20-m%20lineinfile%20-a%20%22path%3D%2Fetc%2Fselinux%2Fconfig%20regexp%3D'%5ESELINUX%3D'%20line%3D'SELINUX%3Ddisabled'%22%60%20%7C",
      "encoded": true
    },
    {
      "id": "s3-57",
      "sectionId": "s3",
      "title": "另见",
      "kind": "text",
      "body": "• [Getting started with Ansible](https://docs.ansible.com/ansible/latest/getting_started/index.html)\n• [Introduction to ad hoc commands](https://docs.ansible.com/ansible/latest/user_guide/intro_adhoc.html)\n• [Ansible cheatsheet](https://github.com/luckylittle/ansible-cheatsheet/blob/master/ansible-cheatsheet.txt)\n• [Ansible Tutorial for Beginners: Ultimate Playbook & Examples](https://spacelift.io/blog/ansible-tutorial)"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/ansible.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/ansible.md",
    "lang": "zh",
    "mode": "local"
  }
}