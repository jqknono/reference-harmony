{
  "id": "claude",
  "title": "claude",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "ClaudeCode 备忘清单\n==="
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "ClaudeCode 命令行开发工具快速参考备忘单。"
    },
    {
      "id": "intro-2",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "CLI 参考\n---"
    },
    {
      "id": "intro-3",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude`",
      "back": "启动交互式 REPL | `claude`"
    },
    {
      "id": "intro-4",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude \"query\"`",
      "back": "使用初始提示启动 REPL | `claude \"explain this project\"`"
    },
    {
      "id": "intro-5",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude -p \"query\"`",
      "back": "通过 SDK 查询，然后退出 | `claude -p \"explain this function\"`"
    },
    {
      "id": "intro-6",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`cat file \\",
      "back": "claude -p \"query\"` | 处理管道内容 | `cat logs.txt \\ | claude -p \"explain\"`"
    },
    {
      "id": "intro-7",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude -c`",
      "back": "继续最近的对话 | `claude -c`"
    },
    {
      "id": "intro-8",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude -c -p \"query\"`",
      "back": "通过 SDK 继续 | `claude -c -p \"Check for type errors\"`"
    },
    {
      "id": "intro-9",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude -r \"<session-id>\" \"query\"`",
      "back": "通过 ID 恢复会话 | `claude -r \"abc123\" \"Finish this PR\"`"
    },
    {
      "id": "intro-10",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude update`",
      "back": "更新到最新版本 | `claude update`"
    },
    {
      "id": "intro-11",
      "sectionId": "intro",
      "title": "命令行",
      "kind": "qa",
      "front": "`claude mcp`",
      "back": "配置模型上下文协议 (MCP) 服务器 | 请参阅 [Claude Code MCP 文档](https://docs.anthropic.com/zh-CN/docs/claude-code/mcp)。"
    },
    {
      "id": "intro-12",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "text",
      "body": "使用这些命令行标志自定义 Claude Code 的行为："
    },
    {
      "id": "intro-13",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--add-dir`",
      "back": "添加额外的工作目录供 Claude 访问（验证每个路径是否作为目录存在） | `claude --add-dir ../apps ../lib`"
    },
    {
      "id": "intro-14",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--allowedTools`",
      "back": "除了 [settings.json 文件](https://docs.anthropic.com/zh-CN/docs/claude-code/settings) 之外，应该在不提示用户许可的情况下允许的工具列表 | `\"Bash(git log:*)\" \"Bash(git diff:*)\" \"Read\"`"
    },
    {
      "id": "intro-15",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--disallowedTools`",
      "back": "除了 [settings.json 文件](https://docs.anthropic.com/zh-CN/docs/claude-code/settings) 之外，应该在不提示用户许可的情况下禁止的工具列表 | `\"Bash(git log:*)\" \"Bash(git diff:*)\" \"Edit\"`"
    },
    {
      "id": "intro-16",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--print`, `-p`",
      "back": "打印响应而不使用交互模式（有关编程使用详细信息，请参阅 [SDK 文档](https://docs.anthropic.com/zh-CN/docs/claude-code/sdk)） | `claude -p \"query\"`"
    },
    {
      "id": "intro-17",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--append-system-prompt`",
      "back": "附加到系统提示（仅与 `--print` 一起使用） | `claude --append-system-prompt \"Custom instruction\"`"
    },
    {
      "id": "intro-18",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--output-format`",
      "back": "为打印模式指定输出格式（选项：`text`、`json`、`stream-json`） | `claude -p \"query\" --output-format json`"
    },
    {
      "id": "intro-19",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--input-format`",
      "back": "为打印模式指定输入格式（选项：`text`、`stream-json`） | `claude -p --output-format json --input-format stream-json`"
    },
    {
      "id": "intro-20",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--verbose`",
      "back": "启用详细日志记录，显示完整的轮次输出（在打印和交互模式中都有助于调试） | `claude --verbose`"
    },
    {
      "id": "intro-21",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--max-turns`",
      "back": "在非交互模式下限制代理轮次数量 | `claude -p --max-turns 3 \"query\"`"
    },
    {
      "id": "intro-22",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--model`",
      "back": "使用最新模型的别名（`sonnet` 或 `opus`）或模型的全名为当前会话设置模型 | `claude --model claude-sonnet-4-20250514`"
    },
    {
      "id": "intro-23",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--permission-mode`",
      "back": "在指定的[权限模式](iam#permission-modes)下开始 | `claude --permission-mode plan`"
    },
    {
      "id": "intro-24",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--permission-prompt-tool`",
      "back": "指定一个 MCP 工具来处理非交互模式下的权限提示 | `claude -p --permission-prompt-tool mcp_auth_tool \"query\"`"
    },
    {
      "id": "intro-25",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--resume`",
      "back": "通过 ID 恢复特定会话，或在交互模式下选择 | `claude --resume abc123 \"query\"`"
    },
    {
      "id": "intro-26",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--continue`",
      "back": "在当前目录中加载最近的对话 | `claude --continue`"
    },
    {
      "id": "intro-27",
      "sectionId": "intro",
      "title": "CLI 标志",
      "kind": "qa",
      "front": "`--dangerously-skip-permissions`",
      "back": "跳过权限提示（谨慎使用） | `claude --dangerously-skip-permissions`"
    },
    {
      "id": "intro-28",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/add-dir`",
      "back": "添加额外的工作目录"
    },
    {
      "id": "intro-29",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/agents`",
      "back": "管理用于专门任务的自定义AI子代理"
    },
    {
      "id": "intro-30",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/bug`",
      "back": "报告错误（将对话发送给Anthropic）"
    },
    {
      "id": "intro-31",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/clear`",
      "back": "清除对话历史"
    },
    {
      "id": "intro-32",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/compact [instructions]`",
      "back": "压缩对话，可选择性地提供重点指令"
    },
    {
      "id": "intro-33",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/config`",
      "back": "查看/修改配置"
    },
    {
      "id": "intro-34",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/cost`",
      "back": "显示令牌使用统计（请参阅[成本跟踪指南](https://docs.anthropic.com/zh-CN/docs/claude-code/costs#using-the-cost-command)了解订阅特定详情）"
    },
    {
      "id": "intro-35",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/doctor`",
      "back": "检查您的Claude Code安装的健康状况"
    },
    {
      "id": "intro-36",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/help`",
      "back": "获取使用帮助"
    },
    {
      "id": "intro-37",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/init`",
      "back": "使用CLAUDE.md指南初始化项目"
    },
    {
      "id": "intro-38",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/login`",
      "back": "切换Anthropic账户"
    },
    {
      "id": "intro-39",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/logout`",
      "back": "从您的Anthropic账户登出"
    },
    {
      "id": "intro-40",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/mcp`",
      "back": "管理MCP服务器连接和OAuth身份验证"
    },
    {
      "id": "intro-41",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/memory`",
      "back": "编辑CLAUDE.md内存文件"
    },
    {
      "id": "intro-42",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/model`",
      "back": "选择或更改AI模型"
    },
    {
      "id": "intro-43",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/permissions`",
      "back": "查看或更新[权限](https://docs.anthropic.com/zh-CN/docs/claude-code/iam#configuring-permissions)"
    },
    {
      "id": "intro-44",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/pr_comments`",
      "back": "查看拉取请求评论"
    },
    {
      "id": "intro-45",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/review`",
      "back": "请求代码审查"
    },
    {
      "id": "intro-46",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/status`",
      "back": "查看账户和系统状态"
    },
    {
      "id": "intro-47",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/terminal-setup`",
      "back": "安装Shift+Enter键绑定用于换行（仅限iTerm2和VSCode）"
    },
    {
      "id": "intro-48",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "qa",
      "front": "`/vim`",
      "back": "进入vim模式以在插入和命令模式之间切换"
    },
    {
      "id": "intro-49",
      "sectionId": "intro",
      "title": "内置斜杠命令",
      "kind": "text",
      "body": "键盘快捷键\n---"
    },
    {
      "id": "intro-50",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`Ctrl+C`",
      "back": "取消当前输入或生成 | 标准中断"
    },
    {
      "id": "intro-51",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`Ctrl+D`",
      "back": "退出 Claude Code 会话 | EOF 信号"
    },
    {
      "id": "intro-52",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`Ctrl+L`",
      "back": "清除终端屏幕 | 保留对话历史"
    },
    {
      "id": "intro-53",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`上/下箭头`",
      "back": "导航命令历史 | 回调之前的输入"
    },
    {
      "id": "intro-54",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`Esc` + `Esc`",
      "back": "编辑上一条消息 | 双击 Esc 键修改"
    },
    {
      "id": "intro-55",
      "sectionId": "intro",
      "title": "通用控制",
      "kind": "qa",
      "front": "`Shift+Tab`",
      "back": "切换权限模式 | 在自动接受模式、计划模式和正常模式之间切换"
    },
    {
      "id": "intro-56",
      "sectionId": "intro",
      "title": "多行输入",
      "kind": "qa",
      "front": "快速转义",
      "back": "`\\` + `Enter` | 在所有终端中有效"
    },
    {
      "id": "intro-57",
      "sectionId": "intro",
      "title": "多行输入",
      "kind": "qa",
      "front": "macOS 默认",
      "back": "`Option+Enter` | macOS 上的默认设置"
    },
    {
      "id": "intro-58",
      "sectionId": "intro",
      "title": "多行输入",
      "kind": "qa",
      "front": "终端设置",
      "back": "`Shift+Enter` | 在 `/terminal-setup` 之后"
    },
    {
      "id": "intro-59",
      "sectionId": "intro",
      "title": "多行输入",
      "kind": "qa",
      "front": "控制序列",
      "back": "`Ctrl+J` | 多行换行符"
    },
    {
      "id": "intro-60",
      "sectionId": "intro",
      "title": "多行输入",
      "kind": "qa",
      "front": "粘贴模式",
      "back": "直接粘贴 | 用于代码块、日志"
    },
    {
      "id": "intro-61",
      "sectionId": "intro",
      "title": "快速命令",
      "kind": "qa",
      "front": "开头的 `#`",
      "back": "内存快捷键 - 添加到 CLAUDE.md | 提示文件选择"
    },
    {
      "id": "intro-62",
      "sectionId": "intro",
      "title": "快速命令",
      "kind": "qa",
      "front": "开头的 `/`",
      "back": "斜杠命令 | 参见[斜杠命令](https://docs.anthropic.com/zh-CN/docs/claude-code/slash-commands)"
    },
    {
      "id": "intro-63",
      "sectionId": "intro",
      "title": "快速命令",
      "kind": "qa",
      "front": "开头的 `!`",
      "back": "Bash 模式 | 直接运行命令并将执行输出添加到会话中"
    },
    {
      "id": "intro-64",
      "sectionId": "intro",
      "title": "快速命令",
      "kind": "text",
      "body": "Vim 编辑器模式\n---"
    },
    {
      "id": "intro-65",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`Esc`",
      "back": "进入 NORMAL 模式 | INSERT"
    },
    {
      "id": "intro-66",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`i`",
      "back": "在光标前插入 | NORMAL"
    },
    {
      "id": "intro-67",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`I`",
      "back": "在行首插入 | NORMAL"
    },
    {
      "id": "intro-68",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`a`",
      "back": "在光标后插入 | NORMAL"
    },
    {
      "id": "intro-69",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`A`",
      "back": "在行尾插入 | NORMAL"
    },
    {
      "id": "intro-70",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`o`",
      "back": "在下方打开新行 | NORMAL"
    },
    {
      "id": "intro-71",
      "sectionId": "intro",
      "title": "模式切换",
      "kind": "qa",
      "front": "`O`",
      "back": "在上方打开新行 | NORMAL"
    },
    {
      "id": "intro-72",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`h`/`j`/`k`/`l`",
      "back": "向左/下/上/右移动"
    },
    {
      "id": "intro-73",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`w`",
      "back": "下一个单词"
    },
    {
      "id": "intro-74",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`e`",
      "back": "单词末尾"
    },
    {
      "id": "intro-75",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`b`",
      "back": "上一个单词"
    },
    {
      "id": "intro-76",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`0`",
      "back": "行首"
    },
    {
      "id": "intro-77",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`$`",
      "back": "行尾"
    },
    {
      "id": "intro-78",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`^`",
      "back": "第一个非空白字符"
    },
    {
      "id": "intro-79",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`gg`",
      "back": "输入开头"
    },
    {
      "id": "intro-80",
      "sectionId": "intro",
      "title": "导航（NORMAL 模式）",
      "kind": "qa",
      "front": "`G`",
      "back": "输入末尾"
    },
    {
      "id": "intro-81",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`x`",
      "back": "删除字符"
    },
    {
      "id": "intro-82",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`dd`",
      "back": "删除行"
    },
    {
      "id": "intro-83",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`D`",
      "back": "删除到行尾"
    },
    {
      "id": "intro-84",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`dw`/`de`/`db`",
      "back": "删除单词/到末尾/向后"
    },
    {
      "id": "intro-85",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`cc`",
      "back": "更改行"
    },
    {
      "id": "intro-86",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`C`",
      "back": "更改到行尾"
    },
    {
      "id": "intro-87",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`cw`/`ce`/`cb`",
      "back": "更改单词/到末尾/向后"
    },
    {
      "id": "intro-88",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "qa",
      "front": "`.`",
      "back": "重复上次更改"
    },
    {
      "id": "intro-89",
      "sectionId": "intro",
      "title": "编辑（NORMAL 模式）",
      "kind": "text",
      "body": "Hooks 参考\n---"
    },
    {
      "id": "intro-90",
      "sectionId": "intro",
      "title": "配置",
      "kind": "text",
      "body": "• `~/.claude/settings.json` 用户设置\n• `.claude/settings.json` 项目设置\n• `.claude/settings.local.json` 本地项目设置（不提交）\n• 企业管理策略设置"
    },
    {
      "id": "intro-91",
      "sectionId": "intro",
      "title": "结构",
      "kind": "code",
      "lang": "json",
      "code": "{\n    \"hooks\": {\n        \"EventName\": [\n            {\n                \"matcher\": \"ToolPattern\",\n                \"hooks\": [\n                    { \"type\": \"command\", \"command\": \"your-command-here\" }\n                ]\n            }\n        ]\n    }\n}"
    },
    {
      "id": "intro-92",
      "sectionId": "intro",
      "title": "结构",
      "kind": "text",
      "body": "#### <pur>matcher</pur> 匹配工具名称的模式，区分大小写（仅适用于 `PreToolUse` 和 `PostToolUse`）"
    },
    {
      "id": "intro-93",
      "sectionId": "intro",
      "title": "结构",
      "kind": "text",
      "body": "• 简单字符串精确匹配：`Write` 仅匹配 Write 工具\n• 支持正则表达式：`Edit|Write` 或 `Notebook.*`\n• 使用 `*` 匹配所有工具。您也可以使用空字符串（`\"\"`）或留空 `matcher`。"
    },
    {
      "id": "intro-94",
      "sectionId": "intro",
      "title": "结构",
      "kind": "text",
      "body": "#### <pur>hooks</pur> 当模式匹配时要执行的命令数组"
    },
    {
      "id": "intro-95",
      "sectionId": "intro",
      "title": "结构",
      "kind": "text",
      "body": "• `type`：目前仅支持 `\"command\"`\n• `command`：要执行的 bash 命令（可以使用 `$CLAUDE_PROJECT_DIR` 环境变量）\n• `timeout`：（可选）命令应该运行多长时间（以秒为单位），在取消该特定命令之前。"
    },
    {
      "id": "intro-96",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "```json {9}\n{\n\"hooks\": {\n\"PostToolUse\": [\n{\n\"matcher\": \"Write|Edit\",\n\"hooks\": [\n{\n\"type\": \"command\",\n\"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/check-style.sh\"\n}\n]\n}\n]\n}\n}"
    },
    {
      "id": "intro-97",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n可通过环境变量 `CLAUDE_PROJECT_DIR` 引用项目中的脚本，确保无论 Claude 当前目录如何都能正常使用（仅在生成 hook 命令时可用）\n\nHook 事件\n---\n\n### PreToolUse\n\n#### 常见匹配器\n\n* `Task` - 子代理任务（参见[子代理文档](https://docs.anthropic.com/zh-CN/docs/claude-code/sub-agents)）\n* `Bash` - Shell 命令\n* `Glob` - 文件模式匹配\n* `Grep` - 内容搜索\n* `Read` - 文件读取\n* `Edit`、`MultiEdit` - 文件编辑\n* `Write` - 文件写入\n* `WebFetch`、`WebSearch` - Web 操作\n\n在 Claude 创建工具参数之后、处理工具调用之前运行。\n\n### 其它 Hook\n\nHook | 描述\n--- | ---\n`PostToolUse` | 在工具成功完成后立即运行。\n`UserPromptSubmit` | 当用户提交提示时、Claude 处理之前运行。这允许您根据提示/对话添加额外的上下文、验证提示或阻止某些类型的提示。\n`Stop` | 当主 Claude Code 代理完成响应时运行。如果停止是由于用户中断而发生的，则不会运行。\n`SubagentStop` | 当 Claude Code 子代理（Task 工具调用）完成响应时运行。\n<!--rehype:className=style-list-arrow square-->\n\n### Notification\n\n当 Claude Code 发送通知时运行。通知在以下情况下发送：\n\nHook | 描述\n--- | ---\nClaude 需要您的权限来使用工具。 | 示例：“Claude needs your permission to use Bash”\n提示输入已空闲至少 `60` 秒。 | “Claude is waiting for your input”\n<!--rehype:className=style-list-arrow square-->\n\n### ​PreCompact\n\n在 Claude Code 即将运行压缩操作之前运行。\n\n#### 匹配器\n<!--rehype:style=text-align:left;-->\n\nHook | 描述\n--- | ---\n`manual` | 从 `/compact` 调用\n`auto` | 从自动压缩调用（由于上下文窗口已满）\n<!--rehype:className=style-list-arrow square-->\n\n### SessionStart\n\n当 Claude Code 启动新会话或恢复现有会话时运行（目前确实会在底层启动新会话）\n\n#### 匹配器\n<!--rehype:style=text-align:left;-->\n\n* `startup` - 从启动调用\n* `resume` - 从 `--resume`、`--continue` 或 `/resume` 调用\n* `clear` - 从 `/clear` 调用\n* `compact` - 从自动或手动压缩调用。\n\n对于加载开发上下文（如现有问题或代码库的最近更改）很有用。\n\n### SessionEnd\n\n#### hook 输入中的 reason 字段将是以下之一\n<!--rehype:style=text-align:left;-->\n\n* `clear` - 使用 /clear 命令清除会话\n* `logout` - 用户注销\n* `prompt_input_exit` - 用户在提示输入可见时退出\n* `other` - 其他退出原因\n\n当 Claude Code 会话结束时运行。对于清理任务、记录会话统计信息或保存会话状态很有用。\n\nHook 输入\n---\n\n### 示例\n\nHooks 通过 `stdin` 接收包含会话信息和事件特定数据的 JSON 数据："
    },
    {
      "id": "intro-98",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n// 通用字段\nsession_id: string\n// 对话 JSON 的路径\ntranscript_path: string\n// 调用 hook 时的当前工作目录\ncwd: string"
    },
    {
      "id": "intro-99",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "// 事件特定字段\nhook_event_name: string\n...\n}"
    },
    {
      "id": "intro-100",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### PreToolUse 输入\n\n`tool_input` 的确切模式取决于工具。"
    },
    {
      "id": "intro-101",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"/Users/.../.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"cwd\": \"/Users/...\",\n\"hook_event_name\": \"PreToolUse\",\n\"tool_name\": \"Write\",\n\"tool_input\": {\n\"file_path\": \"/path/to/file.txt\",\n\"content\": \"file content\"\n}\n}"
    },
    {
      "id": "intro-102",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### PostToolUse 输入\n\n`tool_input` 和 `tool_response` 的确切模式取决于工具。"
    },
    {
      "id": "intro-103",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"/Users/.../.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"cwd\": \"/Users/...\",\n\"hook_event_name\": \"PostToolUse\",\n\"tool_name\": \"Write\",\n\"tool_input\": {\n\"file_path\": \"/path/to/file.txt\",\n\"content\": \"file content\"\n},\n\"tool_response\": {\n\"filePath\": \"/path/to/file.txt\",\n\"success\": true\n}\n}"
    },
    {
      "id": "intro-104",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### Notification 输入"
    },
    {
      "id": "intro-105",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"/Users/.../.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"cwd\": \"/Users/...\",\n\"hook_event_name\": \"Notification\",\n\"message\": \"Task completed successfully\"\n}"
    },
    {
      "id": "intro-106",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### UserPromptSubmit 输入"
    },
    {
      "id": "intro-107",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"/Users/.../.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"cwd\": \"/Users/...\",\n\"hook_event_name\": \"UserPromptSubmit\",\n\"prompt\": \"Write a function to calculate the factorial of a number\"\n}"
    },
    {
      "id": "intro-108",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### Stop 和 SubagentStop 输入"
    },
    {
      "id": "intro-109",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"~/.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"hook_event_name\": \"Stop\",\n\"stop_hook_active\": true\n}"
    },
    {
      "id": "intro-110",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n当 Claude Code 已经因为 `stop hook` 而继续时，`stop_hook_active` 为 `true`。检查此值或处理记录以防止 Claude Code 无限运行。\n\n### PreCompact 输入"
    },
    {
      "id": "intro-111",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"~/.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"hook_event_name\": \"PreCompact\",\n\"trigger\": \"manual\",\n\"custom_instructions\": \"\"\n}"
    },
    {
      "id": "intro-112",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n对于 `manual`，`custom_instructions` 来自用户传递给 `/compact` 的内容。对于 `auto`，`custom_instructions` 为空。\n\n### SessionStart 输入"
    },
    {
      "id": "intro-113",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"~/.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"hook_event_name\": \"SessionStart\",\n\"source\": \"startup\"\n}"
    },
    {
      "id": "intro-114",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n### SessionEnd 输入"
    },
    {
      "id": "intro-115",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "text",
      "body": "{\n\"session_id\": \"abc123\",\n\"transcript_path\": \"~/.claude/projects/.../00893aaf-19fa-41d2-8238-13269b9b3ca0.jsonl\",\n\"cwd\": \"/Users/...\",\n\"hook_event_name\": \"SessionEnd\",\n\"reason\": \"exit\"\n}"
    },
    {
      "id": "intro-116",
      "sectionId": "intro",
      "title": "项目特定的 Hook 脚本",
      "kind": "code",
      "lang": "",
      "code": "\n另见\n----\n\n* [Claude 代码参考](https://docs.anthropic.com/zh-CN/docs/claude-code/cli-reference) _(docs.anthropic.com)_\n* [送你一张Claude Code速查表](https://mp.weixin.qq.com/s/LbQbzvXh49Qo22nArTv4Og) _(weixin.qq.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/claude.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/claude.md",
    "generatedAt": "2025-12-16T07:36:11.143Z",
    "lang": "zh",
    "mode": "local"
  }
}