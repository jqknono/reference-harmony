{
  "id": "gitlab-ci",
  "name": "GitLab CI/CD 备忘清单",
  "title": "本备忘单总结了 [GitLab CI/CD](https://docs.gitlab.com/ee/ci/yaml/#default) 常用的配置说明，以供快速参考",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/gitlab-ci.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "关键字",
      "startIndex": 7
    },
    {
      "id": "s3",
      "title": "全局关键词",
      "startIndex": 10
    },
    {
      "id": "s4",
      "title": "workflow",
      "startIndex": 29
    },
    {
      "id": "s5",
      "title": "Job 关键词",
      "startIndex": 38
    },
    {
      "id": "s6",
      "title": "artifacts",
      "startIndex": 108
    },
    {
      "id": "s7",
      "title": "cache",
      "startIndex": 128
    },
    {
      "id": "s8",
      "title": "environment",
      "startIndex": 143
    },
    {
      "id": "s9",
      "title": "image",
      "startIndex": 158
    },
    {
      "id": "s10",
      "title": "needs",
      "startIndex": 164
    },
    {
      "id": "s11",
      "title": "only / except",
      "startIndex": 174
    },
    {
      "id": "s12",
      "title": "release",
      "startIndex": 182
    },
    {
      "id": "s13",
      "title": "rules",
      "startIndex": 197
    },
    {
      "id": "s14",
      "title": "另见",
      "startIndex": 211
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "body": "本备忘单总结了 [GitLab CI/CD](https://docs.gitlab.com/ee/ci/yaml/#default) 常用的配置说明，以供快速参考"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "介绍",
      "body": "创建并运行您的第一个 GitLab `CI/CD` 管道，在开始之前，请确保您拥有：\n\n• GitLab 中您想要使用 CI/CD 的项目\n• 项目的维护者或所有者角色\n\n如果您没有项目，可以在 <https://gitlab.com> 上免费创建一个公共项目\n\n• 在存储库的根目录下创建一个 `.gitlab-ci.yml` 文件。该文件是您定义 `CI/CD` 作业的地方\n• 转到`Settings` > `CI/CD` 并展开运行程序，只要您至少有一个运行器处于活动状态，旁边有一个绿色圆圈，您就有一个运行器可以处理您的工作"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60yml%0Adefault%3A%0A%20%20image%3A%20node%3A16%0A%0Awindows_job%3A%0A%20%20only%3A%0A%20%20%20%20-%20master%0A%20%20tags%3A%0A%20%20%20%20-%20windows%0A%20%20script%3A%0A%20%20%20%20-%20echo%20Hello%2C%20%25USERNAME%25!%0A%0Alinux_job%3A%0A%20%20tags%3A%0A%20%20%20%20-%20linux%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22Hello%2C%20%24USER!%22%0A%60%60%60%0A%0A%60tags%60%20%E7%94%A8%E4%BA%8E%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B9%B3%E5%8F%B0%E4%B8%8A%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A%EF%BC%8C%60only%60%20%E6%8E%A7%E5%88%B6%20%60master%60%20%E5%88%86%E6%94%AF%E6%8F%90%E4%BA%A4%E8%A7%A6%E5%8F%91",
      "encoded": true
    },
    {
      "id": "s2-7",
      "sectionId": "s2",
      "title": "关键字",
      "body": "关键字 | 描述\n:-- | --\n[default](#default) | 工作关键字的自定义默认值 [#](https://docs.gitlab.com/ee/ci/yaml/#default)\n[include](#include) | 从其他 YAML 文件导入配置 [#](https://docs.gitlab.com/ee/ci/yaml/#include)\n[stages](#stages) | 管道阶段的名称和顺序 [#](https://docs.gitlab.com/ee/ci/yaml/#stages)\n[variables](#variables) | 为管道中的所有作业定义 CI/CD 变量 [#](https://docs.gitlab.com/ee/ci/yaml/#variables)\n[workflow](#workflow) | 控制运行什么类型的管道 [#](https://docs.gitlab.com/ee/ci/yaml/#workflow)"
    },
    {
      "id": "s2-8",
      "sectionId": "s2",
      "title": "关键字",
      "body": "关键字 | 描述\n:-- | --\n[after_script](#after_script) | 覆盖一组在作业之后执行的命令 [#](https://docs.gitlab.com/ee/ci/yaml/#after_script)\n[allow_failure](#allow_failure) | 允许作业失败。失败的作业不会导致管道失败 [#](https://docs.gitlab.com/ee/ci/yaml/#allow_failure)\n[artifacts](#artifacts) | 成功时附加到作业的文件和目录列表 [#](https://docs.gitlab.com/ee/ci/yaml/#artifacts)\n[before_script](#before_script) | 覆盖在作业之前执行的一组命令 [#](https://docs.gitlab.com/ee/ci/yaml/#before_script)\n[cache](#cache) | 应在后续运行之间缓存的文件列表 [#](https://docs.gitlab.com/ee/ci/yaml/#cache)\n[coverage](#coverage) | 给定作业的代码覆盖率设置 [#](https://docs.gitlab.com/ee/ci/yaml/#coverage)\n[dast_configuration](#dast_configuration) | 在作业级别使用 DAST 配置文件中的配置 [#](https://docs.gitlab.com/ee/ci/yaml/#dast_configuration)\n[dependencies](#dependencies) | 通过提供要从中获取工件的作业列表来限制将哪些工件传递给特定作业 [#](https://docs.gitlab.com/ee/ci/yaml/#dependencies)\n[environment](#environment) | 作业部署到的环境的名称 [#](https://docs.gitlab.com/ee/ci/yaml/#environment)\n[except](#only--except) | 控制何时不创建作业 [#](https://docs.gitlab.com/ee/ci/yaml/#only--except)\n[extends](#extends) | 此作业继承自的配置条目 [#](https://docs.gitlab.com/ee/ci/yaml/#extends)\n[image](#image) | 使用 Docker 镜像 [#](https://docs.gitlab.com/ee/ci/yaml/#image)\n[inherit](#inherit) | 选择所有作业继承的全局默认值 [#](https://docs.gitlab.com/ee/ci/yaml/#inherit)\n[interruptible](#interruptible) | 定义作业是否可以在被较新的运行冗余时取消 [#](https://docs.gitlab.com/ee/ci/yaml/#interruptible)\n[needs](#needs) | 在阶段排序之前执行作业 [#](https://docs.gitlab.com/ee/ci/yaml/#needs)\n[only](#only--except) | 控制何时创建作业 [#](https://docs.gitlab.com/ee/ci/yaml/#only--except)\n[pages](#pages) | 上传作业的结果以与 GitLab Pages 一起使用 [#](https://docs.gitlab.com/ee/ci/yaml/#pages)\n[parallel](#parallel) | 应并行运行多少个作业实例 [#](https://docs.gitlab.com/ee/ci/yaml/#parallel)\n[release](#release) | 指示运行器生成释放对象 [#](https://docs.gitlab.com/ee/ci/yaml/#release)\n[resource_group](#resource_group) | 限制作业并发 [#](https://docs.gitlab.com/ee/ci/yaml/#resource_group)\n[retry](#retry) | 发生故障时可以自动重试作业的时间和次数 [#](https://docs.gitlab.com/ee/ci/yaml/#retry)\n[rules](#rules) | 用于评估和确定作业的选定属性以及是否创建的条件列表 [#](https://docs.gitlab.com/ee/ci/yaml/#rules)\n[script](#script) | 由运行器执行的 Shell 脚本 [#](https://docs.gitlab.com/ee/ci/yaml/#script)\n[secrets](#secrets) | CI/CD 保密工作需要 [#](https://docs.gitlab.com/ee/ci/yaml/#secrets)\n[services](#services) | 使用 Docker 服务映像 [#](https://docs.gitlab.com/ee/ci/yaml/#services)\n[stage](#stage) | 定义作业阶段 [#](https://docs.gitlab.com/ee/ci/yaml/#stage)\n[tags](#tags) | 用于选择跑步者的标签列表 [#](https://docs.gitlab.com/ee/ci/yaml/#tags)\n[timeout](#timeout) | 定义优先于项目范围设置的自定义作业级超时 [#](https://docs.gitlab.com/ee/ci/yaml/#timeout)\n[trigger](#trigger) | 定义下游管道触发器 [#](https://docs.gitlab.com/ee/ci/yaml/#trigger)\n[variables](#variables) | 在作业级别定义作业变量 [#](https://docs.gitlab.com/ee/ci/yaml/#variables)\n[when](#when) | 何时运行作业 [#](https://docs.gitlab.com/ee/ci/yaml/#when)"
    },
    {
      "id": "s2-9",
      "sectionId": "s2",
      "title": "全局关键词",
      "body": "• [after_script](#after_script)\n• [artifacts](#artifacts)\n• [before_script](#before_script)\n• [cache](#cache)\n• [image](#image)\n• [interruptible](#interruptible)\n• [retry](#retry)\n• [services](#services)\n• [tags](#tags)\n• [timeout](#timeout)"
    },
    {
      "id": "s3-10",
      "sectionId": "s3",
      "title": "default",
      "body": "```yml\ndefault:\n  image: ruby:3.0\n\nrspec:\n  script: bundle exec rspec\n\nrspec 2.7:\n  image: ruby:2.7\n  script: bundle exec rspec\n```\n\n在此示例中，`ruby:3.0` 是管道中所有作业的默认图像值。`rspec 2.7` 作业不使用默认值，因为它使用特定于作业的图像部分覆盖了默认值"
    },
    {
      "id": "s3-12",
      "sectionId": "s3",
      "title": "include",
      "body": "%60%60%60yml%0Ainclude%3A%0A%20%20-%20local%3A%20'%2Ftemp%2F.gitlab-ci-template.yml'%0A%60%60%60%0A%0A%E5%9C%A8%20%6011.4%60%20%E4%B8%AD%E7%A7%BB%E8%87%B3%20%60GitLab%60%20%E5%85%8D%E8%B4%B9%E7%89%88%EF%BC%8C%E4%BD%BF%E7%94%A8%20%60include%60%20%E5%B0%86%E5%A4%96%E9%83%A8%20%60YAML%60%20%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%9C%A8%E6%82%A8%E7%9A%84%20%60CI%2FCD%60%20%E9%85%8D%E7%BD%AE%E4%B8%AD",
      "encoded": true
    },
    {
      "id": "s3-14",
      "sectionId": "s3",
      "title": "include%3Alocal",
      "body": "%60%60%60yml%0Ainclude%3A%0A%20%20-%20local%3A%20'%2Ftemp%2F.gitlab-ci-template.yml'%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60include%3Alocal%60%20%E5%8C%85%E5%90%AB%E4%B8%8E%20%60.gitlab-ci.yml%60%20%E6%96%87%E4%BB%B6%E4%BD%8D%E4%BA%8E%E5%90%8C%E4%B8%80%E5%AD%98%E5%82%A8%E5%BA%93%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6",
      "encoded": true
    },
    {
      "id": "s3-16",
      "sectionId": "s3",
      "title": "include%3Aproject",
      "body": "%E8%A6%81%E5%9C%A8%E5%90%8C%E4%B8%80%E4%B8%AA%20GitLab%20%E5%AE%9E%E4%BE%8B%E4%B8%8A%E5%8C%85%E5%90%AB%E6%9D%A5%E8%87%AA%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%A7%81%E6%9C%89%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%20%60include%3Aproject%60%20%E5%92%8C%20%60include%3Afile%60%0A%0A%60%60%60yml%0Ainclude%3A%0A%20%20-%20project%3A%20'group%2Fmy-project'%0A%20%20%20%20file%3A%20'%2Ftemp%2F.gitlab-ci-template.yml'%0A%20%20-%20project%3A%20'group%2Fsubgroup%2Fmy-project-2'%0A%20%20%20%20file%3A%0A%20%20%20%20%20%20-%20'%2Ftemp%2F.builds.yml'%0A%20%20%20%20%20%20-%20'%2Ftemp%2F.tests.yml'%0A%60%60%60%0A%0A%E6%82%A8%E8%BF%98%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%20%60ref%60%EF%BC%9A%0A%0A%60%60%60yml%0Ainclude%3A%0A%20%20-%20project%3A%20'group%2Fmy-project'%0A%20%20%20%20ref%3A%20main%20%20%20%20%23%20Git%20branch%0A%20%20%20%20file%3A%20'%2Ftemplates%2F.gitlab-ci.yml'%0A%20%20-%20project%3A%20'group%2Fmy-project'%0A%20%20%20%20ref%3A%20v1.0.0%20%20%20%23%20Git%20Tag%0A%20%20%20%20file%3A%20'%2Ftemplates%2F.gitlab-ci.yml'%0A%20%20-%20project%3A%20'group%2Fmy-project'%0A%20%20%20%20ref%3A%20787123b%20%20%23%20Git%20SHA%0A%20%20%20%20file%3A%20'%2Ftemplates%2F.gitlab-ci.yml'%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s3-20",
      "sectionId": "s3",
      "title": "include%3Aremote",
      "body": "%60%60%60yml%0Ainclude%3A%0A%20%20-%20remote%3A%20'https%3A%2F%2Fgitlab.com%2Fexample-project%2F-%2Fraw%2Fmain%2F.gitlab-ci.yml'%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%E5%B8%A6%E6%9C%89%E5%AE%8C%E6%95%B4%20%60URL%60%20%E7%9A%84%20%60include%3Aremote%60%20%E6%9D%A5%E5%8C%85%E5%90%AB%E6%9D%A5%E8%87%AA%E4%B8%8D%E5%90%8C%E4%BD%8D%E7%BD%AE%E7%9A%84%E6%96%87%E4%BB%B6",
      "encoded": true
    },
    {
      "id": "s3-22",
      "sectionId": "s3",
      "title": "include:template",
      "body": "使用 `include:template` 来包含 `.gitlab-ci.yml` 模板\n\n```yml\n# 文件来自 GitLab 模板集合\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n```\n\n多个 `include:template` 文件：\n\n```yml\ninclude:\n  - template: Android-Fastlane.gitlab-ci.yml\n  - template: Auto-DevOps.gitlab-ci.yml\n```"
    },
    {
      "id": "s3-26",
      "sectionId": "s3",
      "title": "stages",
      "body": "使用阶段来定义包含作业组的阶段。如果 `.gitlab-ci.yml` 文件中未定义阶段，则默认管道阶段为：\n\n• [.pre](#stage-pre)\n• build\n• test\n• deploy\n• [.post](#stage-post)\n\n```yml\nstages:\n  - build\n  - test\n  - deploy\n```"
    },
    {
      "id": "s4-29",
      "sectionId": "s4",
      "title": "workflow%3Aname",
      "body": "%E6%82%A8%E5%8F%AF%E4%BB%A5%E5%9C%A8%20workflow%3A%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20name%20%E6%9D%A5%E5%AE%9A%E4%B9%89%E7%AE%A1%E9%81%93%E7%9A%84%E5%90%8D%E7%A7%B0%0A%0A%60%60%60yml%0Aworkflow%3A%0A%20%20name%3A%20'%E5%88%86%E6%94%AF%E7%AE%A1%E9%81%93%EF%BC%9A%24CI_COMMIT_BRANCH'%0A%60%60%60%0A%0A%E6%A0%B9%E6%8D%AE%E7%AE%A1%E9%81%93%E6%9D%A1%E4%BB%B6%E5%85%B7%E6%9C%89%E4%B8%8D%E5%90%8C%E7%AE%A1%E9%81%93%E5%90%8D%E7%A7%B0%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%9A%0A%0A%60%60%60yml%0Avariables%3A%0A%20%20PIPELINE_NAME%3A%20'%E9%BB%98%E8%AE%A4%E7%AE%A1%E9%81%93%E5%90%8D%E7%A7%B0'%0A%0Aworkflow%3A%0A%20%20name%3A%20'%24PIPELINE_NAME'%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20'%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22'%0A%20%20%20%20%20%20variables%3A%0A%20%20%20%20%20%20%20%20PIPELINE_NAME%3A%20'MR%20pipeline%3A%20%24CI_COMMIT_BRANCH'%0A%20%20%20%20-%20if%3A%20'%24CI_MERGE_REQUEST_LABELS%20%3D~%20%2Fpipeline%3Arun-in-ruby3%2F'%0A%20%20%20%20%20%20variables%3A%0A%20%20%20%20%20%20%20%20PIPELINE_NAME%3A%20'Ruby%203%20pipeline'%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-33",
      "sectionId": "s4",
      "title": "workflow%3Arules%3Avariables",
      "body": "%E6%82%A8%E5%8F%AF%E4%BB%A5%E5%9C%A8%20%60workflow%3Arules%60%20%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E6%9D%A5%E5%AE%9A%E4%B9%89%E7%89%B9%E5%AE%9A%E7%AE%A1%E9%81%93%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%8F%98%E9%87%8F%0A%0A%60%60%60yml%0Avariables%3A%0A%20%20DEPLOY_VARIABLE%3A%20%22default-deploy%22%0A%0Aworkflow%3A%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_REF_NAME%20%3D%3D%20%24CI_DEFAULT_BRANCH%0A%20%20%20%20%20%20variables%3A%0A%20%20%20%20%20%20%20%20DEPLOY_VARIABLE%3A%20%22deploy-production%22%20%20%23%20%E8%A6%86%E7%9B%96%E5%85%A8%E5%B1%80%E5%AE%9A%E4%B9%89%E7%9A%84%20DEPLOY_VARIABLE%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_REF_NAME%20%3D~%20%2Ffeature%2F%0A%20%20%20%20%20%20variables%3A%0A%20%20%20%20%20%20%20%20IS_A_FEATURE%3A%20%22true%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%96%B0%E5%8F%98%E9%87%8F%0A%20%20%20%20-%20when%3A%20always%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E5%9C%A8%E5%85%B6%E4%BB%96%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%90%E8%A1%8C%E7%AE%A1%E9%81%93%0A%0Ajob1%3A%0A%20%20variables%3A%0A%20%20%20%20DEPLOY_VARIABLE%3A%20%22job1-default-deploy%22%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_REF_NAME%20%3D%3D%20%24CI_DEFAULT_BRANCH%0A%20%20%20%20%20%20variables%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E8%A6%86%E7%9B%96%E5%AE%9A%E4%B9%89%E7%9A%84%20DEPLOY_VARIABLE%0A%20%20%20%20%20%20%20%20DEPLOY_VARIABLE%3A%20%22job1-deploy-production%22%20%20%23%20%E5%9C%A8%E5%B7%A5%E4%BD%9C%E5%B1%82%E9%9D%A2%E3%80%82%0A%20%20%20%20-%20when%3A%20on_success%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E5%9C%A8%E5%85%B6%E4%BB%96%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E4%BB%A5%20%24DEPLOY_VARIABLE%20%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%22%0A%20%20%20%20-%20echo%20%22%E5%A6%82%E6%9E%9C%20%24IS_A_FEATURE%20%E5%AD%98%E5%9C%A8%E5%88%99%E8%BF%90%E8%A1%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%22%0A%0Ajob2%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E4%BB%A5%20%24DEPLOY_VARIABLE%20%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%22%0A%20%20%20%20-%20echo%20%22%E5%A6%82%E6%9E%9C%20%24IS_A_FEATURE%20%E5%AD%98%E5%9C%A8%E5%88%99%E8%BF%90%E8%A1%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s4-35",
      "sectionId": "s4",
      "title": "workflow%3Arules",
      "body": "%E5%B7%A5%E4%BD%9C%E6%B5%81(workflow)%E4%B8%AD%E7%9A%84%20%60rules%60%20%E5%85%B3%E9%94%AE%E5%AD%97%E7%B1%BB%E4%BC%BC%E4%BA%8E%E4%BD%9C%E4%B8%9A%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84%20%5B%60rules%60%5D(%23rules)%EF%BC%8C%E4%BD%86%E6%8E%A7%E5%88%B6%E6%98%AF%E5%90%A6%E5%88%9B%E5%BB%BA%E6%95%B4%E4%B8%AA%E7%AE%A1%E9%81%93%0A%0A%E2%80%A2%20%5Brules%3A%20if%5D(%23rulesif)%0A%E2%80%A2%20%5Brules%3A%20changes%5D(%23ruleschanges)%0A%E2%80%A2%20%5Brules%3A%20exists%5D(%23rulesexists)%0A%E2%80%A2%20%5Bwhen%5D(%23when)%0A%E2%80%A2%20%5Bvariables%5D(%23workflowrulesvariables)%0A%0A%60%60%60yml%0Aworkflow%3A%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_TITLE%20%3D~%20%2F-draft%24%2F%0A%20%20%20%20%20%20when%3A%20never%0A%20%20%20%20-%20if%3A%20%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_BRANCH%20%3D%3D%20%24CI_DEFAULT_BRANCH%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-38",
      "sectionId": "s5",
      "title": "after_script",
      "body": "%E5%9C%A8%E6%AF%8F%E4%B8%AA%E4%BD%9C%E4%B8%9A%EF%BC%88%E5%8C%85%E6%8B%AC%E5%A4%B1%E8%B4%A5%E7%9A%84%E4%BD%9C%E4%B8%9A%EF%BC%89**%E4%B9%8B%E5%90%8E**%E8%BF%90%E8%A1%8C%E7%9A%84%E5%91%BD%E4%BB%A4%E6%95%B0%E7%BB%84%0A%0A%60%60%60yml%0Ajob%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E7%A4%BA%E4%BE%8B%E8%84%9A%E6%9C%AC%E9%83%A8%E5%88%86%22%0A%20%20after_script%3A%0A%20%20%20%20-%20echo%20%22%E5%9C%A8%E2%80%9Cscript%E2%80%9D%E9%83%A8%E5%88%86%E5%AE%8C%E6%88%90%E5%90%8E%E6%89%A7%E8%A1%8C%E6%AD%A4%E5%91%BD%E4%BB%A4%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-40",
      "sectionId": "s5",
      "title": "allow_failure",
      "body": "确定管道是否应在作业失败时继续运行\n\n```yml\njob1:\n  stage: test\n  script:\n    - execute_script_1\n\njob2:\n  stage: test\n  script:\n    - execute_script_2\n  allow_failure: true\n\njob3:\n  stage: deploy\n  script:\n    - deploy_to_staging\n  environment: staging\n```"
    },
    {
      "id": "s5-42",
      "sectionId": "s5",
      "title": "allow_failure%3Aexit_codes",
      "body": "%E6%8E%A7%E5%88%B6%E4%BD%95%E6%97%B6%E5%85%81%E8%AE%B8%E4%BD%9C%E4%B8%9A%E5%A4%B1%E8%B4%A5%E3%80%82%E5%AF%B9%E4%BA%8E%E4%BB%BB%E4%BD%95%E5%88%97%E5%87%BA%E7%9A%84%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BD%9C%E4%B8%9A%E6%98%AF%20%60allow_failure%3A%20true%60%EF%BC%8C%E5%AF%B9%E4%BA%8E%E4%BB%BB%E4%BD%95%E5%85%B6%E4%BB%96%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%EF%BC%8C%60allow_failure%60%20false%0A%0A%60%60%60yml%0Atest_job_1%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%201%20%E7%9A%84%E8%84%9A%E6%9C%AC%E3%80%82%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%A4%B1%E8%B4%A5%22%0A%20%20%20%20-%20exit%201%0A%20%20allow_failure%3A%0A%20%20%20%20exit_codes%3A%20137%0A%0Atest_job_2%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%20137%20%E7%9A%84%E8%84%9A%E6%9C%AC%E5%85%81%E8%AE%B8%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%A4%B1%E8%B4%A5%22%0A%20%20%20%20-%20exit%20137%0A%20%20allow_failure%3A%0A%20%20%20%20exit_codes%3A%0A%20%20%20%20%20%20-%20137%0A%20%20%20%20%20%20-%20255%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-44",
      "sectionId": "s5",
      "title": "dast_configuration",
      "body": "%60%60%60yml%0Astages%3A%0A%20%20-%20build%0A%20%20-%20dast%0A%0Ainclude%3A%0A%20%20-%20template%3A%20DAST.gitlab-ci.yml%0A%0Adast%3A%0A%20%20dast_configuration%3A%0A%20%20%20%20site_profile%3A%20%22Example%20Co%22%0A%20%20%20%20scanner_profile%3A%20%22Quick%20Passive%20Test%22%0A%60%60%60%0A%0A%E6%8C%87%E5%AE%9A%E8%A6%81%E5%9C%A8%20CI%2FCD%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%9A%84%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%89%AB%E6%8F%8F%E4%BB%AA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82%20%E4%B8%A4%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BF%85%E9%A1%BB%E9%A6%96%E5%85%88%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%88%9B%E5%BB%BA%E3%80%82%20%E4%BD%9C%E4%B8%9A%E7%9A%84%E9%98%B6%E6%AE%B5%E5%BF%85%E9%A1%BB%E5%BF%AB",
      "encoded": true
    },
    {
      "id": "s5-46",
      "sectionId": "s5",
      "title": "before_script",
      "body": "%E5%9C%A8%E6%AF%8F%E4%B8%AA%E4%BD%9C%E4%B8%9A%E7%9A%84%20%60script%60%20%E5%91%BD%E4%BB%A4%E4%B9%8B%E5%89%8D%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%BD%86%E5%9C%A8%E5%B7%A5%E4%BB%B6%E6%81%A2%E5%A4%8D%E4%B9%8B%E5%90%8E%E8%BF%90%E8%A1%8C%0A%0A%60%60%60yml%0Ajob%3A%0A%20%20before_script%3A%0A%20%20%20%20-%20echo%20%22%E5%9C%A8%E4%BB%BB%E4%BD%95%E2%80%9Cscript%3A%E2%80%9D%E5%91%BD%E4%BB%A4%E4%B9%8B%E5%89%8D%E6%89%A7%E8%A1%8C%E6%AD%A4%E5%91%BD%E4%BB%A4%22%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E2%80%9Cbefore_script%E2%80%9D%E5%91%BD%E4%BB%A4%E4%B9%8B%E5%90%8E%E6%89%A7%E8%A1%8C%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-48",
      "sectionId": "s5",
      "title": "coverage",
      "body": "%60%60%60yml%0Ajob1%3A%0A%20%20script%3A%20rspec%0A%20%20coverage%3A%20'%2FCode%20coverage%3A%20%5Cd%2B%5C.%5Cd%2B%2F'%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%A6%86%E7%9B%96%E7%8E%87%E6%9D%A5%E9%85%8D%E7%BD%AE%E5%A6%82%E4%BD%95%E4%BB%8E%E4%BD%9C%E4%B8%9A%E8%BE%93%E5%87%BA%E4%B8%AD%E6%8F%90%E5%8F%96%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87",
      "encoded": true
    },
    {
      "id": "s5-50",
      "sectionId": "s5",
      "title": "extends",
      "body": "```yml\n.tests:\n  script: rake test\n  stage: test\n  only:\n    refs:\n      - branches\n\nrspec:\n  extends: .tests\n  script: rake rspec\n  only:\n    variables:\n      - $RSPEC\n```\n\n使用 `extends` 重用配置部分。 它是 YAML 锚点的替代品，并且更加灵活和可读"
    },
    {
      "id": "s5-52",
      "sectionId": "s5",
      "title": "dependencies",
      "body": "```yml\nbuild osx:\n  stage: build\n  script: make build:osx\n  artifacts:\n    paths:\n      - binaries/\n\nbuild linux:\n  stage: build\n  script: make build:linux\n  artifacts:\n    paths:\n      - binaries/\n\ntest osx:\n  stage: test\n  script: make test:osx\n  dependencies:\n    - build osx\n\ntest linux:\n  stage: test\n  script: make test:linux\n  dependencies:\n    - build linux\n\ndeploy:\n  stage: deploy\n  script: make deploy\n  environment: production\n```\n\n定义要从中获取工件的作业列表。您还可以将作业设置为根本不下载任何工件"
    },
    {
      "id": "s5-54",
      "sectionId": "s5",
      "title": "inherit",
      "body": "使用 inherit 控制默认关键字和变量的继承"
    },
    {
      "id": "s5-55",
      "sectionId": "s5",
      "title": "inherit%3Adefault",
      "body": "%E4%BD%BF%E7%94%A8%20%60inherit%3Adefault%60%20%E6%8E%A7%E5%88%B6%20%60default%60%20%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E7%BB%A7%E6%89%BF%0A%0A%60%60%60yml%0Adefault%3A%0A%20%20retry%3A%202%0A%20%20image%3A%20ruby%3A3.0%0A%20%20interruptible%3A%20true%0A%0Ajob1%3A%0A%20%20script%3A%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%B8%8D%E7%BB%A7%E6%89%BF%E4%BB%BB%E4%BD%95%E9%BB%98%E8%AE%A4%E5%85%B3%E9%94%AE%E5%AD%97%22%0A%20%20inherit%3A%0A%20%20%20%20default%3A%20false%0A%0Ajob2%3A%0A%20%20script%3A%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BB%85%E7%BB%A7%E6%89%BF%E5%88%97%E5%87%BA%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%BB%98%E8%AE%A4%E5%85%B3%E9%94%AE%E5%AD%97%E3%80%82%E5%AE%83%E4%B8%8D%E7%BB%A7%E6%89%BF%E2%80%9C%E5%8F%AF%E4%B8%AD%E6%96%AD%E2%80%9D%22%0A%20%20inherit%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20-%20retry%0A%20%20%20%20%20%20-%20image%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-57",
      "sectionId": "s5",
      "title": "inherit%3Avariables",
      "body": "%E4%BD%BF%E7%94%A8%20inherit%3Avariables%20%E6%8E%A7%E5%88%B6%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E7%BB%A7%E6%89%BF%0A%0A%60%60%60yml%0Avariables%3A%0A%20%20VARIABLE1%3A%20%22%E8%BF%99%E6%98%AF%E5%8F%98%E9%87%8F%201%22%0A%20%20VARIABLE2%3A%20%22%E8%BF%99%E6%98%AF%E5%8F%98%E9%87%8F%202%22%0A%20%20VARIABLE3%3A%20%22%E8%BF%99%E6%98%AF%E5%8F%98%E9%87%8F%203%22%0A%0Ajob1%3A%0A%20%20script%3A%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E4%B8%8D%E7%BB%A7%E6%89%BF%E4%BB%BB%E4%BD%95%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%22%0A%20%20inherit%3A%0A%20%20%20%20variables%3A%20false%0A%0Ajob2%3A%0A%20%20script%3A%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BB%85%E7%BB%A7%E6%89%BF%E5%88%97%E5%87%BA%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E3%80%82%E5%AE%83%E4%B8%8D%E7%BB%A7%E6%89%BF%E2%80%9CVARIABLE3%E2%80%9D%22%0A%20%20inherit%3A%0A%20%20%20%20variables%3A%0A%20%20%20%20%20%20-%20VARIABLE1%0A%20%20%20%20%20%20-%20VARIABLE2%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-59",
      "sectionId": "s5",
      "title": "interruptible",
      "body": "%60%60%60yml%0Astages%3A%0A%20%20-%20stage1%0A%20%20-%20stage2%0A%20%20-%20stage3%0A%0Astep-1%3A%0A%20%20stage%3A%20stage1%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E5%8F%AF%E4%BB%A5%E5%8F%96%E6%B6%88%22%0A%20%20interruptible%3A%20true%0A%0Astep-2%3A%0A%20%20stage%3A%20stage2%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E4%B8%8D%E8%83%BD%E5%8F%96%E6%B6%88%22%0A%0Astep-3%3A%0A%20%20stage%3A%20stage3%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E5%9B%A0%E4%B8%BA%E7%AC%AC%202%20%E6%AD%A5%E6%97%A0%E6%B3%95%E5%8F%96%E6%B6%88%EF%BC%8C%E6%89%80%E4%BB%A5%E6%AD%A4%E6%AD%A5%E9%AA%A4%E6%B0%B8%E8%BF%9C%E6%97%A0%E6%B3%95%E5%8F%96%E6%B6%88%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%AE%83%E8%A2%AB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%8F%AF%E4%B8%AD%E6%96%AD%22%0A%20%20interruptible%3A%20true%0A%60%60%60%0A%0A%E5%A6%82%E6%9E%9C%E5%9C%A8%E4%BD%9C%E4%B8%9A%E5%AE%8C%E6%88%90%E4%B9%8B%E5%89%8D%E5%90%AF%E5%8A%A8%E8%BE%83%E6%96%B0%E7%9A%84%E7%AE%A1%E9%81%93%E6%97%B6%E5%BA%94%E5%8F%96%E6%B6%88%E4%BD%9C%E4%B8%9A%EF%BC%8C%E5%88%99%E4%BD%BF%E7%94%A8%E5%8F%AF%E4%B8%AD%E6%96%AD%E7%9A%84",
      "encoded": true
    },
    {
      "id": "s5-61",
      "sectionId": "s5",
      "title": "pages",
      "body": "```yml\npages:\n  stage: deploy\n  script:\n    - mkdir .public\n    - cp -r * .public\n    - mv .public public\n  artifacts:\n    paths:\n      - public\n  rules:\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n  environment: production\n```\n\n使用页面定义将静态内容上传到 `GitLab` 的 `GitLab Pages` 作业。然后将内容发布为网站"
    },
    {
      "id": "s5-63",
      "sectionId": "s5",
      "title": "parallel",
      "body": "```yml\ntest:\n  script: rspec\n  parallel: 5\n```\n\n使用 `parallel` 在单个管道中并行多次运行作业"
    },
    {
      "id": "s5-65",
      "sectionId": "s5",
      "title": "parallel:matrix",
      "body": "```yml\ndeploystacks:\n  stage: deploy\n  script:\n    - bin/deploy\n  parallel:\n    matrix:\n      - PROVIDER: aws\n        STACK:\n          - monitoring\n          - app1\n          - app2\n      - PROVIDER: ovh\n        STACK: [monitoring, backup, app]\n      - PROVIDER: [gcp, vultr]\n        STACK: [data, processing]\n  environment: $PROVIDER/$STACK\n```\n\n使用 `parallel:matrix` 在单个管道中并行多次运行作业，但每个作业实例具有不同的变量值"
    },
    {
      "id": "s5-67",
      "sectionId": "s5",
      "title": "resource_group",
      "body": "```yml\ndeploy-to-production:\n  script: deploy\n  resource_group: production\n```\n\n创建一个资源组，以确保作业在同一项目的不同管道之间互斥"
    },
    {
      "id": "s5-69",
      "sectionId": "s5",
      "title": "tags",
      "body": "```yml\njob:\n  tags:\n    - ruby\n    - postgres\n```\n\n使用标签从项目可用的所有运行器列表中选择特定运行器"
    },
    {
      "id": "s5-71",
      "sectionId": "s5",
      "title": "retry",
      "body": "```yml\ntest:\n  script: rspec\n  retry: 2\n```\n\n使用 `retry` 配置作业失败时重试的次数。如果未定义，则默认为 `0`，并且作业不会重试"
    },
    {
      "id": "s5-73",
      "sectionId": "s5",
      "title": "retry:when",
      "body": "```yml\ntest:\n  script: rspec\n  retry:\n    max: 2\n    when: runner_system_failure\n```\n\n使用 `retry:when` 和 `retry:max` 来重试特定失败案例的作业。 `retry:max` 是最大重试次数，和`retry`一样，可以是0、1、2"
    },
    {
      "id": "s5-75",
      "sectionId": "s5",
      "title": "script",
      "body": "%60%60%60yml%0Ajob1%3A%0A%20%20script%3A%20%22bundle%20exec%20rspec%22%0A%0Ajob2%3A%0A%20%20script%3A%0A%20%20%20%20-%20uname%20-a%0A%20%20%20%20-%20bundle%20exec%20rspec%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E5%99%A8%E6%89%A7%E8%A1%8C%E7%9A%84%E5%91%BD%E4%BB%A4",
      "encoded": true
    },
    {
      "id": "s5-77",
      "sectionId": "s5",
      "title": "secrets",
      "body": "此关键字必须与 `secrets:vault` 一起使用"
    },
    {
      "id": "s5-78",
      "sectionId": "s5",
      "title": "secrets:vault",
      "body": "使用 `secrets:vault` 指定 HashiCorp Vault 提供的秘密\n\n```yml\njob:\n  secrets:\n    # 将秘密的路径存储在此 CI/CD 变量中\n    DATABASE_PASSWORD:\n      # 转换为秘密：`ops/data/production/db`\n      # 字段：`password`\n      vault: \n        engine:\n          name: kv-v2\n          path: ops\n        path: production/db\n        field: password\n```"
    },
    {
      "id": "s5-80",
      "sectionId": "s5",
      "title": "secrets:file",
      "body": "使用 `secrets:file` 将秘密配置为存储为文件或变量类型的 CI/CD 变量\n\n```yml\njob:\n  secrets:\n    DATABASE_PASSWORD:\n      vault: production/db/password@ops\n      file: false\n```"
    },
    {
      "id": "s5-82",
      "sectionId": "s5",
      "title": "timeout",
      "body": "```yml\nbuild:\n  script: build.sh\n  timeout: 3 hours 30 minutes\n\ntest:\n  script: rspec\n  timeout: 3h 30m\n```\n\n为特定作业配置超时。 如果作业运行时间超过超时时间，则作业失败"
    },
    {
      "id": "s5-84",
      "sectionId": "s5",
      "title": "services",
      "body": "%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E6%8C%87%E5%AE%9A%E9%A2%9D%E5%A4%96%E7%9A%84%20%60Docker%60%20%E6%98%A0%E5%83%8F%E4%BB%A5%E5%9C%A8%E5%85%B6%E4%B8%AD%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%0A%0A%60%60%60yml%0Adefault%3A%0A%20%20image%3A%0A%20%20%20%20name%3A%20ruby%3A2.6%0A%20%20%20%20entrypoint%3A%20%5B%22%2Fbin%2Fbash%22%5D%0A%0A%20%20services%3A%0A%20%20%20%20-%20name%3A%20my-postgres%3A11.7%0A%20%20%20%20%20%20alias%3A%20db-postgres%0A%20%20%20%20%20%20entrypoint%3A%20%5B%22%2Fusr%2Flocal%2Fbin%2Fdb-postgres%22%5D%0A%20%20%20%20%20%20command%3A%20%5B%22start%22%5D%0A%0A%20%20before_script%3A%0A%20%20%20%20-%20bundle%20install%0A%0Atest%3A%0A%20%20script%3A%0A%20%20%20%20-%20bundle%20exec%20rake%20spec%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-86",
      "sectionId": "s5",
      "title": "service%3Apull_policy",
      "body": "%E8%BF%90%E8%A1%8C%E5%99%A8%E7%94%A8%E4%BA%8E%E8%8E%B7%E5%8F%96%20%60Docker%60%20%E6%98%A0%E5%83%8F%E7%9A%84%E6%8B%89%E5%8F%96%E7%AD%96%E7%95%A5%0A%0A%60%60%60yml%0Ajob1%3A%0A%20%20script%3A%20echo%20%22A%20single%20pull%20policy.%22%0A%20%20services%3A%0A%20%20%20%20-%20name%3A%20postgres%3A11.6%0A%20%20%20%20%20%20pull_policy%3A%20if-not-present%0A%0Ajob2%3A%0A%20%20script%3A%20echo%20%22Multiple%20pull%20policies.%22%0A%20%20services%3A%0A%20%20%20%20-%20name%3A%20postgres%3A11.6%0A%20%20%20%20%20%20pull_policy%3A%20%5Balways%2C%20if-not-present%5D%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-88",
      "sectionId": "s5",
      "title": "stage",
      "body": "%60%60%60yml%0Astages%3A%0A%20%20-%20build%0A%20%20-%20test%0A%20%20-%20deploy%0A%0Ajob1%3A%0A%20%20stage%3A%20build%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%BF%99%E9%A1%B9%E5%B7%A5%E4%BD%9C%E7%BC%96%E8%AF%91%E4%BB%A3%E7%A0%81%22%0A%0Ajob2%3A%0A%20%20stage%3A%20test%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E6%B5%8B%E8%AF%95%E7%BC%96%E8%AF%91%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81%E3%80%82%E5%AE%83%E5%9C%A8%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5%E5%AE%8C%E6%88%90%E6%97%B6%E8%BF%90%E8%A1%8C%22%0A%0Ajob3%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%BF%99%E9%A1%B9%E5%B7%A5%E4%BD%9C%E4%B9%9F%E5%9C%A8%E6%B5%8B%E8%AF%95%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%22%0A%0Ajob4%3A%0A%20%20stage%3A%20deploy%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E9%83%A8%E7%BD%B2%E4%BB%A3%E7%A0%81%E3%80%82%E5%AE%83%E5%9C%A8%E6%B5%8B%E8%AF%95%E9%98%B6%E6%AE%B5%E5%AE%8C%E6%88%90%E6%97%B6%E8%BF%90%E8%A1%8C%22%0A%20%20environment%3A%20production%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-89",
      "sectionId": "s5",
      "title": "stage%3A%20.pre",
      "body": "%60%60%60yml%0Astages%3A%0A%20%20-%20build%0A%20%20-%20test%0A%0Ajob1%3A%0A%20%20stage%3A%20build%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%22%0A%0Afirst-job%3A%0A%20%20stage%3A%20.pre%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%20.pre%20%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%EF%BC%8C%E5%9C%A8%E6%89%80%E6%9C%89%E5%85%B6%E4%BB%96%E9%98%B6%E6%AE%B5%E4%B9%8B%E5%89%8D%22%0A%0Ajob2%3A%0A%20%20stage%3A%20test%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%E6%B5%8B%E8%AF%95%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-90",
      "sectionId": "s5",
      "title": "stage%3A%20.post",
      "body": "%60%60%60yml%0Astages%3A%0A%20%20-%20build%0A%20%20-%20test%0A%0Ajob1%3A%0A%20%20stage%3A%20build%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%22%0A%0Alast-job%3A%0A%20%20stage%3A%20.post%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%20.post%20%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%EF%BC%8C%E5%9C%A8%E6%89%80%E6%9C%89%E5%85%B6%E4%BB%96%E9%98%B6%E6%AE%B5%E4%B9%8B%E5%90%8E%22%0A%0Ajob2%3A%0A%20%20stage%3A%20test%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%9C%A8%E6%B5%8B%E8%AF%95%E9%98%B6%E6%AE%B5%E8%BF%90%E8%A1%8C%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-91",
      "sectionId": "s5",
      "title": "trigger",
      "body": "声明一个作业是一个“触发作业”\n\n```yml\ntrigger-multi-project-pipeline:\n  trigger: my-group/my-project\n```"
    },
    {
      "id": "s5-93",
      "sectionId": "s5",
      "title": "trigger:include",
      "body": "```yml\ntrigger-child-pipeline:\n  trigger:\n    include: path/to/child-pipeline.gitlab-ci.yml\n```\n\n声明作业是启动子管道的“触发器作业”"
    },
    {
      "id": "s5-95",
      "sectionId": "s5",
      "title": "trigger:project",
      "body": "```yml\ntrigger-multi-project-pipeline:\n  trigger:\n    project: my-group/my-project\n```\n\n声明作业是启动多项目管道的“触发器作业”"
    },
    {
      "id": "s5-97",
      "sectionId": "s5",
      "title": "trigger:strategy",
      "body": "```yml\ntrigger-multi-project-pipeline:\n  trigger:\n    project: my-group/my-project\n    branch: development\n```\n\n强制触发作业等待下游管道完成后再标记为成功"
    },
    {
      "id": "s5-99",
      "sectionId": "s5",
      "title": "trigger:forward",
      "body": "```yml\nvariables: # 每个作业的默认变量\n  VAR: value\n\n# 默认行为：\n# - VAR 传递给孩子\n# - MYVAR 没有传递给孩子\nchild1:\n  trigger:\n    include: .child-pipeline.yml\n\n# 转发管道变量：\n# - VAR 传递给孩子\n# - MYVAR 传递给孩子\nchild2:\n  trigger:\n    include: .child-pipeline.yml\n    forward:\n      pipeline_variables: true\n\n# 不要转发 YAML 变量：\n# - VAR 不会传递给孩子\n# - MYVAR 没有传递给孩子\nchild3:\n  trigger:\n    include: .child-pipeline.yml\n    forward:\n      yaml_variables: false\n```"
    },
    {
      "id": "s5-100",
      "sectionId": "s5",
      "title": "variables",
      "body": "CI%2FCD%20%E5%8F%98%E9%87%8F%E6%98%AF%E4%BC%A0%E9%80%92%E7%BB%99%E4%BD%9C%E4%B8%9A%E7%9A%84%E5%8F%AF%E9%85%8D%E7%BD%AE%E5%80%BC%E3%80%82%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%0A%0A%60%60%60yml%0Avariables%3A%0A%20%20DEPLOY_SITE%3A%20%22https%3A%2F%2Fexample.com%2F%22%0A%0Adeploy_job%3A%0A%20%20stage%3A%20deploy%0A%20%20script%3A%0A%20%20%20%20-%20deploy-script%20--url%20%24DEPLOY_SITE%20--path%20%22%2F%22%0A%20%20environment%3A%20production%0A%0Adeploy_review_job%3A%0A%20%20stage%3A%20deploy%0A%20%20variables%3A%0A%20%20%20%20REVIEW_PATH%3A%20%22%2Freview%22%0A%20%20script%3A%0A%20%20%20%20-%20deploy-review-script%20--url%20%24DEPLOY_SITE%20--path%20%24REVIEW_PATH%0A%20%20environment%3A%20production%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-102",
      "sectionId": "s5",
      "title": "variables%3Adescription",
      "body": "%60%60%60yml%0Avariables%3A%0A%20%20DEPLOY_ENVIRONMENT%3A%0A%20%20%20%20description%3A%20%22%E9%83%A8%E7%BD%B2%E7%9B%AE%E6%A0%87%E3%80%82%20%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%EF%BC%8C%E5%B0%86%E6%AD%A4%E5%8F%98%E9%87%8F%E6%9B%B4%E6%94%B9%E4%B8%BA%E2%80%9Ccanary%E2%80%9D%E6%88%96%E2%80%9Cproduction%E2%80%9D%22%0A%20%20%20%20value%3A%20%22staging%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s5-103",
      "sectionId": "s5",
      "title": "variables:expand",
      "body": "```yml\nvariables:\n  VAR1: value1\n  VAR2: value2 $VAR1\n  VAR3:\n    value: value3 $VAR1\n    expand: false\n```\n\n使用 `expand` 关键字将变量配置为可扩展或不可扩展"
    },
    {
      "id": "s5-105",
      "sectionId": "s5",
      "title": "when",
      "body": "使用 `when` 配置作业运行的条件。如果未在作业中定义，则默认值为 `when:on_success`\n\n```yml\nstages:\n  - build\n  - cleanup_build\n  - test\n  - deploy\n  - cleanup\n\nbuild_job:\n  stage: build\n  script:\n    - make build\n\ncleanup_build_job:\n  stage: cleanup_build\n  script:\n    - cleanup build when failed\n  when: on_failure\n\ntest_job:\n  stage: test\n  script:\n    - make test\n\ndeploy_job:\n  stage: deploy\n  script:\n    - make deploy\n  when: manual\n  environment: production\n\ncleanup_job:\n  stage: cleanup\n  script:\n    - cleanup after jobs\n  when: always\n```\n\n:- | --\n:- | --\n`on_success(default)` | 仅当早期阶段的所有作业都成功或具有 `allow_failure: true` 时才运行该作业\n`manual` | 仅在手动触发时运行作业\n`always` | 无论早期阶段的作业状态如何，都运行作业。也可以用在 `workflow:rules` 中\n`on_failure` | 仅当早期阶段的至少一项作业失败时才运行该作业\n`delayed` | 将作业的执行延迟指定的持续时间\n`never` | 不要运行作业。只能在规则[rules](#rules)部分或工作流中使用：`workflow: rules`\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s6-108",
      "sectionId": "s6",
      "title": "artifacts",
      "body": "使用工件指定要将哪些文件另存为作业 artifacts。作业 artifacts 是作业成功、失败或始终附加到作业的文件和目录的列表"
    },
    {
      "id": "s6-109",
      "sectionId": "s6",
      "title": "artifacts:paths",
      "body": "路径是相对于项目目录（$CI_PROJECT_DIR）的，不能直接链接到项目目录之外\n\n```yml\njob:\n  artifacts:\n    paths:\n      - binaries/\n      - .config\n```"
    },
    {
      "id": "s6-111",
      "sectionId": "s6",
      "title": "artifacts:exclude",
      "body": "防止将文件添加到 artifacts 存档中\n\n```yml\nartifacts:\n  paths:\n    - binaries/\n  exclude:\n    - binaries/**/*.o\n```"
    },
    {
      "id": "s6-113",
      "sectionId": "s6",
      "title": "artifacts%3Aexpire_in",
      "body": "%E6%8C%87%E5%AE%9A%E4%BD%9C%E4%B8%9A%20artifacts%20%E5%9C%A8%E5%AE%83%E4%BB%AC%E8%BF%87%E6%9C%9F%E5%92%8C%E8%A2%AB%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E5%AD%98%E5%82%A8%E5%A4%9A%E9%95%BF%E6%97%B6%E9%97%B4%0A%0A%60%60%60yml%0Ajob%3A%0A%20%20artifacts%3A%0A%20%20%20%20expire_in%3A%201%20week%0A%60%60%60%0A%0A%E2%80%A2%20'42'%0A%E2%80%A2%2042%20seconds%0A%E2%80%A2%203%20mins%204%20sec%0A%E2%80%A2%202%20hrs%2020%20min%0A%E2%80%A2%202h20min%0A%E2%80%A2%206%20mos%201%20day%0A%E2%80%A2%2047%20yrs%206%20mos%20and%204d%0A%E2%80%A2%203%20weeks%20and%202%20days%0A%E2%80%A2%20never",
      "encoded": true
    },
    {
      "id": "s6-116",
      "sectionId": "s6",
      "title": "artifacts%3Aexpose_as",
      "body": "%E4%BD%BF%E7%94%A8%20%60artifacts%3Aexpose_as%60%20%E5%85%B3%E9%94%AE%E5%AD%97%E5%9C%A8%E5%90%88%E5%B9%B6%E8%AF%B7%E6%B1%82%20UI%20%E4%B8%AD%E5%85%AC%E5%BC%80%E4%BD%9C%E4%B8%9A%20artifacts%0A%0A%60%60%60yml%0Atest%3A%0A%20%20script%3A%20%5B%22echo%20'test'%20%3E%20file.txt%22%5D%0A%20%20artifacts%3A%0A%20%20%20%20expose_as%3A%20'artifact%201'%0A%20%20%20%20paths%3A%20%5B'file.txt'%5D%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s6-118",
      "sectionId": "s6",
      "title": "artifacts%3Aname",
      "body": "%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E7%9A%84%20%60artifacts%60%20%E5%AD%98%E6%A1%A3%E7%9A%84%E5%90%8D%E7%A7%B0%E3%80%82%E6%82%A8%E5%8F%AF%E4%BB%A5%E4%B8%BA%E6%AF%8F%E4%B8%AA%E5%AD%98%E6%A1%A3%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%94%AF%E4%B8%80%E7%9A%84%E5%90%8D%E7%A7%B0%0A%0A%60%60%60yml%0Ajob%3A%0A%20%20artifacts%3A%0A%20%20%20%20name%3A%20%22job1-artifacts-file%22%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20binaries%2F%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s6-120",
      "sectionId": "s6",
      "title": "artifacts:public",
      "body": "确定作业工件是否应该公开可用\n\n```yml\njob:\n  artifacts:\n    public: false\n```"
    },
    {
      "id": "s6-122",
      "sectionId": "s6",
      "title": "artifacts:reports",
      "body": "收集作业中包含的模板生成的 `artifacts`\n\n```yml\nrspec:\n  stage: test\n  script:\n    - bundle install\n    - rspec --format RspecJunitFormatter --out rspec.xml\n  artifacts:\n    reports:\n      junit: rspec.xml\n```"
    },
    {
      "id": "s6-124",
      "sectionId": "s6",
      "title": "artifacts:untracked",
      "body": "将所有 Git 未跟踪文件添加为 `artifacts`（连同在 `artifacts:paths` 中定义的路径）\n\n```yml\njob:\n  artifacts:\n    untracked: true\n```"
    },
    {
      "id": "s6-126",
      "sectionId": "s6",
      "title": "artifacts:when",
      "body": "作业失败或尽管失败时上传 `artifacts`\n\n```yml\njob:\n  artifacts:\n    when: on_failure\n```"
    },
    {
      "id": "s7-128",
      "sectionId": "s7",
      "title": "cache%3Apaths",
      "body": "%60%60%60yml%0Arspec%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%22%0A%20%20cache%3A%0A%20%20%20%20key%3A%20binaries-cache%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20binaries%2F*.apk%0A%20%20%20%20%20%20-%20.config%0A%60%60%60%0A%0A%E5%85%B3%E9%94%AE%E5%AD%97%E6%9D%A5%E9%80%89%E6%8B%A9%E8%A6%81%E7%BC%93%E5%AD%98%E7%9A%84%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95",
      "encoded": true
    },
    {
      "id": "s7-130",
      "sectionId": "s7",
      "title": "cache%3Akey",
      "body": "%E4%B8%BA%E6%AF%8F%E4%B8%AA%E7%BC%93%E5%AD%98%E6%8F%90%E4%BE%9B%E5%94%AF%E4%B8%80%E7%9A%84%E6%A0%87%E8%AF%86%E9%94%AE%E3%80%82%20%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%90%8C%E7%BC%93%E5%AD%98%E9%94%AE%E7%9A%84%E6%89%80%E6%9C%89%E4%BD%9C%E4%B8%9A%E9%83%BD%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BC%93%E5%AD%98%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E7%AE%A1%E9%81%93%E4%B8%AD%0A%0A%60%60%60yml%0Acache-job%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%22%0A%20%20cache%3A%0A%20%20%20%20key%3A%20binaries-cache-%24CI_COMMIT_REF_SLUG%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20binaries%2F%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s7-132",
      "sectionId": "s7",
      "title": "%60cache%3Akey%3Afiles%60",
      "body": "%60%60%60yml%0Acache-job%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%22%0A%20%20cache%3A%0A%20%20%20%20key%3A%0A%20%20%20%20%20%20files%3A%0A%20%20%20%20%20%20%20%20-%20Gemfile.lock%0A%20%20%20%20%20%20%20%20-%20package.json%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20vendor%2Fruby%0A%20%20%20%20%20%20-%20node_modules%0A%60%60%60%0A%0A%E5%BD%93%E4%B8%80%E4%B8%AA%E6%88%96%E4%B8%A4%E4%B8%AA%E7%89%B9%E5%AE%9A%E6%96%87%E4%BB%B6%E6%9B%B4%E6%94%B9%E6%97%B6%EF%BC%8C%E4%BD%BF%E7%94%A8%20%60cache%3Akey%3Afiles%60%20%E5%85%B3%E9%94%AE%E5%AD%97%E7%94%9F%E6%88%90%E6%96%B0%E5%AF%86%E9%92%A5",
      "encoded": true
    },
    {
      "id": "s7-134",
      "sectionId": "s7",
      "title": "%60cache%3Akey%3Aprefix%60",
      "body": "%60%60%60yml%0Arspec%3A%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%20rspec%20%E4%BD%9C%E4%B8%9A%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%22%0A%20%20cache%3A%0A%20%20%20%20key%3A%0A%20%20%20%20%20%20files%3A%0A%20%20%20%20%20%20%20%20-%20Gemfile.lock%0A%20%20%20%20%20%20prefix%3A%20%24CI_JOB_NAME%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20vendor%2Fruby%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60cache%3Akey%3Aprefix%60%20%E5%B0%86%E5%89%8D%E7%BC%80%E4%B8%8E%E4%B8%BA%20%60cache%3Akey%3Afiles%60%20%E8%AE%A1%E7%AE%97%E7%9A%84%20SHA%20%E7%BB%93%E5%90%88%E8%B5%B7%E6%9D%A5",
      "encoded": true
    },
    {
      "id": "s7-136",
      "sectionId": "s7",
      "title": "cache:untracked",
      "body": "```yml\nrspec:\n  script: test\n  cache:\n    untracked: true\n    paths:\n      - binaries/\n```\n\n使用 `untracked: true` 缓存 Git 存储库中所有未跟踪的文件"
    },
    {
      "id": "s7-138",
      "sectionId": "s7",
      "title": "cache%3Awhen",
      "body": "%60%60%60yml%0Arspec%3A%0A%20%20script%3A%20rspec%0A%20%20cache%3A%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20rspec%2F%0A%20%20%20%20when%3A%20'always'%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60cache%3Awhen%60%20%E6%A0%B9%E6%8D%AE%E4%BD%9C%E4%B8%9A%E7%9A%84%E7%8A%B6%E6%80%81%E5%AE%9A%E4%B9%89%E4%BD%95%E6%97%B6%E4%BF%9D%E5%AD%98%E7%BC%93%E5%AD%98%0A%0A%3A-%20%7C%20--%0A%3A-%20%7C%20--%0A%60on_succes(%E9%BB%98%E8%AE%A4)%60%20%7C%20%E4%BB%85%E5%BD%93%E4%BD%9C%E4%B8%9A%E6%88%90%E5%8A%9F%E6%97%B6%E6%89%8D%E4%BF%9D%E5%AD%98%E7%BC%93%E5%AD%98%0A%60on_failure%60%20%7C%20%E4%BB%85%E5%9C%A8%E4%BD%9C%E4%B8%9A%E5%A4%B1%E8%B4%A5%E6%97%B6%E6%89%8D%E4%BF%9D%E5%AD%98%E7%BC%93%E5%AD%98%0A%60always%60%20%7C%20%E5%A7%8B%E7%BB%88%E4%BF%9D%E5%AD%98%E7%BC%93%E5%AD%98",
      "encoded": true
    },
    {
      "id": "s7-141",
      "sectionId": "s7",
      "title": "cache%3Apolicy",
      "body": "%60%60%60yml%0Aprepare-dependencies-job%3A%0A%20%20stage%3A%20build%0A%20%20cache%3A%0A%20%20%20%20key%3A%20gems%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20vendor%2Fbundle%0A%20%20%20%20policy%3A%20push%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E4%BB%85%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E9%A1%B9%E5%B9%B6%E6%9E%84%E5%BB%BA%E7%BC%93%E5%AD%98%22%0A%20%20%20%20-%20echo%20%22%E6%AD%A3%E5%9C%A8%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96...%22%0A%0Afaster-test-job%3A%0A%20%20stage%3A%20test%0A%20%20cache%3A%0A%20%20%20%20key%3A%20gems%0A%20%20%20%20paths%3A%0A%20%20%20%20%20%20-%20vendor%2Fbundle%0A%20%20%20%20policy%3A%20pull%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%EF%BC%8C%E4%BD%86%E4%B8%8D%E6%9B%B4%E6%96%B0%E5%AE%83%22%0A%20%20%20%20-%20echo%20%22%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95...%22%0A%60%60%60%0A%0A%E8%A6%81%E6%9B%B4%E6%94%B9%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD%E8%A1%8C%E4%B8%BA%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%20%60cache%3Apolicy%60%20%E5%85%B3%E9%94%AE%E5%AD%97",
      "encoded": true
    },
    {
      "id": "s8-143",
      "sectionId": "s8",
      "title": "environment:name",
      "body": "```yml\ndeploy to production:\n  stage: deploy\n  script: git push production HEAD:main\n  environment:\n    name: production\n```\n\n为环境设置名称"
    },
    {
      "id": "s8-145",
      "sectionId": "s8",
      "title": "environment:url",
      "body": "```yml\ndeploy to production:\n  stage: deploy\n  script: git push production HEAD:main\n  environment:\n    name: production\n    url: https://prod.example.com\n```\n\n为环境设置 URL"
    },
    {
      "id": "s8-147",
      "sectionId": "s8",
      "title": "environment:on_stop",
      "body": "关闭（停止）环境可以通过在环境下定义的 on_stop 关键字来实现。 它声明运行以关闭环境的不同作业"
    },
    {
      "id": "s8-148",
      "sectionId": "s8",
      "title": "environment:action",
      "body": "```yml\nstop_review_app:\n  stage: deploy\n  variables:\n    GIT_STRATEGY: none\n  script: make delete-app\n  when: manual\n  environment:\n    name: review/$CI_COMMIT_REF_SLUG\n    action: stop\n```\n\n:- | --\n:- | --\n`start` _默认值_ | 指示作业启动环境。在作业开始后创建的\n`prepare` | 表示作业只是准备环境。它不会触发部署\n`stop` | 指示作业停止部署\n`verify` | 指示作业仅验证环境。它不会触发部署\n`access` | 指示作业仅访问环境。它不会触发部署"
    },
    {
      "id": "s8-150",
      "sectionId": "s8",
      "title": "environment:auto_stop_in",
      "body": "```yml\nreview_app:\n  script: deploy-review-app\n  environment:\n    name: review/$CI_COMMIT_REF_SLUG\n    auto_stop_in: 1 day\n```\n\n• `168 hours`\n• `7 days`\n• `one week`\n• `never`\n\n`auto_stop_in` 关键字指定环境的生命周期。 当环境到期时，GitLab 会自动停止它"
    },
    {
      "id": "s8-153",
      "sectionId": "s8",
      "title": "environment:kubernetes",
      "body": "```yml\ndeploy:\n  stage: deploy\n  script: make deploy-app\n  environment:\n    name: production\n    kubernetes:\n      namespace: production\n```\n\n使用 `kubernetes` 关键字将部署配置到与您的项目关联的 `Kubernetes` 集群"
    },
    {
      "id": "s8-155",
      "sectionId": "s8",
      "title": "environment:deployment_tier",
      "body": "```yml\ndeploy:\n  script: echo\n  environment:\n    name: customer-portal\n    deployment_tier: production\n```\n\n• `production`\n• `staging`\n• `testing`\n• `development`\n• `other`"
    },
    {
      "id": "s8-157",
      "sectionId": "s8",
      "title": "动态 environment",
      "body": "```yml\ndeploy as review app:\n  stage: deploy\n  script: make deploy\n  environment:\n    name: review/$CI_COMMIT_REF_SLUG\n    url: https://$CI_ENVIRONMENT_SLUG.example.com/\n```"
    },
    {
      "id": "s9-158",
      "sectionId": "s9",
      "title": "image%3Aname",
      "body": "%60%60%60yml%0Aimage%3A%0A%20%20name%3A%20%22registry.example.com%2Fmy%2Fimage%3Alatest%22%0A%60%60%60%0A%0A%E4%BD%9C%E4%B8%9A%E8%BF%90%E8%A1%8C%E6%89%80%E5%9C%A8%E7%9A%84%20Docker%20%E9%95%9C%E5%83%8F%E7%9A%84%E5%90%8D%E7%A7%B0%E3%80%82%E7%B1%BB%E4%BC%BC%E4%BA%8E%E5%AE%83%E8%87%AA%E5%B7%B1%E4%BD%BF%E7%94%A8%E7%9A%84%E9%95%9C%E5%83%8F",
      "encoded": true
    },
    {
      "id": "s9-160",
      "sectionId": "s9",
      "title": "image%3Aentrypoint",
      "body": "%60%60%60yml%0Aimage%3A%0A%20%20name%3A%20super%2Fsql%3Aexperimental%0A%20%20entrypoint%3A%20%5B%22%22%5D%0A%60%60%60%0A%0A%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8%E5%85%A5%E5%8F%A3%E7%82%B9%E6%89%A7%E8%A1%8C%E7%9A%84%E5%91%BD%E4%BB%A4%E6%88%96%E8%84%9A%E6%9C%AC",
      "encoded": true
    },
    {
      "id": "s9-162",
      "sectionId": "s9",
      "title": "image%3Apull_policy",
      "body": "%60%60%60yml%0Ajob1%3A%0A%20%20script%3A%20echo%20%22%E5%8D%95%E4%B8%80%E6%8B%89%E5%8A%A8%E6%94%BF%E7%AD%96%22%0A%20%20image%3A%0A%20%20%20%20name%3A%20ruby%3A3.0%0A%20%20%20%20pull_policy%3A%20if-not-present%0A%0Ajob2%3A%0A%20%20script%3A%20echo%20%22%E5%A4%9A%E9%87%8D%E6%8B%89%E5%8A%A8%E6%94%BF%E7%AD%96%22%0A%20%20image%3A%0A%20%20%20%20name%3A%20ruby%3A3.0%0A%20%20%20%20pull_policy%3A%20%5Balways%2C%20if-not-present%5D%0A%60%60%60%0A%0A%E8%BF%90%E8%A1%8C%E5%99%A8%E7%94%A8%E4%BA%8E%E8%8E%B7%E5%8F%96%20Docker%20%E6%98%A0%E5%83%8F%E7%9A%84%E6%8B%89%E5%8F%96%E7%AD%96%E7%95%A5",
      "encoded": true
    },
    {
      "id": "s10-164",
      "sectionId": "s10",
      "title": "needs:artifacts",
      "body": "当作业使用需求时，它不再默认下载先前阶段的所有工件，因为有需求的作业可以在早期阶段完成之前开始\n\n```yml\ntest-job1:\n  stage: test\n  needs:\n    - job: build_job1\n      artifacts: true\n\ntest-job2:\n  stage: test\n  needs:\n    - job: build_job2\n      artifacts: false\n\ntest-job3:\n  needs:\n    - job: build_job1\n      artifacts: true\n    - job: build_job2\n    - build_job3\n```"
    },
    {
      "id": "s10-166",
      "sectionId": "s10",
      "title": "needs:project",
      "body": "使用 `needs:project` 从其他管道中的最多五个作业下载工件。工件是从指定参考的最新成功管道下载的。要指定多个作业，请将每个作业作为单独的数组项添加到 needs 关键字下\n\n```yml\nbuild_job:\n  stage: build\n  script:\n    - ls -lhR\n  needs:\n    - project: namespace/group/project-name\n      job: build-1\n      ref: main\n      artifacts: true\n    - project: namespace/group/project-name-2\n      job: build-2\n      ref: main\n      artifacts: true\n```"
    },
    {
      "id": "s10-168",
      "sectionId": "s10",
      "title": "needs%3Apipeline%3Ajob",
      "body": "%60%60%60yml%0Acreate-artifact%3A%0A%20%20stage%3A%20build%0A%20%20script%3A%20echo%20%22sample%20artifact%22%20%3E%20artifact.txt%0A%20%20artifacts%3A%0A%20%20%20%20paths%3A%20%5Bartifact.txt%5D%0A%0Achild-pipeline%3A%0A%20%20stage%3A%20test%0A%20%20trigger%3A%0A%20%20%20%20include%3A%20child.yml%0A%20%20%20%20strategy%3A%20depend%0A%20%20variables%3A%0A%20%20%20%20PARENT_PIPELINE_ID%3A%20%24CI_PIPELINE_ID%0A%60%60%60%0A%0A%E5%AD%90%E7%AE%A1%E9%81%93%E5%8F%AF%E4%BB%A5%E4%BB%8E%E5%85%B6%E7%88%B6%E7%AE%A1%E9%81%93%E4%B8%AD%E7%9A%84%E4%BD%9C%E4%B8%9A%E6%88%96%E5%90%8C%E4%B8%80%E7%88%B6%E5%AD%90%E7%AE%A1%E9%81%93%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%E4%B8%AD%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%AD%90%E7%AE%A1%E9%81%93%E4%B8%8B%E8%BD%BD%E5%B7%A5%E4%BB%B6",
      "encoded": true
    },
    {
      "id": "s10-170",
      "sectionId": "s10",
      "title": "needs:optional",
      "body": "要需要管道中有时不存在的作业，请将 `optional: true` 添加到需求配置中。如果未定义，则可选：默认为 `false`\n\n```yml\nbuild-job:\n  stage: build\n\ntest-job1:\n  stage: test\n\ntest-job2:\n  stage: test\n  rules:\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n\ndeploy-job:\n  stage: deploy\n  needs:\n    - job: test-job2\n      optional: true\n    - job: test-job1\n  environment: production\n\nreview-job:\n  stage: deploy\n  needs:\n    - job: test-job2\n      optional: true\n  environment: review\n```"
    },
    {
      "id": "s10-172",
      "sectionId": "s10",
      "title": "needs:pipeline",
      "body": "您可以使用 `needs:pipeline` 关键字将管道状态从上游管道镜像到桥接作业\n\n```yml\nupstream_bridge:\n  stage: test\n  needs:\n    pipeline: other/project\n```"
    },
    {
      "id": "s11-174",
      "sectionId": "s11",
      "title": "only:refs / except:refs",
      "body": "```yml\njob1:\n  script: echo\n  only:\n    - main\n    - /^issue-.*$/\n    - merge_requests\n\njob2:\n  script: echo\n  except:\n    - main\n    - /^stable-branch.*$/\n    - schedules\n```\n\n使用 `only:refs` 和 `except:refs` 关键字来控制何时根据分支名称或管道类型将作业添加到管道"
    },
    {
      "id": "s11-176",
      "sectionId": "s11",
      "title": "only%3Avariables%20%2F%20except%3Avariables",
      "body": "%60%60%60yml%0Adeploy%3A%0A%20%20script%3A%20cap%20staging%20deploy%0A%20%20only%3A%0A%20%20%20%20variables%3A%0A%20%20%20%20%20%20-%20%24RELEASE%20%3D%3D%20%22staging%22%0A%20%20%20%20%20%20-%20%24STAGING%0A%60%60%60%0A%0A%E6%A0%B9%E6%8D%AE%20CI%2FCD%20%E5%8F%98%E9%87%8F%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%8C%E4%BD%BF%E7%94%A8%20only%3Avariables%20%E6%88%96%20except%3Avariables%20%E5%85%B3%E9%94%AE%E5%AD%97%E6%9D%A5%E6%8E%A7%E5%88%B6%E4%BD%95%E6%97%B6%E5%B0%86%E4%BD%9C%E4%B8%9A%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%AE%A1%E9%81%93",
      "encoded": true
    },
    {
      "id": "s11-178",
      "sectionId": "s11",
      "title": "only%3Achanges%20%2F%20except%3Achanges",
      "body": "%60%60%60yml%0Adocker%20build%3A%0A%20%20script%3A%20docker%20build%20-t%20my-image%3A%24CI_COMMIT_REF_SLUG%20.%0A%20%20only%3A%0A%20%20%20%20refs%3A%0A%20%20%20%20%20%20-%20branches%0A%20%20%20%20changes%3A%0A%20%20%20%20%20%20-%20Dockerfile%0A%20%20%20%20%20%20-%20docker%2Fscripts%2F*%0A%20%20%20%20%20%20-%20dockerfiles%2F**%2F*%0A%20%20%20%20%20%20-%20more_scripts%2F*.%7Brb%2Cpy%2Csh%7D%0A%20%20%20%20%20%20-%20%22**%2F*.json%22%0A%60%60%60%0A%0A%E5%BD%93%20%60Git%60%20%E6%8E%A8%E9%80%81%E4%BA%8B%E4%BB%B6%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%97%B6%EF%BC%8C%E4%BD%BF%E7%94%A8%20%60changes%60%20%E5%85%B3%E9%94%AE%E5%AD%97%E4%BB%85%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A%EF%BC%8C%E6%88%96%E4%BD%BF%E7%94%A8%20%60except%60%20%E8%B7%B3%E8%BF%87%E4%BD%9C%E4%B8%9A",
      "encoded": true
    },
    {
      "id": "s11-180",
      "sectionId": "s11",
      "title": "only:kubernetes / except:kubernetes",
      "body": "```yml\ndeploy:\n  only:\n    kubernetes: active\n```\n\n使用 `only:kubernetes` 或 `except:kubernetes` 来控制当 `Kubernetes` 服务在项目中处于活动状态时是否将作业添加到管道中"
    },
    {
      "id": "s12-182",
      "sectionId": "s12",
      "title": "release 参考",
      "body": ":- | --\n:- | --\n[release:tag_name](#releasetag_name) | 发布的 Git 标签\n[release:tag_message](#releasetag_message) | 指定的消息进行注释\n[release:name](#releasename) | 发布名称\n[release:description](#releasedescription) | 版本的详细描述\n[release:ref](#releaseref) | 发布的 ref\n[release:milestones](#releasemilestones) | 每个里程碑的标题\n[release:released_at](#releasereleased_at) | 发布准备就绪的日期和时间"
    },
    {
      "id": "s12-183",
      "sectionId": "s12",
      "title": "release%3Atag_name",
      "body": "%60%60%60yml%0Ajob%3A%0A%20%20script%3A%20echo%20%22%E4%B8%BA%E6%96%B0%E6%A0%87%E7%AD%BE%E8%BF%90%E8%A1%8C%E5%8F%91%E5%B8%83%E4%BD%9C%E4%B8%9A%22%0A%20%20release%3A%0A%20%20%20%20tag_name%3A%20%24CI_COMMIT_TAG%0A%20%20%20%20description%3A%20'Release%20description'%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_TAG%0A%60%60%60%0A%0A%E5%BF%85%E9%9C%80%E7%9A%84%E3%80%82%E5%8F%91%E5%B8%83%E7%9A%84%20Git%20%E6%A0%87%E7%AD%BE",
      "encoded": true
    },
    {
      "id": "s12-185",
      "sectionId": "s12",
      "title": "release%3Atag_message",
      "body": "%60%60%60yml%0Arelease_job%3A%0A%20%20stage%3A%20release%0A%20%20release%3A%0A%20%20%20%20tag_name%3A%20%24CI_COMMIT_TAG%0A%20%20%20%20description%3A%20'Release%20description'%0A%20%20%20%20tag_message%3A%20'Annotated%20tag%20message'%0A%60%60%60%0A%0A%E5%A6%82%E6%9E%9C%E6%A0%87%E7%AD%BE%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E6%96%B0%E5%88%9B%E5%BB%BA%E7%9A%84%E6%A0%87%E7%AD%BE%E5%B0%86%E4%BD%BF%E7%94%A8%20%60tag_message%60%20%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B6%88%E6%81%AF%E8%BF%9B%E8%A1%8C%E6%B3%A8%E9%87%8A",
      "encoded": true
    },
    {
      "id": "s12-187",
      "sectionId": "s12",
      "title": "release%3Aname",
      "body": "%60%60%60yml%0Arelease_job%3A%0A%20%20stage%3A%20release%0A%20%20release%3A%0A%20%20%20%20name%3A%20'Release%20%24CI_COMMIT_TAG'%0A%60%60%60%0A%0A%E5%8F%91%E5%B8%83%E5%90%8D%E7%A7%B0%E3%80%82%E5%A6%82%E6%9E%9C%E7%9C%81%E7%95%A5%EF%BC%8C%E5%AE%83%E4%BC%9A%E5%A1%AB%E5%85%85%20%60release%3Atag_name%60%20%E7%9A%84%E5%80%BC",
      "encoded": true
    },
    {
      "id": "s12-189",
      "sectionId": "s12",
      "title": "release%3Adescription",
      "body": "%60%60%60yml%0Ajob%3A%0A%20%20release%3A%0A%20%20%20%20tag_name%3A%20%24%7BMAJOR%7D_%24%7BMINOR%7D_%24%7BREVISION%7D%0A%20%20%20%20description%3A%20'.%2Fpath%2Fto%2FCHANGELOG.md'%0A%60%60%60%0A%0A%E7%89%88%E6%9C%AC%E7%9A%84%E8%AF%A6%E7%BB%86%E6%8F%8F%E8%BF%B0",
      "encoded": true
    },
    {
      "id": "s12-191",
      "sectionId": "s12",
      "title": "release:ref",
      "body": "发布的 ref，如果发布：`tag_name` 尚不存在"
    },
    {
      "id": "s12-192",
      "sectionId": "s12",
      "title": "release:milestones",
      "body": "与版本关联的每个里程碑的标题"
    },
    {
      "id": "s12-193",
      "sectionId": "s12",
      "title": "release%3Areleased_at",
      "body": "%60%60%60yml%0Areleased_at%3A%20'2021-03-15T08%3A00%3A00Z'%0A%60%60%60%0A%0A%E5%8F%91%E5%B8%83%E5%87%86%E5%A4%87%E5%B0%B1%E7%BB%AA%E7%9A%84%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4",
      "encoded": true
    },
    {
      "id": "s12-195",
      "sectionId": "s12",
      "title": "release%3Aassets%3Alinks",
      "body": "%60%60%60yml%0Aassets%3A%0A%20%20links%3A%0A%20%20%20%20-%20name%3A%20'asset1'%0A%20%20%20%20%20%20url%3A%20'https%3A%2F%2Fexample.com%2Fassets%2F1'%0A%20%20%20%20-%20name%3A%20'asset2'%0A%20%20%20%20%20%20url%3A%20'https%3A%2F%2Fexample.com%2Fassets%2F2'%0A%20%20%20%20%20%20filepath%3A%20'%2Fpretty%2Furl%2F1'%20%23%20%E5%8F%AF%E9%80%89%E7%9A%84%0A%20%20%20%20%20%20link_type%3A%20'other'%20%23%20%E5%8F%AF%E9%80%89%E7%9A%84%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60release%3Aassets%3Alinks%60%20%E5%9C%A8%E5%8F%91%E5%B8%83%E4%B8%AD%E5%8C%85%E5%90%AB%E8%B5%84%E4%BA%A7%E9%93%BE%E6%8E%A5",
      "encoded": true
    },
    {
      "id": "s13-197",
      "sectionId": "s13",
      "title": "rules%3Aif",
      "body": "%60%60%60yml%0Ajob%3A%0A%20%20script%3A%20echo%20%22Hello%2C%20Rules!%22%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_MERGE_REQUEST_SOURCE_BRANCH_NAME%20%3D~%20%2F%5Efeature%2F%20%26%26%20%24CI_MERGE_REQUEST_TARGET_BRANCH_NAME%20!%3D%20%24CI_DEFAULT_BRANCH%0A%20%20%20%20%20%20when%3A%20never%0A%20%20%20%20-%20if%3A%20%24CI_MERGE_REQUEST_SOURCE_BRANCH_NAME%20%3D~%20%2F%5Efeature%2F%0A%20%20%20%20%20%20when%3A%20manual%0A%20%20%20%20%20%20allow_failure%3A%20true%0A%20%20%20%20-%20if%3A%20%24CI_MERGE_REQUEST_SOURCE_BRANCH_NAME%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60rules%3Aif%60%20%E5%AD%90%E5%8F%A5%E6%8C%87%E5%AE%9A%E4%BD%95%E6%97%B6%E5%B0%86%E4%BD%9C%E4%B8%9A%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%AE%A1%E9%81%93",
      "encoded": true
    },
    {
      "id": "s13-199",
      "sectionId": "s13",
      "title": "rules%3Achanges",
      "body": "%60%60%60yml%0Adocker%20build%3A%0A%20%20script%3A%20docker%20build%20-t%20my-image%3A%24CI_COMMIT_REF_SLUG%20.%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22%0A%20%20%20%20%20%20changes%3A%0A%20%20%20%20%20%20%20%20-%20Dockerfile%0A%20%20%20%20%20%20when%3A%20manual%0A%20%20%20%20%20%20allow_failure%3A%20true%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60rules%3Achanges%60%20%E9%80%9A%E8%BF%87%E6%A3%80%E6%9F%A5%E5%AF%B9%E7%89%B9%E5%AE%9A%E6%96%87%E4%BB%B6%E7%9A%84%E6%9B%B4%E6%94%B9%E6%9D%A5%E6%8C%87%E5%AE%9A%E4%BD%95%E6%97%B6%E5%B0%86%E4%BD%9C%E4%B8%9A%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%AE%A1%E9%81%93",
      "encoded": true
    },
    {
      "id": "s13-201",
      "sectionId": "s13",
      "title": "rules%3Achanges%3Apaths",
      "body": "%60%60%60yml%0Adocker-build-1%3A%0A%20%20script%3A%20docker%20build%20-t%20my-image%3A%24CI_COMMIT_REF_SLUG%20.%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22%0A%20%20%20%20%20%20changes%3A%0A%20%20%20%20%20%20%20%20-%20Dockerfile%0A%0Adocker-build-2%3A%0A%20%20script%3A%20docker%20build%20-t%20my-image%3A%24CI_COMMIT_REF_SLUG%20.%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22%0A%20%20%20%20%20%20changes%3A%0A%20%20%20%20%20%20%20%20paths%3A%0A%20%20%20%20%20%20%20%20%20%20-%20Dockerfile%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60rules%3Achanges%60%20%E6%8C%87%E5%AE%9A%E4%BB%85%E5%9C%A8%E6%9B%B4%E6%94%B9%E7%89%B9%E5%AE%9A%E6%96%87%E4%BB%B6%E6%97%B6%E5%B0%86%E4%BD%9C%E4%B8%9A%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%AE%A1%E9%81%93%EF%BC%8C%E5%B9%B6%E4%BD%BF%E7%94%A8%20%60rules%3Achanges%3Apaths%60%20%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6",
      "encoded": true
    },
    {
      "id": "s13-203",
      "sectionId": "s13",
      "title": "rules%3Achanges%3Acompare_to",
      "body": "%60%60%60yml%0Adocker%20build%3A%0A%20%20script%3A%20docker%20build%20-t%20my-image%3A%24CI_COMMIT_REF_SLUG%20.%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_PIPELINE_SOURCE%20%3D%3D%20%22merge_request_event%22%0A%20%20%20%20%20%20changes%3A%0A%20%20%20%20%20%20%20%20paths%3A%0A%20%20%20%20%20%20%20%20%20%20-%20Dockerfile%0A%20%20%20%20%20%20%20%20compare_to%3A%20'refs%2Fheads%2Fbranch1'%0A%60%60%60%0A%0A%E4%BD%BF%E7%94%A8%20%60rules%3Achanges%3Acompare_to%60%20%E6%8C%87%E5%AE%9A%E8%A6%81%E6%AF%94%E8%BE%83%E5%93%AA%E4%B8%AA%20%60ref%60%20%E6%9D%A5%E6%AF%94%E8%BE%83%20%60rules%3Achanges%3Apaths%60%20%E4%B8%8B%E5%88%97%E5%87%BA%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E6%9B%B4%E6%94%B9",
      "encoded": true
    },
    {
      "id": "s13-205",
      "sectionId": "s13",
      "title": "rules:exists",
      "body": "```yml\njob:\n  script: docker build -t my-image:$CI_COMMIT_REF_SLUG .\n  rules:\n    - exists:\n        - Dockerfile\n```\n\n当存储库中存在某些文件时，使用 `exists` 运行作业"
    },
    {
      "id": "s13-207",
      "sectionId": "s13",
      "title": "rules%3Aallow_failure",
      "body": "%60%60%60yml%0Ajob%3A%0A%20%20script%3A%20echo%20%22Hello%2C%20Rules!%22%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_MERGE_REQUEST_TARGET_BRANCH_NAME%20%3D%3D%20%24CI_DEFAULT_BRANCH%0A%20%20%20%20%20%20when%3A%20manual%0A%20%20%20%20%20%20allow_failure%3A%20true%0A%60%60%60%0A%0A%E5%9C%A8%E8%A7%84%E5%88%99%E4%B8%AD%E4%BD%BF%E7%94%A8%20%60allow_failure%3A%20true%60%20%E5%85%81%E8%AE%B8%E4%BD%9C%E4%B8%9A%E5%A4%B1%E8%B4%A5%E8%80%8C%E4%B8%8D%E5%81%9C%E6%AD%A2%E7%AE%A1%E9%81%93",
      "encoded": true
    },
    {
      "id": "s13-209",
      "sectionId": "s13",
      "title": "rules%3Avariables",
      "body": "%60%60%60yml%0Ajob%3A%0A%20%20variables%3A%0A%20%20%20%20DEPLOY_VARIABLE%3A%20%22default-deploy%22%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_REF_NAME%20%3D%3D%20%24CI_DEFAULT_BRANCH%0A%20%20%20%20%20%20variables%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E8%A6%86%E7%9B%96%E5%AE%9A%E4%B9%89%E7%9A%84%20DEPLOY_VARIABLE%0A%20%20%20%20%20%20%20%20DEPLOY_VARIABLE%3A%20%22deploy-production%22%20%20%23%20%E5%9C%A8%E5%B7%A5%E4%BD%9C%E5%B1%82%E9%9D%A2%0A%20%20%20%20-%20if%3A%20%24CI_COMMIT_REF_NAME%20%3D~%20%2Ffeature%2F%0A%20%20%20%20%20%20variables%3A%0A%20%20%20%20%20%20%20%20IS_A_FEATURE%3A%20%22true%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%96%B0%E5%8F%98%E9%87%8F%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E4%BB%A5%20%24DEPLOY_VARIABLE%20%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%22%0A%20%20%20%20-%20echo%20%22%E5%A6%82%E6%9E%9C%20%24IS_A_FEATURE%20%E5%AD%98%E5%9C%A8%E5%88%99%E8%BF%90%E8%A1%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%22%0A%60%60%60%0A%0A%E5%9C%A8%E8%A7%84%E5%88%99%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E6%9D%A5%E4%B8%BA%E7%89%B9%E5%AE%9A%E6%9D%A1%E4%BB%B6%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F",
      "encoded": true
    },
    {
      "id": "s14-211",
      "sectionId": "s14",
      "title": "另见",
      "body": "• [.gitlab-ci.yml 关键字参考](https://docs.gitlab.com/ee/ci/yaml/)"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/gitlab-ci.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/gitlab-ci.md",
    "lang": "zh",
    "mode": "local"
  }
}