{
  "id": "ssh",
  "name": "SSH 备忘清单",
  "title": "此快速参考备忘单提供了使用 SSH 的各种方法。",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/ssh.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "SSH keygen",
      "startIndex": 40
    },
    {
      "id": "s3",
      "title": "端口转发",
      "startIndex": 59
    },
    {
      "id": "s4",
      "title": "另见",
      "startIndex": 75
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "此快速参考备忘单提供了使用 SSH 的各种方法。"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "连接",
      "kind": "text",
      "body": "连接到服务器（默认端口 22）"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh root@192.168.1.5"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "在特定端口上连接"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh root@192.168.1.5 -p 6222"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "通过 pem 文件连接（0400 权限）"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -i /path/file.pem root@192.168.1.5"
    },
    {
      "id": "s1-7",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "请参阅：[SSH 权限](./chmod.md#ssh-权限)"
    },
    {
      "id": "s1-8",
      "sectionId": "s1",
      "title": "执行",
      "kind": "text",
      "body": "执行远程命令"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh root@192.168.1.5 'ls -l'"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "调用本地脚本"
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh root@192.168.1.5 bash < script.sh"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "从服务器压缩和下载"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ssh%20root%40192.168.1.5%20%22tar%20cvzf%20-%20~%2Fsource%22%20%3E%20output.tgz",
      "encoded": true
    },
    {
      "id": "s1-14",
      "sectionId": "s1",
      "title": "SCP",
      "kind": "text",
      "body": "从远程复制到本地"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp user@server:/dir/file.ext dest/"
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "两台服务器之间的副本"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp user@server:/file user@server:/dir"
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "从本地复制到远程"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp dest/file.ext user@server:/dir"
    },
    {
      "id": "s1-20",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "复制整个文件夹"
    },
    {
      "id": "s1-21",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp -r user@server:/dir dest/"
    },
    {
      "id": "s1-22",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "复制文件夹中的所有文件"
    },
    {
      "id": "s1-23",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp user@server:/dir/* dest/"
    },
    {
      "id": "s1-24",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "从服务器文件夹复制到当前文件夹"
    },
    {
      "id": "s1-25",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ scp user@server:/dir/* ."
    },
    {
      "id": "s1-26",
      "sectionId": "s1",
      "title": "配置位置",
      "kind": "text",
      "body": "文件路径 | 说明\n:-|-\n`/etc/ssh/ssh_config`    | 系统范围的配置\n`~/.ssh/config`          | 用户特定的配置\n`~/.ssh/id_{type}`       | 私钥\n`~/.ssh/id_{type}.pub`   | 公钥\n`~/.ssh/known_hosts`     | 登录主机\n`~/.ssh/authorized_keys` | 授权登录密钥"
    },
    {
      "id": "s1-27",
      "sectionId": "s1",
      "title": "SCP 选项",
      "kind": "text",
      "body": "选项 | 说明\n:-|-\nscp `-r`      | 递归复制整个目录\nscp `-C`      | 压缩数据\nscp `-v`      | 打印详细信息\nscp `-P` 8080 | 使用特定端口\nscp `-B`      | 批处理模式_（防止密码）_\nscp `-p`      | 保留时间和模式"
    },
    {
      "id": "s1-28",
      "sectionId": "s1",
      "title": "配置示例",
      "kind": "code",
      "lang": "toml",
      "code": "Host server1 \n    HostName 192.168.1.5\n    User root\n    Port 22\n    IdentityFile ~/.ssh/server1.key"
    },
    {
      "id": "s1-29",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "通过别名启动"
    },
    {
      "id": "s1-30",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh server1"
    },
    {
      "id": "s1-31",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "请参阅：完整 [配置选项](https://linux.die.net/man/5/ssh_config)"
    },
    {
      "id": "s1-32",
      "sectionId": "s1",
      "title": "ProxyJump",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -J proxy_host1 remote_host2\n\n$ ssh -J user@proxy_host1 user@remote_host2"
    },
    {
      "id": "s1-33",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "多次跳跃"
    },
    {
      "id": "s1-34",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -J user@proxy_host1:port1,user@proxy_host2:port2 user@remote_host3"
    },
    {
      "id": "s1-35",
      "sectionId": "s1",
      "title": "ssh-copy-id",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-copy-id user@server"
    },
    {
      "id": "s1-36",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "复制到别名服务器"
    },
    {
      "id": "s1-37",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-copy-id server1"
    },
    {
      "id": "s1-38",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "复制特定密钥"
    },
    {
      "id": "s1-39",
      "sectionId": "s1",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@server"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "ssh-keygen",
      "kind": "code",
      "lang": "shell",
      "code": "%24%20ssh-keygen%20-t%20rsa%20-b%204096%20-C%20%22your%40mail.com%22",
      "encoded": true
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "| - | -    | -                             |\n|---|------|-------------------------------|\n|   | `-t` | [类型](#钥匙类型) 键 |\n|   | `-b` | 密钥中的位数 |\n|   | `-C` | 提供新评论 |"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "生成带有电子邮件作为注释的 RSA 4096 位密钥"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "产生",
      "kind": "text",
      "body": "以交互方式生成密钥"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "指定文件名"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -f ~/.ssh/filename"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "从私钥生成公钥"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -y -f private.key > public.pub"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "更改评论"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -c -f ~/.ssh/id_rsa"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "更改私钥密码"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -p -f ~/.ssh/id_rsa"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "钥匙类型",
      "kind": "text",
      "body": "• rsa\n• ed25519\n• dsa\n• ecdsa"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "known_hosts",
      "kind": "text",
      "body": "从 known_hosts 搜索"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -F <ip/hostname>"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "从 known_hosts 中删除"
    },
    {
      "id": "s2-57",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh-keygen -R <ip/hostname>"
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "密钥格式",
      "kind": "text",
      "body": "• PEM\n• PKCS8"
    },
    {
      "id": "s3-59",
      "sectionId": "s3",
      "title": "动态端口转发语法",
      "kind": "text",
      "body": "将本地端口变成一个 SOCKS 代理，自动转发任意目标地址的请求（适用于代理上网）。"
    },
    {
      "id": "s3-60",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -D 本地SOCKS端口 用户名@SSH服务器 -N"
    },
    {
      "id": "s3-61",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "示例：开启本地 1080 端口作为 SOCKS5 代理："
    },
    {
      "id": "s3-62",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -D 1080 -N user@example.com"
    },
    {
      "id": "s3-63",
      "sectionId": "s3",
      "title": "验证 SOCKS5 代理",
      "kind": "text",
      "body": "使用 curl 命令验证 SOCKS5 代理是否工作正常："
    },
    {
      "id": "s3-64",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "# 设置\n$ ssh -D 1080 -N user@example.com\n# 验证\n$ curl --socks5 127.0.0.1:1080 https://ifconfig.me"
    },
    {
      "id": "s3-65",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "如果返回的是 `example.com` 服务器的公网 IP，说明 SOCKS5 代理正常工作。"
    },
    {
      "id": "s3-66",
      "sectionId": "s3",
      "title": "本地端口转发",
      "kind": "text",
      "body": "将本地端口的流量通过 SSH 隧道转发到目标服务器（适用于访问远程/内网服务）。"
    },
    {
      "id": "s3-67",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -L [本地IP:]本地端口:目标IP:目标端口 用户名@SSH服务器 -N"
    },
    {
      "id": "s3-68",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "示例：将本地的 `4000` 端口转发到远程内网服务器 192.168.1.10:80："
    },
    {
      "id": "s3-69",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -L 4000:192.168.1.10:80 user@example.com -N"
    },
    {
      "id": "s3-70",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "其中 `-N` 表示不执行远程命令，只是建立隧道。"
    },
    {
      "id": "s3-71",
      "sectionId": "s3",
      "title": "远程端口转发",
      "kind": "text",
      "body": "让远程 SSH 服务器上的端口转发到本地的某个服务（适用于让外部访问你本地服务）。"
    },
    {
      "id": "s3-72",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -R [SSH服务器IP:]远程端口:本地IP:本地端口 用户名@SSH服务器 -N"
    },
    {
      "id": "s3-73",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "示例：将远程服务器的 5000 端口映射到你本地的 localhost:3306（MySQL）："
    },
    {
      "id": "s3-74",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "$ ssh -R 5000:localhost:3306 user@example.com -N"
    },
    {
      "id": "s4-75",
      "sectionId": "s4",
      "title": "另见",
      "kind": "text",
      "body": "• [OpenSSH 配置文件示例](https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/) _(cyberciti.biz)_\n• [ssh_config](https://linux.die.net/man/5/ssh_config) _(linux.die.net)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/ssh.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/ssh.md",
    "lang": "zh",
    "mode": "local"
  }
}