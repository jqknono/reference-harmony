{
  "id": "adb",
  "name": "Android Debug Bridge 备忘清单",
  "title": "[ADB](https://developer.android.com/studio/command-line/adb.html) 既 Android Debug Bridge，是 Google 的 Android SDK 中的一个命令行工具，可让您的计算机控制 Android 设备执行各种设备操作。以下是您可以与 [ADB](https://developer.android.com/studio/command-line/adb.html) 一起使用的一些最常见的命令及其用法",
  "icon": "reference/icons/zh/adb.svg",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "入门",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "常见的 ADB 命令",
      "startIndex": 20
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "body": "[ADB](https://developer.android.com/studio/command-line/adb.html) 既 Android Debug Bridge，是 Google 的 Android SDK 中的一个命令行工具，可让您的计算机控制 Android 设备执行各种设备操作。以下是您可以与 [ADB](https://developer.android.com/studio/command-line/adb.html) 一起使用的一些最常见的命令及其用法"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "设备基础",
      "body": ":-- | --\n:-- | --\n`adb devices`                     | 列出已连接的设备\n`adb devices -l`                  | 列出已连接的设备和种类\n`adb connect [IP:PORT]`           | 连接到指定 IP 和端口的设备\n`adb disconnect [IP:PORT]`        | 断开指定 IP 和端口的设备连接，若未指定，则断开所有连接\n`adb root`                        | 以 `root` 权限重新启动 `adbd`\n`adb start-server`                | 启动 `adb` 服务\n`adb kill-server`                 | 停止 `adb` 服务\n`adb remount`                     | 重新挂载具有读/写访问权限的文件系统\n`adb reboot`                      | 重启设备\n`adb reboot bootloader`           | 将设备重启到 fastboot 模式\n`adb reboot recovery`             | 将设备重启到恢复模式\n`adb disable-verity`              | 禁用设备的 dm-verity 安全特性\n<!--rehype:className=left-align code-nowrap-->\n\n• `wait-for-device` 可以在 `adb` 之后指定，以确保该命令在设备连接后运行\n• `-s` 可用于在多个连接时将命令发送到特定设备"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "示例",
      "body": "```bash\n$ adb wait-for-device devices\n List of devices attached\n somedevice-1234 device\n someotherdevice-1234 device\n```\n\n```bash\n$ adb -s somedevice-1234 root\n```"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "Logcat",
      "body": ":-- | --\n:-- | --\n`adb logcat`                         | 将日志消息打印到标准输出\n`adb logcat -g`                      | 显示当前日志缓冲区大小\n`adb logcat -G <size>`               | 设置缓冲区大小（K 或 M）\n`adb logcat -c`                      | 清除日志缓冲区\n`adb logcat *:V`                     | 启用所有日志消息（详细）\n`adb logcat -f <filename>`           | 将日志转储到指定文件\n<!--rehype:className=left-align code-nowrap-->"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "示例",
      "body": "```bash\n$ adb logcat -G 16M\n$ adb logcat *:V > output.log\n```"
    },
    {
      "id": "s1-6",
      "sectionId": "s1",
      "title": "过滤日志输出",
      "body": "• `V` 最详细的信息(最低优先级)\n• `D` 调试信息\n• `I` 普通信息\n• `W` 警告信息\n• `E` 错误信息\n• `F` 致命错误信息\n• `S` 静默(最高优先级)\n\n例如，要显示优先级不低于 `警告` 的所有标记的所有日志消息，可以使用以下命令：\n\n```bash\n$ adb logcat *:W\n```"
    },
    {
      "id": "s1-9",
      "sectionId": "s1",
      "title": "文件管理",
      "body": ":-- | --\n:-- | --\n`adb push <local> <remote>` | 将本地文件复制到远程设备\n`adb pull <remote> <local>` | 将远程设备文件复制到本地\n<!--rehype:className=left-align code-nowrap-->"
    },
    {
      "id": "s1-10",
      "sectionId": "s1",
      "title": "%E7%A4%BA%E4%BE%8B",
      "body": "%60%60%60bash%0A%24%20echo%20%22This%20is%20a%20test%22%20%3E%20test.txt%0A%24%20adb%20push%20%20test.txt%20%2Fsdcard%2Ftest.txt%0A%24%20adb%20pull%20%2Fsdcard%2Ftest.txt%20pulledTest.txt%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s1-11",
      "sectionId": "s1",
      "title": "远程 Shell",
      "body": ":-- | --\n:-- | --\n`adb shell <command>`                  | 在设备上运行指定的命令（大多数 Unix 命令在这里工作）\n`adb shell wm size`                    | 显示当前屏幕分辨率\n`adb shell wm size WxH`                | 将分辨率设置为 WxH\n`adb shell pm list packages`           | 列出所有已安装的应用包\n`adb shell pm list packages -3`        | 列出所有已安装的第三方的应用包\n`adb shell monkey -p app.package.name <count>` | 启动指定包名的应用程序, 并执行测试\n<!--rehype:className=style-list-arrow-->"
    },
    {
      "id": "s1-12",
      "sectionId": "s1",
      "title": "包安装",
      "body": ":-- | --\n:-- | --\n`adb install <apk>`          | 安装应用程序\n`adb install <path>`         | 从手机路径安装应用\n`adb install -r <path>`      | 从手机路径安装应用（允许覆盖安装）\n`adb uninstall <name>`       | 卸载应用程序\n<!--rehype:className=left-align code-nowrap-->"
    },
    {
      "id": "s1-13",
      "sectionId": "s1",
      "title": "Paths",
      "body": ":-- | --\n:-- | --\n`/data/data/<package>/databases` | 应用程序数据库\n`/data/data/<package>/shared_prefs/` | 共享偏好设置\n`/data/app` | 用户安装的 APK\n`/system/app` | 系统预装的 APK 文件\n`/mnt/asec` | 加密的应用程序（App2SD）\n`/mnt/emmc` | 内部 SD 卡\n`/mnt/sdcard` | 外部/内部 SD 卡\n`/mnt/sdcard/external_sd` | 外置 SD 卡\n<!--rehype:className=style-list-arrow-->\n\n:-- | --\n:-- | --\n`adb shell ls` | 列出目录内容\n`adb shell ls -s` | 每个文件的打印尺寸\n`adb shell ls -R` | 递归列出子目录\n<!--rehype:className=left-align code-nowrap-->"
    },
    {
      "id": "s1-15",
      "sectionId": "s1",
      "title": "%E6%89%8B%E6%9C%BA%E4%BF%A1%E6%81%AF",
      "body": "%3A--%20%7C%20--%0A%3A--%20%7C%20--%0A%60adb%20get-stat%D0%B5%60%20%7C%20%E6%89%93%E5%8D%B0%E8%AE%BE%E5%A4%87%E7%8A%B6%E6%80%81%0A%60adb%20get-serialno%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9A%84%E5%BA%8F%E5%88%97%E5%8F%B7%0A%60adb%20shell%20dumpsys%20iphonesybinfo%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9A%84%20IMEI%20%E4%BF%A1%E6%81%AF%0A%60adb%20shell%20netstat%60%20%7C%20%E5%88%97%E5%87%BA%E8%AE%BE%E5%A4%87%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%20TCP%20%E8%BF%9E%E6%8E%A5%0A%60adb%20shell%20pwd%60%20%7C%20%E6%89%93%E5%8D%B0%E5%BD%93%E5%89%8D%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95%0A%60adb%20shell%20dumpsys%20battery%60%20%7C%20%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81%0A%60adb%20shell%20pm%20list%20features%60%20%7C%E5%88%97%E5%87%BA%E8%AE%BE%E5%A4%87%E6%94%AF%E6%8C%81%E7%9A%84%E6%89%80%E6%9C%89%E5%8A%9F%E8%83%BD%0A%60adb%20shell%20service%20list%60%20%7C%20%E5%88%97%E5%87%BA%E8%AE%BE%E5%A4%87%E4%B8%8A%E8%BF%90%E8%A1%8C%E7%9A%84%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%0A%60adb%20shell%20dumpsys%20activity%20%3Cpackage%3E%2F%3Cactivity%3E%60%20%7C%20%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E5%8C%85%E5%92%8C%E6%B4%BB%E5%8A%A8%E7%9A%84%E4%BF%A1%E6%81%AF%0A%60adb%20shell%20ps%60%20%7C%20%E6%89%93%E5%8D%B0%E8%AE%BE%E5%A4%87%E4%B8%8A%E6%89%80%E6%9C%89%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%0A%60adb%20shell%20wm%20size%60%20%7C%20%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B1%8F%E5%B9%95%E5%88%86%E8%BE%A8%E7%8E%87%0A%60dumpsys%20window%20windows%60%20%5C%7C%20%60grep%20-E%20'mCurrentFocus%5C%7CmFocusedApp'%60%20%7C%20%E6%89%93%E5%8D%B0%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%93%E5%BC%80%E6%B4%BB%E5%8A%A8%E7%9A%84%E4%BF%A1%E6%81%AF%0A%3C!--rehype%3AclassName%3Dstyle-list-arrow--%3E",
      "encoded": true
    },
    {
      "id": "s1-16",
      "sectionId": "s1",
      "title": "包信息",
      "body": ":-- | --\n:-- | --\n`adb shell pm list packages` | 列出包名称\n`adb shell pm list packages -f` | 列出包名 + apks 的路径\n`adb shell pm list packages -3` | 列出第三方包名称\n`adb shell pm list packages -s` | 仅列出系统包\n`adb shell pm list packages -u` | 列出出包和未安装包\n`adb shell pm list packages -i` | 列出包名称 + 安装来源\n`adb shell pm list packages -e` | 列出启用的包\n`adb shell pm list packages -d` | 列出禁用的包\n`adb shell dumpsys package packages` | 列出所有应用程序的信息\n`adb shell dumpsys package <name>` | 列出一个包的信息\n`adb shell pm path <package>` | 列出 APK 文件的路径\n<!--rehype:className=style-list-arrow-->"
    },
    {
      "id": "s1-17",
      "sectionId": "s1",
      "title": "%E8%AE%BE%E5%A4%87%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4",
      "body": "%3A--%20%7C%20--%0A%3A--%20%7C%20--%0A%60adb%20reboot%20recovery%60%20%7C%20%E9%87%8D%E5%90%AF%E8%AE%BE%E5%A4%87%E8%BF%9B%E5%85%A5%E6%81%A2%E5%A4%8D%E6%A8%A1%E5%BC%8F%0A%60adb%20reboot%20fastboot%60%20%7C%20%E9%87%8D%E5%90%AF%E8%AE%BE%E5%A4%87%E8%BF%9B%E5%85%A5%E6%81%A2%E5%A4%8D%E6%A8%A1%E5%BC%8F%0A%60adb%20shell%20screencap%20-p%20%22%2Fpath%2Fto%2Fscreenshot.png%22%60%20%7C%20%E6%88%AA%E5%9B%BE%0A%60adb%20shell%20screenrecord%20%22%2Fpath%2Fto%2Frecord.mp4%22%60%20%7C%20%E5%BD%95%E5%88%B6%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%0A%60adb%20backup%20-apk%20-all%20-f%20backup.ab%60%20%7C%20%E5%A4%87%E4%BB%BD%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%0A%60adb%20backup%20-apk%20-shared%20-all%20-f%20backup.ab%60%20%7C%20%E5%A4%87%E4%BB%BD%E8%AE%BE%E7%BD%AE%E3%80%81%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%92%8C%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8%0A%60adb%20backup%20-apk%20-nosystem%20-all%20-f%20backup.ab%60%20%7C%20%E4%BB%85%E5%A4%87%E4%BB%BD%E9%9D%9E%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%0A%60adb%20restore%20backup.ab%60%20%7C%20%E6%81%A2%E5%A4%8D%E4%BB%A5%E5%89%8D%E7%9A%84%E5%A4%87%E4%BB%BD%0A%60adb%20shell%20am%20start%20-a%20android.intent.action.VIEW%20-d%20URL%60%20%7C%20%E6%89%93%E5%BC%80%E7%BD%91%E5%9D%80%0A%60adb%20shell%20am%20start%20-t%20image%2F*%20-a%20android.intent.action.VIEW%60%20%7C%20%E6%89%93%E5%BC%80%E7%94%BB%E5%BB%8A%0A%3C!--rehype%3AclassName%3Dcode-nowrap%20left-align--%3E",
      "encoded": true
    },
    {
      "id": "s1-18",
      "sectionId": "s1",
      "title": "权限",
      "body": ":-- | --\n:-- | --\n`adb shell permissions groups` | 列出所有已定义的权限组\n`adb shell list permissions -g -r` | 列出了所有权限的详细信息\n<!--rehype:className=style-list-arrow-->"
    },
    {
      "id": "s1-19",
      "sectionId": "s1",
      "title": "Logs",
      "body": ":-- | --\n:-- | --\n`adb logcat [options] [filter] [filter]` | 查看设备日志\n`adb bugreport` | 打印错误报告\n<!--rehype:className=style-list-arrow-->"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "将文件推送到 Android 设备的下载文件夹",
      "body": "```bash\n$ adb push example.apk /sdcard/Download/\n```"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "列出所有已安装的包并获取完整路径",
      "body": "```bash\n$ adb shell pm list packages -f\n```"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "从安卓设备中提取文件",
      "body": "```bash\n$ adb pull /sdcard/Download/example.apk\n```"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "从主机安装 APK 到 Android 设备",
      "body": "```bash\n$ adb install example.apk\n```"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "从 Android 设备存储安装 APK",
      "body": "```bash\n$ adb install /sdcard/Download/example.apk\n```"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "设置网络代理",
      "body": "```bash\n$ adb shell settings put global http_proxy <address>:<port>\n```"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "禁用网络代理",
      "body": "```bash\n$ adb shell settings put global http_proxy :0\n```"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "显示连接的设备并指定一个设备进行 Shell",
      "body": "```bash\n$ adb devices\n$ adb -s 7f1c864e shell\n```\n\n`7f1c864e` 是设备 `ID`"
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "通过 IP 地址连接到设备",
      "body": "```bash\n$ adb connect 192.168.56.101:5555\n```"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "通过 Wi-Fi 连接 ADB",
      "body": "我们可以通过 `Wi-Fi` 或专门使用 `tcp` 连接使用 `adb`。 要通过 `Wi-Fi` 使用 `adb`，首先通过 `USB` 连接手机并启用 `USB` 调试。然后列出所有设备：\n\n```bash\n$ adb devices\n# 这应该给出这样的输出：\n# device_id    device\n```\n\n现在检查 `Android` 设备的 `IP`：\n\n```bash\n$ adb shell ifconfig\n# 输出:\n\nwlan0  Link encap:UNSPEC    Driver icnss\n       inet addr:XXX.XXX.X.XX  Bcast:XXX.XXX.X.XXX\n```\n\n记下 `inet addr` 后的 `IP` 地址。稍后要用。现在在某个端口重新启动 `tcpip`：\n\n```bash\n$ adb tcpip $port\n```\n\n例如 5555：\n\n```bash\n$ adb tcpip 5555\n```\n\n您现在可以断开 USB 线缆使用。 若要连接到设备请键入以下命令：\n\n```bash\n$ adb connect $ip:$port\n```\n\n例如:\n\n```bash\n$ adb connect 192.168.1.4:5555\n```"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "将计算机上的 APK 文件安装到设备",
      "body": "```bash\n$ adb install /Users/dev/projects/myapp.apk\n```"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "查找应用的 APK 路径",
      "body": "```bash\n$ adb shell pm path com.example.myapp\n```\n\n将 `com.example.myapp` 替换为您自己的应用程序包名称"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "通过名称查找应用的包名",
      "body": "```bash\n$ adb shell pm list packages | grep app_name\n```"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "从设备提取 APK 到您的计算机",
      "body": "```bash\n$ adb pull /data/app/com.example.myapp.apk ./\n```"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "将文件从计算机复制到设备",
      "body": "```bash\n$ adb push path/to/local/file /sdcard/foo.txt\n```"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "滚动屏幕",
      "body": "```bash\n$ adb shell input swipe 300 300 500 1000 # 上\n$ adb shell input swipe 500 1000 300 300 # 下\n```"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "%E5%8F%91%E6%96%87%E6%9C%AC",
      "body": "%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98%E5%8F%91%E9%80%81%E6%96%87%E6%9C%AC%EF%BC%9A%0A%0A%60%60%60bash%0A%24%20adb%20shell%20input%20text%20%22Hello%20World%22%0A%60%60%60",
      "encoded": true
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "发送按键事件",
      "body": "```bash\n$ adb shell input keyevent 66\n# 66 是回车键码\n```"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "发送点击",
      "body": "点击屏幕：\n\n```bash\n$ adb shell input tap x y\n```"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "%E6%9F%A5%E7%9C%8B%E5%8C%85%E7%9A%84%E6%97%A5%E5%BF%97",
      "body": "%60%60%60bash%0A%24%20adb%20shell%20'logcat%20--pid%3D%24(pidof%20-s%20%3Cpackage_name%3E)'%0A%60%60%60%0A%0A%E6%9F%A5%E7%9C%8B%E7%89%B9%E5%AE%9A%E5%8C%85%E7%9A%84%E6%97%A5%E5%BF%97",
      "encoded": true
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/adb.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/adb.md",
    "lang": "zh",
    "mode": "local"
  }
}