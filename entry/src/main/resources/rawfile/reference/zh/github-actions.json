{
  "id": "github-actions",
  "name": "Github Actions å¤‡å¿˜æ¸…å•",
  "title": "æœ¬å¤‡å¿˜å•æ€»ç»“äº† [Github Actions](https://github.com/actions) å¸¸ç”¨çš„é…ç½®è¯´æ˜ï¼Œä»¥ä¾›å¿«é€Ÿå‚è€ƒã€‚",
  "icon": "https://raw.githubusercontent.com/jaywcjlove/reference/main/assets/github-actions.svg",
  "sections": [
    {
      "id": "intro",
      "title": "ç®€ä»‹",
      "startIndex": 0
    },
    {
      "id": "s1",
      "title": "å…¥é—¨",
      "startIndex": 1
    },
    {
      "id": "s2",
      "title": "ä»»åŠ¡",
      "startIndex": 6
    },
    {
      "id": "s3",
      "title": "å¸¸ç”¨å®ä¾‹",
      "startIndex": 78
    },
    {
      "id": "s4",
      "title": "GitLab CI/CD è¿ç§»åˆ° GitHub Actions",
      "startIndex": 149
    },
    {
      "id": "s5",
      "title": "å¦è§",
      "startIndex": 182
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "ç®€ä»‹",
      "kind": "text",
      "body": "æœ¬å¤‡å¿˜å•æ€»ç»“äº† [Github Actions](https://github.com/actions) å¸¸ç”¨çš„é…ç½®è¯´æ˜ï¼Œä»¥ä¾›å¿«é€Ÿå‚è€ƒã€‚"
    },
    {
      "id": "s1-1",
      "sectionId": "s1",
      "title": "ä»‹ç»",
      "kind": "text",
      "body": "GitHub [Actions](https://github.com/actions) çš„ä»“åº“ä¸­è‡ªåŠ¨åŒ–ã€è‡ªå®šä¹‰å’Œæ‰§è¡Œè½¯ä»¶å¼€å‘å·¥ä½œæµç¨‹ï¼Œæœ‰å››ä¸ªåŸºæœ¬çš„æ¦‚å¿µï¼Œå¦‚ä¸‹ï¼š"
    },
    {
      "id": "s1-2",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`workflow` _(å·¥ä½œæµç¨‹)_ | æŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ª `workflow`\n`job` _(ä»»åŠ¡)_ | ä¸€ä¸ª `workflow` ç”±ä¸€ä¸ªæˆ–å¤šä¸ª `jobs` æ„æˆï¼Œå«ä¹‰æ˜¯ä¸€æ¬¡æŒç»­é›†æˆçš„è¿è¡Œï¼Œå¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡\n`step` _(æ­¥éª¤)_ | æ¯ä¸ª `job` ç”±å¤šä¸ª `step` æ„æˆï¼Œä¸€æ­¥æ­¥å®Œæˆ\n`action` _(åŠ¨ä½œ)_ | æ¯ä¸ª `step` å¯ä»¥ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤(`action`)\n<!--rehype:className=style-list-arrow-->"
    },
    {
      "id": "s1-3",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "â€¢ é‡‡ç”¨ [YAML](./yaml.md) æ ¼å¼å®šä¹‰é…ç½®æ–‡ä»¶\nâ€¢ å­˜æ”¾åœ¨ä»£ç ä»“åº“çš„ `.github/workflows` ç›®å½•ä¸­\nâ€¢ åç¼€åç»Ÿä¸€ä¸º `.yml`ï¼Œæ¯”å¦‚ `ci.yml`\nâ€¢ ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ª `workflow` æ–‡ä»¶\nâ€¢ æ ¹æ®é…ç½®äº‹ä»¶è‡ªåŠ¨è¿è¡Œé…ç½®æ–‡ä»¶"
    },
    {
      "id": "s1-4",
      "sectionId": "s1",
      "title": "é…ç½®æ–‡ä»¶",
      "kind": "text",
      "body": "```yaml {3,5,10}\nname: GitHub Actions Demo\non:\npush:\nbranches:"
    },
    {
      "id": "s1-5",
      "sectionId": "s1",
      "title": "",
      "kind": "text",
      "body": "â€¢ main"
    },
    {
      "id": "s2-6",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "jobs:\nbuild:\nruns-on: ubuntu-latest\n# æ­¥éª¤ æ ¹æ®æ­¥éª¤æ‰§è¡Œä»»åŠ¡\nsteps:"
    },
    {
      "id": "s2-7",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "â€¢ uses: actions/checkout@v3\nâ€¢ uses: actions/setup-node@v3"
    },
    {
      "id": "s2-8",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "with:\nnode-version: 16"
    },
    {
      "id": "s2-9",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "â€¢ run: npm install\nâ€¢ run: npm run build"
    },
    {
      "id": "s2-10",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "code",
      "lang": "",
      "code": "\nå­˜æ”¾åˆ° `.github/workflows` ç›®å½•ä¸­ï¼Œå‘½åä¸º `ci.yml`ï¼Œå½“ `push` ä»£ç åˆ°ä»“åº“ `main` åˆ†æ”¯ä¸­ï¼Œè¯¥é…ç½®è‡ªåŠ¨è¿è¡Œé…ç½®ã€‚\n\n### æŒ‡å®šè§¦å‘\n<!--rehype:wrap-class=row-span-2-->\n\n`push` äº‹ä»¶è§¦å‘ `workflow`\n\n```yaml\non: push"
    },
    {
      "id": "s2-11",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "`push` äº‹ä»¶æˆ– `pull_request` äº‹ä»¶éƒ½å¯ä»¥è§¦å‘ `workflow`"
    },
    {
      "id": "s2-12",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "code",
      "lang": "yaml",
      "code": "on: [push, pull_request]"
    },
    {
      "id": "s2-13",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "åªæœ‰åœ¨ `main` åˆ†æ”¯ `push` äº‹ä»¶è§¦å‘ `workflow`"
    },
    {
      "id": "s2-14",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "```yaml {2}\non:\npush:\nbranches:"
    },
    {
      "id": "s2-15",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "â€¢ main"
    },
    {
      "id": "s2-16",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "code",
      "lang": "",
      "code": "\n`push` äº‹ä»¶è§¦å‘ `workflow`ï¼Œ`docs` ç›®å½•ä¸‹çš„æ›´æ”¹ `push` äº‹ä»¶ä¸è§¦å‘ `workflow`\n\n```yaml {2,4}\non:\n  push:\n    paths-ignore:\n      - 'docs/**'"
    },
    {
      "id": "s2-17",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "push äº‹ä»¶è§¦å‘ workflowï¼ŒåŒ…æ‹¬ sub-project ç›®å½•æˆ–å…¶å­ç›®å½•ä¸­çš„æ–‡ä»¶è§¦å‘ workflowï¼Œé™¤éè¯¥æ–‡ä»¶åœ¨ sub-project/docs ç›®å½•ä¸­ï¼Œä¸è§¦å‘ workflow"
    },
    {
      "id": "s2-18",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "code",
      "lang": "yaml",
      "code": "on:\n  push:\n    paths:\n      - 'sub-project/**'\n      - '!sub-project/docs/**'"
    },
    {
      "id": "s2-19",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "text",
      "body": "ç‰ˆæœ¬å‘å¸ƒä¸º `published` æ—¶è¿è¡Œå·¥ä½œæµç¨‹ã€‚"
    },
    {
      "id": "s2-20",
      "sectionId": "s2",
      "title": "ä»»åŠ¡",
      "kind": "code",
      "lang": "yml",
      "code": "on:\n  release:\n    types: [published]"
    },
    {
      "id": "s2-21",
      "sectionId": "s2",
      "title": "å¤šé¡¹ä»»åŠ¡",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  my_first_job:  # ç¬¬ä¸€ä¸ªä»»åŠ¡\n    name: My first job\n\n  my_second_job: # ç¬¬äºŒä¸ªä»»åŠ¡\n    name: My second job"
    },
    {
      "id": "s2-22",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "é€šè¿‡ jobs `(jobs.<job_id>.name)`å­—æ®µï¼Œé…ç½®ä¸€é¡¹æˆ–å¤šé¡¹éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡"
    },
    {
      "id": "s2-23",
      "sectionId": "s2",
      "title": "å¤šé¡¹ä»»åŠ¡ä¾èµ–å…³ç³»",
      "kind": "text",
      "body": "é€šè¿‡ needs `(jobs.<job_id>.needs)`å­—æ®µï¼ŒæŒ‡å®šå½“å‰ä»»åŠ¡çš„ä¾èµ–å…³ç³»"
    },
    {
      "id": "s2-24",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  job1:\n  job2:\n    needs: job1\n  job3:\n    needs: [job1, job2]"
    },
    {
      "id": "s2-25",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ä¸Šé¢é…ç½®ä¸­ï¼Œ`job1` å¿…é¡»å…ˆäº `job2` å®Œæˆï¼Œè€Œ `job3` ç­‰å¾… `job1` å’Œ `job2` çš„å®Œæˆæ‰èƒ½è¿è¡Œã€‚å› æ­¤ï¼Œè¿™ä¸ª `workflow` çš„è¿è¡Œé¡ºåºä¾æ¬¡ä¸ºï¼š`job1`ã€`job2`ã€`job3`"
    },
    {
      "id": "s2-26",
      "sectionId": "s2",
      "title": "å¤šé¡¹ä»»åŠ¡ä¼ é€’å‚æ•°",
      "kind": "text",
      "body": "```yml {2,5,9,11,15}\njobs:\njob1:\nruns-on: ubuntu-latest\n# å°†æ­¥éª¤è¾“å‡ºæ˜ å°„åˆ°ä½œä¸šè¾“å‡º\noutputs:\noutput1: ${{ steps.step1.outputs.test }}\noutput2: ${{ steps.step2.outputs.test }}\nsteps:"
    },
    {
      "id": "s2-27",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ id: step1"
    },
    {
      "id": "s2-28",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "run%3A%20echo%20%22%3A%3Aset-output%20name%3Dtest%3A%3Ahello%22",
      "encoded": true
    },
    {
      "id": "s2-29",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ id: step2"
    },
    {
      "id": "s2-30",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "run%3A%20echo%20%22%3A%3Aset-output%20name%3Dtest%3A%3Aworld%22%0Ajob2%3A%0Aruns-on%3A%20ubuntu-latest%0Aneeds%3A%20job1%0Asteps%3A",
      "encoded": true
    },
    {
      "id": "s2-31",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ run: echo ${{needs.job1.outputs.output1}} ${{needs.job1.outputs.output2}}"
    },
    {
      "id": "s2-32",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n### å®šæ—¶è§¦å‘\n\nå¯ä»¥ä½¿ç”¨ cron è¡¨è¾¾å¼é…ç½®å‘¨æœŸæ€§ä»»åŠ¡ï¼Œå®šæ—¶æ‰§è¡Œ\n\n```yaml\nname: schedule task\n\n# è¦æ³¨æ„æ—¶å·®ï¼Œæœ€å¥½æ‰‹åŠ¨æŒ‡å®šæ—¶åŒº\nenv:\n  TZ: Asia/Shanghai\n\non:\n  # push åˆ° main åˆ†æ”¯æ—¶æ‰§è¡Œä»»åŠ¡\n  push:\n    branches:\n      - main\n  # æ¯éš”ä¸¤å°æ—¶è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡\n  schedule:\n   - cron: '0 0/2 * * *'"
    },
    {
      "id": "s2-33",
      "sectionId": "s2",
      "title": "æŒ‡å®šæ¯é¡¹ä»»åŠ¡çš„è™šæ‹Ÿæœºç¯å¢ƒ",
      "kind": "code",
      "lang": "yml",
      "code": "runs-on: ubuntu-latest"
    },
    {
      "id": "s2-34",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "æŒ‡å®šè¿è¡Œæ‰€éœ€è¦çš„è™šæ‹Ÿæœºç¯å¢ƒï¼Œâš ï¸ å®ƒæ˜¯å¿…å¡«å­—æ®µ"
    },
    {
      "id": "s2-35",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```yml {3}\njobs:\nbuild: # ä»»åŠ¡åç§°\nruns-on: ubuntu-latest # è™šæ‹Ÿæœºç¯å¢ƒé…ç½®"
    },
    {
      "id": "s2-36",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n---\n\n- `Windows Server 2022` _(windows-latest)_ æˆ– _(windows-2022)_\n- `Ubuntu 20.04` _(ubuntu-latest)_ æˆ– _(ubuntu-20.04)_\n- `macOS Monterey 12` _(macos-12)_\n- `macOS Big Sur 11` _(macos-latest)_,_(macos-11)_\n<!--rehype:className=style-arrow-->\n\nå¦è§: [é€‰æ‹© GitHub æ‰˜ç®¡çš„è¿è¡Œå™¨](https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#é€‰æ‹©-github-æ‰˜ç®¡çš„è¿è¡Œå™¨)\n\n### æŒ‡å®šæ¯é¡¹ä»»åŠ¡çš„æ­¥éª¤\n\næ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æŒ‡å®šä»¥ä¸‹ä¸‰ä¸ªå­—æ®µ\n\n```shell\njobs.<job_id>.steps.name # æ­¥éª¤åç§°\n# è¯¥æ­¥éª¤è¿è¡Œçš„å‘½ä»¤æˆ–è€… action\njobs.<job_id>.steps.run\n# è¯¥æ­¥éª¤æ‰€éœ€çš„ç¯å¢ƒå˜é‡\njobs.<job_id>.steps.env"
    },
    {
      "id": "s2-37",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "`steps` å­—æ®µæŒ‡å®šæ¯ä¸ª `Job` çš„è¿è¡Œæ­¥éª¤ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤(`steps`)"
    },
    {
      "id": "s2-38",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```yml {4}\njobs:\nbuild:\nruns-on: ubuntu-latest\nsteps:"
    },
    {
      "id": "s2-39",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ uses: actions/checkout@v3\nâ€¢ uses: actions/setup-node@v3"
    },
    {
      "id": "s2-40",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "with:\nnode-version: 16"
    },
    {
      "id": "s2-41",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ run: npm install\nâ€¢ run: npm run build"
    },
    {
      "id": "s2-42",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\n### ç¯å¢ƒå˜é‡\n\n```shell\njobs.<job_id>.environment"
    },
    {
      "id": "s2-43",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ä½¿ç”¨å•ä¸€ç¯å¢ƒåç§°çš„ç¤ºä¾‹"
    },
    {
      "id": "s2-44",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "environment: staging_environment"
    },
    {
      "id": "s2-45",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ä½¿ç”¨ç¯å¢ƒåç§°å’Œ URL çš„ç¤ºä¾‹"
    },
    {
      "id": "s2-46",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "environment:\n  name: production_environment\n  url: https://github.com"
    },
    {
      "id": "s2-47",
      "sectionId": "s2",
      "title": "è‡ªå®šä¹‰ç¯å¢ƒå˜é‡",
      "kind": "text",
      "body": "`GitHub` ä¼šä¿ç•™ `GITHUB_` ç¯å¢ƒå˜é‡å‰ç¼€ä¾› `GitHub` å†…éƒ¨ä½¿ç”¨ã€‚è®¾ç½®æœ‰ `GITHUB_` å‰ç¼€çš„ç¯å¢ƒå˜é‡æˆ–å¯†ç å°†å¯¼è‡´é”™è¯¯ã€‚"
    },
    {
      "id": "s2-48",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "- name: æµ‹è¯• nodejs è·å–ç¯å¢ƒå˜é‡\n  env:\n    API_TOKEN: ${{ secrets.API_TOKEN }}"
    },
    {
      "id": "s2-49",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "åœ¨ `https://github.com/<ç”¨æˆ·å>/<é¡¹ç›®åç§°>/settings/secrets` ä¸­æ·»åŠ  `secrets` `API_TOKEN`ï¼Œåœ¨å·¥ä½œæµä¸­è®¾ç½®ç¯å¢ƒå˜é‡ [`API_TOKEN`](https://github.com/jaywcjlove/github-actions/blob/799b232fca3d9df0272eaa12610f9ebfca51b288/.github/workflows/ci.yml#L46)"
    },
    {
      "id": "s2-50",
      "sectionId": "s2",
      "title": "è¡¨è¾¾å¼",
      "kind": "text",
      "body": "åœ¨ `if` æ¡ä»¶ä¸‹ä½¿ç”¨è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥çœç•¥è¡¨è¾¾å¼è¯­æ³• (`${{ }}`)ï¼Œå› ä¸º GitHub ä¼šè‡ªåŠ¨å°† `if` æ¡ä»¶ä½œä¸ºè¡¨è¾¾å¼æ±‚å€¼"
    },
    {
      "id": "s2-51",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "```yml {3}\nsteps:"
    },
    {
      "id": "s2-52",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "â€¢ uses: actions/hello-world-action@v1.1"
    },
    {
      "id": "s2-53",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "if: github.repository == 'uiw/uiw-repo'\n# if: ${{ <expression> }}"
    },
    {
      "id": "s2-54",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nè®¾ç½®ç¯å¢ƒå˜é‡çš„ç¤ºä¾‹\n\n```yml\nenv:\n  MY_ENV_VAR: ${{ <expression> }}"
    },
    {
      "id": "s2-55",
      "sectionId": "s2",
      "title": "æ“ä½œç¬¦",
      "kind": "text",
      "body": "â€¢ `( )` _(é€»è¾‘åˆ†ç»„)_\nâ€¢ `[ ]` _(ç´¢å¼•)_\nâ€¢ `.` _(å±æ€§è§£å¼•ç”¨)_\nâ€¢ `!` _(é)_\nâ€¢ `<` _(å°äº)_\nâ€¢ `<=` _(å°äºæˆ–ç­‰äº)_\nâ€¢ `>` _(å¤§äº)_\nâ€¢ `>=` _(å¤§äºæˆ–ç­‰äº)_\nâ€¢ `==` _(ç›¸ç­‰)_\nâ€¢ `!=` _(ä¸ç­‰)_\nâ€¢ `&&` _(å’Œ)_\nâ€¢ `||` _(æˆ–)_"
    },
    {
      "id": "s2-56",
      "sectionId": "s2",
      "title": "Github ä¸Šä¸‹æ–‡",
      "kind": "text",
      "body": "å±æ€§åç§° | ç±»å‹ | æè¿°\n---- | ---- | ----\n`github` _(object)_ | å·¥ä½œæµç¨‹ä¸­ä»»ä½•ä½œä¸šæˆ–æ­¥éª¤æœŸé—´å¯ç”¨çš„é¡¶å±‚ä¸Šä¸‹æ–‡ã€‚\n`github.event` _(object)_ | å®Œæ•´äº‹ä»¶ web æŒ‚é’©æœ‰æ•ˆè´Ÿè½½ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚é˜…â€œè§¦å‘å·¥ä½œæµç¨‹çš„äº‹ä»¶â€ã€‚\n`github.event_path` _(string)_ | è¿è¡Œå™¨ä¸Šå®Œæ•´äº‹ä»¶ web æŒ‚é’©æœ‰æ•ˆè´Ÿè½½çš„è·¯å¾„ã€‚\n`github.workflow` _(string)_ | å·¥ä½œæµç¨‹çš„åç§°ã€‚ å¦‚æœå·¥ä½œæµç¨‹æ–‡ä»¶æœªæŒ‡å®š nameï¼Œæ­¤å±æ€§çš„å€¼å°†æ˜¯ä»“åº“ä¸­å·¥ä½œæµç¨‹æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚\n`github.job` _(string)_ | å½“å‰ä½œä¸šçš„ job_idã€‚\n`github.run_id` _(string)_ | ä»“åº“ä¸­æ¯ä¸ªè¿è¡Œçš„å”¯ä¸€ç¼–å·ã€‚ å¦‚æœæ‚¨é‡æ–°æ‰§è¡Œå·¥ä½œæµç¨‹è¿è¡Œï¼Œæ­¤ç¼–å·ä¸å˜ã€‚\n`github.run_number` _(string)_ | ä»“åº“ä¸­ç‰¹å®šå·¥ä½œæµç¨‹æ¯ä¸ªè¿è¡Œçš„å”¯ä¸€ç¼–å·ã€‚ æ­¤ç¼–å·ä» 1ï¼ˆå¯¹åº”äºå·¥ä½œæµç¨‹çš„ç¬¬ä¸€ä¸ªè¿è¡Œï¼‰å¼€å§‹ï¼Œç„¶åéšç€æ¯ä¸ªæ–°çš„è¿è¡Œè€Œé€’å¢ã€‚ å¦‚æœæ‚¨é‡æ–°æ‰§è¡Œå·¥ä½œæµç¨‹è¿è¡Œï¼Œæ­¤ç¼–å·ä¸å˜ã€‚\n`github.actor` _(string)_ | å‘èµ·å·¥ä½œæµç¨‹è¿è¡Œçš„ç”¨æˆ·çš„ç™»å½•åã€‚\n`github.repository` _(string)_ | æ‰€æœ‰è€…å’Œä»“åº“åç§°ã€‚ ä¾‹å¦‚ Codertocat/Hello-Worldã€‚\n`github.repository_owner` _(string)_ | ä»“åº“æ‰€æœ‰è€…çš„åç§°ã€‚ ä¾‹å¦‚ Codertocatã€‚\n`github.event_name` _(string)_ | è§¦å‘å·¥ä½œæµç¨‹è¿è¡Œçš„äº‹ä»¶çš„åç§°ã€‚\n`github.sha` _(string)_ | è§¦å‘å·¥ä½œæµç¨‹çš„æäº¤ SHAã€‚\n`github.ref` _(string)_ | è§¦å‘å·¥ä½œæµç¨‹çš„åˆ†æ”¯æˆ–æ ‡è®°å‚è€ƒã€‚\n`github.head_ref` _(string)_ | å·¥ä½œæµç¨‹è¿è¡Œä¸­æ‹‰å–è¯·æ±‚çš„ head_ref æˆ–æ¥æºåˆ†æ”¯ã€‚ æ­¤å±æ€§ä»…åœ¨è§¦å‘å·¥ä½œæµç¨‹è¿è¡Œçš„äº‹ä»¶ä¸º pull_request æ—¶æ‰å¯ç”¨ã€‚\n`github.base_ref` _(string)_ | å·¥ä½œæµç¨‹è¿è¡Œä¸­æ‹‰å–è¯·æ±‚çš„ base_ref æˆ–ç›®æ ‡åˆ†æ”¯ã€‚ æ­¤å±æ€§ä»…åœ¨è§¦å‘å·¥ä½œæµç¨‹è¿è¡Œçš„äº‹ä»¶ä¸º pull_request æ—¶æ‰å¯ç”¨ã€‚\n`github.token` _(string)_ | ä»£è¡¨ä»“åº“ä¸Šå®‰è£…çš„ GitHub åº”ç”¨ç¨‹åºè¿›è¡Œèº«ä»½éªŒè¯çš„ä»¤ç‰Œã€‚ è¿™åœ¨åŠŸèƒ½ä¸Šç­‰åŒäº GITHUB_TOKEN å¯†ç ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚é˜…â€œä½¿ç”¨ GITHUB_TOKEN éªŒè¯èº«ä»½â€ã€‚\n`github.workspace` _(string)_ | ä½¿ç”¨ checkout æ“ä½œæ—¶æ­¥éª¤çš„é»˜è®¤å·¥ä½œç›®å½•å’Œä»“åº“çš„é»˜è®¤ä½ç½®ã€‚\n`github.action` _(string)_ | æ­£åœ¨è¿è¡Œçš„æ“ä½œçš„åç§°ã€‚ åœ¨å½“å‰æ­¥éª¤è¿è¡Œè„šæœ¬æ—¶ï¼ŒGitHub åˆ é™¤ç‰¹æ®Šå­—ç¬¦æˆ–ä½¿ç”¨åç§° runã€‚ å¦‚æœåœ¨åŒä¸€ä½œä¸šä¸­å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„æ“ä½œï¼Œåˆ™åç§°å°†åŒ…æ‹¬å¸¦æœ‰åºåˆ—å·çš„åç¼€ã€‚ ä¾‹å¦‚ï¼Œè¿è¡Œçš„ç¬¬ä¸€ä¸ªè„šæœ¬åç§°ä¸º run1ï¼Œåˆ™ç¬¬äºŒä¸ªè„šæœ¬å°†å‘½åä¸º run2ã€‚ åŒæ ·ï¼Œactions/checkout ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶å°†å˜æˆ actionscheckout2ã€‚"
    },
    {
      "id": "s2-57",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "[Github ä¸Šä¸‹æ–‡](https://help.github.com/cn/actions/reference/context-and-expression-syntax-for-github-actions)æ˜¯è®¿é—®æœ‰å…³å·¥ä½œæµè¿è¡Œã€è¿è¡Œå™¨ç¯å¢ƒã€ä½œä¸šå’Œæ­¥éª¤çš„ä¿¡æ¯çš„ä¸€ç§æ–¹å¼"
    },
    {
      "id": "s2-58",
      "sectionId": "s2",
      "title": "ç›´æ¥å¸¸é‡",
      "kind": "text",
      "body": "ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ `boolean`, `null`, `number` æˆ– `string`æ•°æ®ç±»å‹"
    },
    {
      "id": "s2-59",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "env:\n  myNull: ${{ null }}\n  myBoolean: ${{ false }}\n  myIntegerNumber: ${{ 711 }}\n  myFloatNumber: ${{ -9.2 }}\n  myHexNumber: ${{ 0xff }}\n  myExponentialNumber: ${{ -2.99e-2 }}\n  myString: Mona the Octocat\n  myStringInBraces: ${{ 'It''s source!' }}"
    },
    {
      "id": "s2-60",
      "sectionId": "s2",
      "title": "å‡½æ•° contains",
      "kind": "text",
      "body": "ä½¿ç”¨å­—ç¬¦ä¸²çš„ç¤ºä¾‹"
    },
    {
      "id": "s2-61",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "js",
      "code": "contains('Hello world', 'llo') // è¿”å› true"
    },
    {
      "id": "s2-62",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "ä½¿ç”¨å¯¹è±¡è¿‡æ»¤å™¨çš„ç¤ºä¾‹è¿”å› true"
    },
    {
      "id": "s2-63",
      "sectionId": "s2",
      "title": "",
      "kind": "code",
      "lang": "js",
      "code": "contains(github.event.issue.labels.*.name, 'bug')"
    },
    {
      "id": "s2-64",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [å‡½æ•° contains](https://docs.github.com/cn/actions/learn-github-actions/expressions#contains)"
    },
    {
      "id": "s2-65",
      "sectionId": "s2",
      "title": "å‡½æ•° startsWith",
      "kind": "code",
      "lang": "js",
      "code": "startsWith('Hello world', 'He') // è¿”å› true"
    },
    {
      "id": "s2-66",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [å‡½æ•° startsWith](https://docs.github.com/cn/actions/learn-github-actions/expressions#startswith)ï¼Œæ­¤å‡½æ•°ä¸åŒºåˆ†å¤§å°å†™"
    },
    {
      "id": "s2-67",
      "sectionId": "s2",
      "title": "é»˜è®¤ç¯å¢ƒå˜é‡",
      "kind": "text",
      "body": "ç¯å¢ƒå˜é‡ | æè¿°\n---- | ----\n`CI` | å§‹ç»ˆè®¾ç½®ä¸º `true`\n`HOME` | ç”¨äºå­˜å‚¨ç”¨æˆ·æ•°æ®çš„ GitHub ä¸»ç›®å½•è·¯å¾„ã€‚ ä¾‹å¦‚ `/github/home`\n`GITHUB_WORKFLOW` | å·¥ä½œæµç¨‹çš„åç§°ã€‚\n`GITHUB_RUN_ID` | ä»“åº“ä¸­æ¯ä¸ªè¿è¡Œçš„å”¯ä¸€ç¼–å·ã€‚ å¦‚æœæ‚¨é‡æ–°æ‰§è¡Œå·¥ä½œæµç¨‹è¿è¡Œï¼Œæ­¤ç¼–å·ä¸å˜ã€‚\n`GITHUB_RUN_NUMBER` | ä»“åº“ä¸­ç‰¹å®šå·¥ä½œæµç¨‹æ¯ä¸ªè¿è¡Œçš„å”¯ä¸€ç¼–å·ã€‚ æ­¤ç¼–å·ä» 1ï¼ˆå¯¹åº”äºå·¥ä½œæµç¨‹çš„ç¬¬ä¸€ä¸ªè¿è¡Œï¼‰å¼€å§‹ï¼Œç„¶åéšç€æ¯ä¸ªæ–°çš„è¿è¡Œè€Œé€’å¢ã€‚ å¦‚æœæ‚¨é‡æ–°æ‰§è¡Œå·¥ä½œæµç¨‹è¿è¡Œï¼Œæ­¤ç¼–å·ä¸å˜ã€‚\n`GITHUB_ACTION` | æ“ä½œå”¯ä¸€çš„æ ‡è¯†ç¬¦ (id)ã€‚\n`GITHUB_ACTIONS` |  å½“ GitHub æ“ä½œ è¿è¡Œå·¥ä½œæµç¨‹æ—¶ï¼Œå§‹ç»ˆè®¾ç½®ä¸º trueã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å˜é‡æ¥åŒºåˆ†æµ‹è¯•æ˜¯åœ¨æœ¬åœ°è¿è¡Œè¿˜æ˜¯é€šè¿‡ GitHub æ“ä½œ è¿è¡Œã€‚\n`GITHUB_ACTION_PATH` | GitHub æ“ä½œæ‰€åœ¨çš„è·¯å¾„\n`GITHUB_ACTOR` | å‘èµ·å·¥ä½œæµç¨‹çš„ä¸ªäººæˆ–åº”ç”¨ç¨‹åºçš„åç§°ã€‚ ä¾‹å¦‚ octocat\n`GITHUB_API_URL` | è¿”å› `API URL`ã€‚ä¾‹å¦‚ï¼š`https://api.github.com`\n`GITHUB_REPOSITORY` | æ‰€æœ‰è€…å’Œä»“åº“åç§°ã€‚ ä¾‹å¦‚ octocat/Hello-World\n`GITHUB_EVENT_NAME` | è§¦å‘å·¥ä½œæµç¨‹çš„ web æŒ‚é’©äº‹ä»¶çš„åç§°\n`GITHUB_EVENT_PATH` | å…·æœ‰å®Œæ•´ web æŒ‚é’©äº‹ä»¶æœ‰æ•ˆè´Ÿè½½çš„æ–‡ä»¶è·¯å¾„ã€‚ ä¾‹å¦‚ /github/workflow/event.json\n`GITHUB_WORKSPACE` | GitHub å·¥ä½œç©ºé—´ç›®å½•è·¯å¾„ã€‚ å¦‚æœæ‚¨çš„å·¥ä½œæµç¨‹ä½¿ç”¨ [actions/checkout](https://github.com/actions/checkout) æ“ä½œï¼Œå·¥ä½œç©ºé—´ç›®å½•å°†åŒ…å«å­˜å‚¨ä»“åº“å‰¯æœ¬çš„å­ç›®å½•ã€‚ å¦‚æœä¸ä½¿ç”¨ [actions/checkout](https://github.com/actions/checkout) æ“ä½œï¼Œè¯¥ç›®å½•å°†ä¸ºç©ºã€‚ ä¾‹å¦‚ /home |/runner/work/my-repo-name/my-repo-name\n`GITHUB_SHA` | è§¦å‘å·¥ä½œæµç¨‹çš„æäº¤ SHAã€‚ ä¾‹å¦‚ ffac537e6cbbf9\n`GITHUB_REF` | è§¦å‘å·¥ä½œæµç¨‹çš„åˆ†æ”¯æˆ–æ ‡è®°å‚è€ƒã€‚ ä¾‹å¦‚ refs/heads/feature-branch-1ã€‚ å¦‚æœåˆ†æ”¯æˆ–æ ‡è®°éƒ½ä¸é€‚ç”¨äºäº‹ä»¶ç±»å‹ï¼Œåˆ™å˜é‡ä¸ä¼šå­˜åœ¨\n`GITHUB_HEAD_REF` | ä»…ä¸ºå¤åˆ»çš„ä»“åº“è®¾ç½®ã€‚å¤´éƒ¨ä»“åº“çš„åˆ†æ”¯\n`GITHUB_BASE_REF` | ä»…ä¸ºå¤åˆ»çš„ä»“åº“è®¾ç½®ã€‚åŸºç¡€ä»“åº“çš„åˆ†æ”¯"
    },
    {
      "id": "s2-68",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [é»˜è®¤ç¯å¢ƒå˜é‡](https://docs.github.com/cn/actions/learn-github-actions/environment-variables#default-environment-variables)"
    },
    {
      "id": "s2-69",
      "sectionId": "s2",
      "title": "å‡½æ•° format",
      "kind": "code",
      "lang": "js",
      "code": "format('{{Hello {0} {1} {2}!}}', 'Mona', 'the', 'Octocat')\n// è¿”å› '{Hello Mona the Octocat!}'."
    },
    {
      "id": "s2-70",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [å‡½æ•° format](https://docs.github.com/cn/actions/learn-github-actions/expressions#format)"
    },
    {
      "id": "s2-71",
      "sectionId": "s2",
      "title": "å‡½æ•° join",
      "kind": "code",
      "lang": "js",
      "code": "join(github.event.issue.labels.*.name,', ')\n// ä¹Ÿè®¸è¿”å› 'bug, help wanted'."
    },
    {
      "id": "s2-72",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [å‡½æ•° join](https://docs.github.com/cn/actions/learn-github-actions/expressions#join)"
    },
    {
      "id": "s2-73",
      "sectionId": "s2",
      "title": "%E5%87%BD%E6%95%B0%20toJSON",
      "kind": "code",
      "lang": "js",
      "code": "toJSON(job)%0A%2F%2F%20%E4%B9%9F%E8%AE%B8%E8%BF%94%E5%9B%9E%20%7B%20%22status%22%3A%20%22Success%22%20%7D.",
      "encoded": true
    },
    {
      "id": "s2-74",
      "sectionId": "s2",
      "title": "",
      "kind": "text",
      "body": "å¦è§: [å‡½æ•° toJSON](https://docs.github.com/cn/actions/learn-github-actions/expressions#tojson)"
    },
    {
      "id": "s2-75",
      "sectionId": "s2",
      "title": "å‡½æ•°",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n`fromJSON` | è¿”å› JSON å¯¹è±¡æˆ– JSON æ•°æ®ç±»å‹çš„å€¼ [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#fromjson)\n`hashFiles` | è¿”å›ä¸è·¯å¾„æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶é›†çš„å•ä¸ªå“ˆå¸Œ [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#hashfiles)\n`success` | å½“å‰é¢çš„æ­¥éª¤éƒ½æ²¡å¤±è´¥æˆ–è¢«å–æ¶ˆæ—¶è¿”å› true [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#success)\n`always` | ä½¿æ­¥éª¤å§‹ç»ˆæ‰§è¡Œï¼Œè¿”å› `true` å³ä½¿å–æ¶ˆä¹Ÿæ˜¯å¦‚æ­¤ [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#always)\n`cancelled` | å¦‚æœå·¥ä½œæµè¢«å–æ¶ˆï¼Œåˆ™è¿”å› true [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#cancelled)\n`failure` | å½“ä½œä¸šçš„ä»»ä½•å…ˆå‰æ­¥éª¤å¤±è´¥æ—¶è¿”å› true [#](https://docs.github.com/cn/actions/learn-github-actions/expressions#failure)"
    },
    {
      "id": "s2-76",
      "sectionId": "s2",
      "title": "å‡½æ•° success()",
      "kind": "code",
      "lang": "yml",
      "code": "steps:\n  ...\n  - name: ä½œä¸šå·²æˆåŠŸ\n    if: ${{ success() }}"
    },
    {
      "id": "s2-77",
      "sectionId": "s2",
      "title": "å‡½æ•° failure()",
      "kind": "code",
      "lang": "yml",
      "code": "steps:\n  ...\n  - name: ä½œä¸šå¤±è´¥\n    if: ${{ failure() }}"
    },
    {
      "id": "s3-78",
      "sectionId": "s3",
      "title": "%E8%8E%B7%E5%8F%96%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Test%0A%20%20run%3A%20%7C%0A%20%20%20%20%23%20Strip%20git%20ref%20prefix%20from%20version%0A%20%20%20%20echo%20%22%24%7B%7B%20github.ref%20%7D%7D%22%0A%20%20%20%20%23%20VERSION%3D%24(echo%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%7C%20sed%20-e%20's%2C.*%2F%5C(.*%5C)%2C%5C1%2C')%0A%0A%20%20%20%20%23%20%23%20Strip%20%22v%22%20prefix%20from%20tag%20name%0A%20%20%20%20%23%20%5B%5B%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%3D%3D%20%22refs%2Ftags%2F%22*%20%5D%5D%20%26%26%20VERSION%3D%24(echo%20%24VERSION%20%7C%20sed%20-e%20's%2F%5Ev%2F%2F')%0A%20%20%20%20echo%20%22%24VERSION%22",
      "encoded": true
    },
    {
      "id": "s3-79",
      "sectionId": "s3",
      "title": "æäº¤åˆ° gh-pages åˆ†æ”¯",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Deploy\n  uses: peaceiris/actions-gh-pages@v3\n  with:\n    github_token: ${{secrets.GITHUB_TOKEN}}\n    publish_dir: ./build"
    },
    {
      "id": "s3-80",
      "sectionId": "s3",
      "title": "%E4%BF%AE%E6%94%B9%20package.json",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Modify%20Version%0A%20%20shell%3A%20bash%0A%20%20run%3A%20%7C%0A%20%20%20%20node%20-e%20'var%20pkg%20%3D%20require(%22.%2Fpackage.json%22)%3B%20pkg.version%3D%20(new%20Date().getFullYear().toString().substr(2))%20%2B%20%22.%22%20%2B%20(new%20Date().getMonth()%20%2B%201)%20%2B%20%22.%22%20%2B%20(new%20Date().getDate())%3B%20require(%22fs%22).writeFileSync(%22.%2Fpackage.json%22%2C%20JSON.stringify(pkg%2C%20null%2C%202))'",
      "encoded": true
    },
    {
      "id": "s3-81",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "ä½¿ç”¨ [github-action-package](https://github.com/jaywcjlove/github-action-package) ä¿®æ”¹ `name` å­—æ®µ"
    },
    {
      "id": "s3-82",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "- name: package.json info\n  uses: jaywcjlove/github-action-package@main\n  with:\n    rename: '@wcj/github-package-test'"
    },
    {
      "id": "s3-83",
      "sectionId": "s3",
      "title": "å…‹éš†å¸¦æœ‰ Submodule çš„ä»“åº“",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Checkout\n  uses: actions/checkout@v3\n  with:\n    path: main\n    submodules: true"
    },
    {
      "id": "s3-84",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "`submodules`ï¼š`true` æ£€å‡ºå­æ¨¡å—æˆ– `recursive` é€’å½’æ£€å‡ºå­æ¨¡å—"
    },
    {
      "id": "s3-85",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Clone%20sub%20repository%0A%20%20shell%3A%20bash%0A%20%20run%3A%20%7C%0A%20%20%20%20auth_header%3D%22%24(git%20config%20--local%20--get%20http.https%3A%2F%2Fgithub.com%2F.extraheader)%22%0A%20%20%20%20%23%20git%20submodule%20sync%20--recursive%0A%20%20%20%20%23%20git%20-c%20%22http.extraheader%3D%24auth_header%22%20-c%20protocol.version%3D2%20submodule%20update%20--init%20--remote%20--force%20--recursive%20--checkout%20ant.design",
      "encoded": true
    },
    {
      "id": "s3-86",
      "sectionId": "s3",
      "title": "æ­¥éª¤ä¾èµ–ä½œä¸š",
      "kind": "text",
      "body": "ä½¿ç”¨ `jobs.<job_id>.needs` è¯†åˆ«åœ¨æ­¤ä½œä¸šè¿è¡Œä¹‹å‰å¿…é¡»æˆåŠŸå®Œæˆçš„ä»»ä½•ä½œä¸šã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²æ•°ç»„ã€‚ å¦‚æœæŸä¸ªä½œä¸šå¤±è´¥ï¼Œåˆ™æ‰€æœ‰éœ€è¦å®ƒçš„ä½œä¸šéƒ½ä¼šè¢«è·³è¿‡ï¼Œé™¤éè¿™äº›ä½œä¸šä½¿ç”¨è®©è¯¥ä½œä¸šç»§ç»­çš„æ¡ä»¶è¡¨è¾¾å¼ã€‚"
    },
    {
      "id": "s3-87",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  job1:\n  job2:\n    needs: job1\n  job3:\n    needs: [job1, job2]"
    },
    {
      "id": "s3-88",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ`job1` å¿…é¡»åœ¨ `job2` å¼€å§‹ä¹‹å‰æˆåŠŸå®Œæˆï¼Œè€Œ `job3` è¦ç­‰å¾… `job1` å’Œ `job2` å®Œæˆã€‚æ­¤ç¤ºä¾‹ä¸­çš„ä½œä¸šæŒ‰é¡ºåºè¿è¡Œï¼š"
    },
    {
      "id": "s3-89",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "â¶ job1\nâ· job2\nâ¸ job3"
    },
    {
      "id": "s3-90",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "é…ç½®å¦‚ä¸‹"
    },
    {
      "id": "s3-91",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  job1:\n  job2:\n    needs: job1\n  job3:\n    if: ${{ always() }}\n    needs: [job1, job2]"
    },
    {
      "id": "s3-92",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ`job3` ä½¿ç”¨ `always()` æ¡ä»¶è¡¨è¾¾å¼ï¼Œå› æ­¤å®ƒå§‹ç»ˆåœ¨ `job1` å’Œ `job2` å®Œæˆåè¿è¡Œï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦æˆåŠŸã€‚"
    },
    {
      "id": "s3-93",
      "sectionId": "s3",
      "title": "%E5%90%8C%E6%AD%A5%20Gitee",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Sync%20to%20Gitee%0A%20%20run%3A%20%7C%0A%20%20%20%20mirror()%20%7B%0A%20%20%20%20%20%20git%20clone%20%22https%3A%2F%2Fgithub.com%2F%241%2F%242%22%0A%20%20%20%20%20%20cd%20%22%242%22%0A%20%20%20%20%20%20git%20remote%20add%20gitee%20%22https%3A%2F%2Fjaywcjlove%3A%24%7B%7B%20secrets.GITEE_TOKEN%20%7D%7D%40gitee.com%2Fuiw%2F%242%22%0A%20%20%20%20%20%20git%20remote%20set-head%20origin%20-d%0A%20%20%20%20%20%20git%20push%20gitee%20--prune%20%2Brefs%2Fremotes%2Forigin%2F*%3Arefs%2Fheads%2F*%20%2Brefs%2Ftags%2F*%3Arefs%2Ftags%2F*%0A%20%20%20%20%20%20cd%20..%0A%20%20%20%20%7D%0A%20%20%20%20mirror%20uiwjs%20uiw",
      "encoded": true
    },
    {
      "id": "s3-94",
      "sectionId": "s3",
      "title": "æäº¤ NPM åŒ…",
      "kind": "code",
      "lang": "yml",
      "code": "- run: npm publish --access public\n  continue-on-error: true\n  env:\n    NODE_AUTH_TOKEN: ${{secrets.NPM_TOKEN}}"
    },
    {
      "id": "s3-95",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "è·å– `NPM_TOKEN`ï¼Œå¯ä»¥é€šè¿‡ [npm](https://www.npmjs.com/settings/wcjiang/tokens) è´¦å·åˆ›å»º `token`"
    },
    {
      "id": "s3-96",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "shell",
      "code": "npm token list [--json|--parseable] # æŸ¥çœ‹\nnpm token create [--read-only] [--cidr=1.1.1.1/24,2.2.2.2/16] # åˆ›å»º\nnpm token revoke <id|token> # æ’¤é”€"
    },
    {
      "id": "s3-97",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "å¯ä»¥ä½¿ç”¨ [JS-DevTools/npm-publish](https://github.com/JS-DevTools/npm-publish) æäº¤"
    },
    {
      "id": "s3-98",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "- name:  ğŸ“¦ @province-city-china/data\n  uses: JS-DevTools/npm-publish@v1\n  with:\n    token: ${{ secrets.NPM_TOKEN }}\n    package: packages/data/package.json"
    },
    {
      "id": "s3-99",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "å®ƒæœ‰ä¸ªå¥½å¤„ï¼Œæ£€æµ‹ `package.json` ä¸­ç‰ˆæœ¬å·æ˜¯å¦å‘ç”Ÿå˜æ›´ï¼Œæ¥å†³å®šæ˜¯å¦æäº¤ç‰ˆæœ¬ï¼Œä¸ä¼šå¼•å‘æµç¨‹é”™è¯¯ã€‚"
    },
    {
      "id": "s3-100",
      "sectionId": "s3",
      "title": "æ­¥éª¤ä½œä¸šæ–‡ä»¶å…±äº«",
      "kind": "text",
      "body": "Artifacts æ˜¯ GitHub Actions ä¸ºæ‚¨æä¾›æŒä¹…æ–‡ä»¶å¹¶åœ¨è¿è¡Œå®Œæˆåä½¿ç”¨å®ƒä»¬æˆ–åœ¨ä½œä¸šï¼ˆæ–‡æ¡£ï¼‰ä¹‹é—´å…±äº«çš„ä¸€ç§æ–¹å¼ã€‚"
    },
    {
      "id": "s3-101",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "â€¢ è¦åˆ›å»ºå·¥ä»¶å¹¶ä½¿ç”¨å®ƒï¼Œæ‚¨å°†éœ€è¦ä¸åŒçš„æ“ä½œï¼šä¸Šä¼ å’Œä¸‹è½½"
    },
    {
      "id": "s3-102",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "è¦ä¸Šä¼ æ–‡ä»¶æˆ–ç›®å½•ï¼Œæ‚¨åªéœ€åƒè¿™æ ·ä½¿ç”¨å®ƒï¼š"
    },
    {
      "id": "s3-103",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "steps:\n  - uses: actions/checkout@v2\n  - run: mkdir -p path/to/artifact\n  - run: echo hello > path/to/file/a.txt\n  - uses: actions/upload-artifact@v2\n    with:\n      name: my-artifact\n      path: path/to/artifact/a.txt"
    },
    {
      "id": "s3-104",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "ç„¶åä¸‹è½½ `artifact` ä»¥ä½¿ç”¨å®ƒï¼š"
    },
    {
      "id": "s3-105",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "steps:\n  - uses: actions/checkout@v2\n  - uses: actions/download-artifact@v2\n    with:\n      name: my-artifact"
    },
    {
      "id": "s3-106",
      "sectionId": "s3",
      "title": "Node.js",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Setup Node\n  uses: actions/setup-node@v2\n  with:\n    node-version: 14"
    },
    {
      "id": "s3-107",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "ä½¿ç”¨[çŸ©é˜µç­–ç•¥](https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategy) åœ¨ nodejs ä¸åŒç‰ˆæœ¬ä¸­è¿è¡Œ"
    },
    {
      "id": "s3-108",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "strategy:\n  matrix:\n    node-version: [10.x, 12.x, 14.x]\n\nsteps:\n  - uses: actions/checkout@v2\n  - name: ä½¿ç”¨ Node ${{ matrix.node-version }}\n    uses: actions/setup-node@v1\n    with:\n      node-version: ${{ matrix.node-version }}\n  - run: npm ci\n  - run: npm run build --if-present\n  - run: npm test"
    },
    {
      "id": "s3-109",
      "sectionId": "s3",
      "title": "%E6%8F%90%E4%BA%A4%20docker%20%E9%95%9C%E5%83%8F",
      "kind": "code",
      "lang": "yml",
      "code": "%23%20https%3A%2F%2Fwww.basefactor.com%2Fgithub-actions-docker%0A-%20name%3A%20Docker%20login%0A%20%20run%3A%20docker%20login%20-u%20%24%7B%7B%20secrets.DOCKER_USER%20%7D%7D%20-p%20%24%7B%7B%20secrets.DOCKER_PASSWORD%20%7D%7D%0A%0A-%20name%3A%20Build%20ant.design%20image%0A%20%20run%3A%20%7C%0A%20%20%20%20cd%20.%2Fant%5C.design%0A%20%20%20%20docker%20build%20-t%20ant.design%20.%0A-%20name%3A%20Tags%20%26%20Push%20docs%0A%20%20run%3A%20%7C%0A%20%20%20%20%23%20Strip%20git%20ref%20prefix%20from%20version%0A%20%20%20%20VERSION%3D%24(echo%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%7C%20sed%20-e%20's%2C.*%2F%5C(.*%5C)%2C%5C1%2C')%0A%0A%20%20%20%20%23%20Strip%20%22v%22%20prefix%20from%20tag%20name%0A%20%20%20%20%5B%5B%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%3D%3D%20%22refs%2Ftags%2F%22*%20%5D%5D%20%26%26%20VERSION%3D%24(echo%20%24VERSION%20%7C%20sed%20-e%20's%2F%5Ev%2F%2F')%0A%0A%20%20%20%20docker%20tag%20ant.design%20%24%7B%7B%20secrets.DOCKER_USER%20%7D%7D%2Fant.design%3A%24VERSION%0A%20%20%20%20docker%20tag%20ant.design%20%24%7B%7B%20secrets.DOCKER_USER%20%7D%7D%2Fant.design%3Alatest%0A%20%20%20%20docker%20push%20%24%7B%7B%20secrets.DOCKER_USER%20%7D%7D%2Fant.design%3A%24VERSION%0A%20%20%20%20docker%20push%20%24%7B%7B%20secrets.DOCKER_USER%20%7D%7D%2Fant.design%3Alatest",
      "encoded": true
    },
    {
      "id": "s3-110",
      "sectionId": "s3",
      "title": "åˆ›å»ºä¸€ä¸ª tag",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Create Tag\n  id: create_tag\n  uses: jaywcjlove/create-tag-action@main\n  with:\n    package-path: ./package.json"
    },
    {
      "id": "s3-111",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "æ ¹æ® `package-path` æŒ‡å®šçš„ `package.json` æ£€æµ‹ `version` æ˜¯å¦å‘ç”Ÿå˜åŒ–æ¥åˆ›å»º `tag`"
    },
    {
      "id": "s3-112",
      "sectionId": "s3",
      "title": "%E7%94%9F%E6%88%90%20git%20%E6%8F%90%E4%BA%A4%E6%97%A5%E5%BF%97",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Generate%20Changelog%0A%20%20id%3A%20changelog%0A%20%20uses%3A%20jaywcjlove%2Fchangelog-generator%40main%0A%20%20with%3A%0A%20%20%20%20filter-author%3A%20(%E5%B0%8F%E5%BC%9F%E8%B0%83%E8%B0%83%E2%84%A2)%0A%0A-%20name%3A%20Get%20the%20changelog%0A%20%20run%3A%20echo%20%22%24%7B%7B%20steps.changelog.outputs.changelog%20%7D%7D%22",
      "encoded": true
    },
    {
      "id": "s3-113",
      "sectionId": "s3",
      "title": "%E6%8F%90%E4%BA%A4%E5%88%B0%20GitHub%20docker%20%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20'%E7%99%BB%E5%BD%95%E5%88%B0%20GitHub%20%E6%B3%A8%E5%86%8C%E8%A1%A8'%0A%20%20run%3A%20echo%20%24%7B%7B%20github.token%20%7D%7D%20%7C%20docker%20login%20ghcr.io%20-u%20%24%7B%7B%20github.actor%20%7D%7D%20--password-stdin%0A%0A-%20name%3A%20'%E7%BC%96%E8%AF%91%20docker%20image'%0A%20%20run%3A%20docker%20build%20-t%20ghcr.io%2Fjaywcjlove%2Freference%3Alatest%20.%0A%0A-%20name%3A%20'%E6%8E%A8%E9%80%81%E5%88%B0%20GitHub%20%E6%B3%A8%E5%86%8C%E8%A1%A8%E4%B8%AD'%0A%20%20run%3A%20docker%20push%20ghcr.io%2Fjaywcjlove%2Freference%3Alatest%0A%0A-%20name%3A%20'%E6%A0%87%E8%AE%B0%20docker%20%E9%95%9C%E5%83%8F%E5%B9%B6%E5%8F%91%E5%B8%83%E5%88%B0%20GitHub%20%E6%B3%A8%E5%86%8C%E8%A1%A8'%0A%20%20if%3A%20steps.create_tag.outputs.successful%0A%20%20run%3A%20%7C%0A%20%20%20%20echo%20%22version%3A%20v%24%7B%7B%20steps.changelog.outputs.version%20%7D%7D%22%0A%20%20%20%20docker%20tag%20ghcr.io%2Fjaywcjlove%2Freference%3Alatest%20ghcr.io%2Fjaywcjlove%2Freference%3A%24%7B%7Bsteps.changelog.outputs.version%7D%7D%0A%20%20%20%20docker%20push%20ghcr.io%2Fjaywcjlove%2Freference%3A%24%7B%7Bsteps.changelog.outputs.version%7D%7D",
      "encoded": true
    },
    {
      "id": "s3-114",
      "sectionId": "s3",
      "title": "%E6%8F%90%E4%BA%A4%20commit%20%E5%88%B0%20master%20%E5%88%86%E6%94%AF",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%AE%83%E6%8F%90%E4%BA%A4%E5%88%B0%20master%20%E5%88%86%E6%94%AF%0A%20%20run%3A%20%7C%0A%20%20%20%20%23%20Strip%20git%20ref%20prefix%20from%20version%0A%20%20%20%20VERSION%3D%24(echo%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%7C%20sed%20-e%20's%2C.*%2F%5C(.*%5C)%2C%5C1%2C')%0A%20%20%20%20COMMIT%3Dreleased-%24%7BVERSION%7D%0A%20%20%20%20%23%20Strip%20%22v%22%20prefix%20from%20tag%20name%0A%20%20%20%20%5B%5B%20%22%24%7B%7B%20github.ref%20%7D%7D%22%20%3D%3D%20%22refs%2Ftags%2F%22*%20%5D%5D%20%26%26%20VERSION%3D%24(echo%20%24VERSION%20%7C%20sed%20-e%20's%2F%5Ev%2F%2F')%0A%20%20%20%20echo%20%22%E8%BE%93%E5%87%BA%E7%89%88%E6%9C%AC%E5%8F%B7%EF%BC%9A%24VERSION%22%0A%20%20%20%20%23%20%E5%B0%86%E7%89%88%E6%9C%AC%E8%BE%93%E5%87%BA%E5%88%B0%E5%BD%93%E5%89%8D%20VERSION%20%E6%96%87%E4%BB%B6%E4%B8%AD%0A%20%20%20%20echo%20%22%24VERSION%22%20%3E%20VERSION%0A%20%20%20%20echo%20%221.%20%E8%BE%93%E5%87%BACommit%EF%BC%9A%24commit%22%0A%20%20%20%20echo%20%222.%20Released%20%24VERSION%22%0A%20%20%20%20git%20fetch%0A%20%20%20%20git%20config%20--local%20user.email%20%22action%40github.com%22%0A%20%20%20%20git%20config%20--local%20user.name%20%22GitHub%20Action%22%0A%20%20%20%20git%20add%20.%0A%20%20%20%20git%20commit%20-am%20%24COMMIT%0A%20%20%20%20git%20branch%20-av%0A%20%20%20%20git%20pull%20origin%20master%0A%0A-%20name%3A%20%E5%B0%86%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%8F%90%E4%BA%A4%20push%20%E5%88%B0%20master%20%E5%88%86%E6%94%AF%0A%20%20uses%3A%20ad-m%2Fgithub-push-action%40master%0A%20%20with%3A%0A%20%20%20%20github_token%3A%20%24%7B%7B%20secrets.GITHUB_TOKEN%20%7D%7D",
      "encoded": true
    },
    {
      "id": "s3-115",
      "sectionId": "s3",
      "title": "ä½œä¸šä¹‹é—´å…±äº«æ•°æ®",
      "kind": "text",
      "body": "åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†å…¶ä½œä¸ºæ„ä»¶ä¸Šä¼ "
    },
    {
      "id": "s3-116",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "```yml {11}\njobs:\nexample-job:\nname: Save output\nsteps:"
    },
    {
      "id": "s3-117",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "â€¢ shell: bash"
    },
    {
      "id": "s3-118",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "run: |\nexpr 1 + 1 > output.log"
    },
    {
      "id": "s3-119",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "â€¢ name: Upload output file"
    },
    {
      "id": "s3-120",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "uses: actions/upload-artifact@v3\nwith:\nname: output-log-file\npath: output.log"
    },
    {
      "id": "s3-121",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nå¯ä»¥ä¸‹è½½åä¸º `output-log-file` çš„å·¥ä»¶\n\n```yml {7}\njobs:\n  example-job:\n    steps:\n      - name: Download a single artifact\n        uses: actions/download-artifact@v3\n        with:\n          name: output-log-file"
    },
    {
      "id": "s3-122",
      "sectionId": "s3",
      "title": "æŒ‡å®šè¿è¡Œå‘½ä»¤çš„å·¥ä½œç›®å½•",
      "kind": "text",
      "body": "```yml {3}"
    },
    {
      "id": "s3-123",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "â€¢ name: Clean temp directory"
    },
    {
      "id": "s3-124",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "run: rm -rf *\nworking-directory: ./temp"
    },
    {
      "id": "s3-125",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nä½¿ç”¨ `working-directory` å…³é”®å­—ï¼Œæ‚¨å¯ä»¥æŒ‡å®šè¿è¡Œå‘½ä»¤çš„å·¥ä½œç›®å½•(`./temp`)\n\n#### defaults.run\n\n```yml {4,5,7}\njobs:\n  job1:\n    runs-on: ubuntu-latest\n    defaults:\n      run:\n        shell: bash\n        working-directory: scripts"
    },
    {
      "id": "s3-126",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "ä½œä¸šä¸­çš„æ‰€æœ‰ `run` æ­¥éª¤æä¾›é»˜è®¤çš„ `shell` å’Œ `working-directory`"
    },
    {
      "id": "s3-127",
      "sectionId": "s3",
      "title": "jobs.<job_id>.steps[*].shell",
      "kind": "text",
      "body": "ä½¿ç”¨ `bash` è¿è¡Œè„šæœ¬"
    },
    {
      "id": "s3-128",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "```yml {4}\nsteps:"
    },
    {
      "id": "s3-129",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "â€¢ name: Display the path"
    },
    {
      "id": "s3-130",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "run: echo $PATH\nshell: bash"
    },
    {
      "id": "s3-131",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "",
      "code": "\nè¿è¡Œ `python` è„šæœ¬\n\n```yml {6}\nsteps:\n  - name: Display the path\n    run: |\n      import os\n      print(os.environ['PATH'])\n    shell: python"
    },
    {
      "id": "s3-132",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "æ‚¨å¯ä»¥ä½¿ç”¨ `shell` å…³é”®å­—è¦†ç›–è¿è¡Œå™¨æ“ä½œç³»ç»Ÿä¸­çš„é»˜è®¤ `shell` è®¾ç½®"
    },
    {
      "id": "s3-133",
      "sectionId": "s3",
      "title": "ä¸€äº› actions æ¨è",
      "kind": "text",
      "body": ":- | :-\n:- | :-\n[`create-tag-action`](https://github.com/jaywcjlove/create-tag-action) | æ ¹æ® package.json åˆ›å»º `Tag` / `Release`\n[`changelog-generator`](https://github.com/jaywcjlove/changelog-generator) | ç”Ÿæˆ `changelog` æ—¥å¿—\n[`github-action-modify-file-content`](https://github.com/jaywcjlove/github-action-modify-file-content) | ä¿®æ”¹ä»“åº“æ–‡ä»¶å†…å®¹\n[`github-action-contributors`](https://github.com/jaywcjlove/github-action-contributors) | ç”Ÿæˆè´¡çŒ®(contributors.svg)å›¾ç‰‡\n[`generated-badges`](https://github.com/jaywcjlove/generated-badges) | ç”Ÿæˆå¾½ç« (Badges)å›¾ç‰‡\n[`coverage-badges-cli`](https://github.com/jaywcjlove/coverage-badges-cli) | ç”Ÿæˆè¦†ç›–ç‡å¾½ç« (Badges)å›¾ç‰‡\n[`action-ejs`](https://github.com/jaywcjlove/action-ejs) | åŸºäº ejs ç”Ÿæˆ HTML\n[`github-action-package`](https://github.com/jaywcjlove/github-action-package) | ä¿®æ”¹ JSON æ–‡ä»¶å†…å®¹\n[`github-action-read-file`](https://github.com/jaywcjlove/github-action-read-file) | è¯»å–æ–‡ä»¶å†…å®¹\n[`markdown-to-html-cli`](https://github.com/jaywcjlove/markdown-to-html-cli) | Markdown è½¬æ¢æˆ HTML\n[`ncipollo/release-action`](https://github.com/ncipollo/release-action) | åˆ›å»º `Release`\n[`peaceiris/actions-gh-pages`](https://github.com/peaceiris/actions-gh-pages) | å°†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å†…å®¹æäº¤åˆ° `gh-pages` åˆ†æ”¯\n<!--rehype:className=style-list-->"
    },
    {
      "id": "s3-134",
      "sectionId": "s3",
      "title": "åœ¨ Github ä¸­åˆ›å»º Docker é•œåƒ",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Set up Docker Buildx\n  uses: docker/setup-buildx-action@v2\n- name: ç™»å½• GitHub å®¹å™¨æ³¨å†Œè¡¨\n  uses: docker/login-action@v2\n  with:\n    registry: ghcr.io\n    username: ${{ github.actor }}\n    password: ${{ secrets.GITHUB_TOKEN }}\n\n- name: æ„å»ºå¹¶æ¨é€ image:latest\n  uses: docker/build-push-action@v3\n  with:\n    push: true\n    context: .\n    platforms: linux/amd64,linux/arm64\n    tags: ghcr.io/jaywcjlove/reference:latest\n\n- name: æ„å»ºå¹¶æ¨é€ image:tags\n  uses: docker/build-push-action@v3\n  if: steps.create_tag.outputs.successful\n  with:\n    push: true\n    context: .\n    platforms: linux/amd64,linux/arm64\n    tags: ghcr.io/jaywcjlove/reference:${{steps.changelog.outputs.version}}"
    },
    {
      "id": "s3-135",
      "sectionId": "s3",
      "title": "ç”Ÿæˆè´¡çŒ®è€…å¤´åƒåˆ—è¡¨",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Generate Contributors Images\n  uses: jaywcjlove/github-action-contributors@main\n  id: contributors\n  with:\n    output: dist/CONTRIBUTORS.svg\n    avatarSize: 42"
    },
    {
      "id": "s3-136",
      "sectionId": "s3",
      "title": "åœ¨ Docker Hub ä¸­åˆ›å»º Docker é•œåƒ",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Set up Docker Buildx\n  uses: docker/setup-buildx-action@v2\n- name: ç™»å½•åˆ° Docker Hub\n  uses: docker/login-action@v2\n  with:\n    username: ${{ secrets.DOCKER_USER }}\n    password: ${{ secrets.DOCKER_PASSWORD }}\n\n- name: æ„å»ºå¹¶æ¨é€ image:latest\n  uses: docker/build-push-action@v3\n  with:\n    push: true\n    context: .\n    platforms: linux/amd64,linux/arm64\n    tags: ${{ secrets.DOCKER_USER }}/reference:latest\n\n- name: æ„å»ºå¹¶æ¨é€ image:tags\n  uses: docker/build-push-action@v3\n  if: steps.create_tag.outputs.successful\n  with:\n    push: true\n    context: .\n    platforms: linux/amd64,linux/arm64\n    tags: ${{ secrets.DOCKER_USER }}/reference:${{steps.changelog.outputs.version}}"
    },
    {
      "id": "s3-137",
      "sectionId": "s3",
      "title": "æ£€æŸ¥ç­¾å‡ºä»“åº“å¹¶å®‰è£… nodejs",
      "kind": "code",
      "lang": "yml",
      "code": "- uses: actions/checkout@v3\n- uses: actions/setup-node@v3\n  with:\n    node-version: 16"
    },
    {
      "id": "s3-138",
      "sectionId": "s3",
      "title": "å¿½ç•¥å¤±è´¥",
      "kind": "code",
      "lang": "yml",
      "code": "- run: npm publish\n  continue-on-error: true\n  env:\n    NODE_AUTH_TOKEN: ${{secrets.NPM_TOKEN}}"
    },
    {
      "id": "s3-139",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "å½“ `npm` æ¨é€åŒ…å¤±è´¥ä¸å½±å“æ•´ä¸ªæµç¨‹ï¼Œå¯ç”¨äºè‡ªåŠ¨å‘åŒ…"
    },
    {
      "id": "s3-140",
      "sectionId": "s3",
      "title": "å®‰è£… yarn",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Setup Yarn\n  uses: threeal/setup-yarn-action@v2.0.0\n  with:\n    cache: false\n    version: 1.22.21"
    },
    {
      "id": "s3-141",
      "sectionId": "s3",
      "title": "ä¼ é€’ç¯å¢ƒå˜é‡",
      "kind": "text",
      "body": "åœ¨ `ci.yml` ä¸Šä¿å­˜ç¯å¢ƒå˜é‡"
    },
    {
      "id": "s3-142",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Save%20commit%20message%20to%20environment%20variable%0A%20%20run%3A%20echo%20%22COMMIT_MESSAGE%3D%24%7B%7B%20github.event.head_commit.message%20%7D%7D%22%20%3E%3E%20%24GITHUB_ENV",
      "encoded": true
    },
    {
      "id": "s3-143",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "åœ¨ `tag.yml` ä¸Šè·å–ç¯å¢ƒå˜é‡"
    },
    {
      "id": "s3-144",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Read%20commit%20message%0A%20%20run%3A%20%7C%0A%20%20%20%20echo%20%22Commit%3A%20%24%7B%7B%20github.event.workflow_run.head_commit.message%20%7D%7D%22",
      "encoded": true
    },
    {
      "id": "s3-145",
      "sectionId": "s3",
      "title": "è§¦å‘ä¸‹ä¸€ä¸ªå·¥ä½œæµ",
      "kind": "text",
      "body": "åœ¨ `tag.yml` ä¸Šæ·»åŠ åˆ¤æ–­ `tag` åˆ›å»ºæˆåŠŸè§¦å‘ `tag-creation-success` çš„å·¥ä½œæµ"
    },
    {
      "id": "s3-146",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "-%20name%3A%20Trigger%20next%20workflow%20if%20successful%0A%20%20if%3A%20steps.check_success.outputs.success%20%3D%3D%20'true'%0A%20%20run%3A%20%7C%0A%20%20%20%20curl%20-X%20POST%20%5C%0A%20%20%20%20%20%20-H%20%22Accept%3A%20application%2Fvnd.github.v3%2Bjson%22%20%5C%0A%20%20%20%20%20%20-H%20%22Authorization%3A%20token%20%24%7B%7B%20secrets.GITHUB_TOKEN%20%7D%7D%22%20%5C%0A%20%20%20%20%20%20-d%20'%7B%22event_type%22%3A%20%22tag-creation-success%22%7D'%20%5C%0A%20%20%20%20%20%20https%3A%2F%2Fapi.github.com%2Frepos%2F%24%7B%7B%20github.repository%20%7D%7D%2Fdispatches",
      "encoded": true
    },
    {
      "id": "s3-147",
      "sectionId": "s3",
      "title": "",
      "kind": "text",
      "body": "åœ¨ `success.yml` ä¸Šç›‘å¬"
    },
    {
      "id": "s3-148",
      "sectionId": "s3",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "on:\n  repository_dispatch:\n    types: [tag-creation-success]"
    },
    {
      "id": "s4-149",
      "sectionId": "s4",
      "title": "è¯­æ³•ç¤ºä¾‹",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-150",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "job1%3A%0A%20%20variables%3A%0A%20%20%20%20GIT_CHECKOUT%3A%20%22true%22%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22Run%20your%20script%20here%22",
      "encoded": true
    },
    {
      "id": "s4-151",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-152",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs%3A%0A%20%20job1%3A%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20uses%3A%20actions%2Fcheckout%40v3%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22Run%20your%20script%20here%22",
      "encoded": true
    },
    {
      "id": "s4-153",
      "sectionId": "s4",
      "title": "è¿è¡Œç¨‹åº",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-154",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "windows_job%3A%0A%20%20tags%3A%0A%20%20%20%20-%20windows%0A%20%20script%3A%0A%20%20%20%20-%20echo%20Hello%2C%20%25USERNAME%25!%0A%0Alinux_job%3A%20tags%3A%0A%20%20%20%20-%20linux%20script%3A%0A%20%20%20%20-%20echo%20%22Hello%2C%20%24USER!%22",
      "encoded": true
    },
    {
      "id": "s4-155",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-156",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "windows_job%3A%0A%20%20runs-on%3A%20windows-latest%0A%20%20steps%3A%0A%20%20%20%20-%20run%3A%20echo%20Hello%2C%20%25USERNAME%25!%0A%0Alinux_job%3A%0A%20%20runs-on%3A%20ubuntu-latest%0A%20%20steps%3A%0A%20%20%20%20-%20run%3A%20echo%20%22Hello%2C%20%24USER!%22",
      "encoded": true
    },
    {
      "id": "s4-157",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œä½œä¸š"
    },
    {
      "id": "s4-158",
      "sectionId": "s4",
      "title": "Docker æ˜ åƒ",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-159",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "my_job:\n  image: node:10.16-jessie"
    },
    {
      "id": "s4-160",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-161",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  my_job:\n    container: node:10.16-jessie"
    },
    {
      "id": "s4-162",
      "sectionId": "s4",
      "title": "æ¡ä»¶å’Œè¡¨è¾¾å¼è¯­æ³•",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-163",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "deploy_prod%3A%0A%20%20stage%3A%20deploy%0A%20%20script%3A%0A%20%20%20%20-%20echo%20%22%E9%83%A8%E7%BD%B2%E5%88%B0%E7%94%9F%E4%BA%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%22%0A%20%20rules%3A%0A%20%20%20%20-%20if%3A%20'%24CI_COMMIT_BRANCH%20%3D%3D%20%22master%22'",
      "encoded": true
    },
    {
      "id": "s4-164",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-165",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs%3A%0A%20%20deploy_prod%3A%0A%20%20%20%20if%3A%20contains(%20github.ref%2C%20'master')%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22%E9%83%A8%E7%BD%B2%E5%88%B0%E7%94%9F%E4%BA%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%22",
      "encoded": true
    },
    {
      "id": "s4-166",
      "sectionId": "s4",
      "title": "Artifacts",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-167",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "script:\nartifacts:\n  paths:\n    - math-homework.txt"
    },
    {
      "id": "s4-168",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-169",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "- name: Upload math result for job 1\n  uses: actions/upload-artifact@v3\n  with:\n    name: homework\n    path: math-homework.txt"
    },
    {
      "id": "s4-170",
      "sectionId": "s4",
      "title": "ä½œä¸šä¹‹é—´çš„ä¾èµ–å…³ç³»",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-171",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "stages%3A%0A%20%20-%20build%0A%20%20-%20test%0A%20%20-%20deploy%0A%0Abuild_a%3A%20stage%3A%20build%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%B0%86%E9%A6%96%E5%85%88%E8%BF%90%E8%A1%8C%22%0A%0Abuild_b%3A%20stage%3A%20build%20script%3A%0A%20%20%20%20-%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%B0%86%E9%A6%96%E5%85%88%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%B8%8E%20build_a%20%E5%B9%B6%E8%A1%8C%22%0A%0Atest_ab%3A%20stage%3A%20test%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%B0%86%E5%9C%A8%20build_a%20%E5%92%8C%20build_b%20%E5%AE%8C%E6%88%90%E5%90%8E%E8%BF%90%E8%A1%8C%22%0A%0Adeploy_ab%3A%20stage%3A%20deploy%20script%3A%0A%20%20%20%20-%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%B0%86%E5%9C%A8%20test_ab%20%E5%AE%8C%E6%88%90%E5%90%8E%E8%BF%90%E8%A1%8C%22",
      "encoded": true
    },
    {
      "id": "s4-172",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-173",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs%3A%0A%20%20build_a%3A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%B0%86%E9%A6%96%E5%85%88%E8%BF%90%E8%A1%8C%22%0A%0A%20%20build_b%3A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22%E8%AF%A5%E4%BD%9C%E4%B8%9A%E5%B0%86%E9%A6%96%E5%85%88%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%B8%8E%20build_a%20%E5%B9%B6%E8%A1%8C%22%0A%0A%20%20test_ab%3A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20needs%3A%20%5Bbuild_a%2Cbuild_b%5D%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%B0%86%E5%9C%A8%20build_a%20%E5%92%8C%20build_b%20%E5%AE%8C%E6%88%90%E5%90%8E%E8%BF%90%E8%A1%8C%22%0A%0A%20%20deploy_ab%3A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20needs%3A%20%5Btest_ab%5D%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20run%3A%20echo%20%22%E6%AD%A4%E4%BD%9C%E4%B8%9A%E5%B0%86%E5%9C%A8%20test_ab%20%E5%AE%8C%E6%88%90%E5%90%8E%E8%BF%90%E8%A1%8C%22",
      "encoded": true
    },
    {
      "id": "s4-174",
      "sectionId": "s4",
      "title": "ç¼“å­˜",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-175",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "image: node:latest\n\ncache: key: $CI_COMMIT_REF_SLUG paths:\n    - .npm/\n\nbefore_script:\n  - npm ci --cache .npm --prefer-offline\n\ntest_async: script:\n    - node ./specs/start.js ./specs/async.spec.js"
    },
    {
      "id": "s4-176",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-177",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  test_async:\n    runs-on: ubuntu-latest\n    steps:\n    - name: Cache node modules\n      uses: actions/cache@v3\n      with:\n        path: ~/.npm\n        key: v1-npm-deps-${{ hashFiles('**/package-lock.json') }}\n        restore-keys: v1-npm-deps-"
    },
    {
      "id": "s4-178",
      "sectionId": "s4",
      "title": "æ•°æ®åº“å’ŒæœåŠ¡å®¹å™¨",
      "kind": "text",
      "body": "<yel>GitLab CI/CD</yel>"
    },
    {
      "id": "s4-179",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "container-job:\n  variables:\n    POSTGRES_PASSWORD: postgres\n    # PostgreSQL æœåŠ¡å®¹å™¨é€šä¿¡çš„ä¸»æœºå\n    POSTGRES_HOST: postgres\n    # é»˜è®¤çš„ PostgreSQL ç«¯å£\n    POSTGRES_PORT: 5432\n  image: node:10.18-jessie\n  services:\n    - postgres\n  script:\n    # æ‰§è¡Œ package.json æ–‡ä»¶ä¸­\n    # æ‰€æœ‰ä¾èµ–é¡¹çš„å…¨æ–°å®‰è£…\n    - npm ci\n    # è¿è¡Œåˆ›å»º PostgreSQL å®¢æˆ·ç«¯çš„è„šæœ¬ï¼Œ\n    # ç”¨æ•°æ®å¡«å……å®¢æˆ·ç«¯ï¼Œå¹¶æ£€ç´¢æ•°æ®\n    - node client.js\n  tags:\n    - docker"
    },
    {
      "id": "s4-180",
      "sectionId": "s4",
      "title": "",
      "kind": "text",
      "body": "GitHub Actions"
    },
    {
      "id": "s4-181",
      "sectionId": "s4",
      "title": "",
      "kind": "code",
      "lang": "yml",
      "code": "jobs:\n  container-job:\n    runs-on: ubuntu-latest\n    container: node:10.18-jessie\n\n    services:\n      postgres:\n        image: postgres\n        env:\n          POSTGRES_PASSWORD: postgres\n\n    steps:\n      - name: Check out repository code\n        uses: actions/checkout@v3\n\n      # æ‰§è¡Œ package.json æ–‡ä»¶ä¸­\n      # æ‰€æœ‰ä¾èµ–é¡¹çš„å…¨æ–°å®‰è£…\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Connect to PostgreSQL\n        # è¿è¡Œåˆ›å»º PostgreSQL å®¢æˆ·ç«¯çš„è„šæœ¬ï¼Œ\n        # ç”¨æ•°æ®å¡«å……å®¢æˆ·ç«¯ï¼Œå¹¶æ£€ç´¢æ•°æ®\n        run: node client.js\n        env:\n          # PostgreSQL æœåŠ¡å®¹å™¨é€šä¿¡çš„ä¸»æœºå\n          POSTGRES_HOST: postgres\n          # é»˜è®¤çš„ PostgreSQL ç«¯å£\n          POSTGRES_PORT: 5432"
    },
    {
      "id": "s5-182",
      "sectionId": "s5",
      "title": "å¦è§",
      "kind": "text",
      "body": "â€¢ [Github Actions å­¦ä¹ ç¬”è®°](https://jaywcjlove.github.io/github-actions) _(jaywcjlove.github.io)_\nâ€¢ [äº†è§£ GitHub Actions](https://docs.github.com/cn/actions/learn-github-actions) _(docs.github.com)_\nâ€¢ [ä» GitLab CI/CD è¿ç§»åˆ° GitHub Actions](https://docs.github.com/cn/actions/migrating-to-github-actions/migrating-from-gitlab-cicd-to-github-actions) _(docs.github.com)_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/github-actions.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/github-actions.md",
    "lang": "zh",
    "mode": "local"
  }
}