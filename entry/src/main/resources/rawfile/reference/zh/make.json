{
  "id": "make",
  "title": "make",
  "sections": [
    {
      "id": "intro",
      "title": "简介",
      "startIndex": 0
    }
  ],
  "cards": [
    {
      "id": "intro-0",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "make 备忘清单\n==="
    },
    {
      "id": "intro-1",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "包含 最重要概念、函数、方法等的 make 备忘单。 初学者的完整快速参考。"
    },
    {
      "id": "intro-2",
      "sectionId": "intro",
      "title": "简介",
      "kind": "text",
      "body": "Makefile 入门\n---\n<!-- markdownlint-disable MD010 -->"
    },
    {
      "id": "intro-3",
      "sectionId": "intro",
      "title": "示例",
      "kind": "code",
      "lang": "makefile",
      "code": "a.txt: b.txt c.txt\n\tcat b.txt c.txt > a.txt"
    },
    {
      "id": "intro-4",
      "sectionId": "intro",
      "title": "示例",
      "kind": "text",
      "body": "#### 工作流程"
    },
    {
      "id": "intro-5",
      "sectionId": "intro",
      "title": "示例",
      "kind": "text",
      "body": "• 读入所有的 `Makefile`。\n• 读入被 `include` 的其它 `Makefile`。\n• 初始化文件中的变量。\n• 推导隐晦规则，并分析所有规则。\n• 为所有的目标文件创建依赖关系链。\n• 根据依赖关系，决定哪些目标要重新生成。\n• 执行生成命令。"
    },
    {
      "id": "intro-6",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "text",
      "body": "make命令会以 `GNUmakefile`（不推荐使用）、`makefile`、`Makefile`（推荐使用）的顺序查找当前目录下的文件。"
    },
    {
      "id": "intro-7",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "text",
      "body": "#### 自定义文件路径"
    },
    {
      "id": "intro-8",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "code",
      "lang": "bash",
      "code": "$ make target -f FILE"
    },
    {
      "id": "intro-9",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "text",
      "body": "我们可以使用 `-f FILE` 来指定makefile文件的路径"
    },
    {
      "id": "intro-10",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "text",
      "body": "#### 隐式生成"
    },
    {
      "id": "intro-11",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "text",
      "body": "如果文件夹中没有 makefile 文件，只有 main.c 源文件，那么我们可以使用 `make main.o` 隐式生成链接文件"
    },
    {
      "id": "intro-12",
      "sectionId": "intro",
      "title": "文件命令",
      "kind": "code",
      "lang": "bash",
      "code": "$ make main.o\n# 实际执行： cc    -c -o main.o main.c"
    },
    {
      "id": "intro-13",
      "sectionId": "intro",
      "title": "规则",
      "kind": "code",
      "lang": "makefile",
      "code": "TARGET: PREREQUISITES\n  COMMAMD\n..."
    },
    {
      "id": "intro-14",
      "sectionId": "intro",
      "title": "规则",
      "kind": "text",
      "body": "• `target`: 规则的目标。目标可以是规则的动作（如 `clean` 等），也可以是目标文件或者最后的可执行文件。\n• `prerequisites`: 规则的依赖。生成规则目标文件所需要的文件名列表（通常一个目标依赖于一个或者多个文件）。\n• `command`: 规则的命令行。规则要执行的动作（任意的 shell 命令或者在 shell 下执行的程序）。<span style=\"color:red\">命令需要以 tab 键开头</span>"
    },
    {
      "id": "intro-15",
      "sectionId": "intro",
      "title": "规则",
      "kind": "code",
      "lang": "bash",
      "code": "$ make [TARGET ...]"
    },
    {
      "id": "intro-16",
      "sectionId": "intro",
      "title": "规则",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-17",
      "sectionId": "intro",
      "title": "规则",
      "kind": "code",
      "lang": "bash",
      "code": "$ make        # 没有参数首先运行 TARGET\n$ make help   # 显示可用目标\n$ make dist   # 从当前目录制作一个发布存档\n$ make check  # 无需安装的单元测试"
    },
    {
      "id": "intro-18",
      "sectionId": "intro",
      "title": "清空目标文件",
      "kind": "code",
      "lang": "makefile",
      "code": ".PHONY: clean\nclean:\n  rm *.o temp"
    },
    {
      "id": "intro-19",
      "sectionId": "intro",
      "title": "清空目标文件",
      "kind": "text",
      "body": "`.PHONY` 内置命令将排除 clean 文件，不会因为当前目录中因为有 clean 文件而不会不执行 clean 伪目标"
    },
    {
      "id": "intro-20",
      "sectionId": "intro",
      "title": "清空目标文件",
      "kind": "text",
      "body": "<span style=\"color:red\">clean 从来都是放在文件的最后</span>"
    },
    {
      "id": "intro-21",
      "sectionId": "intro",
      "title": "注释",
      "kind": "text",
      "body": "makefile 文件的注释与 bash 脚本一致"
    },
    {
      "id": "intro-22",
      "sectionId": "intro",
      "title": "注释",
      "kind": "code",
      "lang": "makefile",
      "code": "# 这是一个注释\nmain.o : main.c\n\tcc -c main.c"
    },
    {
      "id": "intro-23",
      "sectionId": "intro",
      "title": "换行 `\\`",
      "kind": "code",
      "lang": "makefile",
      "code": "# 这是一个注释\nmain.o : main.c\n\tcc -c \\\n\tmain.c"
    },
    {
      "id": "intro-24",
      "sectionId": "intro",
      "title": "引用其它的 Makefile",
      "kind": "text",
      "body": "`include` 关键字可以把别的 Makefile 包含进来。这样使用 make 运行的时候就会"
    },
    {
      "id": "intro-25",
      "sectionId": "intro",
      "title": "引用其它的 Makefile",
      "kind": "code",
      "lang": "makefile",
      "code": "# makefile\ninclude foo.make"
    },
    {
      "id": "intro-26",
      "sectionId": "intro",
      "title": "引用其它的 Makefile",
      "kind": "text",
      "body": "如果你想让 make 不理那些无法读取的文件，并且继续执行。"
    },
    {
      "id": "intro-27",
      "sectionId": "intro",
      "title": "引用其它的 Makefile",
      "kind": "code",
      "lang": "makefile",
      "code": "-include <filename>"
    },
    {
      "id": "intro-28",
      "sectionId": "intro",
      "title": "引用其它的 Makefile",
      "kind": "text",
      "body": "变量\n---"
    },
    {
      "id": "intro-29",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "#### 在执行时扩展，允许递归扩展"
    },
    {
      "id": "intro-30",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "code",
      "lang": "makefile",
      "code": "VARIABLE = value"
    },
    {
      "id": "intro-31",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "#### 在声明时扩展"
    },
    {
      "id": "intro-32",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "可以防止递归，并且只能引用之前声明过的变量"
    },
    {
      "id": "intro-33",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "code",
      "lang": "makefile",
      "code": "VARIABLE := value"
    },
    {
      "id": "intro-34",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "#### 只有在该变量为空时才设置值"
    },
    {
      "id": "intro-35",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "code",
      "lang": "makefile",
      "code": "VARIABLE ?= value"
    },
    {
      "id": "intro-36",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "#### 将值追加到变量的尾端"
    },
    {
      "id": "intro-37",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "code",
      "lang": "makefile",
      "code": "VARIABLE += value"
    },
    {
      "id": "intro-38",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "#### override"
    },
    {
      "id": "intro-39",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "text",
      "body": "如果变量前不指定 `override`，那么命令行中指定的变量可以对 Makefile 中的变量重新定义。"
    },
    {
      "id": "intro-40",
      "sectionId": "intro",
      "title": "赋值符",
      "kind": "code",
      "lang": "makefile",
      "code": "# 不会重新定义\noverride VARIABLE = value\noverride VARIABLE := value\noverride VARIABLE ?= value\noverride VARIABLE += value\noverride define\n  #...\nendef"
    },
    {
      "id": "intro-41",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "需要使用 `$()` 或者 `${}` 对变量进行引用"
    },
    {
      "id": "intro-42",
      "sectionId": "intro",
      "title": "变量",
      "kind": "code",
      "lang": "makefile",
      "code": "file = main.c\n\nrun:\n\tclang -o hello ${file}"
    },
    {
      "id": "intro-43",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "#### 避免递归变量"
    },
    {
      "id": "intro-44",
      "sectionId": "intro",
      "title": "变量",
      "kind": "code",
      "lang": "makefile",
      "code": "# 这样会使变量陷入无穷递归\nA = $(B)\nB = $(A)"
    },
    {
      "id": "intro-45",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-46",
      "sectionId": "intro",
      "title": "变量",
      "kind": "code",
      "lang": "makefile",
      "code": "x := foo\ny := $(x) bar\nx := later\n\n# 等价于\n# x = later\n# y = foo bar"
    },
    {
      "id": "intro-47",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "#### Shell 变量"
    },
    {
      "id": "intro-48",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "如果要使用 Shell 变量，需要在之前加上 `$`"
    },
    {
      "id": "intro-49",
      "sectionId": "intro",
      "title": "变量",
      "kind": "code",
      "lang": "makefile",
      "code": "run:\n\techo $$HOME"
    },
    {
      "id": "intro-50",
      "sectionId": "intro",
      "title": "变量",
      "kind": "text",
      "body": "#### 定义多行变量"
    },
    {
      "id": "intro-51",
      "sectionId": "intro",
      "title": "变量",
      "kind": "code",
      "lang": "makefile",
      "code": "define foo\necho foo\necho bar\nendef\n\nrun:\n\t${foo}"
    },
    {
      "id": "intro-52",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$@`"
    },
    {
      "id": "intro-53",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$@`:指代当前目标，即 Make 命令当前构建的那个目标"
    },
    {
      "id": "intro-54",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "foo:\n\ttouch $@"
    },
    {
      "id": "intro-55",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-56",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "bash",
      "code": "$ make foo\n# $@ 就是指的这里的 foo"
    },
    {
      "id": "intro-57",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$<`"
    },
    {
      "id": "intro-58",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$<` 指代第一个前置条件。比如，规则为 t: p1 p2，那么 `$<` 就指代 p1"
    },
    {
      "id": "intro-59",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "a.md: b.md c.md\n  cp $< $@"
    },
    {
      "id": "intro-60",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-61",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "使用 `make a.md`,相当于以下写法"
    },
    {
      "id": "intro-62",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "a.md: b.md c.md\n    cp b.md a.md"
    },
    {
      "id": "intro-63",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$^`"
    },
    {
      "id": "intro-64",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$^` 指代所有的前置条件,去除重复项"
    },
    {
      "id": "intro-65",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "a.md: b.md c.md\n  echo $^"
    },
    {
      "id": "intro-66",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$+`"
    },
    {
      "id": "intro-67",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$^` 指代所有的前置条件，不会去除重复项"
    },
    {
      "id": "intro-68",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "a.md: b.md c.md c.md\n\techo $+"
    },
    {
      "id": "intro-69",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$?`"
    },
    {
      "id": "intro-70",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$?` 指代更新的依赖，只有最近更新过的依赖才会引用"
    },
    {
      "id": "intro-71",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "a.md: b.md c.md c.md\n\tcat $? > a.md"
    },
    {
      "id": "intro-72",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$*`"
    },
    {
      "id": "intro-73",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$*` 指代匹配符匹配的部分"
    },
    {
      "id": "intro-74",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "makefile",
      "code": "main.o: main.c\n\tclang -o $* $*.c"
    },
    {
      "id": "intro-75",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-76",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "code",
      "lang": "bash",
      "code": "$ make main\n# 此时 cc  main.c -o main"
    },
    {
      "id": "intro-77",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "#### `$%`"
    },
    {
      "id": "intro-78",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "`$%`: 仅当目标是函数库文件中，表示规则中的目标成员名"
    },
    {
      "id": "intro-79",
      "sectionId": "intro",
      "title": "自动变量",
      "kind": "text",
      "body": "• windows 中是 `.lib` 文件\n• unix 中是 `.a` 文件"
    },
    {
      "id": "intro-80",
      "sectionId": "intro",
      "title": "内置命名变量的参数",
      "kind": "text",
      "body": "这些变量都是相关下面的命令的参数。如果没有指明其默认值，那么其默认值都是空。"
    },
    {
      "id": "intro-81",
      "sectionId": "intro",
      "title": "内置命名变量的参数",
      "kind": "text",
      "body": ":-       | :-\n:-       | :-\n`ARFLAGS`  | 函数库打包程序AR命令的参数。默认值是 `rv`\n`ASFLAGS`  | 汇编语言编译器参数。（当明显地调用 `.s` 或 `.S` 文件时）\n`CFLAGS`   | C 语言编译器参数。\n`CXXFLAGS` | C++ 语言编译器参数。\n`COFLAGS`  | RCS 命令参数。\n`CPPFLAGS` | C 预处理器参数。（ `C` 和 `Fortran` 编译器也会用到）。\n`FFLAGS`   | Fortran 语言编译器参数。\n`GFLAGS`   | SCCS `get` 程序参数。\n`LDFLAGS`  | 链接器参数。（如：`ld` ）\n`PFLAGS`   | Pascal 语言编译器参数。\n`LFLAGS`   | Lex 文法分析器参数。\n`RFLAGS`   | Ratfor 程序的 Fortran 编译器参数。\n`YFLAGS`   | Yacc 文法分析器参数。\n<!--rehype:className=left-align-->"
    },
    {
      "id": "intro-82",
      "sectionId": "intro",
      "title": "内置已命名的变量",
      "kind": "text",
      "body": ":-         | :-\n:-         | :-\n`AR`       | 函数库打包程序。默认命令是 `ar`\n`AS`       | 汇编语言编译程序。默认命令是 `as`\n`CC`       | C 语言编译程序。默认命令是 `cc`\n`CXX`      | C++ 语言编译程序。默认命令是 `g++`\n`CO`       | 从 RCS 文件中扩展文件程序。默认命令是 `co`\n`CPP`      | C 程序的预处理器（输出是标准输出设备）。默认命令是 `$(CC) –E`\n`FC`       | Fortran 和 Ratfor 的编译器和预处理程序。默认命令是 `f77`\n`GET`      | 从 SCCS 文件中扩展文件的程序。默认命令是 `get`\n`LEX`      | Lex 方法分析器程序（针对于 C 或 Ratfor）。默认命令是 `lex`\n`PC`       | Pascal 语言编译程序。默认命令是 `pc`\n`YACC`     | Yacc 文法分析器（针对于 C 程序）。默认命令是 `yacc`\n`YACCR`    | Yacc 文法分析器（针对于 Ratfor 程序）。默认命令是 `yacc –r`\n`MAKEINFO` | 转换 Texinfo 源文件（.texi）到 Info 文件程序。默认命令是 `makeinfo`\n`TEX`      | 从 TeX 源文件创建TeX DVI文件的程序。默认命令是 `tex`\n`TEXI2DVI` | 从 Texinfo 源文件创建 TeX DVI 文件的程序。默认命令是 `texi2dvi`\n`WEAVE`    | 转换 Web 到 TeX 的程序。默认命令是 `weave`\n`CWEAVE`   | 转换 C Web 到 TeX 的程序。默认命令是 `cweave`\n`TANGLE`   | 转换 Web 到 Pascal 语言的程序。默认命令是 `tangle`\n`CTANGLE`  | 转换 C Web 到 C。默认命令是 `ctangle`\n`RM`       | 删除文件命令。默认命令是 `rm –f`\n<!--rehype:className=left-align-->"
    },
    {
      "id": "intro-83",
      "sectionId": "intro",
      "title": "内置已命名的变量",
      "kind": "text",
      "body": "#### 内置的变量"
    },
    {
      "id": "intro-84",
      "sectionId": "intro",
      "title": "内置已命名的变量",
      "kind": "code",
      "lang": "makefile",
      "code": "run:\n\t${CC} -o main main.c"
    },
    {
      "id": "intro-85",
      "sectionId": "intro",
      "title": "内置已命名的变量",
      "kind": "text",
      "body": "书写规则\n---"
    },
    {
      "id": "intro-86",
      "sectionId": "intro",
      "title": "文件搜寻（`vpath`）",
      "kind": "text",
      "body": "如果没有指定 vpath 变量，make 只会在当前的目录中去寻找依赖文件和目标文件。否则，如果当前目录没有，就会到指定的目录中去寻找"
    },
    {
      "id": "intro-87",
      "sectionId": "intro",
      "title": "文件搜寻（`vpath`）",
      "kind": "text",
      "body": ":-                              | :-\n:-                              | :-\n`vpath <pattern> <directories>` | 为符合模式 \\<pattern> 的文件指定搜索目录 \\<directories>\n`vpath <pattern>`               | 清除符合模式 \\<pattern> 的文件的搜索目录。\n`vpath`                         | 清除所有已被设置好了的文件搜索目录"
    },
    {
      "id": "intro-88",
      "sectionId": "intro",
      "title": "文件搜寻（`vpath`）",
      "kind": "text",
      "body": "#### `%`"
    },
    {
      "id": "intro-89",
      "sectionId": "intro",
      "title": "文件搜寻（`vpath`）",
      "kind": "text",
      "body": "• vpath 使用方法中的 \\<pattern> 需要包含 `%` 字符。`%` 的意思是匹配零或若干字符（类似于**通配符**）,并且引用规则是需要使用**自动变量**"
    },
    {
      "id": "intro-90",
      "sectionId": "intro",
      "title": "文件搜寻（`vpath`）",
      "kind": "code",
      "lang": "makefile",
      "code": "vpath %.c dist\nTARGET = hello\nOBJ = bar.o foo.o\n\n$(TARGET): $(OBJ)\n\t$(CC) -o $@ $^\n\n%.o: $.c\n\t$(CC) -o $< -o #@"
    },
    {
      "id": "intro-91",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "#### `*`"
    },
    {
      "id": "intro-92",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "`*`：与 linux 系统下的一样"
    },
    {
      "id": "intro-93",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "code",
      "lang": "makefile",
      "code": "# 清除所有 .o 结尾的文件\nclean:\n    rm -f *.o"
    },
    {
      "id": "intro-94",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "#### `~`"
    },
    {
      "id": "intro-95",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "`~`：在 linux 或 mac 下表示用户目录，win 下表示 `HOME` 环境变量"
    },
    {
      "id": "intro-96",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "code",
      "lang": "makefile",
      "code": "run:\n    ls ~"
    },
    {
      "id": "intro-97",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "#### `?`"
    },
    {
      "id": "intro-98",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "text",
      "body": "`?`: 与在 linux 等类似，可以匹配单个字符"
    },
    {
      "id": "intro-99",
      "sectionId": "intro",
      "title": "通配符",
      "kind": "code",
      "lang": "makefile",
      "code": "run:\n\tls -ll packag?.json"
    },
    {
      "id": "intro-100",
      "sectionId": "intro",
      "title": "静态模式",
      "kind": "code",
      "lang": "makefile",
      "code": "TARGET: PREREQUISITES :PREREQUISITES\n  COMMAMD\n#..."
    },
    {
      "id": "intro-101",
      "sectionId": "intro",
      "title": "静态模式",
      "kind": "text",
      "body": "• `target` 定义了一系列的目标文件\n• 第一个 `prerequisites` 是指明了 target 的模式，也就是的目标集模式。\n• 第二个 `prerequisites` 是目标的依赖模式，它对第一个 `prerequisites` 形成的模式再进行一次依赖目标的定义"
    },
    {
      "id": "intro-102",
      "sectionId": "intro",
      "title": "静态模式",
      "kind": "code",
      "lang": "makefile",
      "code": "objects = foo.o main.o\n\n$(objects): %.o: %.c\n\t$(CC) -c $(CFLAGS) $< -o $@"
    },
    {
      "id": "intro-103",
      "sectionId": "intro",
      "title": "静态模式",
      "kind": "text",
      "body": "---\n相当于:"
    },
    {
      "id": "intro-104",
      "sectionId": "intro",
      "title": "静态模式",
      "kind": "code",
      "lang": "makefile",
      "code": "foo.o : foo.c\n    $(CC) -c $(CFLAGS) foo.c -o foo.o\nmain.o : main.c\n    $(CC) -c $(CFLAGS) main.c -o main.o"
    },
    {
      "id": "intro-105",
      "sectionId": "intro",
      "title": "伪目标",
      "kind": "text",
      "body": "• **伪目标**并不是一个文件，只是一个标签。只有通过显式地指明这个**目标**才能让其生效\n• 使用 `.PHONY` 来显式地指明目标是 `伪目标`"
    },
    {
      "id": "intro-106",
      "sectionId": "intro",
      "title": "伪目标",
      "kind": "code",
      "lang": "makefile",
      "code": ".PHONY : clean\nclean :\n    rm *.o temp"
    },
    {
      "id": "intro-107",
      "sectionId": "intro",
      "title": "约定俗成的规则",
      "kind": "text",
      "body": ":-  | :-\n:-  | :-\n`all`        | 该伪目标是所有目标的目标，一般用于编译所有的目标\n`clean`      | 该伪目标用于删除所有由 make 创建的文件\n`install`    | 该伪目标用于安装已编译好的程序，即将目标执行文件拷贝到指定目标中\n`print`      | 该伪目标用于例出改变过的源文件\n`tar`        | 该伪目标用于把源程序打包备份为 tar 文件\n`dist`       | 该伪目标用于创建压缩文件，一般将 tar 文件压成 Z 或 gz 文件\n`TAGS`       | 该伪目标用于更新所有的目标，以备完整地重编译使用\n`check/test` | 这两个伪目标用于测试 makefile 的流程"
    },
    {
      "id": "intro-108",
      "sectionId": "intro",
      "title": "约定俗成的规则",
      "kind": "text",
      "body": "命令\n---"
    },
    {
      "id": "intro-109",
      "sectionId": "intro",
      "title": "回声（`@`）",
      "kind": "text",
      "body": "正常情况下，make会打印每条命令，然后再执行，这就叫做回声（echoing）"
    },
    {
      "id": "intro-110",
      "sectionId": "intro",
      "title": "回声（`@`）",
      "kind": "code",
      "lang": "makefile",
      "code": "all:\n  # 会有命令执行显示\n\techo Hello, world"
    },
    {
      "id": "intro-111",
      "sectionId": "intro",
      "title": "回声（`@`）",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-112",
      "sectionId": "intro",
      "title": "回声（`@`）",
      "kind": "code",
      "lang": "makefile",
      "code": "all:\n  # 不会有命令执行的显示\n\t@echo Hello, world"
    },
    {
      "id": "intro-113",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "text",
      "body": "#### 显示命令"
    },
    {
      "id": "intro-114",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "text",
      "body": "如果我们只希望显示命令，而不希望执行命令，可以使用 `-n` 或者 `--just-print`"
    },
    {
      "id": "intro-115",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "code",
      "lang": "bash",
      "code": "$ make all --just-print \n$ make all -n"
    },
    {
      "id": "intro-116",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "text",
      "body": "#### 禁止命令"
    },
    {
      "id": "intro-117",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "text",
      "body": "`-s` 或 `--silent` 或 `--quiet` 与 `@` 一样，用于禁止回声"
    },
    {
      "id": "intro-118",
      "sectionId": "intro",
      "title": "显示命令、禁止命令",
      "kind": "code",
      "lang": "bash",
      "code": "$ make all -s"
    },
    {
      "id": "intro-119",
      "sectionId": "intro",
      "title": "执行命令",
      "kind": "text",
      "body": "使用 tab 及换行"
    },
    {
      "id": "intro-120",
      "sectionId": "intro",
      "title": "执行命令",
      "kind": "code",
      "lang": "makefile",
      "code": "exec:\n    cd /home/hchen\n    pwd"
    },
    {
      "id": "intro-121",
      "sectionId": "intro",
      "title": "执行命令",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-122",
      "sectionId": "intro",
      "title": "执行命令",
      "kind": "text",
      "body": "使用 `;`"
    },
    {
      "id": "intro-123",
      "sectionId": "intro",
      "title": "执行命令",
      "kind": "code",
      "lang": "makefile",
      "code": "exec:\n    cd /home/hchen; pwd"
    },
    {
      "id": "intro-124",
      "sectionId": "intro",
      "title": "make 参数",
      "kind": "text",
      "body": ":-  | :-\n:-  | :-\n`-b`,`-m`     |  忽略和其它版本make的兼容性\n`-B`          |  (`--always-make`) 认为所有的目标都需要重编译\n`-C <dir>`    |  (`--directory=<dir>`) 指定读取makefile的目录\n`-e`          |  (`--environment-overrides`) 指明环境变量的值覆盖 makefile 中定义的变量的值\n`-f=<file>`   | 指定需要执行的makefile\n`-h`          | 显示帮助信息\n`-i`          | (`--ignore-errors`)在执行时忽略所有的错误\n`-I <dir>`    | (`--include-dir=<dir>`) 指定一个被包含 makefile 的搜索目标\n`-j [<nums>]` | (`--jobs[=<jobsnum>]`)指同时运行命令的个数\n`-k`          | (`--keep-going`)出错也不停止运行\n`-l <load>`   | `--load-average[=<load>]`、`-max-load[=<load>]` 指定make运行命令的负载\n`-n`          | (`--just-print`, `--dry-run`, `--recon`) 仅输出执行过程中的命令序列，但不执行\n`-o <file>`   | (`--old-file=<file>`, `--assume-old=<file>`)不重新生成的指定的 \\<file>，即使目标的依赖文件新于它\n`-p`          | (`--print-data-base`) 输出 makefile 中的所有数据，包括所有的规则和变量\n`-q`          | (`--question`) 不运行命令，也不输出。仅仅是检查所指定的目标是否需要更新\n`-r`          | (`--no-builtin-rules`) 禁止 make 使用任何隐含规则\n`-R`          | (`--no-builtin-variabes`) 禁止 make 使用任何作用于变量上的隐含规则\n`-s`          | (`--silent`,`--quiet`) 在命令运行时不输出命令的输出\n`-S`          | (`--no-keep-going`, `--stop`) 取消“-k”选项的作用\n`-t`          | `--touch` 相当于 UNIX 的 touch 命令，只是把目标的修改日期变成最新的，也就是阻止生成目标的命令运行\n`-v`          | (`--version`) 输出 make 程序的版本、版权等关于 make 的信息\n`-w`          | (`--print-directory`) 输出运行 makefile 之前和之后的信息。`--no-print-directory` 可以禁止 `-w`\n`-W <file>`   | `--what-if=<file>`, `--new-file=<file>`, `--assume-file=<file>` 假定目标 \\<file> 需要更新，如果和 `-n` 选项使用，那么这个参数会输出该目标更新时的运行动作\n`--warn-undefined-variables` | 只要 make 发现有未定义的变量，那么就输出警告信息\n<!--rehype:className=left-align-->"
    },
    {
      "id": "intro-125",
      "sectionId": "intro",
      "title": "`-debug[=<options>]`",
      "kind": "text",
      "body": "输出 make 的调试信息。下面是 \\<options>的取值："
    },
    {
      "id": "intro-126",
      "sectionId": "intro",
      "title": "`-debug[=<options>]`",
      "kind": "text",
      "body": "options  | :-\n:-       | :-\n`a` | `all`，输出所有的调试信息\n`b` | `basic`，只输出简单的调试信息。即输出不需要重编译的目标\n`v` | `verbose`，包括 b 的信息。输出包括 makefile 被解析的信息，不需要被重编译的依赖文件等\n`i` | `implicit`，输出所有的隐含规则\n`j` | `jobs`，输出执行规则中命令的详细信息，如命令的 PID、返回码等\n`m` | `makefile`，输出 make 读取 makefile，更新 makefile，执行 makefile 的信息\n<!--rehype:className=left-align-->"
    },
    {
      "id": "intro-127",
      "sectionId": "intro",
      "title": "make 的退出码",
      "kind": "text",
      "body": ":-  | :-\n:-  | :-\n`0` | 成功执行\n`1` | 运行时出现错误\n`2` | 使用了 `-q` 选项，并且一些目标不需要更新"
    },
    {
      "id": "intro-128",
      "sectionId": "intro",
      "title": "make 的退出码",
      "kind": "text",
      "body": "判断和循环\n---"
    },
    {
      "id": "intro-129",
      "sectionId": "intro",
      "title": "单分支条件判断",
      "kind": "text",
      "body": "• `ifeq` 的意思表示条件语句的开始，表达式包含两个参数，如果相同则为真。\n• `ifneq` 的意思表示条件语句的开始，表达式包含两个参数，如果不同则为真。\n• `else` 表示条件表达式为假的情况。\n• `endif` 表示一个条件语句的结束，任何一个条件表达式都应该以 `endif` 结束。"
    },
    {
      "id": "intro-130",
      "sectionId": "intro",
      "title": "单分支条件判断",
      "kind": "code",
      "lang": "makefile",
      "code": "run:\nifeq ($(CC), cc)\n\t$(CC) -o foo foo.c\nelse\n\t$(CC) -o bar bar.c\nendif"
    },
    {
      "id": "intro-131",
      "sectionId": "intro",
      "title": "多分支条件判断",
      "kind": "text",
      "body": "#### ifneq 语法"
    },
    {
      "id": "intro-132",
      "sectionId": "intro",
      "title": "多分支条件判断",
      "kind": "code",
      "lang": "makefile",
      "code": "ifneq (<arg1>, <arg2>)\nifneq '<arg1>' '<arg2>'\nifneq \"<arg1>\" \"<arg2>\"\nifneq \"<arg1>\" '<arg2>'\nifneq '<arg1>' \"<arg2>\""
    },
    {
      "id": "intro-133",
      "sectionId": "intro",
      "title": "多分支条件判断",
      "kind": "text",
      "body": "#### ifeq 语法"
    },
    {
      "id": "intro-134",
      "sectionId": "intro",
      "title": "多分支条件判断",
      "kind": "code",
      "lang": "makefile",
      "code": "ifeq (<arg1>, <arg2>)\nifeq '<arg1>' '<arg2>'\nifeq \"<arg1>\" \"<arg2>\"\nifeq \"<arg1>\" '<arg2>'\nifeq '<arg1>' \"<arg2>\""
    },
    {
      "id": "intro-135",
      "sectionId": "intro",
      "title": "ifdef",
      "kind": "code",
      "lang": "makefile",
      "code": "ifdef <variable-name>"
    },
    {
      "id": "intro-136",
      "sectionId": "intro",
      "title": "ifdef",
      "kind": "text",
      "body": "`ifdef` 会根据 variable-name 判断，如果为空则为真"
    },
    {
      "id": "intro-137",
      "sectionId": "intro",
      "title": "ifdef",
      "kind": "code",
      "lang": "makefile",
      "code": "bar =\nfoo = $(bar)\nifdef foo\n    frobozz = yes\nelse\n    frobozz = no\nendif\n\nrun:\n\techo $(frobozz)"
    },
    {
      "id": "intro-138",
      "sectionId": "intro",
      "title": "ifdef",
      "kind": "text",
      "body": "`ifndef` 则和 `ifdef` 是相反的意思"
    },
    {
      "id": "intro-139",
      "sectionId": "intro",
      "title": "for 循环",
      "kind": "code",
      "lang": "makefile",
      "code": "LIST = one two three\nall:\n\tfor i in $(LIST); do \\\n\t    echo $$i; \\\n\tdone"
    },
    {
      "id": "intro-140",
      "sectionId": "intro",
      "title": "for 循环",
      "kind": "text",
      "body": "函数\n---"
    },
    {
      "id": "intro-141",
      "sectionId": "intro",
      "title": "字符串处理函数 - 替换函数(`subst`)",
      "kind": "text",
      "body": "把字串 \\<text> 中的 \\<from> 字符串替换成 \\<to> 。"
    },
    {
      "id": "intro-142",
      "sectionId": "intro",
      "title": "字符串处理函数 - 替换函数(`subst`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(subst <from>,<to>,<text>)"
    },
    {
      "id": "intro-143",
      "sectionId": "intro",
      "title": "字符串处理函数 - 替换函数(`subst`)",
      "kind": "text",
      "body": "示例"
    },
    {
      "id": "intro-144",
      "sectionId": "intro",
      "title": "字符串处理函数 - 替换函数(`subst`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(subst ee,EE,feet on the street)"
    },
    {
      "id": "intro-145",
      "sectionId": "intro",
      "title": "字符串处理函数 - 模式字符串替换函数(`patsubst`)",
      "kind": "text",
      "body": "查找 \\<text> 中的单词（**单词以空格、Tab或回车换行分隔**）是否符合模式 \\<pattern>。匹配，则以 \\<replacement> 替换。"
    },
    {
      "id": "intro-146",
      "sectionId": "intro",
      "title": "字符串处理函数 - 模式字符串替换函数(`patsubst`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(patsubst <pattern>,<replacement>,<text>)"
    },
    {
      "id": "intro-147",
      "sectionId": "intro",
      "title": "字符串处理函数 - 模式字符串替换函数(`patsubst`)",
      "kind": "text",
      "body": "• 示例"
    },
    {
      "id": "intro-148",
      "sectionId": "intro",
      "title": "字符串处理函数 - 模式字符串替换函数(`patsubst`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(patsubst %.c,%.o,x.c.c bar.c)"
    },
    {
      "id": "intro-149",
      "sectionId": "intro",
      "title": "字符串处理函数 - 模式字符串替换函数(`patsubst`)",
      "kind": "text",
      "body": "把字串 x.c.c bar.c 符合模式 %.c 的单词替换成 %.o ，返回结果是 x.c.o bar.o"
    },
    {
      "id": "intro-150",
      "sectionId": "intro",
      "title": "字符串处理函数 - 去空格函数(`strip`)",
      "kind": "text",
      "body": "去掉 <string> 字串中开头和结尾的空字符。"
    },
    {
      "id": "intro-151",
      "sectionId": "intro",
      "title": "字符串处理函数 - 去空格函数(`strip`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(strip <string>)"
    },
    {
      "id": "intro-152",
      "sectionId": "intro",
      "title": "字符串处理函数 - 去空格函数(`strip`)",
      "kind": "text",
      "body": "示例"
    },
    {
      "id": "intro-153",
      "sectionId": "intro",
      "title": "字符串处理函数 - 去空格函数(`strip`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(strip a b c )"
    },
    {
      "id": "intro-154",
      "sectionId": "intro",
      "title": "字符串处理函数 - 去空格函数(`strip`)",
      "kind": "text",
      "body": "把字串 `a b c` 去掉开头和结尾的空格，结果是 a b c。"
    },
    {
      "id": "intro-155",
      "sectionId": "intro",
      "title": "字符串处理函数 - 查找字符串函数(`findstring`)",
      "kind": "text",
      "body": "在字串 \\<in> 中查找 \\<find> 字串。"
    },
    {
      "id": "intro-156",
      "sectionId": "intro",
      "title": "字符串处理函数 - 查找字符串函数(`findstring`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(findstring <find>,<in>)"
    },
    {
      "id": "intro-157",
      "sectionId": "intro",
      "title": "字符串处理函数 - 查找字符串函数(`findstring`)",
      "kind": "text",
      "body": "示例："
    },
    {
      "id": "intro-158",
      "sectionId": "intro",
      "title": "字符串处理函数 - 查找字符串函数(`findstring`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(findstring a,a b c)\n$(findstring a,b c)"
    },
    {
      "id": "intro-159",
      "sectionId": "intro",
      "title": "字符串处理函数 - 查找字符串函数(`findstring`)",
      "kind": "text",
      "body": "第一个函数返回 a 字符串，第二个返回空字符串"
    },
    {
      "id": "intro-160",
      "sectionId": "intro",
      "title": "字符串处理函数 - 过滤函数(`filter`)",
      "kind": "text",
      "body": "以 \\<pattern> 模式过滤 \\<text> 字符串中的单词，保留符合模式 \\<pattern> 的单词。可以有多个模式。"
    },
    {
      "id": "intro-161",
      "sectionId": "intro",
      "title": "字符串处理函数 - 过滤函数(`filter`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(filter <pattern...>,<text>)"
    },
    {
      "id": "intro-162",
      "sectionId": "intro",
      "title": "字符串处理函数 - 过滤函数(`filter`)",
      "kind": "text",
      "body": "示例"
    },
    {
      "id": "intro-163",
      "sectionId": "intro",
      "title": "字符串处理函数 - 过滤函数(`filter`)",
      "kind": "code",
      "lang": "makefile",
      "code": "sources := foo.c bar.c baz.s ugh.h\nfoo: $(sources)\n    cc $(filter %.c %.s,$(sources)) -o foo\n$(filter %.c %.s,$(sources)) \n# 返回的值是 foo.c bar.c baz.s"
    },
    {
      "id": "intro-164",
      "sectionId": "intro",
      "title": "字符串处理函数 - 反过滤函数(`filter-out`)",
      "kind": "text",
      "body": "以 \\<pattern> 模式过滤 \\<text> 字符串中的单词，去除符合模式 \\<pattern> 的单词。可以有多个模式。"
    },
    {
      "id": "intro-165",
      "sectionId": "intro",
      "title": "字符串处理函数 - 反过滤函数(`filter-out`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(filter-out <pattern...>,<text>)"
    },
    {
      "id": "intro-166",
      "sectionId": "intro",
      "title": "字符串处理函数 - 反过滤函数(`filter-out`)",
      "kind": "text",
      "body": "示例："
    },
    {
      "id": "intro-167",
      "sectionId": "intro",
      "title": "字符串处理函数 - 反过滤函数(`filter-out`)",
      "kind": "code",
      "lang": "makefile",
      "code": "objects=main1.o foo.o main2.o bar.o\nmains=main1.o main2.o\n$(filter-out $(mains),$(objects)) \n# 返回值是 foo.o bar.o 。"
    },
    {
      "id": "intro-168",
      "sectionId": "intro",
      "title": "字符串处理函数 - 排序函数(`sort`)",
      "kind": "text",
      "body": "给字符串 \\<list> 中的单词排序（升序）。"
    },
    {
      "id": "intro-169",
      "sectionId": "intro",
      "title": "字符串处理函数 - 排序函数(`sort`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(sort <list>)"
    },
    {
      "id": "intro-170",
      "sectionId": "intro",
      "title": "字符串处理函数 - 排序函数(`sort`)",
      "kind": "text",
      "body": "• 示例：`$(sort foo bar lose)` 返回 `bar foo lose`\n• 注意：sort 函数会去掉 `<list>` 中相同的单词"
    },
    {
      "id": "intro-171",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词函数（`word`)",
      "kind": "text",
      "body": "取字符串 \\<text> 中第 \\<n> 个单词。（从一开始）"
    },
    {
      "id": "intro-172",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词函数（`word`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(word <n>,<text>)"
    },
    {
      "id": "intro-173",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词函数（`word`)",
      "kind": "text",
      "body": "示例：`$(word 2, foo bar baz)` 返回值是 `bar`"
    },
    {
      "id": "intro-174",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词串函数(`wordlist`)",
      "kind": "text",
      "body": "• 从字符串 \\<text> 中取从 \\<s> 开始到 \\<e> 的单词串。\\<s> 和 \\<e> 是一个数字。"
    },
    {
      "id": "intro-175",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词串函数(`wordlist`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(wordlist <ss>,<e>,<text>)"
    },
    {
      "id": "intro-176",
      "sectionId": "intro",
      "title": "字符串处理函数 - 取单词串函数(`wordlist`)",
      "kind": "text",
      "body": "示例：`$(wordlist 2, 3, foo bar baz)` 返回值是 bar baz。"
    },
    {
      "id": "intro-177",
      "sectionId": "intro",
      "title": "字符串处理函数 - 单词个数统计函数(`words`)",
      "kind": "text",
      "body": "• 统计 \\<text> 中字符串中的单词个数。"
    },
    {
      "id": "intro-178",
      "sectionId": "intro",
      "title": "字符串处理函数 - 单词个数统计函数(`words`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(words <text>)"
    },
    {
      "id": "intro-179",
      "sectionId": "intro",
      "title": "字符串处理函数 - 单词个数统计函数(`words`)",
      "kind": "text",
      "body": "• 示例：`$(words, foo bar baz)` 返回值是 3。"
    },
    {
      "id": "intro-180",
      "sectionId": "intro",
      "title": "字符串处理函数 - 首单词函数(`firstword`)",
      "kind": "text",
      "body": "• 取字符串 \\<text> 中的第一个单词。"
    },
    {
      "id": "intro-181",
      "sectionId": "intro",
      "title": "字符串处理函数 - 首单词函数(`firstword`)",
      "kind": "code",
      "lang": "makefile",
      "code": "$(firstword <text>)"
    },
    {
      "id": "intro-182",
      "sectionId": "intro",
      "title": "字符串处理函数 - 首单词函数(`firstword`)",
      "kind": "text",
      "body": "• 示例：`$(firstword foo bar)` 返回值是 `foo`"
    },
    {
      "id": "intro-183",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 取目录函数(`dir`)"
    },
    {
      "id": "intro-184",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "从文件名序列 \\<names> 中取出目录部分。目录部分是指最后一个反斜杠（`/`）之前的部分。如果没有反斜杠，那么返回 `./`。"
    },
    {
      "id": "intro-185",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(dir <names...>)"
    },
    {
      "id": "intro-186",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-187",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(dir src/foo.c hacks) \n#返回值是 src/ ./"
    },
    {
      "id": "intro-188",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 取文件函数(`notdir`)"
    },
    {
      "id": "intro-189",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "从文件名序列 \\<names> 中取出非目录部分。非目录部分是指最後一个反斜杠（`/`）之后的部分。"
    },
    {
      "id": "intro-190",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(notdir <names...>)"
    },
    {
      "id": "intro-191",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-192",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(notdir src/foo.c hacks)\n# 返回值是 foo.c hacks"
    },
    {
      "id": "intro-193",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 取后缀函数（`suffix`)"
    },
    {
      "id": "intro-194",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "从文件名序列 \\<names> 中取出各个文件名的后缀"
    },
    {
      "id": "intro-195",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(suffix <names...>)"
    },
    {
      "id": "intro-196",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-197",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(suffix src/foo.c src-1.0/bar.c hacks)\n# 返回值是 .c .c"
    },
    {
      "id": "intro-198",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 取前缀函数(`basename`)"
    },
    {
      "id": "intro-199",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "从文件名序列 \\<names> 中取出各个文件名的前缀部分。"
    },
    {
      "id": "intro-200",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(basename <names...>)"
    },
    {
      "id": "intro-201",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-202",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(basename src/foo.c src-1.0/bar.c hacks) \n# 返回值是 src/foo src-1.0/bar hacks"
    },
    {
      "id": "intro-203",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 加后缀函数(`addsuffix`)"
    },
    {
      "id": "intro-204",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "把后缀 \\<suffix> 加到 \\<names> 中的每个单词后面"
    },
    {
      "id": "intro-205",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(addsuffix <suffix>,<names...>)"
    },
    {
      "id": "intro-206",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-207",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(addsuffix .c,foo bar)\n# 返回值是 foo.c bar.c"
    },
    {
      "id": "intro-208",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 加前缀函数(`addprefix`)"
    },
    {
      "id": "intro-209",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "把前缀 \\<prefix> 加到 \\<names> 中的每个单词前面。"
    },
    {
      "id": "intro-210",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(addprefix <prefix>,<names...>)"
    },
    {
      "id": "intro-211",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-212",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(addprefix src/,foo bar)\n# 返回值是 src/foo src/bar 。"
    },
    {
      "id": "intro-213",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "#### 连接函数(`join`)"
    },
    {
      "id": "intro-214",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "把 \\<list2> 中的单词对应地加到 \\<list1> 的单词后面。"
    },
    {
      "id": "intro-215",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(join <list1>,<list2>)"
    },
    {
      "id": "intro-216",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-217",
      "sectionId": "intro",
      "title": "文件名操作函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(join aaa bbb , 111 222 333)\n# 返回值是 aaa111 bbb222 333 。"
    },
    {
      "id": "intro-218",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### foreach 函数"
    },
    {
      "id": "intro-219",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(foreach <var>,<list>,<text>)"
    },
    {
      "id": "intro-220",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-221",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "# $(name) 中的单词会被挨个取出，并存到变量 n 中，\n# $(n).o 每次根据 $(n) 计算出一个值，这些值以空格分隔，最后作为 foreach 函数的返回\nnames := a b c d\nfiles := $(foreach n,$(names),$(n).o)\nrun:\n\techo $(files)"
    },
    {
      "id": "intro-222",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### if 函数"
    },
    {
      "id": "intro-223",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "与之前的条件语句——`ifeq` 类似"
    },
    {
      "id": "intro-224",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(if <condition>,<then-part>)\n# 或者\n$(if <condition>,<then-part>,<else-part>)"
    },
    {
      "id": "intro-225",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### call 函数"
    },
    {
      "id": "intro-226",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "call 函数是唯一一个可以用来创建新的参数化的函数。"
    },
    {
      "id": "intro-227",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(call <expression>,<parm1>,<parm2>,...,<parmn>)"
    },
    {
      "id": "intro-228",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "---"
    },
    {
      "id": "intro-229",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "reverse =  $(2) $(1)\n\nfoo = $(call reverse,a,b)\n\nrun:\n\techo $(foo)\n# b a"
    },
    {
      "id": "intro-230",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### shell 函数"
    },
    {
      "id": "intro-231",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "使用操作系统 Shell 的命令"
    },
    {
      "id": "intro-232",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "contents := $(shell cat foo)\nfiles := $(shell echo *.c)"
    },
    {
      "id": "intro-233",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### 控制 make 的函数"
    },
    {
      "id": "intro-234",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(error <text ...>)\n# and\n$(warning <text ...>)"
    },
    {
      "id": "intro-235",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "#### origin 函数"
    },
    {
      "id": "intro-236",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "code",
      "lang": "makefile",
      "code": "$(origin <variable>)"
    },
    {
      "id": "intro-237",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "origin 函数用于告诉这个变量的从何而来"
    },
    {
      "id": "intro-238",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": ":-              | :-\n:-              | :-\n`undefined`     | 如果 \\<variable> 未定义，返回 `undefined`\n`default`       | 如果 \\<variable> 是默认的，如 `CC`\n`environment`   | 如果 \\<variable> 是环境变量，并且当 Makefile 执行时，-e 参数没有被打开\n`file`          | 如果 \\<variable> 这个变量被定义在 Makefile 中。\n`command line`  | 如果 \\<variable> 这个变量是被命令行定义的。\n`override`      | 如果 \\<variable> 是被 override 指示符重新定义的。\n`automatic`     | 如果 \\<variable> 是一个命令运行中的自动化变量\n<!--rehype:className=left-align-->"
    },
    {
      "id": "intro-239",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "另见\n---"
    },
    {
      "id": "intro-240",
      "sectionId": "intro",
      "title": "其它函数",
      "kind": "text",
      "body": "• [make 中文教程](https://seisman.github.io/how-to-write-makefile/overview.html) _(seisman.github.io)_\n• [make 手册](https://www.gnu.org/software/make/manual/make.html#toc-Overview-of-make) _(<www.gnu.org>)_\n• [make 官网](https://www.gnu.org/software/make/) _<www.gnu.org>_"
    }
  ],
  "source": {
    "repo": "https://github.com/jaywcjlove/reference",
    "path": "docs/make.md",
    "ref": "main",
    "url": "https://github.com/jaywcjlove/reference/tree/main/docs/make.md",
    "generatedAt": "2025-12-16T07:36:11.317Z",
    "lang": "zh",
    "mode": "local"
  }
}